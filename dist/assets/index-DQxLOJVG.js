var FI=Object.defineProperty;var BI=(e,t,n)=>t in e?FI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qt=(e,t,n)=>BI(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vy(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const yn={},Xc=[],Qr=()=>{},jI=()=>!1,Sm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),yy=e=>e.startsWith("onUpdate:"),ps=Object.assign,by=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},$I=Object.prototype.hasOwnProperty,cn=(e,t)=>$I.call(e,t),Se=Array.isArray,Qc=e=>nf(e)==="[object Map]",Cm=e=>nf(e)==="[object Set]",nw=e=>nf(e)==="[object Date]",Fe=e=>typeof e=="function",Un=e=>typeof e=="string",_r=e=>typeof e=="symbol",bn=e=>e!==null&&typeof e=="object",V3=e=>(bn(e)||Fe(e))&&Fe(e.then)&&Fe(e.catch),z3=Object.prototype.toString,nf=e=>z3.call(e),VI=e=>nf(e).slice(8,-1),U3=e=>nf(e)==="[object Object]",wy=e=>Un(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gd=vy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),km=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zI=/-(\w)/g,ir=km(e=>e.replace(zI,(t,n)=>n?n.toUpperCase():"")),UI=/\B([A-Z])/g,Ga=km(e=>e.replace(UI,"-$1").toLowerCase()),Am=km(e=>e.charAt(0).toUpperCase()+e.slice(1)),sg=km(e=>e?`on${Am(e)}`:""),Da=(e,t)=>!Object.is(e,t),ig=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},q3=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Tg=e=>{const t=parseFloat(e);return isNaN(t)?e:t},qI=e=>{const t=Un(e)?Number(e):NaN;return isNaN(t)?e:t};let sw;const Pm=()=>sw||(sw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wr(e){if(Se(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Un(s)?KI(s):Wr(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Un(e)||bn(e))return e}const HI=/;(?![^(]*\))/g,WI=/:([^]+)/,GI=/\/\*[^]*?\*\//g;function KI(e){const t={};return e.replace(GI,"").split(HI).forEach(n=>{if(n){const s=n.split(WI);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ve(e){let t="";if(Un(e))t=e;else if(Se(e))for(let n=0;n<e.length;n++){const s=ve(e[n]);s&&(t+=s+" ")}else if(bn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const YI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XI=vy(YI);function H3(e){return!!e||e===""}function QI(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Em(e[s],t[s]);return n}function Em(e,t){if(e===t)return!0;let n=nw(e),s=nw(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=_r(e),s=_r(t),n||s)return e===t;if(n=Se(e),s=Se(t),n||s)return n&&s?QI(e,t):!1;if(n=bn(e),s=bn(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Em(e[o],t[o]))return!1}}return String(e)===String(t)}function JI(e,t){return e.findIndex(n=>Em(n,t))}const W3=e=>!!(e&&e.__v_isRef===!0),lt=e=>Un(e)?e:e==null?"":Se(e)||bn(e)&&(e.toString===z3||!Fe(e.toString))?W3(e)?lt(e.value):JSON.stringify(e,G3,2):String(e),G3=(e,t)=>W3(t)?G3(e,t.value):Qc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[T1(s,r)+" =>"]=i,n),{})}:Cm(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>T1(n))}:_r(t)?T1(t):bn(t)&&!Se(t)&&!U3(t)?String(t):t,T1=(e,t="")=>{var n;return _r(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Di;class ZI{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Di,!t&&Di&&(this.index=(Di.scopes||(Di.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Di;try{return Di=this,t()}finally{Di=n}}}on(){Di=this}off(){Di=this.parent}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function tT(){return Di}let _n;const N1=new WeakSet;class K3{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Di&&Di.active&&Di.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,N1.has(this)&&(N1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||X3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iw(this),Q3(this);const t=_n,n=br;_n=this,br=!0;try{return this.fn()}finally{J3(this),_n=t,br=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Sy(t);this.deps=this.depsTail=void 0,iw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?N1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){V2(this)&&this.run()}get dirty(){return V2(this)}}let Y3=0,Kd,Yd;function X3(e,t=!1){if(e.flags|=8,t){e.next=Yd,Yd=e;return}e.next=Kd,Kd=e}function xy(){Y3++}function _y(){if(--Y3>0)return;if(Yd){let t=Yd;for(Yd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Kd;){let t=Kd;for(Kd=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Q3(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function J3(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Sy(s),eT(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function V2(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Z3(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Z3(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===gh))return;e.globalVersion=gh;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!V2(e)){e.flags&=-3;return}const n=_n,s=br;_n=e,br=!0;try{Q3(e);const i=e.fn(e._value);(t.version===0||Da(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{_n=n,br=s,J3(e),e.flags&=-3}}function Sy(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Sy(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function eT(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let br=!0;const tS=[];function Ka(){tS.push(br),br=!1}function Ya(){const e=tS.pop();br=e===void 0?!0:e}function iw(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=_n;_n=void 0;try{t()}finally{_n=n}}}let gh=0;class nT{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cy{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!_n||!br||_n===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_n)n=this.activeLink=new nT(_n,this),_n.deps?(n.prevDep=_n.depsTail,_n.depsTail.nextDep=n,_n.depsTail=n):_n.deps=_n.depsTail=n,eS(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=_n.depsTail,n.nextDep=void 0,_n.depsTail.nextDep=n,_n.depsTail=n,_n.deps===n&&(_n.deps=s)}return n}trigger(t){this.version++,gh++,this.notify(t)}notify(t){xy();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{_y()}}}function eS(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)eS(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const z2=new WeakMap,Rl=Symbol(""),U2=Symbol(""),mh=Symbol("");function Us(e,t,n){if(br&&_n){let s=z2.get(e);s||z2.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Cy),i.map=s,i.key=n),i.track()}}function No(e,t,n,s,i,r){const o=z2.get(e);if(!o){gh++;return}const a=l=>{l&&l.trigger()};if(xy(),t==="clear")o.forEach(a);else{const l=Se(e),c=l&&wy(n);if(l&&n==="length"){const u=Number(s);o.forEach((h,g)=>{(g==="length"||g===mh||!_r(g)&&g>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(mh)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Rl)),Qc(e)&&a(o.get(U2)));break;case"delete":l||(a(o.get(Rl)),Qc(e)&&a(o.get(U2)));break;case"set":Qc(e)&&a(o.get(Rl));break}}_y()}function Mc(e){const t=Ge(e);return t===e?t:(Us(t,"iterate",mh),er(e)?t:t.map(qs))}function Im(e){return Us(e=Ge(e),"iterate",mh),e}const sT={__proto__:null,[Symbol.iterator](){return D1(this,Symbol.iterator,qs)},concat(...e){return Mc(this).concat(...e.map(t=>Se(t)?Mc(t):t))},entries(){return D1(this,"entries",e=>(e[1]=qs(e[1]),e))},every(e,t){return So(this,"every",e,t,void 0,arguments)},filter(e,t){return So(this,"filter",e,t,n=>n.map(qs),arguments)},find(e,t){return So(this,"find",e,t,qs,arguments)},findIndex(e,t){return So(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return So(this,"findLast",e,t,qs,arguments)},findLastIndex(e,t){return So(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return So(this,"forEach",e,t,void 0,arguments)},includes(...e){return L1(this,"includes",e)},indexOf(...e){return L1(this,"indexOf",e)},join(e){return Mc(this).join(e)},lastIndexOf(...e){return L1(this,"lastIndexOf",e)},map(e,t){return So(this,"map",e,t,void 0,arguments)},pop(){return xd(this,"pop")},push(...e){return xd(this,"push",e)},reduce(e,...t){return rw(this,"reduce",e,t)},reduceRight(e,...t){return rw(this,"reduceRight",e,t)},shift(){return xd(this,"shift")},some(e,t){return So(this,"some",e,t,void 0,arguments)},splice(...e){return xd(this,"splice",e)},toReversed(){return Mc(this).toReversed()},toSorted(e){return Mc(this).toSorted(e)},toSpliced(...e){return Mc(this).toSpliced(...e)},unshift(...e){return xd(this,"unshift",e)},values(){return D1(this,"values",qs)}};function D1(e,t,n){const s=Im(e),i=s[t]();return s!==e&&!er(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const iT=Array.prototype;function So(e,t,n,s,i,r){const o=Im(e),a=o!==e&&!er(e),l=o[t];if(l!==iT[t]){const h=l.apply(e,r);return a?qs(h):h}let c=n;o!==e&&(a?c=function(h,g){return n.call(this,qs(h),g,e)}:n.length>2&&(c=function(h,g){return n.call(this,h,g,e)}));const u=l.call(o,c,s);return a&&i?i(u):u}function rw(e,t,n,s){const i=Im(e);let r=n;return i!==e&&(er(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,qs(a),l,e)}),i[t](r,...s)}function L1(e,t,n){const s=Ge(e);Us(s,"iterate",mh);const i=s[t](...n);return(i===-1||i===!1)&&rf(n[0])?(n[0]=Ge(n[0]),s[t](...n)):i}function xd(e,t,n=[]){Ka(),xy();const s=Ge(e)[t].apply(e,n);return _y(),Ya(),s}const rT=vy("__proto__,__v_isRef,__isVue"),nS=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(_r));function oT(e){_r(e)||(e=String(e));const t=Ge(this);return Us(t,"has",e),t.hasOwnProperty(e)}class sS{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?mT:aS:r?oS:rS).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Se(t);if(!i){let l;if(o&&(l=sT[n]))return l;if(n==="hasOwnProperty")return oT}const a=Reflect.get(t,n,Xs(t)?t:s);return(_r(n)?nS.has(n):rT(n))||(i||Us(t,"get",n),r)?a:Xs(a)?o&&wy(n)?a:a.value:bn(a)?i?cS(a):sf(a):a}}class iS extends sS{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=zl(r);if(!er(s)&&!zl(s)&&(r=Ge(r),s=Ge(s)),!Se(t)&&Xs(r)&&!Xs(s))return l?!1:(r.value=s,!0)}const o=Se(t)&&wy(n)?Number(n)<t.length:cn(t,n),a=Reflect.set(t,n,s,Xs(t)?t:i);return t===Ge(i)&&(o?Da(s,r)&&No(t,"set",n,s):No(t,"add",n,s)),a}deleteProperty(t,n){const s=cn(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&No(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!_r(n)||!nS.has(n))&&Us(t,"has",n),s}ownKeys(t){return Us(t,"iterate",Se(t)?"length":Rl),Reflect.ownKeys(t)}}class aT extends sS{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lT=new iS,cT=new aT,uT=new iS(!0);const q2=e=>e,Sp=e=>Reflect.getPrototypeOf(e);function dT(e,t,n){return function(...s){const i=this.__v_raw,r=Ge(i),o=Qc(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=n?q2:t?H2:qs;return!t&&Us(r,"iterate",l?U2:Rl),{next(){const{value:h,done:g}=c.next();return g?{value:h,done:g}:{value:a?[u(h[0]),u(h[1])]:u(h),done:g}},[Symbol.iterator](){return this}}}}function Cp(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function hT(e,t){const n={get(i){const r=this.__v_raw,o=Ge(r),a=Ge(i);e||(Da(i,a)&&Us(o,"get",i),Us(o,"get",a));const{has:l}=Sp(o),c=t?q2:e?H2:qs;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Us(Ge(i),"iterate",Rl),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Ge(r),a=Ge(i);return e||(Da(i,a)&&Us(o,"has",i),Us(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Ge(a),c=t?q2:e?H2:qs;return!e&&Us(l,"iterate",Rl),a.forEach((u,h)=>i.call(r,c(u),c(h),o))}};return ps(n,e?{add:Cp("add"),set:Cp("set"),delete:Cp("delete"),clear:Cp("clear")}:{add(i){!t&&!er(i)&&!zl(i)&&(i=Ge(i));const r=Ge(this);return Sp(r).has.call(r,i)||(r.add(i),No(r,"add",i,i)),this},set(i,r){!t&&!er(r)&&!zl(r)&&(r=Ge(r));const o=Ge(this),{has:a,get:l}=Sp(o);let c=a.call(o,i);c||(i=Ge(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?Da(r,u)&&No(o,"set",i,r):No(o,"add",i,r),this},delete(i){const r=Ge(this),{has:o,get:a}=Sp(r);let l=o.call(r,i);l||(i=Ge(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&No(r,"delete",i,void 0),c},clear(){const i=Ge(this),r=i.size!==0,o=i.clear();return r&&No(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=dT(i,e,t)}),n}function ky(e,t){const n=hT(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(cn(n,i)&&i in s?n:s,i,r)}const fT={get:ky(!1,!1)},pT={get:ky(!1,!0)},gT={get:ky(!0,!1)};const rS=new WeakMap,oS=new WeakMap,aS=new WeakMap,mT=new WeakMap;function vT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yT(e){return e.__v_skip||!Object.isExtensible(e)?0:vT(VI(e))}function sf(e){return zl(e)?e:Ay(e,!1,lT,fT,rS)}function lS(e){return Ay(e,!1,uT,pT,oS)}function cS(e){return Ay(e,!0,cT,gT,aS)}function Ay(e,t,n,s,i){if(!bn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const o=yT(e);if(o===0)return e;const a=new Proxy(e,o===2?s:n);return i.set(e,a),a}function Jc(e){return zl(e)?Jc(e.__v_raw):!!(e&&e.__v_isReactive)}function zl(e){return!!(e&&e.__v_isReadonly)}function er(e){return!!(e&&e.__v_isShallow)}function rf(e){return e?!!e.__v_raw:!1}function Ge(e){const t=e&&e.__v_raw;return t?Ge(t):e}function bT(e){return!cn(e,"__v_skip")&&Object.isExtensible(e)&&q3(e,"__v_skip",!0),e}const qs=e=>bn(e)?sf(e):e,H2=e=>bn(e)?cS(e):e;function Xs(e){return e?e.__v_isRef===!0:!1}function Gt(e){return uS(e,!1)}function of(e){return uS(e,!0)}function uS(e,t){return Xs(e)?e:new wT(e,t)}class wT{constructor(t,n){this.dep=new Cy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ge(t),this._value=n?t:qs(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||er(t)||zl(t);t=s?t:Ge(t),Da(t,n)&&(this._rawValue=t,this._value=s?t:qs(t),this.dep.trigger())}}function Hs(e){return Xs(e)?e.value:e}const xT={get:(e,t,n)=>t==="__v_raw"?e:Hs(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Xs(i)&&!Xs(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function dS(e){return Jc(e)?e:new Proxy(e,xT)}class _T{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Cy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gh-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&_n!==this)return X3(this,!0),!0}get value(){const t=this.dep.track();return Z3(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ST(e,t,n=!1){let s,i;return Fe(e)?s=e:(s=e.get,i=e.set),new _T(s,i,n)}const kp={},Ng=new WeakMap;let bl;function CT(e,t=!1,n=bl){if(n){let s=Ng.get(n);s||Ng.set(n,s=[]),s.push(e)}}function kT(e,t,n=yn){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=M=>i?M:er(M)||i===!1||i===0?Do(M,1):Do(M);let u,h,g,p,y=!1,w=!1;if(Xs(e)?(h=()=>e.value,y=er(e)):Jc(e)?(h=()=>c(e),y=!0):Se(e)?(w=!0,y=e.some(M=>Jc(M)||er(M)),h=()=>e.map(M=>{if(Xs(M))return M.value;if(Jc(M))return c(M);if(Fe(M))return l?l(M,2):M()})):Fe(e)?t?h=l?()=>l(e,2):e:h=()=>{if(g){Ka();try{g()}finally{Ya()}}const M=bl;bl=u;try{return l?l(e,3,[p]):e(p)}finally{bl=M}}:h=Qr,t&&i){const M=h,F=i===!0?1/0:i;h=()=>Do(M(),F)}const S=tT(),x=()=>{u.stop(),S&&S.active&&by(S.effects,u)};if(r&&t){const M=t;t=(...F)=>{M(...F),x()}}let P=w?new Array(e.length).fill(kp):kp;const L=M=>{if(!(!(u.flags&1)||!u.dirty&&!M))if(t){const F=u.run();if(i||y||(w?F.some((pt,Y)=>Da(pt,P[Y])):Da(F,P))){g&&g();const pt=bl;bl=u;try{const Y=[F,P===kp?void 0:w&&P[0]===kp?[]:P,p];l?l(t,3,Y):t(...Y),P=F}finally{bl=pt}}}else u.run()};return a&&a(L),u=new K3(h),u.scheduler=o?()=>o(L,!1):L,p=M=>CT(M,!1,u),g=u.onStop=()=>{const M=Ng.get(u);if(M){if(l)l(M,4);else for(const F of M)F();Ng.delete(u)}},t?s?L(!0):P=u.run():o?o(L.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Do(e,t=1/0,n){if(t<=0||!bn(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Xs(e))Do(e.value,t,n);else if(Se(e))for(let s=0;s<e.length;s++)Do(e[s],t,n);else if(Cm(e)||Qc(e))e.forEach(s=>{Do(s,t,n)});else if(U3(e)){for(const s in e)Do(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Do(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function af(e,t,n,s){try{return s?e(...s):e()}catch(i){Tm(i,t,n)}}function Sr(e,t,n,s){if(Fe(e)){const i=af(e,t,n,s);return i&&V3(i)&&i.catch(r=>{Tm(r,t,n)}),i}if(Se(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Sr(e[r],t,n,s));return i}}function Tm(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||yn;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,c)===!1)return}a=a.parent}if(r){Ka(),af(r,null,10,[e,l,c]),Ya();return}}AT(e,n,i,s,o)}function AT(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const ai=[];let zr=-1;const Zc=[];let ma=null,Vc=0;const hS=Promise.resolve();let Dg=null;function lf(e){const t=Dg||hS;return e?t.then(this?e.bind(this):e):t}function PT(e){let t=zr+1,n=ai.length;for(;t<n;){const s=t+n>>>1,i=ai[s],r=vh(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Py(e){if(!(e.flags&1)){const t=vh(e),n=ai[ai.length-1];!n||!(e.flags&2)&&t>=vh(n)?ai.push(e):ai.splice(PT(t),0,e),e.flags|=1,fS()}}function fS(){Dg||(Dg=hS.then(gS))}function ET(e){Se(e)?Zc.push(...e):ma&&e.id===-1?ma.splice(Vc+1,0,e):e.flags&1||(Zc.push(e),e.flags|=1),fS()}function ow(e,t,n=zr+1){for(;n<ai.length;n++){const s=ai[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ai.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function pS(e){if(Zc.length){const t=[...new Set(Zc)].sort((n,s)=>vh(n)-vh(s));if(Zc.length=0,ma){ma.push(...t);return}for(ma=t,Vc=0;Vc<ma.length;Vc++){const n=ma[Vc];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ma=null,Vc=0}}const vh=e=>e.id==null?e.flags&2?-1:1/0:e.id;function gS(e){try{for(zr=0;zr<ai.length;zr++){const t=ai[zr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),af(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zr<ai.length;zr++){const t=ai[zr];t&&(t.flags&=-2)}zr=-1,ai.length=0,pS(),Dg=null,(ai.length||Zc.length)&&gS()}}let _s=null,mS=null;function Lg(e){const t=_s;return _s=e,mS=e&&e.type.__scopeId||null,t}function an(e,t=_s,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&vw(-1);const r=Lg(t);let o;try{o=e(...i)}finally{Lg(r),s._d&&vw(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function oe(e,t){if(_s===null)return e;const n=Fm(_s),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=yn]=t[i];r&&(Fe(r)&&(r={mounted:r,updated:r}),r.deep&&Do(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function hl(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Ka(),Sr(l,n,8,[e.el,a,e,t]),Ya())}}const IT=Symbol("_vte"),vS=e=>e.__isTeleport,va=Symbol("_leaveCb"),Ap=Symbol("_enterCb");function yS(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return co(()=>{e.isMounted=!0}),Iy(()=>{e.isUnmounting=!0}),e}const Ji=[Function,Array],bS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ji,onEnter:Ji,onAfterEnter:Ji,onEnterCancelled:Ji,onBeforeLeave:Ji,onLeave:Ji,onAfterLeave:Ji,onLeaveCancelled:Ji,onBeforeAppear:Ji,onAppear:Ji,onAfterAppear:Ji,onAppearCancelled:Ji},wS=e=>{const t=e.subTree;return t.component?wS(t.component):t},TT={name:"BaseTransition",props:bS,setup(e,{slots:t}){const n=XS(),s=yS();return()=>{const i=t.default&&Ey(t.default(),!0);if(!i||!i.length)return;const r=xS(i),o=Ge(e),{mode:a}=o;if(s.isLeaving)return M1(r);const l=aw(r);if(!l)return M1(r);let c=yh(l,o,s,n,h=>c=h);l.type!==li&&Ul(l,c);let u=n.subTree&&aw(n.subTree);if(u&&u.type!==li&&!Cl(l,u)&&wS(n).type!==li){let h=yh(u,o,s,n);if(Ul(u,h),a==="out-in"&&l.type!==li)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},M1(r);a==="in-out"&&l.type!==li?h.delayLeave=(g,p,y)=>{const w=_S(s,u);w[String(u.key)]=u,g[va]=()=>{p(),g[va]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function xS(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==li){t=n;break}}return t}const NT=TT;function _S(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function yh(e,t,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:g,onLeave:p,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:S,onAppear:x,onAfterAppear:P,onAppearCancelled:L}=t,M=String(e.key),F=_S(n,e),pt=(it,J)=>{it&&Sr(it,s,9,J)},Y=(it,J)=>{const _=J[1];pt(it,J),Se(it)?it.every(A=>A.length<=1)&&_():it.length<=1&&_()},W={mode:o,persisted:a,beforeEnter(it){let J=l;if(!n.isMounted)if(r)J=S||l;else return;it[va]&&it[va](!0);const _=F[M];_&&Cl(e,_)&&_.el[va]&&_.el[va](),pt(J,[it])},enter(it){let J=c,_=u,A=h;if(!n.isMounted)if(r)J=x||c,_=P||u,A=L||h;else return;let Q=!1;const et=it[Ap]=mt=>{Q||(Q=!0,mt?pt(A,[it]):pt(_,[it]),W.delayedLeave&&W.delayedLeave(),it[Ap]=void 0)};J?Y(J,[it,et]):et()},leave(it,J){const _=String(e.key);if(it[Ap]&&it[Ap](!0),n.isUnmounting)return J();pt(g,[it]);let A=!1;const Q=it[va]=et=>{A||(A=!0,J(),et?pt(w,[it]):pt(y,[it]),it[va]=void 0,F[_]===e&&delete F[_])};F[_]=e,p?Y(p,[it,Q]):Q()},clone(it){const J=yh(it,t,n,s,i);return i&&i(J),J}};return W}function M1(e){if(Nm(e))return e=ja(e),e.children=null,e}function aw(e){if(!Nm(e))return vS(e.type)&&e.children?xS(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Fe(n.default))return n.default()}}function Ul(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ul(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ey(e,t=!1,n){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===ye?(o.patchFlag&128&&i++,s=s.concat(Ey(o.children,t,a))):(t||o.type!==li)&&s.push(a!=null?ja(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Ir(e,t){return Fe(e)?ps({name:e.name},t,{setup:e}):e}function SS(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Mg(e,t,n,s,i=!1){if(Se(e)){e.forEach((y,w)=>Mg(y,t&&(Se(t)?t[w]:t),n,s,i));return}if(tu(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Mg(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Fm(s.component):s.el,o=i?null:r,{i:a,r:l}=e,c=t&&t.r,u=a.refs===yn?a.refs={}:a.refs,h=a.setupState,g=Ge(h),p=h===yn?()=>!1:y=>cn(g,y);if(c!=null&&c!==l&&(Un(c)?(u[c]=null,p(c)&&(h[c]=null)):Xs(c)&&(c.value=null)),Fe(l))af(l,a,12,[o,u]);else{const y=Un(l),w=Xs(l);if(y||w){const S=()=>{if(e.f){const x=y?p(l)?h[l]:u[l]:l.value;i?Se(x)&&by(x,r):Se(x)?x.includes(r)||x.push(r):y?(u[l]=[r],p(l)&&(h[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else y?(u[l]=o,p(l)&&(h[l]=o)):w&&(l.value=o,e.k&&(u[e.k]=o))};o?(S.id=-1,Ti(S,n)):S()}}}Pm().requestIdleCallback;Pm().cancelIdleCallback;const tu=e=>!!e.type.__asyncLoader,Nm=e=>e.type.__isKeepAlive;function DT(e,t){CS(e,"a",t)}function LT(e,t){CS(e,"da",t)}function CS(e,t,n=Ds){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Dm(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Nm(i.parent.vnode)&&MT(s,t,n,i),i=i.parent}}function MT(e,t,n,s){const i=Dm(t,e,s,!0);Lm(()=>{by(s[t],i)},n)}function Dm(e,t,n=Ds,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ka();const a=cf(n),l=Sr(t,n,e,o);return a(),Ya(),l});return s?i.unshift(r):i.push(r),r}}const Go=e=>(t,n=Ds)=>{(!xh||e==="sp")&&Dm(e,(...s)=>t(...s),n)},OT=Go("bm"),co=Go("m"),RT=Go("bu"),kS=Go("u"),Iy=Go("bum"),Lm=Go("um"),FT=Go("sp"),BT=Go("rtg"),jT=Go("rtc");function $T(e,t=Ds){Dm("ec",e,t)}const AS="components";function $o(e,t){return ES(AS,e,!0,t)||e}const PS=Symbol.for("v-ndc");function Ou(e){return Un(e)?ES(AS,e,!1)||e:e||PS}function ES(e,t,n=!0,s=!1){const i=_s||Ds;if(i){const r=i.type;{const a=PN(r,!1);if(a&&(a===t||a===ir(t)||a===Am(ir(t))))return r}const o=lw(i[e]||r[e],t)||lw(i.appContext[e],t);return!o&&s?r:o}}function lw(e,t){return e&&(e[t]||e[ir(t)]||e[Am(ir(t))])}function Ke(e,t,n,s){let i;const r=n,o=Se(e);if(o||Un(e)){const a=o&&Jc(e);let l=!1;a&&(l=!er(e),e=Im(e)),i=new Array(e.length);for(let c=0,u=e.length;c<u;c++)i[c]=t(l?qs(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(bn(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,r)}}else i=[];return i}function VT(e,t,n={},s,i){if(_s.ce||_s.parent&&tu(_s.parent)&&_s.parent.ce)return at(),cs(ye,null,[ze("slot",n,s)],64);let r=e[t];r&&r._c&&(r._d=!1),at();const o=r&&IS(r(n)),a=n.key||o&&o.key,l=cs(ye,{key:(a&&!_r(a)?a:`_${t}`)+""},o||[],o&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function IS(e){return e.some(t=>wh(t)?!(t.type===li||t.type===ye&&!IS(t.children)):!0)?e:null}function zT(e,t){const n={};for(const s in e)n[sg(s)]=e[s];return n}const W2=e=>e?QS(e)?Fm(e):W2(e.parent):null,Xd=ps(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>W2(e.parent),$root:e=>W2(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>NS(e),$forceUpdate:e=>e.f||(e.f=()=>{Py(e.update)}),$nextTick:e=>e.n||(e.n=lf.bind(e.proxy)),$watch:e=>cN.bind(e)}),O1=(e,t)=>e!==yn&&!e.__isScriptSetup&&cn(e,t),UT={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(O1(s,t))return o[t]=1,s[t];if(i!==yn&&cn(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&cn(c,t))return o[t]=3,r[t];if(n!==yn&&cn(n,t))return o[t]=4,n[t];G2&&(o[t]=0)}}const u=Xd[t];let h,g;if(u)return t==="$attrs"&&Us(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==yn&&cn(n,t))return o[t]=4,n[t];if(g=l.config.globalProperties,cn(g,t))return g[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return O1(i,t)?(i[t]=n,!0):s!==yn&&cn(s,t)?(s[t]=n,!0):cn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==yn&&cn(e,o)||O1(t,o)||(a=r[0])&&cn(a,o)||cn(s,o)||cn(Xd,o)||cn(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:cn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function cw(e){return Se(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let G2=!0;function qT(e){const t=NS(e),n=e.proxy,s=e.ctx;G2=!1,t.beforeCreate&&uw(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:g,beforeUpdate:p,updated:y,activated:w,deactivated:S,beforeDestroy:x,beforeUnmount:P,destroyed:L,unmounted:M,render:F,renderTracked:pt,renderTriggered:Y,errorCaptured:W,serverPrefetch:it,expose:J,inheritAttrs:_,components:A,directives:Q,filters:et}=t;if(c&&HT(c,s,null),o)for(const gt in o){const tt=o[gt];Fe(tt)&&(s[gt]=tt.bind(n))}if(i){const gt=i.call(n,n);bn(gt)&&(e.data=sf(gt))}if(G2=!0,r)for(const gt in r){const tt=r[gt],T=Fe(tt)?tt.bind(n,n):Fe(tt.get)?tt.get.bind(n,n):Qr,rt=!Fe(tt)&&Fe(tt.set)?tt.set.bind(n):Qr,kt=de({get:T,set:rt});Object.defineProperty(s,gt,{enumerable:!0,configurable:!0,get:()=>kt.value,set:I=>kt.value=I})}if(a)for(const gt in a)TS(a[gt],s,n,gt);if(l){const gt=Fe(l)?l.call(n):l;Reflect.ownKeys(gt).forEach(tt=>{rg(tt,gt[tt])})}u&&uw(u,e,"c");function ht(gt,tt){Se(tt)?tt.forEach(T=>gt(T.bind(n))):tt&&gt(tt.bind(n))}if(ht(OT,h),ht(co,g),ht(RT,p),ht(kS,y),ht(DT,w),ht(LT,S),ht($T,W),ht(jT,pt),ht(BT,Y),ht(Iy,P),ht(Lm,M),ht(FT,it),Se(J))if(J.length){const gt=e.exposed||(e.exposed={});J.forEach(tt=>{Object.defineProperty(gt,tt,{get:()=>n[tt],set:T=>n[tt]=T})})}else e.exposed||(e.exposed={});F&&e.render===Qr&&(e.render=F),_!=null&&(e.inheritAttrs=_),A&&(e.components=A),Q&&(e.directives=Q),it&&SS(e)}function HT(e,t,n=Qr){Se(e)&&(e=K2(e));for(const s in e){const i=e[s];let r;bn(i)?"default"in i?r=wr(i.from||s,i.default,!0):r=wr(i.from||s):r=wr(i),Xs(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function uw(e,t,n){Sr(Se(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function TS(e,t,n,s){let i=s.includes(".")?HS(n,s):()=>n[s];if(Un(e)){const r=t[e];Fe(r)&&$i(i,r)}else if(Fe(e))$i(i,e.bind(n));else if(bn(e))if(Se(e))e.forEach(r=>TS(r,t,n,s));else{const r=Fe(e.handler)?e.handler.bind(n):t[e.handler];Fe(r)&&$i(i,r,e)}}function NS(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(c=>Og(l,c,o,!0)),Og(l,t,o)),bn(t)&&r.set(t,l),l}function Og(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Og(e,r,n,!0),i&&i.forEach(o=>Og(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=WT[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const WT={data:dw,props:hw,emits:hw,methods:Ld,computed:Ld,beforeCreate:oi,created:oi,beforeMount:oi,mounted:oi,beforeUpdate:oi,updated:oi,beforeDestroy:oi,beforeUnmount:oi,destroyed:oi,unmounted:oi,activated:oi,deactivated:oi,errorCaptured:oi,serverPrefetch:oi,components:Ld,directives:Ld,watch:KT,provide:dw,inject:GT};function dw(e,t){return t?e?function(){return ps(Fe(e)?e.call(this,this):e,Fe(t)?t.call(this,this):t)}:t:e}function GT(e,t){return Ld(K2(e),K2(t))}function K2(e){if(Se(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function oi(e,t){return e?[...new Set([].concat(e,t))]:t}function Ld(e,t){return e?ps(Object.create(null),e,t):t}function hw(e,t){return e?Se(e)&&Se(t)?[...new Set([...e,...t])]:ps(Object.create(null),cw(e),cw(t??{})):t}function KT(e,t){if(!e)return t;if(!t)return e;const n=ps(Object.create(null),e);for(const s in t)n[s]=oi(e[s],t[s]);return n}function DS(){return{app:null,config:{isNativeTag:jI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let YT=0;function XT(e,t){return function(s,i=null){Fe(s)||(s=ps({},s)),i!=null&&!bn(i)&&(i=null);const r=DS(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:YT++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:ZS,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&Fe(u.install)?(o.add(u),u.install(c,...h)):Fe(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,g){if(!l){const p=c._ceVNode||ze(s,i);return p.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),e(p,u,g),l=!0,c._container=u,u.__vue_app__=c,Fm(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Sr(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=eu;eu=c;try{return u()}finally{eu=h}}};return c}}let eu=null;function rg(e,t){if(Ds){let n=Ds.provides;const s=Ds.parent&&Ds.parent.provides;s===n&&(n=Ds.provides=Object.create(s)),n[e]=t}}function wr(e,t,n=!1){const s=Ds||_s;if(s||eu){const i=eu?eu._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Fe(t)?t.call(s&&s.proxy):t}}const LS={},MS=()=>Object.create(LS),OS=e=>Object.getPrototypeOf(e)===LS;function QT(e,t,n,s=!1){const i={},r=MS();e.propsDefaults=Object.create(null),RS(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:lS(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function JT(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Ge(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let g=u[h];if(Mm(e.emitsOptions,g))continue;const p=t[g];if(l)if(cn(r,g))p!==r[g]&&(r[g]=p,c=!0);else{const y=ir(g);i[y]=Y2(l,a,y,p,e,!1)}else p!==r[g]&&(r[g]=p,c=!0)}}}else{RS(e,t,i,r)&&(c=!0);let u;for(const h in a)(!t||!cn(t,h)&&((u=Ga(h))===h||!cn(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Y2(l,a,h,void 0,e,!0)):delete i[h]);if(r!==a)for(const h in r)(!t||!cn(t,h))&&(delete r[h],c=!0)}c&&No(e.attrs,"set","")}function RS(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Gd(l))continue;const c=t[l];let u;i&&cn(i,u=ir(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Mm(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Ge(n),c=a||yn;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Y2(i,l,h,c[h],e,!cn(c,h))}}return o}function Y2(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=cn(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Fe(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=cf(i);s=c[n]=l.call(null,t),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ga(n))&&(s=!0))}return s}const ZT=new WeakMap;function FS(e,t,n=!1){const s=n?ZT:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!Fe(e)){const u=h=>{l=!0;const[g,p]=FS(h,t,!0);ps(o,g),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return bn(e)&&s.set(e,Xc),Xc;if(Se(r))for(let u=0;u<r.length;u++){const h=ir(r[u]);fw(h)&&(o[h]=yn)}else if(r)for(const u in r){const h=ir(u);if(fw(h)){const g=r[u],p=o[h]=Se(g)||Fe(g)?{type:g}:ps({},g),y=p.type;let w=!1,S=!0;if(Se(y))for(let x=0;x<y.length;++x){const P=y[x],L=Fe(P)&&P.name;if(L==="Boolean"){w=!0;break}else L==="String"&&(S=!1)}else w=Fe(y)&&y.name==="Boolean";p[0]=w,p[1]=S,(w||cn(p,"default"))&&a.push(h)}}const c=[o,a];return bn(e)&&s.set(e,c),c}function fw(e){return e[0]!=="$"&&!Gd(e)}const BS=e=>e[0]==="_"||e==="$stable",Ty=e=>Se(e)?e.map(qr):[qr(e)],tN=(e,t,n)=>{if(t._n)return t;const s=an((...i)=>Ty(t(...i)),n);return s._c=!1,s},jS=(e,t,n)=>{const s=e._ctx;for(const i in e){if(BS(i))continue;const r=e[i];if(Fe(r))t[i]=tN(i,r,s);else if(r!=null){const o=Ty(r);t[i]=()=>o}}},$S=(e,t)=>{const n=Ty(t);e.slots.default=()=>n},VS=(e,t,n)=>{for(const s in t)(n||s!=="_")&&(e[s]=t[s])},eN=(e,t,n)=>{const s=e.slots=MS();if(e.vnode.shapeFlag&32){const i=t._;i?(VS(s,t,n),n&&q3(s,"_",i,!0)):jS(t,s)}else t&&$S(e,t)},nN=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=yn;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:VS(i,t,n):(r=!t.$stable,jS(t,i)),o=t}else t&&($S(e,t),o={default:1});if(r)for(const a in i)!BS(a)&&o[a]==null&&delete i[a]},Ti=mN;function sN(e){return iN(e)}function iN(e,t){const n=Pm();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:g,setScopeId:p=Qr,insertStaticContent:y}=e,w=(K,H,dt,ut=null,V=null,Et=null,Lt=void 0,U=null,C=!!H.dynamicChildren)=>{if(K===H)return;K&&!Cl(K,H)&&(ut=q(K),I(K,V,Et,!0),K=null),H.patchFlag===-2&&(C=!1,H.dynamicChildren=null);const{type:$,ref:wt,shapeFlag:It}=H;switch($){case Om:S(K,H,dt,ut);break;case li:x(K,H,dt,ut);break;case og:K==null&&P(H,dt,ut,Lt);break;case ye:A(K,H,dt,ut,V,Et,Lt,U,C);break;default:It&1?F(K,H,dt,ut,V,Et,Lt,U,C):It&6?Q(K,H,dt,ut,V,Et,Lt,U,C):(It&64||It&128)&&$.process(K,H,dt,ut,V,Et,Lt,U,C,At)}wt!=null&&V&&Mg(wt,K&&K.ref,Et,H||K,!H)},S=(K,H,dt,ut)=>{if(K==null)s(H.el=a(H.children),dt,ut);else{const V=H.el=K.el;H.children!==K.children&&c(V,H.children)}},x=(K,H,dt,ut)=>{K==null?s(H.el=l(H.children||""),dt,ut):H.el=K.el},P=(K,H,dt,ut)=>{[K.el,K.anchor]=y(K.children,H,dt,ut,K.el,K.anchor)},L=({el:K,anchor:H},dt,ut)=>{let V;for(;K&&K!==H;)V=g(K),s(K,dt,ut),K=V;s(H,dt,ut)},M=({el:K,anchor:H})=>{let dt;for(;K&&K!==H;)dt=g(K),i(K),K=dt;i(H)},F=(K,H,dt,ut,V,Et,Lt,U,C)=>{H.type==="svg"?Lt="svg":H.type==="math"&&(Lt="mathml"),K==null?pt(H,dt,ut,V,Et,Lt,U,C):it(K,H,V,Et,Lt,U,C)},pt=(K,H,dt,ut,V,Et,Lt,U)=>{let C,$;const{props:wt,shapeFlag:It,transition:Ft,dirs:Wt}=K;if(C=K.el=o(K.type,Et,wt&&wt.is,wt),It&8?u(C,K.children):It&16&&W(K.children,C,null,ut,V,R1(K,Et),Lt,U),Wt&&hl(K,null,ut,"created"),Y(C,K,K.scopeId,Lt,ut),wt){for(const se in wt)se!=="value"&&!Gd(se)&&r(C,se,null,wt[se],Et,ut);"value"in wt&&r(C,"value",null,wt.value,Et),($=wt.onVnodeBeforeMount)&&Br($,ut,K)}Wt&&hl(K,null,ut,"beforeMount");const Xt=rN(V,Ft);Xt&&Ft.beforeEnter(C),s(C,H,dt),(($=wt&&wt.onVnodeMounted)||Xt||Wt)&&Ti(()=>{$&&Br($,ut,K),Xt&&Ft.enter(C),Wt&&hl(K,null,ut,"mounted")},V)},Y=(K,H,dt,ut,V)=>{if(dt&&p(K,dt),ut)for(let Et=0;Et<ut.length;Et++)p(K,ut[Et]);if(V){let Et=V.subTree;if(H===Et||GS(Et.type)&&(Et.ssContent===H||Et.ssFallback===H)){const Lt=V.vnode;Y(K,Lt,Lt.scopeId,Lt.slotScopeIds,V.parent)}}},W=(K,H,dt,ut,V,Et,Lt,U,C=0)=>{for(let $=C;$<K.length;$++){const wt=K[$]=U?ya(K[$]):qr(K[$]);w(null,wt,H,dt,ut,V,Et,Lt,U)}},it=(K,H,dt,ut,V,Et,Lt)=>{const U=H.el=K.el;let{patchFlag:C,dynamicChildren:$,dirs:wt}=H;C|=K.patchFlag&16;const It=K.props||yn,Ft=H.props||yn;let Wt;if(dt&&fl(dt,!1),(Wt=Ft.onVnodeBeforeUpdate)&&Br(Wt,dt,H,K),wt&&hl(H,K,dt,"beforeUpdate"),dt&&fl(dt,!0),(It.innerHTML&&Ft.innerHTML==null||It.textContent&&Ft.textContent==null)&&u(U,""),$?J(K.dynamicChildren,$,U,dt,ut,R1(H,V),Et):Lt||tt(K,H,U,null,dt,ut,R1(H,V),Et,!1),C>0){if(C&16)_(U,It,Ft,dt,V);else if(C&2&&It.class!==Ft.class&&r(U,"class",null,Ft.class,V),C&4&&r(U,"style",It.style,Ft.style,V),C&8){const Xt=H.dynamicProps;for(let se=0;se<Xt.length;se++){const Kt=Xt[se],ie=It[Kt],fe=Ft[Kt];(fe!==ie||Kt==="value")&&r(U,Kt,ie,fe,V,dt)}}C&1&&K.children!==H.children&&u(U,H.children)}else!Lt&&$==null&&_(U,It,Ft,dt,V);((Wt=Ft.onVnodeUpdated)||wt)&&Ti(()=>{Wt&&Br(Wt,dt,H,K),wt&&hl(H,K,dt,"updated")},ut)},J=(K,H,dt,ut,V,Et,Lt)=>{for(let U=0;U<H.length;U++){const C=K[U],$=H[U],wt=C.el&&(C.type===ye||!Cl(C,$)||C.shapeFlag&70)?h(C.el):dt;w(C,$,wt,null,ut,V,Et,Lt,!0)}},_=(K,H,dt,ut,V)=>{if(H!==dt){if(H!==yn)for(const Et in H)!Gd(Et)&&!(Et in dt)&&r(K,Et,H[Et],null,V,ut);for(const Et in dt){if(Gd(Et))continue;const Lt=dt[Et],U=H[Et];Lt!==U&&Et!=="value"&&r(K,Et,U,Lt,V,ut)}"value"in dt&&r(K,"value",H.value,dt.value,V)}},A=(K,H,dt,ut,V,Et,Lt,U,C)=>{const $=H.el=K?K.el:a(""),wt=H.anchor=K?K.anchor:a("");let{patchFlag:It,dynamicChildren:Ft,slotScopeIds:Wt}=H;Wt&&(U=U?U.concat(Wt):Wt),K==null?(s($,dt,ut),s(wt,dt,ut),W(H.children||[],dt,wt,V,Et,Lt,U,C)):It>0&&It&64&&Ft&&K.dynamicChildren?(J(K.dynamicChildren,Ft,dt,V,Et,Lt,U),(H.key!=null||V&&H===V.subTree)&&zS(K,H,!0)):tt(K,H,dt,wt,V,Et,Lt,U,C)},Q=(K,H,dt,ut,V,Et,Lt,U,C)=>{H.slotScopeIds=U,K==null?H.shapeFlag&512?V.ctx.activate(H,dt,ut,Lt,C):et(H,dt,ut,V,Et,Lt,C):mt(K,H,C)},et=(K,H,dt,ut,V,Et,Lt)=>{const U=K.component=_N(K,ut,V);if(Nm(K)&&(U.ctx.renderer=At),SN(U,!1,Lt),U.asyncDep){if(V&&V.registerDep(U,ht,Lt),!K.el){const C=U.subTree=ze(li);x(null,C,H,dt)}}else ht(U,K,H,dt,V,Et,Lt)},mt=(K,H,dt)=>{const ut=H.component=K.component;if(pN(K,H,dt))if(ut.asyncDep&&!ut.asyncResolved){gt(ut,H,dt);return}else ut.next=H,ut.update();else H.el=K.el,ut.vnode=H},ht=(K,H,dt,ut,V,Et,Lt)=>{const U=()=>{if(K.isMounted){let{next:It,bu:Ft,u:Wt,parent:Xt,vnode:se}=K;{const Ze=US(K);if(Ze){It&&(It.el=se.el,gt(K,It,Lt)),Ze.asyncDep.then(()=>{K.isUnmounted||U()});return}}let Kt=It,ie;fl(K,!1),It?(It.el=se.el,gt(K,It,Lt)):It=se,Ft&&ig(Ft),(ie=It.props&&It.props.onVnodeBeforeUpdate)&&Br(ie,Xt,It,se),fl(K,!0);const fe=gw(K),Yt=K.subTree;K.subTree=fe,w(Yt,fe,h(Yt.el),q(Yt),K,V,Et),It.el=fe.el,Kt===null&&gN(K,fe.el),Wt&&Ti(Wt,V),(ie=It.props&&It.props.onVnodeUpdated)&&Ti(()=>Br(ie,Xt,It,se),V)}else{let It;const{el:Ft,props:Wt}=H,{bm:Xt,m:se,parent:Kt,root:ie,type:fe}=K,Yt=tu(H);fl(K,!1),Xt&&ig(Xt),!Yt&&(It=Wt&&Wt.onVnodeBeforeMount)&&Br(It,Kt,H),fl(K,!0);{ie.ce&&ie.ce._injectChildStyle(fe);const Ze=K.subTree=gw(K);w(null,Ze,dt,ut,K,V,Et),H.el=Ze.el}if(se&&Ti(se,V),!Yt&&(It=Wt&&Wt.onVnodeMounted)){const Ze=H;Ti(()=>Br(It,Kt,Ze),V)}(H.shapeFlag&256||Kt&&tu(Kt.vnode)&&Kt.vnode.shapeFlag&256)&&K.a&&Ti(K.a,V),K.isMounted=!0,H=dt=ut=null}};K.scope.on();const C=K.effect=new K3(U);K.scope.off();const $=K.update=C.run.bind(C),wt=K.job=C.runIfDirty.bind(C);wt.i=K,wt.id=K.uid,C.scheduler=()=>Py(wt),fl(K,!0),$()},gt=(K,H,dt)=>{H.component=K;const ut=K.vnode.props;K.vnode=H,K.next=null,JT(K,H.props,ut,dt),nN(K,H.children,dt),Ka(),ow(K),Ya()},tt=(K,H,dt,ut,V,Et,Lt,U,C=!1)=>{const $=K&&K.children,wt=K?K.shapeFlag:0,It=H.children,{patchFlag:Ft,shapeFlag:Wt}=H;if(Ft>0){if(Ft&128){rt($,It,dt,ut,V,Et,Lt,U,C);return}else if(Ft&256){T($,It,dt,ut,V,Et,Lt,U,C);return}}Wt&8?(wt&16&&Z($,V,Et),It!==$&&u(dt,It)):wt&16?Wt&16?rt($,It,dt,ut,V,Et,Lt,U,C):Z($,V,Et,!0):(wt&8&&u(dt,""),Wt&16&&W(It,dt,ut,V,Et,Lt,U,C))},T=(K,H,dt,ut,V,Et,Lt,U,C)=>{K=K||Xc,H=H||Xc;const $=K.length,wt=H.length,It=Math.min($,wt);let Ft;for(Ft=0;Ft<It;Ft++){const Wt=H[Ft]=C?ya(H[Ft]):qr(H[Ft]);w(K[Ft],Wt,dt,null,V,Et,Lt,U,C)}$>wt?Z(K,V,Et,!0,!1,It):W(H,dt,ut,V,Et,Lt,U,C,It)},rt=(K,H,dt,ut,V,Et,Lt,U,C)=>{let $=0;const wt=H.length;let It=K.length-1,Ft=wt-1;for(;$<=It&&$<=Ft;){const Wt=K[$],Xt=H[$]=C?ya(H[$]):qr(H[$]);if(Cl(Wt,Xt))w(Wt,Xt,dt,null,V,Et,Lt,U,C);else break;$++}for(;$<=It&&$<=Ft;){const Wt=K[It],Xt=H[Ft]=C?ya(H[Ft]):qr(H[Ft]);if(Cl(Wt,Xt))w(Wt,Xt,dt,null,V,Et,Lt,U,C);else break;It--,Ft--}if($>It){if($<=Ft){const Wt=Ft+1,Xt=Wt<wt?H[Wt].el:ut;for(;$<=Ft;)w(null,H[$]=C?ya(H[$]):qr(H[$]),dt,Xt,V,Et,Lt,U,C),$++}}else if($>Ft)for(;$<=It;)I(K[$],V,Et,!0),$++;else{const Wt=$,Xt=$,se=new Map;for($=Xt;$<=Ft;$++){const Zt=H[$]=C?ya(H[$]):qr(H[$]);Zt.key!=null&&se.set(Zt.key,$)}let Kt,ie=0;const fe=Ft-Xt+1;let Yt=!1,Ze=0;const Ie=new Array(fe);for($=0;$<fe;$++)Ie[$]=0;for($=Wt;$<=It;$++){const Zt=K[$];if(ie>=fe){I(Zt,V,Et,!0);continue}let me;if(Zt.key!=null)me=se.get(Zt.key);else for(Kt=Xt;Kt<=Ft;Kt++)if(Ie[Kt-Xt]===0&&Cl(Zt,H[Kt])){me=Kt;break}me===void 0?I(Zt,V,Et,!0):(Ie[me-Xt]=$+1,me>=Ze?Ze=me:Yt=!0,w(Zt,H[me],dt,null,V,Et,Lt,U,C),ie++)}const ts=Yt?oN(Ie):Xc;for(Kt=ts.length-1,$=fe-1;$>=0;$--){const Zt=Xt+$,me=H[Zt],es=Zt+1<wt?H[Zt+1].el:ut;Ie[$]===0?w(null,me,dt,es,V,Et,Lt,U,C):Yt&&(Kt<0||$!==ts[Kt]?kt(me,dt,es,2):Kt--)}}},kt=(K,H,dt,ut,V=null)=>{const{el:Et,type:Lt,transition:U,children:C,shapeFlag:$}=K;if($&6){kt(K.component.subTree,H,dt,ut);return}if($&128){K.suspense.move(H,dt,ut);return}if($&64){Lt.move(K,H,dt,At);return}if(Lt===ye){s(Et,H,dt);for(let It=0;It<C.length;It++)kt(C[It],H,dt,ut);s(K.anchor,H,dt);return}if(Lt===og){L(K,H,dt);return}if(ut!==2&&$&1&&U)if(ut===0)U.beforeEnter(Et),s(Et,H,dt),Ti(()=>U.enter(Et),V);else{const{leave:It,delayLeave:Ft,afterLeave:Wt}=U,Xt=()=>s(Et,H,dt),se=()=>{It(Et,()=>{Xt(),Wt&&Wt()})};Ft?Ft(Et,Xt,se):se()}else s(Et,H,dt)},I=(K,H,dt,ut=!1,V=!1)=>{const{type:Et,props:Lt,ref:U,children:C,dynamicChildren:$,shapeFlag:wt,patchFlag:It,dirs:Ft,cacheIndex:Wt}=K;if(It===-2&&(V=!1),U!=null&&Mg(U,null,dt,K,!0),Wt!=null&&(H.renderCache[Wt]=void 0),wt&256){H.ctx.deactivate(K);return}const Xt=wt&1&&Ft,se=!tu(K);let Kt;if(se&&(Kt=Lt&&Lt.onVnodeBeforeUnmount)&&Br(Kt,H,K),wt&6)R(K.component,dt,ut);else{if(wt&128){K.suspense.unmount(dt,ut);return}Xt&&hl(K,null,H,"beforeUnmount"),wt&64?K.type.remove(K,H,dt,At,ut):$&&!$.hasOnce&&(Et!==ye||It>0&&It&64)?Z($,H,dt,!1,!0):(Et===ye&&It&384||!V&&wt&16)&&Z(C,H,dt),ut&&O(K)}(se&&(Kt=Lt&&Lt.onVnodeUnmounted)||Xt)&&Ti(()=>{Kt&&Br(Kt,H,K),Xt&&hl(K,null,H,"unmounted")},dt)},O=K=>{const{type:H,el:dt,anchor:ut,transition:V}=K;if(H===ye){E(dt,ut);return}if(H===og){M(K);return}const Et=()=>{i(dt),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(K.shapeFlag&1&&V&&!V.persisted){const{leave:Lt,delayLeave:U}=V,C=()=>Lt(dt,Et);U?U(K.el,Et,C):C()}else Et()},E=(K,H)=>{let dt;for(;K!==H;)dt=g(K),i(K),K=dt;i(H)},R=(K,H,dt)=>{const{bum:ut,scope:V,job:Et,subTree:Lt,um:U,m:C,a:$}=K;pw(C),pw($),ut&&ig(ut),V.stop(),Et&&(Et.flags|=8,I(Lt,K,H,dt)),U&&Ti(U,H),Ti(()=>{K.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},Z=(K,H,dt,ut=!1,V=!1,Et=0)=>{for(let Lt=Et;Lt<K.length;Lt++)I(K[Lt],H,dt,ut,V)},q=K=>{if(K.shapeFlag&6)return q(K.component.subTree);if(K.shapeFlag&128)return K.suspense.next();const H=g(K.anchor||K.el),dt=H&&H[IT];return dt?g(dt):H};let st=!1;const ct=(K,H,dt)=>{K==null?H._vnode&&I(H._vnode,null,null,!0):w(H._vnode||null,K,H,null,null,null,dt),H._vnode=K,st||(st=!0,ow(),pS(),st=!1)},At={p:w,um:I,m:kt,r:O,mt:et,mc:W,pc:tt,pbc:J,n:q,o:e};return{render:ct,hydrate:void 0,createApp:XT(ct)}}function R1({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function rN(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function zS(e,t,n=!1){const s=e.children,i=t.children;if(Se(s)&&Se(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=ya(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&zS(o,a)),a.type===Om&&(a.el=o.el)}}function oN(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=n[n.length-1],e[i]<c){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<c?r=a+1:o=a;c<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function US(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:US(t)}function pw(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const aN=Symbol.for("v-scx"),lN=()=>wr(aN);function $i(e,t,n){return qS(e,t,n)}function qS(e,t,n=yn){const{immediate:s,deep:i,flush:r,once:o}=n,a=ps({},n),l=t&&s||!t&&r!=="post";let c;if(xh){if(r==="sync"){const p=lN();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Qr,p.resume=Qr,p.pause=Qr,p}}const u=Ds;a.call=(p,y,w)=>Sr(p,u,y,w);let h=!1;r==="post"?a.scheduler=p=>{Ti(p,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(p,y)=>{y?p():Py(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const g=kT(e,t,a);return xh&&(c?c.push(g):l&&g()),g}function cN(e,t,n){const s=this.proxy,i=Un(e)?e.includes(".")?HS(s,e):()=>s[e]:e.bind(s,s);let r;Fe(t)?r=t:(r=t.handler,n=t);const o=cf(this),a=qS(i,r.bind(s),n);return o(),a}function HS(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const uN=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ir(t)}Modifiers`]||e[`${Ga(t)}Modifiers`];function dN(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||yn;let i=n;const r=t.startsWith("update:"),o=r&&uN(s,t.slice(7));o&&(o.trim&&(i=n.map(u=>Un(u)?u.trim():u)),o.number&&(i=n.map(Tg)));let a,l=s[a=sg(t)]||s[a=sg(ir(t))];!l&&r&&(l=s[a=sg(Ga(t))]),l&&Sr(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Sr(c,e,6,i)}}function WS(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!Fe(e)){const l=c=>{const u=WS(c,t,!0);u&&(a=!0,ps(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(bn(e)&&s.set(e,null),null):(Se(r)?r.forEach(l=>o[l]=null):ps(o,r),bn(e)&&s.set(e,o),o)}function Mm(e,t){return!e||!Sm(t)?!1:(t=t.slice(2).replace(/Once$/,""),cn(e,t[0].toLowerCase()+t.slice(1))||cn(e,Ga(t))||cn(e,t))}function gw(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:g,setupState:p,ctx:y,inheritAttrs:w}=e,S=Lg(e);let x,P;try{if(n.shapeFlag&4){const M=i||s,F=M;x=qr(c.call(F,M,u,h,p,g,y)),P=a}else{const M=t;x=qr(M.length>1?M(h,{attrs:a,slots:o,emit:l}):M(h,null)),P=t.props?a:hN(a)}}catch(M){Qd.length=0,Tm(M,e,1),x=ze(li)}let L=x;if(P&&w!==!1){const M=Object.keys(P),{shapeFlag:F}=L;M.length&&F&7&&(r&&M.some(yy)&&(P=fN(P,r)),L=ja(L,P,!1,!0))}return n.dirs&&(L=ja(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&Ul(L,n.transition),x=L,Lg(S),x}const hN=e=>{let t;for(const n in e)(n==="class"||n==="style"||Sm(n))&&((t||(t={}))[n]=e[n]);return t},fN=(e,t)=>{const n={};for(const s in e)(!yy(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function pN(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?mw(s,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const g=u[h];if(o[g]!==s[g]&&!Mm(c,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?mw(s,o,c):!0:!!o;return!1}function mw(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!Mm(n,r))return!0}return!1}function gN({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const GS=e=>e.__isSuspense;function mN(e,t){t&&t.pendingBranch?Se(e)?t.effects.push(...e):t.effects.push(e):ET(e)}const ye=Symbol.for("v-fgt"),Om=Symbol.for("v-txt"),li=Symbol.for("v-cmt"),og=Symbol.for("v-stc"),Qd=[];let Fi=null;function at(e=!1){Qd.push(Fi=e?null:[])}function vN(){Qd.pop(),Fi=Qd[Qd.length-1]||null}let bh=1;function vw(e,t=!1){bh+=e,e<0&&Fi&&t&&(Fi.hasOnce=!0)}function KS(e){return e.dynamicChildren=bh>0?Fi||Xc:null,vN(),bh>0&&Fi&&Fi.push(e),e}function ft(e,t,n,s,i,r){return KS(d(e,t,n,s,i,r,!0))}function cs(e,t,n,s,i){return KS(ze(e,t,n,s,i,!0))}function wh(e){return e?e.__v_isVNode===!0:!1}function Cl(e,t){return e.type===t.type&&e.key===t.key}const YS=({key:e})=>e??null,ag=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Un(e)||Xs(e)||Fe(e)?{i:_s,r:e,k:t,f:!!n}:e:null);function d(e,t=null,n=null,s=0,i=null,r=e===ye?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&YS(t),ref:t&&ag(t),scopeId:mS,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_s};return a?(Ny(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Un(n)?8:16),bh>0&&!o&&Fi&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Fi.push(l),l}const ze=yN;function yN(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===PS)&&(e=li),wh(e)){const a=ja(e,t,!0);return n&&Ny(a,n),bh>0&&!r&&Fi&&(a.shapeFlag&6?Fi[Fi.indexOf(e)]=a:Fi.push(a)),a.patchFlag=-2,a}if(EN(e)&&(e=e.__vccOpts),t){t=bN(t);let{class:a,style:l}=t;a&&!Un(a)&&(t.class=ve(a)),bn(l)&&(rf(l)&&!Se(l)&&(l=ps({},l)),t.style=Wr(l))}const o=Un(e)?1:GS(e)?128:vS(e)?64:bn(e)?4:Fe(e)?2:0;return d(e,t,n,s,i,o,r,!0)}function bN(e){return e?rf(e)||OS(e)?ps({},e):e:null}function ja(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Rm(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&YS(c),ref:t&&t.ref?n&&r?Se(r)?r.concat(ag(t)):[r,ag(t)]:ag(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ye?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ja(e.ssContent),ssFallback:e.ssFallback&&ja(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&Ul(u,l.clone(u)),u}function Vt(e=" ",t=0){return ze(Om,null,e,t)}function $a(e,t){const n=ze(og,null,e);return n.staticCount=t,n}function Ut(e="",t=!1){return t?(at(),cs(li,null,e)):ze(li,null,e)}function qr(e){return e==null||typeof e=="boolean"?ze(li):Se(e)?ze(ye,null,e.slice()):wh(e)?ya(e):ze(Om,null,String(e))}function ya(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ja(e)}function Ny(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Se(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Ny(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!OS(t)?t._ctx=_s:i===3&&_s&&(_s.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Fe(t)?(t={default:t,_ctx:_s},n=32):(t=String(t),s&64?(n=16,t=[Vt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Rm(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=ve([t.class,s.class]));else if(i==="style")t.style=Wr([t.style,s.style]);else if(Sm(i)){const r=t[i],o=s[i];o&&r!==o&&!(Se(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Br(e,t,n,s=null){Sr(e,t,7,[n,s])}const wN=DS();let xN=0;function _N(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||wN,r={uid:xN++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ZI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:FS(s,i),emitsOptions:WS(s,i),emit:null,emitted:null,propsDefaults:yn,inheritAttrs:s.inheritAttrs,ctx:yn,data:yn,props:yn,attrs:yn,slots:yn,refs:yn,setupState:yn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=dN.bind(null,r),e.ce&&e.ce(r),r}let Ds=null;const XS=()=>Ds||_s;let Rg,X2;{const e=Pm(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Rg=t("__VUE_INSTANCE_SETTERS__",n=>Ds=n),X2=t("__VUE_SSR_SETTERS__",n=>xh=n)}const cf=e=>{const t=Ds;return Rg(e),e.scope.on(),()=>{e.scope.off(),Rg(t)}},yw=()=>{Ds&&Ds.scope.off(),Rg(null)};function QS(e){return e.vnode.shapeFlag&4}let xh=!1;function SN(e,t=!1,n=!1){t&&X2(t);const{props:s,children:i}=e.vnode,r=QS(e);QT(e,s,r,t),eN(e,i,n);const o=r?CN(e,t):void 0;return t&&X2(!1),o}function CN(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,UT);const{setup:s}=n;if(s){Ka();const i=e.setupContext=s.length>1?AN(e):null,r=cf(e),o=af(s,e,0,[e.props,i]),a=V3(o);if(Ya(),r(),(a||e.sp)&&!tu(e)&&SS(e),a){if(o.then(yw,yw),t)return o.then(l=>{bw(e,l)}).catch(l=>{Tm(l,e,0)});e.asyncDep=o}else bw(e,o)}else JS(e)}function bw(e,t,n){Fe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bn(t)&&(e.setupState=dS(t)),JS(e)}function JS(e,t,n){const s=e.type;e.render||(e.render=s.render||Qr);{const i=cf(e);Ka();try{qT(e)}finally{Ya(),i()}}}const kN={get(e,t){return Us(e,"get",""),e[t]}};function AN(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,kN),slots:e.slots,emit:e.emit,expose:t}}function Fm(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(dS(bT(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xd)return Xd[n](e)},has(t,n){return n in t||n in Xd}})):e.proxy}function PN(e,t=!0){return Fe(e)?e.displayName||e.name:e.name||t&&e.__name}function EN(e){return Fe(e)&&"__vccOpts"in e}const de=(e,t)=>ST(e,t,xh);function bu(e,t,n){const s=arguments.length;return s===2?bn(t)&&!Se(t)?wh(t)?ze(e,null,[t]):ze(e,t):ze(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&wh(n)&&(n=[n]),ze(e,t,n))}const ZS="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Q2;const ww=typeof window<"u"&&window.trustedTypes;if(ww)try{Q2=ww.createPolicy("vue",{createHTML:e=>e})}catch{}const tC=Q2?e=>Q2.createHTML(e):e=>e,IN="http://www.w3.org/2000/svg",TN="http://www.w3.org/1998/Math/MathML",Io=typeof document<"u"?document:null,xw=Io&&Io.createElement("template"),NN={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Io.createElementNS(IN,e):t==="mathml"?Io.createElementNS(TN,e):n?Io.createElement(e,{is:n}):Io.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Io.createTextNode(e),createComment:e=>Io.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Io.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{xw.innerHTML=tC(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=xw.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ca="transition",_d="animation",wu=Symbol("_vtc"),eC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nC=ps({},bS,eC),DN=e=>(e.displayName="Transition",e.props=nC,e),wi=DN((e,{slots:t})=>bu(NT,sC(e),t)),pl=(e,t=[])=>{Se(e)?e.forEach(n=>n(...t)):e&&e(...t)},_w=e=>e?Se(e)?e.some(t=>t.length>1):e.length>1:!1;function sC(e){const t={};for(const A in e)A in eC||(t[A]=e[A]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,y=LN(i),w=y&&y[0],S=y&&y[1],{onBeforeEnter:x,onEnter:P,onEnterCancelled:L,onLeave:M,onLeaveCancelled:F,onBeforeAppear:pt=x,onAppear:Y=P,onAppearCancelled:W=L}=t,it=(A,Q,et,mt)=>{A._enterCancelled=mt,ga(A,Q?u:a),ga(A,Q?c:o),et&&et()},J=(A,Q)=>{A._isLeaving=!1,ga(A,h),ga(A,p),ga(A,g),Q&&Q()},_=A=>(Q,et)=>{const mt=A?Y:P,ht=()=>it(Q,A,et);pl(mt,[Q,ht]),Sw(()=>{ga(Q,A?l:r),jr(Q,A?u:a),_w(mt)||Cw(Q,s,w,ht)})};return ps(t,{onBeforeEnter(A){pl(x,[A]),jr(A,r),jr(A,o)},onBeforeAppear(A){pl(pt,[A]),jr(A,l),jr(A,c)},onEnter:_(!1),onAppear:_(!0),onLeave(A,Q){A._isLeaving=!0;const et=()=>J(A,Q);jr(A,h),A._enterCancelled?(jr(A,g),J2()):(J2(),jr(A,g)),Sw(()=>{A._isLeaving&&(ga(A,h),jr(A,p),_w(M)||Cw(A,s,S,et))}),pl(M,[A,et])},onEnterCancelled(A){it(A,!1,void 0,!0),pl(L,[A])},onAppearCancelled(A){it(A,!0,void 0,!0),pl(W,[A])},onLeaveCancelled(A){J(A),pl(F,[A])}})}function LN(e){if(e==null)return null;if(bn(e))return[F1(e.enter),F1(e.leave)];{const t=F1(e);return[t,t]}}function F1(e){return qI(e)}function jr(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[wu]||(e[wu]=new Set)).add(t)}function ga(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[wu];n&&(n.delete(t),n.size||(e[wu]=void 0))}function Sw(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let MN=0;function Cw(e,t,n,s){const i=e._endId=++MN,r=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=iC(e,t);if(!o)return s();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,g),r()},g=p=>{p.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,g)}function iC(e,t){const n=window.getComputedStyle(e),s=y=>(n[y]||"").split(", "),i=s(`${ca}Delay`),r=s(`${ca}Duration`),o=kw(i,r),a=s(`${_d}Delay`),l=s(`${_d}Duration`),c=kw(a,l);let u=null,h=0,g=0;t===ca?o>0&&(u=ca,h=o,g=r.length):t===_d?c>0&&(u=_d,h=c,g=l.length):(h=Math.max(o,c),u=h>0?o>c?ca:_d:null,g=u?u===ca?r.length:l.length:0);const p=u===ca&&/\b(transform|all)(,|$)/.test(s(`${ca}Property`).toString());return{type:u,timeout:h,propCount:g,hasTransform:p}}function kw(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Aw(n)+Aw(e[s])))}function Aw(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function J2(){return document.body.offsetHeight}function ON(e,t,n){const s=e[wu];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Pw=Symbol("_vod"),RN=Symbol("_vsh"),FN=Symbol(""),BN=/(^|;)\s*display\s*:/;function jN(e,t,n){const s=e.style,i=Un(n);let r=!1;if(n&&!i){if(t)if(Un(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&lg(s,a,"")}else for(const o in t)n[o]==null&&lg(s,o,"");for(const o in n)o==="display"&&(r=!0),lg(s,o,n[o])}else if(i){if(t!==n){const o=s[FN];o&&(n+=";"+o),s.cssText=n,r=BN.test(n)}}else t&&e.removeAttribute("style");Pw in e&&(e[Pw]=r?s.display:"",e[RN]&&(s.display="none"))}const Ew=/\s*!important$/;function lg(e,t,n){if(Se(n))n.forEach(s=>lg(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=$N(e,t);Ew.test(n)?e.setProperty(Ga(s),n.replace(Ew,""),"important"):e[s]=n}}const Iw=["Webkit","Moz","ms"],B1={};function $N(e,t){const n=B1[t];if(n)return n;let s=ir(t);if(s!=="filter"&&s in e)return B1[t]=s;s=Am(s);for(let i=0;i<Iw.length;i++){const r=Iw[i]+s;if(r in e)return B1[t]=r}return t}const Tw="http://www.w3.org/1999/xlink";function Nw(e,t,n,s,i,r=XI(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Tw,t.slice(6,t.length)):e.setAttributeNS(Tw,t,n):n==null||r&&!H3(n)?e.removeAttribute(t):e.setAttribute(t,r?"":_r(n)?String(n):n)}function Dw(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?tC(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=H3(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function kl(e,t,n,s){e.addEventListener(t,n,s)}function VN(e,t,n,s){e.removeEventListener(t,n,s)}const Lw=Symbol("_vei");function zN(e,t,n,s,i=null){const r=e[Lw]||(e[Lw]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=UN(t);if(s){const c=r[t]=WN(s,i);kl(e,a,c,l)}else o&&(VN(e,a,o,l),r[t]=void 0)}}const Mw=/(?:Once|Passive|Capture)$/;function UN(e){let t;if(Mw.test(e)){t={};let s;for(;s=e.match(Mw);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ga(e.slice(2)),t]}let j1=0;const qN=Promise.resolve(),HN=()=>j1||(qN.then(()=>j1=0),j1=Date.now());function WN(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Sr(GN(s,n.value),t,5,[s])};return n.value=e,n.attached=HN(),n}function GN(e,t){if(Se(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Ow=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,KN=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?ON(e,s,o):t==="style"?jN(e,n,s):Sm(t)?yy(t)||zN(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):YN(e,t,s,o))?(Dw(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Nw(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Un(s))?Dw(e,ir(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Nw(e,t,s,o))};function YN(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ow(t)&&Fe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ow(t)&&Un(n)?!1:t in e}const rC=new WeakMap,oC=new WeakMap,Fg=Symbol("_moveCb"),Rw=Symbol("_enterCb"),XN=e=>(delete e.props.mode,e),QN=XN({name:"TransitionGroup",props:ps({},nC,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=XS(),s=yS();let i,r;return kS(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!n8(i[0].el,n.vnode.el,o))return;i.forEach(ZN),i.forEach(t8);const a=i.filter(e8);J2(),a.forEach(l=>{const c=l.el,u=c.style;jr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c[Fg]=g=>{g&&g.target!==c||(!g||/transform$/.test(g.propertyName))&&(c.removeEventListener("transitionend",h),c[Fg]=null,ga(c,o))};c.addEventListener("transitionend",h)})}),()=>{const o=Ge(e),a=sC(o);let l=o.tag||ye;if(i=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(i.push(u),Ul(u,yh(u,a,s,n)),rC.set(u,u.el.getBoundingClientRect()))}r=t.default?Ey(t.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&Ul(u,yh(u,a,s,n))}return ze(l,null,r)}}}),JN=QN;function ZN(e){const t=e.el;t[Fg]&&t[Fg](),t[Rw]&&t[Rw]()}function t8(e){oC.set(e,e.el.getBoundingClientRect())}function e8(e){const t=rC.get(e),n=oC.get(e),s=t.left-n.left,i=t.top-n.top;if(s||i){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",e}}function n8(e,t,n){const s=e.cloneNode(),i=e[wu];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(s);const{hasTransform:o}=iC(s);return r.removeChild(s),o}const Bg=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Se(t)?n=>ig(t,n):t};function s8(e){e.target.composing=!0}function Fw(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const nu=Symbol("_assign"),ke={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[nu]=Bg(i);const r=s||i.props&&i.props.type==="number";kl(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Tg(a)),e[nu](a)}),n&&kl(e,"change",()=>{e.value=e.value.trim()}),t||(kl(e,"compositionstart",s8),kl(e,"compositionend",Fw),kl(e,"change",Fw))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[nu]=Bg(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Tg(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Vn={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Cm(t);kl(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Tg(jg(o)):jg(o));e[nu](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,lf(()=>{e._assigning=!1})}),e[nu]=Bg(s)},mounted(e,{value:t}){Bw(e,t)},beforeUpdate(e,t,n){e[nu]=Bg(n)},updated(e,{value:t}){e._assigning||Bw(e,t)}};function Bw(e,t){const n=e.multiple,s=Se(t);if(!(n&&!s&&!Cm(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=jg(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=JI(t,a)>-1}else o.selected=t.has(a);else if(Em(jg(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function jg(e){return"_value"in e?e._value:e.value}const i8=["ctrl","shift","alt","meta"],r8={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>i8.some(n=>e[`${n}Key`]&&!t.includes(n))},gr=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=r8[t[o]];if(a&&a(i,t))return}return e(i,...r)})},o8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},a8=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=i=>{if(!("key"in i))return;const r=Ga(i.key);if(t.some(o=>o===r||o8[o]===r))return e(i)})},l8=ps({patchProp:KN},NN);let jw;function c8(){return jw||(jw=sN(l8))}const aC=(...e)=>{const t=c8().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=d8(s);if(!i)return;const r=t._component;!Fe(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,u8(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function u8(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function d8(e){return Un(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const zc=typeof document<"u";function lC(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function h8(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&lC(e.default)}const ln=Object.assign;function $1(e,t){const n={};for(const s in t){const i=t[s];n[s]=Cr(i)?i.map(e):e(i)}return n}const Jd=()=>{},Cr=Array.isArray,cC=/#/g,f8=/&/g,p8=/\//g,g8=/=/g,m8=/\?/g,uC=/\+/g,v8=/%5B/g,y8=/%5D/g,dC=/%5E/g,b8=/%60/g,hC=/%7B/g,w8=/%7C/g,fC=/%7D/g,x8=/%20/g;function Dy(e){return encodeURI(""+e).replace(w8,"|").replace(v8,"[").replace(y8,"]")}function _8(e){return Dy(e).replace(hC,"{").replace(fC,"}").replace(dC,"^")}function Z2(e){return Dy(e).replace(uC,"%2B").replace(x8,"+").replace(cC,"%23").replace(f8,"%26").replace(b8,"`").replace(hC,"{").replace(fC,"}").replace(dC,"^")}function S8(e){return Z2(e).replace(g8,"%3D")}function C8(e){return Dy(e).replace(cC,"%23").replace(m8,"%3F")}function k8(e){return e==null?"":C8(e).replace(p8,"%2F")}function _h(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const A8=/\/$/,P8=e=>e.replace(A8,"");function V1(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=N8(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:_h(o)}}function E8(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $w(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function I8(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&xu(t.matched[s],n.matched[i])&&pC(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function pC(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!T8(e[n],t[n]))return!1;return!0}function T8(e,t){return Cr(e)?Vw(e,t):Cr(t)?Vw(t,e):e===t}function Vw(e,t){return Cr(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function N8(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const ua={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Sh;(function(e){e.pop="pop",e.push="push"})(Sh||(Sh={}));var Zd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zd||(Zd={}));function D8(e){if(!e)if(zc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),P8(e)}const L8=/^[^#]+#/;function M8(e,t){return e.replace(L8,"#")+t}function O8(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Bm=()=>({left:window.scrollX,top:window.scrollY});function R8(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=O8(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function zw(e,t){return(history.state?history.state.position-t:-1)+e}const tv=new Map;function F8(e,t){tv.set(e,t)}function B8(e){const t=tv.get(e);return tv.delete(e),t}let j8=()=>location.protocol+"//"+location.host;function gC(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),$w(l,"")}return $w(n,e)+s+i}function $8(e,t,n,s){let i=[],r=[],o=null;const a=({state:g})=>{const p=gC(e,location),y=n.value,w=t.value;let S=0;if(g){if(n.value=p,t.value=g,o&&o===y){o=null;return}S=w?g.position-w.position:0}else s(p);i.forEach(x=>{x(n.value,y,{delta:S,type:Sh.pop,direction:S?S>0?Zd.forward:Zd.back:Zd.unknown})})};function l(){o=n.value}function c(g){i.push(g);const p=()=>{const y=i.indexOf(g);y>-1&&i.splice(y,1)};return r.push(p),p}function u(){const{history:g}=window;g.state&&g.replaceState(ln({},g.state,{scroll:Bm()}),"")}function h(){for(const g of r)g();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Uw(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?Bm():null}}function V8(e){const{history:t,location:n}=window,s={value:gC(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=e.indexOf("#"),g=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:j8()+e+l;try{t[u?"replaceState":"pushState"](c,"",g),i.value=c}catch(p){console.error(p),n[u?"replace":"assign"](g)}}function o(l,c){const u=ln({},t.state,Uw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=ln({},i.value,t.state,{forward:l,scroll:Bm()});r(u.current,u,!0);const h=ln({},Uw(s.value,l,null),{position:u.position+1},c);r(l,h,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function z8(e){e=D8(e);const t=V8(e),n=$8(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=ln({location:"",base:e,go:s,createHref:M8.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function U8(e){return typeof e=="string"||e&&typeof e=="object"}function mC(e){return typeof e=="string"||typeof e=="symbol"}const vC=Symbol("");var qw;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(qw||(qw={}));function _u(e,t){return ln(new Error,{type:e,[vC]:!0},t)}function Co(e,t){return e instanceof Error&&vC in e&&(t==null||!!(e.type&t))}const Hw="[^/]+?",q8={sensitive:!1,strict:!1,start:!0,end:!0},H8=/[.+*?^${}()[\]/\\]/g;function W8(e,t){const n=ln({},q8,t),s=[];let i=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const g=c[h];let p=40+(n.sensitive?.25:0);if(g.type===0)h||(i+="/"),i+=g.value.replace(H8,"\\$&"),p+=40;else if(g.type===1){const{value:y,repeatable:w,optional:S,regexp:x}=g;r.push({name:y,repeatable:w,optional:S});const P=x||Hw;if(P!==Hw){p+=10;try{new RegExp(`(${P})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${y}" (${P}): `+M.message)}}let L=w?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;h||(L=S&&c.length<2?`(?:/${L})`:"/"+L),S&&(L+="?"),i+=L,p+=20,S&&(p+=-8),w&&(p+=-20),P===".*"&&(p+=-50)}u.push(p)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let g=1;g<u.length;g++){const p=u[g]||"",y=r[g-1];h[y.name]=p&&y.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const g of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of g)if(p.type===0)u+=p.value;else if(p.type===1){const{value:y,repeatable:w,optional:S}=p,x=y in c?c[y]:"";if(Cr(x)&&!w)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const P=Cr(x)?x.join("/"):x;if(!P)if(S)g.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);u+=P}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function G8(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yC(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=G8(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Ww(s))return 1;if(Ww(i))return-1}return i.length-s.length}function Ww(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const K8={type:0,value:""},Y8=/[a-zA-Z0-9_]/;function X8(e){if(!e)return[[]];if(e==="/")return[[K8]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function g(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):g();break;case 4:g(),n=s;break;case 1:l==="("?n=2:Y8.test(l)?g():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function Q8(e,t,n){const s=W8(X8(e.path),n),i=ln(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function J8(e,t){const n=[],s=new Map;t=Xw({strict:!1,end:!0,sensitive:!1},t);function i(h){return s.get(h)}function r(h,g,p){const y=!p,w=Kw(h);w.aliasOf=p&&p.record;const S=Xw(t,h),x=[w];if("alias"in h){const M=typeof h.alias=="string"?[h.alias]:h.alias;for(const F of M)x.push(Kw(ln({},w,{components:p?p.record.components:w.components,path:F,aliasOf:p?p.record:w})))}let P,L;for(const M of x){const{path:F}=M;if(g&&F[0]!=="/"){const pt=g.record.path,Y=pt[pt.length-1]==="/"?"":"/";M.path=g.record.path+(F&&Y+F)}if(P=Q8(M,g,S),p?p.alias.push(P):(L=L||P,L!==P&&L.alias.push(P),y&&h.name&&!Yw(P)&&o(h.name)),bC(P)&&l(P),w.children){const pt=w.children;for(let Y=0;Y<pt.length;Y++)r(pt[Y],P,p&&p.children[Y])}p=p||P}return L?()=>{o(L)}:Jd}function o(h){if(mC(h)){const g=s.get(h);g&&(s.delete(h),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(h);g>-1&&(n.splice(g,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const g=eD(h,n);n.splice(g,0,h),h.record.name&&!Yw(h)&&s.set(h.record.name,h)}function c(h,g){let p,y={},w,S;if("name"in h&&h.name){if(p=s.get(h.name),!p)throw _u(1,{location:h});S=p.record.name,y=ln(Gw(g.params,p.keys.filter(L=>!L.optional).concat(p.parent?p.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),h.params&&Gw(h.params,p.keys.map(L=>L.name))),w=p.stringify(y)}else if(h.path!=null)w=h.path,p=n.find(L=>L.re.test(w)),p&&(y=p.parse(w),S=p.record.name);else{if(p=g.name?s.get(g.name):n.find(L=>L.re.test(g.path)),!p)throw _u(1,{location:h,currentLocation:g});S=p.record.name,y=ln({},g.params,h.params),w=p.stringify(y)}const x=[];let P=p;for(;P;)x.unshift(P.record),P=P.parent;return{name:S,path:w,params:y,matched:x,meta:tD(x)}}e.forEach(h=>r(h));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Gw(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Kw(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Z8(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Z8(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Yw(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function tD(e){return e.reduce((t,n)=>ln(t,n.meta),{})}function Xw(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function eD(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;yC(e,t[r])<0?s=r:n=r+1}const i=nD(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function nD(e){let t=e;for(;t=t.parent;)if(bC(t)&&yC(e,t)===0)return t}function bC({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function sD(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(uC," "),o=r.indexOf("="),a=_h(o<0?r:r.slice(0,o)),l=o<0?null:_h(r.slice(o+1));if(a in t){let c=t[a];Cr(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Qw(e){let t="";for(let n in e){const s=e[n];if(n=S8(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Cr(s)?s.map(r=>r&&Z2(r)):[s&&Z2(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function iD(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Cr(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const rD=Symbol(""),Jw=Symbol(""),jm=Symbol(""),Ly=Symbol(""),ev=Symbol("");function Sd(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ba(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=g=>{g===!1?l(_u(4,{from:n,to:t})):g instanceof Error?l(g):U8(g)?l(_u(2,{from:t,to:g})):(o&&s.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},u=r(()=>e.call(s&&s.instances[i],t,n,c));let h=Promise.resolve(u);e.length<3&&(h=h.then(c)),h.catch(g=>l(g))})}function z1(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(lC(l)){const u=(l.__vccOpts||l)[t];u&&r.push(ba(u,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=h8(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&ba(p,n,s,o,a,i)()}))}}return r}function Zw(e){const t=wr(jm),n=wr(Ly),s=de(()=>{const l=Hs(e.to);return t.resolve(l)}),i=de(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const g=h.findIndex(xu.bind(null,u));if(g>-1)return g;const p=tx(l[c-2]);return c>1&&tx(u)===p&&h[h.length-1].path!==p?h.findIndex(xu.bind(null,l[c-2])):g}),r=de(()=>i.value>-1&&uD(n.params,s.value.params)),o=de(()=>i.value>-1&&i.value===n.matched.length-1&&pC(n.params,s.value.params));function a(l={}){if(cD(l)){const c=t[Hs(e.replace)?"replace":"push"](Hs(e.to)).catch(Jd);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:de(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function oD(e){return e.length===1?e[0]:e}const aD=Ir({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Zw,setup(e,{slots:t}){const n=sf(Zw(e)),{options:s}=wr(jm),i=de(()=>({[ex(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ex(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&oD(t.default(n));return e.custom?r:bu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),lD=aD;function cD(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function uD(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Cr(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function tx(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ex=(e,t,n)=>e??t??n,dD=Ir({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=wr(ev),i=de(()=>e.route||s.value),r=wr(Jw,0),o=de(()=>{let c=Hs(r);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=de(()=>i.value.matched[o.value]);rg(Jw,de(()=>o.value+1)),rg(rD,a),rg(ev,i);const l=Gt();return $i(()=>[l.value,a.value,e.name],([c,u,h],[g,p,y])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===g&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!xu(u,p)||!g)&&(u.enterCallbacks[h]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,h=a.value,g=h&&h.components[u];if(!g)return nx(n.default,{Component:g,route:c});const p=h.props[u],y=p?p===!0?c.params:typeof p=="function"?p(c):p:null,S=bu(g,ln({},y,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return nx(n.default,{Component:S,route:c})||S}}});function nx(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const hD=dD;function fD(e){const t=J8(e.routes,e),n=e.parseQuery||sD,s=e.stringifyQuery||Qw,i=e.history,r=Sd(),o=Sd(),a=Sd(),l=of(ua);let c=ua;zc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$1.bind(null,q=>""+q),h=$1.bind(null,k8),g=$1.bind(null,_h);function p(q,st){let ct,At;return mC(q)?(ct=t.getRecordMatcher(q),At=st):At=q,t.addRoute(At,ct)}function y(q){const st=t.getRecordMatcher(q);st&&t.removeRoute(st)}function w(){return t.getRoutes().map(q=>q.record)}function S(q){return!!t.getRecordMatcher(q)}function x(q,st){if(st=ln({},st||l.value),typeof q=="string"){const dt=V1(n,q,st.path),ut=t.resolve({path:dt.path},st),V=i.createHref(dt.fullPath);return ln(dt,ut,{params:g(ut.params),hash:_h(dt.hash),redirectedFrom:void 0,href:V})}let ct;if(q.path!=null)ct=ln({},q,{path:V1(n,q.path,st.path).path});else{const dt=ln({},q.params);for(const ut in dt)dt[ut]==null&&delete dt[ut];ct=ln({},q,{params:h(dt)}),st.params=h(st.params)}const At=t.resolve(ct,st),Dt=q.hash||"";At.params=u(g(At.params));const K=E8(s,ln({},q,{hash:_8(Dt),path:At.path})),H=i.createHref(K);return ln({fullPath:K,hash:Dt,query:s===Qw?iD(q.query):q.query||{}},At,{redirectedFrom:void 0,href:H})}function P(q){return typeof q=="string"?V1(n,q,l.value.path):ln({},q)}function L(q,st){if(c!==q)return _u(8,{from:st,to:q})}function M(q){return Y(q)}function F(q){return M(ln(P(q),{replace:!0}))}function pt(q){const st=q.matched[q.matched.length-1];if(st&&st.redirect){const{redirect:ct}=st;let At=typeof ct=="function"?ct(q):ct;return typeof At=="string"&&(At=At.includes("?")||At.includes("#")?At=P(At):{path:At},At.params={}),ln({query:q.query,hash:q.hash,params:At.path!=null?{}:q.params},At)}}function Y(q,st){const ct=c=x(q),At=l.value,Dt=q.state,K=q.force,H=q.replace===!0,dt=pt(ct);if(dt)return Y(ln(P(dt),{state:typeof dt=="object"?ln({},Dt,dt.state):Dt,force:K,replace:H}),st||ct);const ut=ct;ut.redirectedFrom=st;let V;return!K&&I8(s,At,ct)&&(V=_u(16,{to:ut,from:At}),kt(At,At,!0,!1)),(V?Promise.resolve(V):J(ut,At)).catch(Et=>Co(Et)?Co(Et,2)?Et:rt(Et):tt(Et,ut,At)).then(Et=>{if(Et){if(Co(Et,2))return Y(ln({replace:H},P(Et.to),{state:typeof Et.to=="object"?ln({},Dt,Et.to.state):Dt,force:K}),st||ut)}else Et=A(ut,At,!0,H,Dt);return _(ut,At,Et),Et})}function W(q,st){const ct=L(q,st);return ct?Promise.reject(ct):Promise.resolve()}function it(q){const st=E.values().next().value;return st&&typeof st.runWithContext=="function"?st.runWithContext(q):q()}function J(q,st){let ct;const[At,Dt,K]=pD(q,st);ct=z1(At.reverse(),"beforeRouteLeave",q,st);for(const dt of At)dt.leaveGuards.forEach(ut=>{ct.push(ba(ut,q,st))});const H=W.bind(null,q,st);return ct.push(H),Z(ct).then(()=>{ct=[];for(const dt of r.list())ct.push(ba(dt,q,st));return ct.push(H),Z(ct)}).then(()=>{ct=z1(Dt,"beforeRouteUpdate",q,st);for(const dt of Dt)dt.updateGuards.forEach(ut=>{ct.push(ba(ut,q,st))});return ct.push(H),Z(ct)}).then(()=>{ct=[];for(const dt of K)if(dt.beforeEnter)if(Cr(dt.beforeEnter))for(const ut of dt.beforeEnter)ct.push(ba(ut,q,st));else ct.push(ba(dt.beforeEnter,q,st));return ct.push(H),Z(ct)}).then(()=>(q.matched.forEach(dt=>dt.enterCallbacks={}),ct=z1(K,"beforeRouteEnter",q,st,it),ct.push(H),Z(ct))).then(()=>{ct=[];for(const dt of o.list())ct.push(ba(dt,q,st));return ct.push(H),Z(ct)}).catch(dt=>Co(dt,8)?dt:Promise.reject(dt))}function _(q,st,ct){a.list().forEach(At=>it(()=>At(q,st,ct)))}function A(q,st,ct,At,Dt){const K=L(q,st);if(K)return K;const H=st===ua,dt=zc?history.state:{};ct&&(At||H?i.replace(q.fullPath,ln({scroll:H&&dt&&dt.scroll},Dt)):i.push(q.fullPath,Dt)),l.value=q,kt(q,st,ct,H),rt()}let Q;function et(){Q||(Q=i.listen((q,st,ct)=>{if(!R.listening)return;const At=x(q),Dt=pt(At);if(Dt){Y(ln(Dt,{replace:!0,force:!0}),At).catch(Jd);return}c=At;const K=l.value;zc&&F8(zw(K.fullPath,ct.delta),Bm()),J(At,K).catch(H=>Co(H,12)?H:Co(H,2)?(Y(ln(P(H.to),{force:!0}),At).then(dt=>{Co(dt,20)&&!ct.delta&&ct.type===Sh.pop&&i.go(-1,!1)}).catch(Jd),Promise.reject()):(ct.delta&&i.go(-ct.delta,!1),tt(H,At,K))).then(H=>{H=H||A(At,K,!1),H&&(ct.delta&&!Co(H,8)?i.go(-ct.delta,!1):ct.type===Sh.pop&&Co(H,20)&&i.go(-1,!1)),_(At,K,H)}).catch(Jd)}))}let mt=Sd(),ht=Sd(),gt;function tt(q,st,ct){rt(q);const At=ht.list();return At.length?At.forEach(Dt=>Dt(q,st,ct)):console.error(q),Promise.reject(q)}function T(){return gt&&l.value!==ua?Promise.resolve():new Promise((q,st)=>{mt.add([q,st])})}function rt(q){return gt||(gt=!q,et(),mt.list().forEach(([st,ct])=>q?ct(q):st()),mt.reset()),q}function kt(q,st,ct,At){const{scrollBehavior:Dt}=e;if(!zc||!Dt)return Promise.resolve();const K=!ct&&B8(zw(q.fullPath,0))||(At||!ct)&&history.state&&history.state.scroll||null;return lf().then(()=>Dt(q,st,K)).then(H=>H&&R8(H)).catch(H=>tt(H,q,st))}const I=q=>i.go(q);let O;const E=new Set,R={currentRoute:l,listening:!0,addRoute:p,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:w,resolve:x,options:e,push:M,replace:F,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ht.add,isReady:T,install(q){const st=this;q.component("RouterLink",lD),q.component("RouterView",hD),q.config.globalProperties.$router=st,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Hs(l)}),zc&&!O&&l.value===ua&&(O=!0,M(i.location).catch(Dt=>{}));const ct={};for(const Dt in ua)Object.defineProperty(ct,Dt,{get:()=>l.value[Dt],enumerable:!0});q.provide(jm,st),q.provide(Ly,lS(ct)),q.provide(ev,l);const At=q.unmount;E.add(q),q.unmount=function(){E.delete(q),E.size<1&&(c=ua,Q&&Q(),Q=null,l.value=ua,O=!1,gt=!1),At()}}};function Z(q){return q.reduce((st,ct)=>st.then(()=>it(ct)),Promise.resolve())}return R}function pD(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(c=>xu(c,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>xu(c,l))||i.push(l))}return[n,s,i]}function wC(){return wr(jm)}function gD(e){return wr(Ly)}var sx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},mD=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},_C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,c=l?e[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let g=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(g=64)),s.push(n[u],n[h],n[g],n[p])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xC(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):mD(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const c=i<e.length?n[e.charAt(i)]:64;++i;const h=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||c==null||h==null)throw new vD;const g=r<<2|a>>4;if(s.push(g),c!==64){const p=a<<4&240|c>>2;if(s.push(p),h!==64){const y=c<<6&192|h;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class vD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yD=function(e){const t=xC(e);return _C.encodeByteArray(t,!0)},$g=function(e){return yD(e).replace(/\./g,"")},SC=function(e){try{return _C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=()=>bD().__FIREBASE_DEFAULTS__,xD=()=>{if(typeof process>"u"||typeof sx>"u")return;const e=sx.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_D=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&SC(e[1]);return t&&JSON.parse(t)},My=()=>{try{return wD()||xD()||_D()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},CC=e=>{var t,n;return(n=(t=My())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},SD=e=>{const t=CC(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},kC=()=>{var e;return(e=My())===null||e===void 0?void 0:e.config},AC=e=>{var t;return(t=My())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$g(JSON.stringify(n)),$g(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function PC(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function PD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ED(){const e=ti();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function EC(){try{return typeof indexedDB=="object"}catch{return!1}}function IC(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}function ID(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="FirebaseError";class Tr extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=TD,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?ND(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tr(i,a,s)}}function ND(e,t){return e.replace(DD,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const DD=/\{\$([^}]+)}/g;function LD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ch(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(ix(r)&&ix(o)){if(!Ch(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function ix(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Md(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function Od(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function MD(e,t){const n=new OD(e,t);return n.subscribe.bind(n)}class OD{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");RD(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=U1),i.error===void 0&&(i.error=U1),i.complete===void 0&&(i.complete=U1);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RD(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function U1(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1e3,BD=2,jD=4*60*60*1e3,$D=.5;function rx(e,t=FD,n=BD){const s=t*Math.pow(n,e),i=Math.round($D*s*(Math.random()-.5)*2);return Math.min(jD,s+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(e){return e&&e._delegate?e._delegate:e}class kr{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new CD;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(UD(t))try{this.getOrInitializeService({instanceIdentifier:wl})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=wl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wl){return this.instances.has(t)}getOptions(t=wl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zD(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=wl){return this.component?this.component.multipleInstances?t:wl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zD(e){return e===wl?void 0:e}function UD(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new VD(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(sn||(sn={}));const HD={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},WD=sn.INFO,GD={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},KD=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=GD[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class $m{constructor(t){this.name=t,this._logLevel=WD,this._logHandler=KD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in sn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?HD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...t),this._logHandler(this,sn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...t),this._logHandler(this,sn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,sn.INFO,...t),this._logHandler(this,sn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,sn.WARN,...t),this._logHandler(this,sn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...t),this._logHandler(this,sn.ERROR,...t)}}const YD=(e,t)=>t.some(n=>e instanceof n);let ox,ax;function XD(){return ox||(ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QD(){return ax||(ax=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,nv=new WeakMap,NC=new WeakMap,q1=new WeakMap,Oy=new WeakMap;function JD(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(La(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&TC.set(n,e)}).catch(()=>{}),Oy.set(t,e),t}function ZD(e){if(nv.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});nv.set(e,t)}let sv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return nv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||NC.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return La(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function tL(e){sv=e(sv)}function eL(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(H1(this),t,...n);return NC.set(s,t.sort?t.sort():[t]),La(s)}:QD().includes(e)?function(...t){return e.apply(H1(this),t),La(TC.get(this))}:function(...t){return La(e.apply(H1(this),t))}}function nL(e){return typeof e=="function"?eL(e):(e instanceof IDBTransaction&&ZD(e),YD(e,XD())?new Proxy(e,sv):e)}function La(e){if(e instanceof IDBRequest)return JD(e);if(q1.has(e))return q1.get(e);const t=nL(e);return t!==e&&(q1.set(e,t),Oy.set(t,e)),t}const H1=e=>Oy.get(e);function sL(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=La(o);return s&&o.addEventListener("upgradeneeded",l=>{s(La(o.result),l.oldVersion,l.newVersion,La(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const iL=["get","getKey","getAll","getAllKeys","count"],rL=["put","add","delete","clear"],W1=new Map;function lx(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(W1.get(t))return W1.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=rL.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||iL.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return W1.set(t,r),r}tL(e=>({...e,get:(t,n,s)=>lx(t,n)||e.get(t,n,s),has:(t,n)=>!!lx(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aL(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function aL(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const iv="@firebase/app",cx="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new $m("@firebase/app"),lL="@firebase/app-compat",cL="@firebase/analytics-compat",uL="@firebase/analytics",dL="@firebase/app-check-compat",hL="@firebase/app-check",fL="@firebase/auth",pL="@firebase/auth-compat",gL="@firebase/database",mL="@firebase/database-compat",vL="@firebase/functions",yL="@firebase/functions-compat",bL="@firebase/installations",wL="@firebase/installations-compat",xL="@firebase/messaging",_L="@firebase/messaging-compat",SL="@firebase/performance",CL="@firebase/performance-compat",kL="@firebase/remote-config",AL="@firebase/remote-config-compat",PL="@firebase/storage",EL="@firebase/storage-compat",IL="@firebase/firestore",TL="@firebase/firestore-compat",NL="firebase",DL="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="[DEFAULT]",LL={[iv]:"fire-core",[lL]:"fire-core-compat",[uL]:"fire-analytics",[cL]:"fire-analytics-compat",[hL]:"fire-app-check",[dL]:"fire-app-check-compat",[fL]:"fire-auth",[pL]:"fire-auth-compat",[gL]:"fire-rtdb",[mL]:"fire-rtdb-compat",[vL]:"fire-fn",[yL]:"fire-fn-compat",[bL]:"fire-iid",[wL]:"fire-iid-compat",[xL]:"fire-fcm",[_L]:"fire-fcm-compat",[SL]:"fire-perf",[CL]:"fire-perf-compat",[kL]:"fire-rc",[AL]:"fire-rc-compat",[PL]:"fire-gcs",[EL]:"fire-gcs-compat",[IL]:"fire-fst",[TL]:"fire-fst-compat","fire-js":"fire-js",[NL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=new Map,ov=new Map;function ML(e,t){try{e.container.addComponent(t)}catch(n){ql.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ro(e){const t=e.name;if(ov.has(t))return ql.debug(`There were multiple attempts to register component ${t}.`),!1;ov.set(t,e);for(const n of Vg.values())ML(n,e);return!0}function tc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ma=new Zl("app","Firebase",OL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ma.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=DL;function DC(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:rv,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw Ma.create("bad-app-name",{appName:String(i)});if(n||(n=kC()),!n)throw Ma.create("no-options");const r=Vg.get(i);if(r){if(Ch(n,r.options)&&Ch(s,r.config))return r;throw Ma.create("duplicate-app",{appName:i})}const o=new qD(i);for(const l of ov.values())o.addComponent(l);const a=new RL(n,s,o);return Vg.set(i,a),a}function Ry(e=rv){const t=Vg.get(e);if(!t&&e===rv&&kC())return DC();if(!t)throw Ma.create("no-app",{appName:e});return t}function nr(e,t,n){var s;let i=(s=LL[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ql.warn(a.join(" "));return}ro(new kr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="firebase-heartbeat-database",BL=1,kh="firebase-heartbeat-store";let G1=null;function LC(){return G1||(G1=sL(FL,BL,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(kh)}}}).catch(e=>{throw Ma.create("idb-open",{originalErrorMessage:e.message})})),G1}async function jL(e){try{return await(await LC()).transaction(kh).objectStore(kh).get(MC(e))}catch(t){if(t instanceof Tr)ql.warn(t.message);else{const n=Ma.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ql.warn(n.message)}}}async function ux(e,t){try{const s=(await LC()).transaction(kh,"readwrite");await s.objectStore(kh).put(t,MC(e)),await s.done}catch(n){if(n instanceof Tr)ql.warn(n.message);else{const s=Ma.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ql.warn(s.message)}}}function MC(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=1024,VL=30*24*60*60*1e3;class zL{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qL(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dx();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const r=new Date(i.date).valueOf();return Date.now()-r<=VL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dx(),{heartbeatsToSend:n,unsentEntries:s}=UL(this._heartbeatsCache.heartbeats),i=$g(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function dx(){return new Date().toISOString().substring(0,10)}function UL(e,t=$L){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),hx(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hx(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class qL{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EC()?IC().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await jL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ux(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ux(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function hx(e){return $g(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(e){ro(new kr("platform-logger",t=>new oL(t),"PRIVATE")),ro(new kr("heartbeat",t=>new zL(t),"PRIVATE")),nr(iv,cx,e),nr(iv,cx,"esm2017"),nr("fire-js","")}HL("");function Fy(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function OC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WL=OC,RC=new Zl("auth","Firebase",OC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new $m("@firebase/auth");function GL(e,...t){zg.logLevel<=sn.WARN&&zg.warn(`Auth (${Ru}): ${e}`,...t)}function cg(e,...t){zg.logLevel<=sn.ERROR&&zg.error(`Auth (${Ru}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(e,...t){throw By(e,...t)}function Jr(e,...t){return By(e,...t)}function KL(e,t,n){const s=Object.assign(Object.assign({},WL()),{[t]:n});return new Zl("auth","Firebase",s).create(t,{appName:e.name})}function By(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return RC.create(e,...t)}function Ne(e,t,...n){if(!e)throw By(t,...n)}function Lo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cg(t),new Error(t)}function zo(e,t){e||Lo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function YL(){return fx()==="http:"||fx()==="https:"}function fx(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YL()||PC()||"connection"in navigator)?navigator.onLine:!0}function QL(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,n){this.shortDelay=t,this.longDelay=n,zo(n>t,"Short delay should be less than long delay!"),this.isMobile=AD()||PD()}get(){return XL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(e,t){zo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new df(3e4,6e4);function hf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Fu(e,t,n,s,i={}){return BC(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=uf(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),FC.fetch()(jC(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},r))})}async function BC(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},JL),t);try{const i=new t7(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Pp(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pp(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pp(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pp(e,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw KL(e,u,c);Ar(e,u)}}catch(i){if(i instanceof Tr)throw i;Ar(e,"network-request-failed",{message:String(i)})}}async function Vm(e,t,n,s,i={}){const r=await Fu(e,t,n,s,i);return"mfaPendingCredential"in r&&Ar(e,"multi-factor-auth-required",{_serverResponse:r}),r}function jC(e,t,n,s){const i=`${t}${n}?${s}`;return e.config.emulator?jy(e.config,i):`${e.config.apiScheme}://${i}`}class t7{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Jr(this.auth,"network-request-failed")),ZL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pp(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Jr(e,t,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(e,t){return Fu(e,"POST","/v1/accounts:delete",t)}async function n7(e,t){return Fu(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function s7(e,t=!1){const n=us(e),s=await n.getIdToken(t),i=$y(s);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:th(K1(i.auth_time)),issuedAtTime:th(K1(i.iat)),expirationTime:th(K1(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function K1(e){return Number(e)*1e3}function $y(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return cg("JWT malformed, contained fewer than 3 sections"),null;try{const i=SC(n);return i?JSON.parse(i):(cg("Failed to decode base64 JWT payload"),null)}catch(i){return cg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function i7(e){const t=$y(e);return Ne(t,"internal-error"),Ne(typeof t.exp<"u","internal-error"),Ne(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Tr&&r7(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function r7({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=th(this.lastLoginAt),this.creationTime=th(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(e){var t;const n=e.auth,s=await e.getIdToken(),i=await Ah(e,n7(n,{idToken:s}));Ne(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?c7(r.providerUserInfo):[],a=l7(e.providerData,o),l=e.isAnonymous,c=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new $C(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function a7(e){const t=us(e);await Ug(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function l7(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function c7(e){return e.map(t=>{var{providerId:n}=t,s=Fy(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(e,t){const n=await BC(e,{},async()=>{const s=uf({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=jC(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FC.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ne(t.idToken,"internal-error"),Ne(typeof t.idToken<"u","internal-error"),Ne(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):i7(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return Ne(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await u7(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Ph;return s&&(Ne(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(Ne(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Ne(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ph,this.toJSON())}_performRefresh(){return Lo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(e,t){Ne(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Fl{constructor(t){var{uid:n,auth:s,stsTokenManager:i}=t,r=Fy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new o7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new $C(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await Ah(this,this.stsTokenManager.getToken(this.auth,t));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return s7(this,t)}reload(){return a7(this)}_assign(t){this!==t&&(Ne(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Fl(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Ug(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Ah(this,e7(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,i,r,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,p=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,P=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:L,emailVerified:M,isAnonymous:F,providerData:pt,stsTokenManager:Y}=n;Ne(L&&Y,t,"internal-error");const W=Ph.fromJSON(this.name,Y);Ne(typeof L=="string",t,"internal-error"),da(h,t.name),da(g,t.name),Ne(typeof M=="boolean",t,"internal-error"),Ne(typeof F=="boolean",t,"internal-error"),da(p,t.name),da(y,t.name),da(w,t.name),da(S,t.name),da(x,t.name),da(P,t.name);const it=new Fl({uid:L,auth:t,email:g,emailVerified:M,displayName:h,isAnonymous:F,photoURL:y,phoneNumber:p,tenantId:w,stsTokenManager:W,createdAt:x,lastLoginAt:P});return pt&&Array.isArray(pt)&&(it.providerData=pt.map(J=>Object.assign({},J))),S&&(it._redirectEventId=S),it}static async _fromIdTokenResponse(t,n,s=!1){const i=new Ph;i.updateFromServerResponse(n);const r=new Fl({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Ug(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;function Mo(e){zo(e instanceof Function,"Expected a class definition");let t=px.get(e);return t?(zo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,px.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}VC.type="NONE";const gx=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(e,t,n){return`firebase:${e}:${t}:${n}`}class su{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=ug(this.userKey,i.apiKey,r),this.fullPersistenceKey=ug("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Fl._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new su(Mo(gx),t,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||Mo(gx);const o=ug(s,t.config.apiKey,t.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Fl._fromJSON(t,u);c!==r&&(a=h),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new su(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new su(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(WC(t))return"Blackberry";if(GC(t))return"Webos";if(Vy(t))return"Safari";if((t.includes("chrome/")||UC(t))&&!t.includes("edge/"))return"Chrome";if(HC(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zC(e=ti()){return/firefox\//i.test(e)}function Vy(e=ti()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function UC(e=ti()){return/crios\//i.test(e)}function qC(e=ti()){return/iemobile/i.test(e)}function HC(e=ti()){return/android/i.test(e)}function WC(e=ti()){return/blackberry/i.test(e)}function GC(e=ti()){return/webos/i.test(e)}function zm(e=ti()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function d7(e=ti()){var t;return zm(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function h7(){return ED()&&document.documentMode===10}function KC(e=ti()){return zm(e)||HC(e)||GC(e)||WC(e)||/windows phone/i.test(e)||qC(e)}function f7(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(e,t=[]){let n;switch(e){case"Browser":n=mx(ti());break;case"Worker":n=`${mx(ti())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ru}/${s}`}async function XC(e,t){return Fu(e,"GET","/v2/recaptchaConfig",hf(e,t))}function vx(e){return e!==void 0&&e.enterprise!==void 0}class QC{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function JC(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Jr("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",p7().appendChild(s)})}function g7(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const m7="https://www.google.com/recaptcha/enterprise.js?render=",v7="recaptcha-enterprise",y7="NO_RECAPTCHA";class ZC{constructor(t){this.type=v7,this.auth=ff(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{XC(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new QC(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;vx(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:t}).then(c=>{o(c)}).catch(()=>{o(y7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&vx(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}JC(m7+a).then(()=>{i(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function yx(e,t,n,s=!1){const i=new ZC(e);let r;try{r=await i.verify(n)}catch{r=await i.verify(n,!0)}const o=Object.assign({},t);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bx(this),this.idTokenSubscription=new bx(this),this.beforeStateQueue=new b7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Mo(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await su.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Ug(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=QL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?us(t):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ne(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Mo(t))})}async initializeRecaptchaConfig(){const t=await XC(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new QC(t);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new ZC(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Zl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Mo(t)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await su.create(this,[Mo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ne(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof n=="function"?t.addObserver(n,s,i):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&GL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ff(e){return us(e)}class bx{constructor(t){this.auth=t,this.observer=null,this.addObserver=MD(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(e,t){const n=tc(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Ch(r,t??{}))return i;Ar(i,"already-initialized")}return n.initialize({options:t})}function _7(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Mo);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function S7(e,t,n){const s=ff(e);Ne(s._canInitEmulator,s,"emulator-config-failed"),Ne(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=tk(t),{host:o,port:a}=C7(t),l=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${l}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),k7()}function tk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function C7(e){const t=tk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:wx(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:wx(o)}}}function wx(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function k7(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lo("not implemented")}_getIdTokenResponse(t){return Lo("not implemented")}_linkToIdToken(t,n){return Lo("not implemented")}_getReauthenticationResolver(t){return Lo("not implemented")}}async function A7(e,t){return Fu(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(e,t){return Vm(e,"POST","/v1/accounts:signInWithPassword",hf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(e,t){return Vm(e,"POST","/v1/accounts:signInWithEmailLink",hf(e,t))}async function E7(e,t){return Vm(e,"POST","/v1/accounts:signInWithEmailLink",hf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends zy{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Eh(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Eh(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){var n;switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=t._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await yx(t,s,"signInWithPassword");return Y1(t,i)}else return Y1(t,s).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const r=await yx(t,s,"signInWithPassword");return Y1(t,r)}else return Promise.reject(i)});case"emailLink":return P7(t,{email:this._email,oobCode:this._password});default:Ar(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return A7(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return E7(t,{idToken:n,email:this._email,oobCode:this._password});default:Ar(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(e,t){return Vm(e,"POST","/v1/accounts:signInWithIdp",hf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="http://localhost";class Hl extends zy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Hl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=n,r=Fy(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Hl(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return iu(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,iu(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,iu(t,n)}buildRequest(){const t={requestUri:I7,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uf(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function N7(e){const t=Md(Od(e)).link,n=t?Md(Od(t)).deep_link_id:null,s=Md(Od(e)).deep_link_id;return(s?Md(Od(s)).link:null)||s||n||t||e}class Uy{constructor(t){var n,s,i,r,o,a;const l=Md(Od(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,h=T7((i=l.mode)!==null&&i!==void 0?i:null);Ne(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=N7(t);try{return new Uy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this.providerId=Bu.PROVIDER_ID}static credential(t,n){return Eh._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Uy.parseLink(n);return Ne(s,"argument-error"),Eh._fromEmailAndCode(t,s.code,s.tenantId)}}Bu.PROVIDER_ID="password";Bu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends ek{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends pf{constructor(){super("facebook.com")}static credential(t){return Hl._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wa.credentialFromTaggedObject(t)}static credentialFromError(t){return wa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wa.credential(t.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends pf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Hl._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return xa.credentialFromTaggedObject(t)}static credentialFromError(t){return xa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return xa.credential(n,s)}catch{return null}}}xa.GOOGLE_SIGN_IN_METHOD="google.com";xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends pf{constructor(){super("github.com")}static credential(t){return Hl._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _a.credentialFromTaggedObject(t)}static credentialFromError(t){return _a.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _a.credential(t.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends pf{constructor(){super("twitter.com")}static credential(t,n){return Hl._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Sa.credentialFromTaggedObject(t)}static credentialFromError(t){return Sa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Sa.credential(n,s)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await Fl._fromIdTokenResponse(t,s,i),o=xx(s);return new Su({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=xx(s);return new Su({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function xx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Tr{constructor(t,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,qg.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new qg(t,n,s,i)}}function nk(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?qg._fromErrorAndOperation(e,r,t,s):r})}async function D7(e,t,n=!1){const s=await Ah(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Su._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L7(e,t,n=!1){const{auth:s}=e,i="reauthenticate";try{const r=await Ah(e,nk(s,i,t,e),n);Ne(r.idToken,s,"internal-error");const o=$y(r.idToken);Ne(o,s,"internal-error");const{sub:a}=o;return Ne(e.uid===a,s,"user-mismatch"),Su._forOperation(e,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Ar(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(e,t,n=!1){const s="signIn",i=await nk(e,s,t),r=await Su._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function M7(e,t){return sk(ff(e),t)}function O7(e,t,n){return M7(us(e),Bu.credential(t,n))}function R7(e,t,n,s){return us(e).onIdTokenChanged(t,n,s)}function F7(e,t,n){return us(e).beforeAuthStateChanged(t,n)}function B7(e,t,n,s){return us(e).onAuthStateChanged(t,n,s)}function j7(e){return us(e).signOut()}const Hg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hg,"1"),this.storage.removeItem(Hg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(){const e=ti();return Vy(e)||zm(e)}const V7=1e3,z7=10;class rk extends ik{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$7()&&f7(),this.fallbackToPolling=KC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);h7()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,z7):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},V7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}rk.type="LOCAL";const U7=rk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok extends ik{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}ok.type="SESSION";const ak=ok;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Um(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await q7(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=qy("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function W7(e){Zr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function G7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K7(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Y7(){return lk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="firebaseLocalStorageDb",X7=1,Wg="firebaseLocalStorage",uk="fbase_key";class gf{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qm(e,t){return e.transaction([Wg],t?"readwrite":"readonly").objectStore(Wg)}function Q7(){const e=indexedDB.deleteDatabase(ck);return new gf(e).toPromise()}function lv(){const e=indexedDB.open(ck,X7);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(Wg,{keyPath:uk})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(Wg)?t(s):(s.close(),await Q7(),t(await lv()))})})}async function _x(e,t,n){const s=qm(e,!0).put({[uk]:t,value:n});return new gf(s).toPromise()}async function J7(e,t){const n=qm(e,!1).get(t),s=await new gf(n).toPromise();return s===void 0?null:s.value}function Sx(e,t){const n=qm(e,!0).delete(t);return new gf(n).toPromise()}const Z7=800,tM=3;class dk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lv(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>tM)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Um._getInstance(Y7()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await G7(),!this.activeServiceWorker)return;this.sender=new H7(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||K7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await lv();return await _x(t,Hg,"1"),await Sx(t,Hg),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_x(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>J7(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sx(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=qm(i,!1).getAll();return new gf(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dk.type="LOCAL";const eM=dk;new df(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(e,t){return t?Mo(t):(Ne(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends zy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return iu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return iu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return iu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function sM(e){return sk(e.auth,new Hy(e),e.bypassAuthState)}function iM(e){const{auth:t,user:n}=e;return Ne(n,t,"internal-error"),L7(n,new Hy(e),e.bypassAuthState)}async function rM(e){const{auth:t,user:n}=e;return Ne(n,t,"internal-error"),D7(n,new Hy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return sM;case"linkViaPopup":case"linkViaRedirect":return rM;case"reauthViaPopup":case"reauthViaRedirect":return iM;default:Ar(this.auth,"internal-error")}}resolve(t){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new df(2e3,1e4);class Gc extends hk{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Gc.currentPopupAction&&Gc.currentPopupAction.cancel(),Gc.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ne(t,this.auth,"internal-error"),t}async onExecution(){zo(this.filter.length===1,"Popup operations only handle one event");const t=qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gc.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oM.get())};t()}}Gc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="pendingRedirect",dg=new Map;class lM extends hk{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=dg.get(this.auth._key());if(!t){try{const s=await cM(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}dg.set(this.auth._key(),t)}return this.bypassAuthState||dg.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cM(e,t){const n=hM(t),s=dM(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function uM(e,t){dg.set(e._key(),t)}function dM(e){return Mo(e._redirectPersistence)}function hM(e){return ug(aM,e.config.apiKey,e.name)}async function fM(e,t,n=!1){const s=ff(e),i=nM(s,t),o=await new lM(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=10*60*1e3;class gM{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mM(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!fk(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=pM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cx(t))}saveEventToCache(t){this.cachedEventUids.add(Cx(t)),this.lastProcessedEventTime=Date.now()}}function Cx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function fk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function mM(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(e,t={}){return Fu(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bM=/^https?/;async function wM(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vM(e);for(const n of t)try{if(xM(n))return}catch{}Ar(e,"unauthorized-domain")}function xM(e){const t=av(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!bM.test(n))return!1;if(yM.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new df(3e4,6e4);function kx(){const e=Zr().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function SM(e){return new Promise((t,n)=>{var s,i,r;function o(){kx(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kx(),n(Jr(e,"network-request-failed"))},timeout:_M.get()})}if(!((i=(s=Zr().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=Zr().gapi)===null||r===void 0)&&r.load)o();else{const a=g7("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Jr(e,"network-request-failed"))},JC(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw hg=null,t})}let hg=null;function CM(e){return hg=hg||SM(e),hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new df(5e3,15e3),AM="__/auth/iframe",PM="emulator/auth/iframe",EM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TM(e){const t=e.config;Ne(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?jy(t,PM):`https://${e.config.authDomain}/${AM}`,s={apiKey:t.apiKey,appName:e.name,v:Ru},i=IM.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${uf(s).slice(1)}`}async function NM(e){const t=await CM(e),n=Zr().gapi;return Ne(n,e,"internal-error"),t.open({where:document.body,url:TM(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EM,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Jr(e,"network-request-failed"),a=Zr().setTimeout(()=>{r(o)},kM.get());function l(){Zr().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LM=500,MM=600,OM="_blank",RM="http://localhost";class Ax{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FM(e,t,n,s=LM,i=MM){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DM),{width:s.toString(),height:i.toString(),top:r,left:o}),c=ti().toLowerCase();n&&(a=UC(c)?OM:n),zC(c)&&(t=t||RM,l.scrollbars="yes");const u=Object.entries(l).reduce((g,[p,y])=>`${g}${p}=${y},`,"");if(d7(c)&&a!=="_self")return BM(t||"",a),new Ax(null);const h=window.open(t||"",a,u);Ne(h,e,"popup-blocked");try{h.focus()}catch{}return new Ax(h)}function BM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="__/auth/handler",$M="emulator/auth/handler",VM=encodeURIComponent("fac");async function Px(e,t,n,s,i,r){Ne(e.config.authDomain,e,"auth-domain-config-required"),Ne(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:Ru,eventId:i};if(t instanceof ek){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",LD(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(t instanceof pf){const u=t.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${VM}=${encodeURIComponent(l)}`:"";return`${zM(e)}?${uf(a).slice(1)}${c}`}function zM({config:e}){return e.emulator?jy(e,$M):`https://${e.authDomain}/${jM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="webStorageSupport";class UM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ak,this._completeRedirectFn=fM,this._overrideRedirectResult=uM}async _openPopup(t,n,s,i){var r;zo((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Px(t,n,s,av(),i);return FM(t,o,qy())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await Px(t,n,s,av(),i);return W7(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(zo(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await NM(t),s=new gM(t);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(X1,{type:X1},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[X1];o!==void 0&&n(!!o),Ar(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wM(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return KC()||Vy()||zm()}}const qM=UM;var Ex="@firebase/auth",Ix="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function GM(e){ro(new kr("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YC(e)},c=new w7(s,i,r,l);return _7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),ro(new kr("auth-internal",t=>{const n=ff(t.getProvider("auth").getImmediate());return(s=>new HM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(Ex,Ix,WM(e)),nr(Ex,Ix,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=5*60,YM=AC("authIdTokenMaxAge")||KM;let Tx=null;const XM=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>YM)return;const i=n==null?void 0:n.token;Tx!==i&&(Tx=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pk(e=Ry()){const t=tc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=x7(e,{popupRedirectResolver:qM,persistence:[eM,U7,ak]}),s=AC("authTokenSyncURL");if(s){const r=XM(s);F7(n,r,()=>r(n.currentUser)),R7(n,o=>r(o))}const i=CC("auth");return i&&S7(n,`http://${i}`),n}GM("Browser");const QM={class:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 font-sans text-gray-100"},JM={key:0,class:"sticky top-0 z-50 bg-gray-900/70 backdrop-blur-xl shadow-lg shadow-emerald-500/10 mb-6 animate-fade-in border-b border-emerald-500/20"},ZM={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},t9={class:"flex justify-between items-center py-4"},e9={class:"hidden md:flex items-center space-x-3 bg-gray-800/50 px-4 py-2 rounded-full border border-emerald-500/20 shadow-inner shadow-emerald-500/5"},n9={class:"digital-clock text-emerald-400 font-mono text-sm md:text-base tracking-wider"},s9={class:"text-xs text-emerald-500/70"},i9={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},o9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},a9={class:"hidden md:flex items-center space-x-4"},l9={class:"relative group"},c9={class:"hidden lg:inline-block"},u9={class:"h-9 w-9 rounded-full bg-gradient-to-br from-emerald-500/20 to-emerald-400/20 flex items-center justify-center text-emerald-400 font-medium border border-emerald-500/30 shadow-sm shadow-emerald-500/10"},d9={key:0,class:"absolute right-0 mt-2 w-48 bg-gray-800/90 backdrop-blur-md rounded-lg shadow-lg py-2 z-10 border border-emerald-500/20 animate-fade-in-down"},h9={class:"hidden md:flex flex-wrap justify-center pb-3 gap-3"},f9={class:"z-10 relative"},p9=["innerHTML"],g9={key:1,class:"md:hidden bg-gray-800/90 backdrop-blur-md border-b border-emerald-500/20 animate-fade-in-down"},m9={class:"px-4 py-3 space-y-2"},v9={class:"flex justify-center items-center space-x-3 bg-gray-900/50 px-4 py-3 rounded-lg border border-emerald-500/20 mb-4 shadow-inner shadow-emerald-500/5"},y9={class:"digital-clock text-emerald-400 font-mono text-base tracking-wider"},b9={class:"text-xs text-emerald-500/70"},w9=["innerHTML"],x9={class:"pt-4 pb-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_9={key:2,class:"bg-gray-900/80 backdrop-blur-md border-t border-emerald-500/20 py-6 text-gray-400 text-sm animate-fade-in shadow-lg shadow-emerald-500/5"},S9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},C9={class:"flex flex-col md:flex-row md:justify-between items-center space-y-3 md:space-y-0"},k9={__name:"App",setup(e){const t=Gt(!1),n=Gt(!1),s=Gt(!1),i=Gt(""),r=Gt(new Date),o=pk(),a=wC(),l=gD();let c,u;$i(()=>l.path,()=>{n.value=!1,s.value=!1});const h=de(()=>{const L=r.value.getHours().toString().padStart(2,"0"),M=r.value.getMinutes().toString().padStart(2,"0"),F=r.value.getSeconds().toString().padStart(2,"0");return`${L}:${M}:${F}`}),g=de(()=>{const L={weekday:"short",day:"numeric",month:"short"};return r.value.toLocaleDateString("es-ES",L)}),p=L=>{L.target.closest(".group")||(s.value=!1)},y=de(()=>i.value?i.value.split(" ").map(L=>L[0]).slice(0,2).join("").toUpperCase():"U"),w=()=>{r.value=new Date},S=Gt([{nombre:"Dashboard",ruta:"/dashboard",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>'},{nombre:"Tiendas",ruta:"/tiendas",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>'},{nombre:"Cobros",ruta:"/cobros",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" /></svg>'},{nombre:"Estadísticas",ruta:"/estadisticas",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>'},{nombre:"Finanzas",ruta:"/finanzas",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'},{nombre:"Cotizaciones",ruta:"/cotizaciones",icono:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>'}]),x=L=>l.path===L,P=async()=>{try{await j7(o),a.push("/login")}catch(L){console.error("Error al cerrar sesión:",L)}};return co(()=>{w(),u=setInterval(w,1e3),c=B7(o,L=>{t.value=!!L,L&&(i.value=L.displayName||L.email.split("@")[0]||"Usuario"),!L&&l.path!=="/login"&&a.push("/login")}),document.addEventListener("click",p)}),Lm(()=>{c&&c(),document.removeEventListener("click",p),u&&clearInterval(u)}),(L,M)=>{const F=$o("router-link"),pt=$o("router-view");return at(),ft("div",QM,[t.value?(at(),ft("div",JM,[d("div",ZM,[d("div",t9,[M[7]||(M[7]=d("div",{class:"flex items-center transform transition-all duration-500 hover:scale-105"},[d("div",{class:"h-10 w-10 mr-3 bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-lg flex items-center justify-center shadow-lg shadow-emerald-500/30 border border-emerald-400/30"},[d("span",{class:"text-gray-900 font-bold text-lg"},"GN")]),d("h1",{class:"text-xl md:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-300 glow-emerald"}," Soluciones GN ")],-1)),d("div",e9,[d("div",n9,lt(h.value),1),d("div",s9,lt(g.value),1)]),d("button",{onClick:M[0]||(M[0]=Y=>n.value=!n.value),class:"md:hidden text-emerald-400 hover:text-emerald-300 transition-colors duration-300 p-2 rounded-lg hover:bg-gray-800/50"},[(at(),ft("svg",i9,[n.value?(at(),ft("path",o9)):(at(),ft("path",r9))]))]),d("div",a9,[d("div",l9,[d("button",{onClick:M[1]||(M[1]=Y=>s.value=!s.value),class:"flex items-center space-x-2 text-gray-300 hover:text-emerald-400 p-2 rounded-full hover:bg-gray-800/50 transition-all duration-300 border border-transparent hover:border-emerald-500/20"},[d("span",c9,lt(i.value||"Usuario"),1),d("div",u9,lt(y.value),1)]),s.value?(at(),ft("div",d9,[M[4]||(M[4]=d("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700/70 hover:text-emerald-400"}," Mi perfil ",-1)),M[5]||(M[5]=d("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700/70 hover:text-emerald-400"}," Configuración ",-1)),M[6]||(M[6]=d("div",{class:"border-t border-gray-700/50 my-1"},null,-1)),d("button",{onClick:P,class:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700/70 hover:text-red-300 flex items-center gap-2"},M[3]||(M[3]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),d("span",null,"Cerrar sesión",-1)]))])):Ut("",!0)])])]),d("div",h9,[(at(!0),ft(ye,null,Ke(S.value,(Y,W)=>(at(),cs(F,{key:W,to:Y.ruta,class:ve(["px-5 py-2.5 rounded-lg text-center text-sm font-medium transition-all duration-300 transform","flex items-center gap-2 relative overflow-hidden tech-btn",x(Y.ruta)?"bg-gradient-to-r from-emerald-600/40 to-emerald-500/40 text-emerald-300 shadow-md shadow-emerald-500/20 scale-105 border border-emerald-500/30":"bg-gray-800/30 text-gray-300 hover:text-emerald-300 hover:scale-105 hover:shadow-md hover:shadow-emerald-500/10 border border-gray-700/30 hover:border-emerald-500/20",`animate-fade-in-delayed-${W}`])},{default:an(()=>[d("span",f9,[Y.icono?(at(),ft("span",{key:0,innerHTML:Y.icono},null,8,p9)):Ut("",!0),d("span",null,lt(Y.nombre),1)]),M[8]||(M[8]=d("span",{class:"tech-btn-bg absolute inset-0 bg-gradient-to-r from-emerald-600/0 to-emerald-400/0 opacity-0 transition-opacity duration-300"},null,-1))]),_:2},1032,["to","class"]))),128))])])])):Ut("",!0),t.value&&n.value?(at(),ft("div",g9,[d("div",m9,[d("div",v9,[d("div",y9,lt(h.value),1),d("div",b9,lt(g.value),1)]),(at(!0),ft(ye,null,Ke(S.value,(Y,W)=>(at(),cs(F,{key:W,to:Y.ruta,onClick:M[2]||(M[2]=it=>n.value=!1),class:ve(["block px-4 py-3 rounded-lg text-base font-medium transition-all duration-200","flex items-center gap-3",x(Y.ruta)?"bg-gray-700/50 text-emerald-400 border-l-2 border-emerald-500":"text-gray-300 hover:bg-gray-700/30 hover:text-emerald-300 border-l-2 border-transparent"])},{default:an(()=>[Y.icono?(at(),ft("span",{key:0,innerHTML:Y.icono},null,8,w9)):Ut("",!0),d("span",null,lt(Y.nombre),1)]),_:2},1032,["to","class"]))),128)),d("button",{onClick:P,class:"w-full text-left mt-5 px-4 py-3 rounded-lg text-base font-medium text-red-400 hover:bg-gray-700/30 hover:text-red-300 flex items-center gap-3 border-l-2 border-transparent"},M[9]||(M[9]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),d("span",null,"Cerrar sesión",-1)]))])])):Ut("",!0),d("main",x9,[ze(pt,null,{default:an(({Component:Y})=>[ze(wi,{name:"page-transition",mode:"out-in"},{default:an(()=>[(at(),cs(Ou(Y)))]),_:2},1024)]),_:1})]),t.value?(at(),ft("footer",_9,[d("div",S9,[d("div",C9,[d("p",null,[Vt("© "+lt(new Date().getFullYear())+" ",1),M[10]||(M[10]=d("span",{class:"text-emerald-400"},"Soluciones Integrales GN",-1)),M[11]||(M[11]=Vt(". Todos los derechos reservados."))]),M[12]||(M[12]=$a('<div class="flex space-x-6"><a href="#" class="text-gray-400 hover:text-emerald-400 transition-colors duration-300 flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Ayuda</span></a><a href="#" class="text-gray-400 hover:text-emerald-400 transition-colors duration-300 flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path></svg><span>Contacto</span></a></div>',1))])])])):Ut("",!0)])}}},A9={class:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center flex-col text-center text-white px-4 z-10"},P9={__name:"HomeView",setup(e){const t={backgroundImage:"url('/assets/futuristic-bg.avif')",backgroundSize:"cover",backgroundPosition:"center"};return(n,s)=>{const i=$o("router-link");return at(),ft("div",{class:"relative w-full h-screen overflow-hidden",style:t},[d("div",A9,[s[1]||(s[1]=d("h1",{class:"text-4xl md:text-6xl font-extrabold text-cyan-400 drop-shadow-md animate-pulse"}," Soluciones Integrales GN ",-1)),s[2]||(s[2]=d("p",{class:"text-xl md:text-2xl mt-4 text-blue-200"}," Tenemos un mundo de posibilidades para ti ",-1)),ze(i,{to:"/login",class:"mt-10 px-10 py-3 bg-gradient-to-br from-cyan-400 to-blue-500 hover:from-cyan-300 hover:to-blue-400 text-black font-bold rounded-full shadow-lg hover:scale-105 transition-transform duration-300"},{default:an(()=>s[0]||(s[0]=[Vt(" Entrar al sistema ")])),_:1})])])}}};var E9="firebase",I9="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(E9,I9,"app");var T9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne,Wy=Wy||{},Me=T9||self;function Hm(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Wm(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function N9(e,t,n){return e.call.apply(e.bind,arguments)}function D9(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Qs(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qs=N9:Qs=D9,Qs.apply(null,arguments)}function Ep(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),e.apply(this,s)}}function ks(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(s,o)}}function Xa(){this.s=this.s,this.o=this.o}var L9=0;Xa.prototype.s=!1;Xa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),L9!=0)};Xa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gk=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Gy(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function Nx(e,t){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(Hm(s)){const i=e.length||0,r=s.length||0;e.length=i+r;for(let o=0;o<r;o++)e[i+o]=s[o]}else e.push(s)}}function Js(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Js.prototype.h=function(){this.defaultPrevented=!0};var M9=function(){if(!Me.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Me.addEventListener("test",()=>{},t),Me.removeEventListener("test",()=>{},t)}catch{}return e}();function Ih(e){return/^[\s\xa0]*$/.test(e)}function Gm(){var e=Me.navigator;return e&&(e=e.userAgent)?e:""}function Hr(e){return Gm().indexOf(e)!=-1}function Ky(e){return Ky[" "](e),e}Ky[" "]=function(){};function O9(e,t){var n=EO;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var R9=Hr("Opera"),Cu=Hr("Trident")||Hr("MSIE"),mk=Hr("Edge"),cv=mk||Cu,vk=Hr("Gecko")&&!(Gm().toLowerCase().indexOf("webkit")!=-1&&!Hr("Edge"))&&!(Hr("Trident")||Hr("MSIE"))&&!Hr("Edge"),F9=Gm().toLowerCase().indexOf("webkit")!=-1&&!Hr("Edge");function yk(){var e=Me.document;return e?e.documentMode:void 0}var uv;t:{var Q1="",J1=function(){var e=Gm();if(vk)return/rv:([^\);]+)(\)|;)/.exec(e);if(mk)return/Edge\/([\d\.]+)/.exec(e);if(Cu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(F9)return/WebKit\/(\S+)/.exec(e);if(R9)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(J1&&(Q1=J1?J1[1]:""),Cu){var Z1=yk();if(Z1!=null&&Z1>parseFloat(Q1)){uv=String(Z1);break t}}uv=Q1}var dv;if(Me.document&&Cu){var Dx=yk();dv=Dx||parseInt(uv,10)||void 0}else dv=void 0;var B9=dv;function Th(e,t){if(Js.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vk){t:{try{Ky(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:j9[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Th.$.h.call(this)}}ks(Th,Js);var j9={2:"touch",3:"pen",4:"mouse"};Th.prototype.h=function(){Th.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Km="closure_listenable_"+(1e6*Math.random()|0),$9=0;function V9(e,t,n,s,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.la=i,this.key=++$9,this.fa=this.ia=!1}function Ym(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Yy(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function z9(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function bk(e){const t={};for(const n in e)t[n]=e[n];return t}const Lx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wk(e,t){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)e[n]=s[n];for(let r=0;r<Lx.length;r++)n=Lx[r],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function Xm(e){this.src=e,this.g={},this.h=0}Xm.prototype.add=function(e,t,n,s,i){var r=e.toString();e=this.g[r],e||(e=this.g[r]=[],this.h++);var o=fv(e,t,s,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new V9(t,this.src,r,!!s,i),t.ia=n,e.push(t)),t};function hv(e,t){var n=t.type;if(n in e.g){var s=e.g[n],i=gk(s,t),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Ym(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function fv(e,t,n,s){for(var i=0;i<e.length;++i){var r=e[i];if(!r.fa&&r.listener==t&&r.capture==!!n&&r.la==s)return i}return-1}var Xy="closure_lm_"+(1e6*Math.random()|0),t2={};function xk(e,t,n,s,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)xk(e,t[r],n,s,i);return null}return n=Ck(n),e&&e[Km]?e.O(t,n,Wm(s)?!!s.capture:!1,i):U9(e,t,n,!1,s,i)}function U9(e,t,n,s,i,r){if(!t)throw Error("Invalid event type");var o=Wm(i)?!!i.capture:!!i,a=Jy(e);if(a||(e[Xy]=a=new Xm(e)),n=a.add(t,n,s,o,r),n.proxy)return n;if(s=q9(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)M9||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),s,i);else if(e.attachEvent)e.attachEvent(Sk(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function q9(){function e(n){return t.call(e.src,e.listener,n)}const t=H9;return e}function _k(e,t,n,s,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)_k(e,t[r],n,s,i);else s=Wm(s)?!!s.capture:!!s,n=Ck(n),e&&e[Km]?(e=e.i,t=String(t).toString(),t in e.g&&(r=e.g[t],n=fv(r,n,s,i),-1<n&&(Ym(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete e.g[t],e.h--)))):e&&(e=Jy(e))&&(t=e.g[t.toString()],e=-1,t&&(e=fv(t,n,s,i)),(n=-1<e?t[e]:null)&&Qy(n))}function Qy(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Km])hv(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Sk(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=Jy(t))?(hv(n,e),n.h==0&&(n.src=null,t[Xy]=null)):Ym(e)}}}function Sk(e){return e in t2?t2[e]:t2[e]="on"+e}function H9(e,t){if(e.fa)e=!0;else{t=new Th(t,this);var n=e.listener,s=e.la||e.src;e.ia&&Qy(e),e=n.call(s,t)}return e}function Jy(e){return e=e[Xy],e instanceof Xm?e:null}var e2="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ck(e){return typeof e=="function"?e:(e[e2]||(e[e2]=function(t){return e.handleEvent(t)}),e[e2])}function Cs(){Xa.call(this),this.i=new Xm(this),this.S=this,this.J=null}ks(Cs,Xa);Cs.prototype[Km]=!0;Cs.prototype.removeEventListener=function(e,t,n,s){_k(this,e,t,n,s)};function Ls(e,t){var n,s=e.J;if(s)for(n=[];s;s=s.J)n.push(s);if(e=e.S,s=t.type||t,typeof t=="string")t=new Js(t,e);else if(t instanceof Js)t.target=t.target||e;else{var i=t;t=new Js(s,e),wk(t,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];i=Ip(o,s,!0,t)&&i}if(o=t.g=e,i=Ip(o,s,!0,t)&&i,i=Ip(o,s,!1,t)&&i,n)for(r=0;r<n.length;r++)o=t.g=n[r],i=Ip(o,s,!1,t)&&i}Cs.prototype.N=function(){if(Cs.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Ym(n[s]);delete e.g[t],e.h--}}this.J=null};Cs.prototype.O=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)};Cs.prototype.P=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};function Ip(e,t,n,s){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&hv(e.i,o),i=a.call(l,s)!==!1&&i}}return i&&!s.defaultPrevented}var Zy=Me.JSON.stringify;class W9{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function G9(){var e=tb;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class K9{constructor(){this.h=this.g=null}add(t,n){const s=kk.get();s.set(t,n),this.h?this.h.next=s:this.g=s,this.h=s}}var kk=new W9(()=>new Y9,e=>e.reset());class Y9{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function X9(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Q9(e){Me.setTimeout(()=>{throw e},0)}let Nh,Dh=!1,tb=new K9,Ak=()=>{const e=Me.Promise.resolve(void 0);Nh=()=>{e.then(J9)}};var J9=()=>{for(var e;e=G9();){try{e.h.call(e.g)}catch(n){Q9(n)}var t=kk;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Dh=!1};function Qm(e,t){Cs.call(this),this.h=e||1,this.g=t||Me,this.j=Qs(this.qb,this),this.l=Date.now()}ks(Qm,Cs);ne=Qm.prototype;ne.ga=!1;ne.T=null;ne.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ls(this,"tick"),this.ga&&(eb(this),this.start()))}};ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function eb(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}ne.N=function(){Qm.$.N.call(this),eb(this),delete this.g};function nb(e,t,n){if(typeof e=="function")n&&(e=Qs(e,n));else if(e&&typeof e.handleEvent=="function")e=Qs(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Me.setTimeout(e,t||0)}function Pk(e){e.g=nb(()=>{e.g=null,e.i&&(e.i=!1,Pk(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Z9 extends Xa{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Pk(this)}N(){super.N(),this.g&&(Me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lh(e){Xa.call(this),this.h=e,this.g={}}ks(Lh,Xa);var Mx=[];function Ek(e,t,n,s){Array.isArray(n)||(n&&(Mx[0]=n.toString()),n=Mx);for(var i=0;i<n.length;i++){var r=xk(t,n[i],s||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function Ik(e){Yy(e.g,function(t,n){this.g.hasOwnProperty(n)&&Qy(t)},e),e.g={}}Lh.prototype.N=function(){Lh.$.N.call(this),Ik(this)};Lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Jm(){this.g=!0}Jm.prototype.Ea=function(){this.g=!1};function tO(e,t,n,s,i,r){e.info(function(){if(e.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function eO(e,t,n,s,i,r,o){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+t+`
`+n+`
`+r+" "+o})}function Kc(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+sO(e,n)+(s?" "+s:"")})}function nO(e,t){e.info(function(){return"TIMEOUT: "+t})}Jm.prototype.info=function(){};function sO(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Zy(n)}catch{return t}}var ec={},Ox=null;function Zm(){return Ox=Ox||new Cs}ec.Ta="serverreachability";function Tk(e){Js.call(this,ec.Ta,e)}ks(Tk,Js);function Mh(e){const t=Zm();Ls(t,new Tk(t))}ec.STAT_EVENT="statevent";function Nk(e,t){Js.call(this,ec.STAT_EVENT,e),this.stat=t}ks(Nk,Js);function ci(e){const t=Zm();Ls(t,new Nk(t,e))}ec.Ua="timingevent";function Dk(e,t){Js.call(this,ec.Ua,e),this.size=t}ks(Dk,Js);function mf(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Me.setTimeout(function(){e()},t)}var t0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sb(){}sb.prototype.h=null;function Rx(e){return e.h||(e.h=e.i())}function Mk(){}var vf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ib(){Js.call(this,"d")}ks(ib,Js);function rb(){Js.call(this,"c")}ks(rb,Js);var pv;function e0(){}ks(e0,sb);e0.prototype.g=function(){return new XMLHttpRequest};e0.prototype.i=function(){return{}};pv=new e0;function yf(e,t,n,s){this.l=e,this.j=t,this.m=n,this.W=s||1,this.U=new Lh(this),this.P=iO,e=cv?125:void 0,this.V=new Qm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ok}function Ok(){this.i=null,this.g="",this.h=!1}var iO=45e3,gv={},Gg={};ne=yf.prototype;ne.setTimeout=function(e){this.P=e};function mv(e,t,n){e.L=1,e.v=s0(Uo(t)),e.s=n,e.S=!0,Rk(e,null)}function Rk(e,t){e.G=Date.now(),bf(e),e.A=Uo(e.v);var n=e.A,s=e.W;Array.isArray(s)||(s=[String(s)]),qk(n.i,"t",s),e.C=0,n=e.l.J,e.h=new Ok,e.g=d6(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Z9(Qs(e.Pa,e,e.g),e.O)),Ek(e.U,e.g,"readystatechange",e.nb),t=e.I?bk(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Mh(),tO(e.j,e.u,e.A,e.m,e.W,e.s)}ne.nb=function(e){e=e.target;const t=this.M;t&&Gr(e)==3?t.l():this.Pa(e)};ne.Pa=function(e){try{if(e==this.g)t:{const u=Gr(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||cv||this.g&&(this.h.h||this.g.ja()||$x(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Mh(3):Mh(2)),n0(this);var n=this.g.da();this.ca=n;e:if(Fk(this)){var s=$x(this.g);e="";var i=s.length,r=Gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pl(this),eh(this);var o="";break e}this.h.i=new Me.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:r&&t==i-1});s.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,eO(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ih(a)){var c=a;break e}}c=null}if(n=c)Kc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vv(this,n);else{this.i=!1,this.o=3,ci(12),Pl(this),eh(this);break t}}this.S?(Bk(this,u,o),cv&&this.i&&u==3&&(Ek(this.U,this.V,"tick",this.mb),this.V.start())):(Kc(this.j,this.m,o,null),vv(this,o)),u==4&&Pl(this),this.i&&!this.J&&(u==4?a6(this.l,this):(this.i=!1,bf(this)))}else kO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,ci(12)):(this.o=0,ci(13)),Pl(this),eh(this)}}}catch{}finally{}};function Fk(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function Bk(e,t,n){let s=!0,i;for(;!e.J&&e.C<n.length;)if(i=rO(e,n),i==Gg){t==4&&(e.o=4,ci(14),s=!1),Kc(e.j,e.m,null,"[Incomplete Response]");break}else if(i==gv){e.o=4,ci(15),Kc(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}else Kc(e.j,e.m,i,null),vv(e,i);Fk(e)&&i!=Gg&&i!=gv&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,ci(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),db(t),t.M=!0,ci(11))):(Kc(e.j,e.m,n,"[Invalid Chunked Response]"),Pl(e),eh(e))}ne.mb=function(){if(this.g){var e=Gr(this.g),t=this.g.ja();this.C<t.length&&(n0(this),Bk(this,e,t),this.i&&e!=4&&bf(this))}};function rO(e,t){var n=e.C,s=t.indexOf(`
`,n);return s==-1?Gg:(n=Number(t.substring(n,s)),isNaN(n)?gv:(s+=1,s+n>t.length?Gg:(t=t.slice(s,s+n),e.C=s+n,t)))}ne.cancel=function(){this.J=!0,Pl(this)};function bf(e){e.Y=Date.now()+e.P,jk(e,e.P)}function jk(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=mf(Qs(e.lb,e),t)}function n0(e){e.B&&(Me.clearTimeout(e.B),e.B=null)}ne.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(nO(this.j,this.A),this.L!=2&&(Mh(),ci(17)),Pl(this),this.o=2,eh(this)):jk(this,this.Y-e)};function eh(e){e.l.H==0||e.J||a6(e.l,e)}function Pl(e){n0(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,eb(e.V),Ik(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function vv(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||yv(n.i,e))){if(!e.K&&yv(n.i,e)&&n.H==3){try{var s=n.Ja.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Xg(n),o0(n);else break t;ub(n),ci(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=mf(Qs(n.ib,n),6e3));if(1>=Gk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else El(n,11)}else if((e.K||n.g==e)&&Xg(n),!Ih(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const g=c[5];g!=null&&typeof g=="number"&&0<g&&(s=1.5*g,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const p=e.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var r=s.i;r.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(ob(r,r.h),r.h=null))}if(s.F){const w=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(s.Da=w,An(s.I,s.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=e;if(s.wa=u6(s,s.J?s.pa:null,s.Y),o.K){Kk(s.i,o);var a=o,l=s.L;l&&a.setTimeout(l),a.B&&(n0(a),bf(a)),s.g=o}else r6(s);0<n.j.length&&a0(n)}else c[0]!="stop"&&c[0]!="close"||El(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?El(n,7):cb(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Mh(4)}catch{}}function oO(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Hm(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}t=[],n=0;for(s in e)t[n++]=e[s];return t}function aO(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Hm(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}function $k(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Hm(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=aO(e),s=oO(e),i=s.length,r=0;r<i;r++)t.call(void 0,s[r],n&&n[r],e)}var Vk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lO(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),i=null;if(0<=s){var r=e[n].substring(0,s);i=e[n].substring(s+1)}else r=e[n];t(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Bl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Bl){this.h=e.h,Kg(this,e.j),this.s=e.s,this.g=e.g,Yg(this,e.m),this.l=e.l;var t=e.i,n=new Oh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Fx(this,n),this.o=e.o}else e&&(t=String(e).match(Vk))?(this.h=!1,Kg(this,t[1]||"",!0),this.s=Rd(t[2]||""),this.g=Rd(t[3]||"",!0),Yg(this,t[4]),this.l=Rd(t[5]||"",!0),Fx(this,t[6]||"",!0),this.o=Rd(t[7]||"")):(this.h=!1,this.i=new Oh(null,this.h))}Bl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fd(t,Bx,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Fd(t,Bx,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Fd(n,n.charAt(0)=="/"?dO:uO,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Fd(n,fO)),e.join("")};function Uo(e){return new Bl(e)}function Kg(e,t,n){e.j=n?Rd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yg(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Fx(e,t,n){t instanceof Oh?(e.i=t,pO(e.i,e.h)):(n||(t=Fd(t,hO)),e.i=new Oh(t,e.h))}function An(e,t,n){e.i.set(t,n)}function s0(e){return An(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fd(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,cO),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cO(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Bx=/[#\/\?@]/g,uO=/[#\?:]/g,dO=/[#\?]/g,hO=/[#\?@]/g,fO=/#/g;function Oh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qa(e){e.g||(e.g=new Map,e.h=0,e.i&&lO(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ne=Oh.prototype;ne.add=function(e,t){Qa(this),this.i=null,e=ju(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function zk(e,t){Qa(e),t=ju(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Uk(e,t){return Qa(e),t=ju(e,t),e.g.has(t)}ne.forEach=function(e,t){Qa(this),this.g.forEach(function(n,s){n.forEach(function(i){e.call(t,i,s,this)},this)},this)};ne.ta=function(){Qa(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const i=e[s];for(let r=0;r<i.length;r++)n.push(t[s])}return n};ne.Z=function(e){Qa(this);let t=[];if(typeof e=="string")Uk(this,e)&&(t=t.concat(this.g.get(ju(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};ne.set=function(e,t){return Qa(this),this.i=null,e=ju(this,e),Uk(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ne.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function qk(e,t,n){zk(e,t),0<n.length&&(e.i=null,e.g.set(ju(e,t),Gy(n)),e.h+=n.length)}ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),e.push(i)}}return this.i=e.join("&")};function ju(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function pO(e,t){t&&!e.j&&(Qa(e),e.i=null,e.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(zk(this,s),qk(this,i,n))},e)),e.j=t}var gO=class{constructor(e,t){this.g=e,this.map=t}};function Hk(e){this.l=e||mO,Me.PerformanceNavigationTiming?(e=Me.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Me.g&&Me.g.Ka&&Me.g.Ka()&&Me.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mO=10;function Wk(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Gk(e){return e.h?1:e.g?e.g.size:0}function yv(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function ob(e,t){e.g?e.g.add(t):e.h=t}function Kk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Hk.prototype.cancel=function(){if(this.i=Yk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function Yk(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Gy(e.i)}var vO=class{stringify(e){return Me.JSON.stringify(e,void 0)}parse(e){return Me.JSON.parse(e,void 0)}};function yO(){this.g=new vO}function bO(e,t,n){const s=n||"";try{$k(e,function(i,r){let o=i;Wm(i)&&(o=Zy(i)),t.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw t.push(s+"type="+encodeURIComponent("_badmap")),i}}function wO(e,t){const n=new Jm;if(Me.Image){const s=new Image;s.onload=Ep(Tp,n,s,"TestLoadImage: loaded",!0,t),s.onerror=Ep(Tp,n,s,"TestLoadImage: error",!1,t),s.onabort=Ep(Tp,n,s,"TestLoadImage: abort",!1,t),s.ontimeout=Ep(Tp,n,s,"TestLoadImage: timeout",!1,t),Me.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}function Tp(e,t,n,s,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(s)}catch{}}function wf(e){this.l=e.fc||null,this.j=e.ob||!1}ks(wf,sb);wf.prototype.g=function(){return new i0(this.l,this.j)};wf.prototype.i=function(e){return function(){return e}}({});function i0(e,t){Cs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ab,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ks(i0,Cs);var ab=0;ne=i0.prototype;ne.open=function(e,t){if(this.readyState!=ab)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Rh(this)};ne.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Me).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xf(this)),this.readyState=ab};ne.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rh(this)),this.g&&(this.readyState=3,Rh(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Me.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xk(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function Xk(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}ne.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xf(this):Rh(this),this.readyState==3&&Xk(this)}};ne.Za=function(e){this.g&&(this.response=this.responseText=e,xf(this))};ne.Ya=function(e){this.g&&(this.response=e,xf(this))};ne.ka=function(){this.g&&xf(this)};function xf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Rh(e)}ne.setRequestHeader=function(e,t){this.v.append(e,t)};ne.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ne.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Rh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(i0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var xO=Me.JSON.parse;function qn(e){Cs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qk,this.L=this.M=!1}ks(qn,Cs);var Qk="",_O=/^https?$/i,SO=["POST","PUT"];ne=qn.prototype;ne.Oa=function(e){this.M=e};ne.ha=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pv.g(),this.C=this.u?Rx(this.u):Rx(pv),this.g.onreadystatechange=Qs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(r){jx(this,r);return}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=Me.FormData&&e instanceof Me.FormData,!(0<=gk(SO,t))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{t6(this),0<this.B&&((this.L=CO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qs(this.ua,this)):this.A=nb(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(r){jx(this,r)}};function CO(e){return Cu&&typeof e.timeout=="number"&&e.ontimeout!==void 0}ne.ua=function(){typeof Wy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ls(this,"timeout"),this.abort(8))};function jx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Jk(e),r0(e)}function Jk(e){e.F||(e.F=!0,Ls(e,"complete"),Ls(e,"error"))}ne.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ls(this,"complete"),Ls(this,"abort"),r0(this))};ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),r0(this,!0)),qn.$.N.call(this)};ne.La=function(){this.s||(this.G||this.v||this.l?Zk(this):this.kb())};ne.kb=function(){Zk(this)};function Zk(e){if(e.h&&typeof Wy<"u"&&(!e.C[1]||Gr(e)!=4||e.da()!=2)){if(e.v&&Gr(e)==4)nb(e.La,0,e);else if(Ls(e,"readystatechange"),Gr(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var s;if(s=o===0){var i=String(e.I).match(Vk)[1]||null;!i&&Me.self&&Me.self.location&&(i=Me.self.location.protocol.slice(0,-1)),s=!_O.test(i?i.toLowerCase():"")}n=s}if(n)Ls(e,"complete"),Ls(e,"success");else{e.m=6;try{var r=2<Gr(e)?e.g.statusText:""}catch{r=""}e.j=r+" ["+e.da()+"]",Jk(e)}}finally{r0(e)}}}}function r0(e,t){if(e.g){t6(e);const n=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ls(e,"ready");try{n.onreadystatechange=s}catch{}}}function t6(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Me.clearTimeout(e.A),e.A=null)}ne.isActive=function(){return!!this.g};function Gr(e){return e.g?e.g.readyState:0}ne.da=function(){try{return 2<Gr(this)?this.g.status:-1}catch{return-1}};ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ne.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),xO(t)}};function $x(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Qk:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function kO(e){const t={};e=(e.g&&2<=Gr(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<e.length;s++){if(Ih(e[s]))continue;var n=X9(e[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=t[i]||[];t[i]=r,r.push(n)}z9(t,function(s){return s.join(", ")})}ne.Ia=function(){return this.m};ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function e6(e){let t="";return Yy(e,function(n,s){t+=s,t+=":",t+=n,t+=`\r
`}),t}function lb(e,t,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=e6(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):An(e,t,n))}function Cd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function n6(e){this.Ga=0,this.j=[],this.l=new Jm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cd("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cd("baseRetryDelayMs",5e3,e),this.hb=Cd("retryDelaySeedMs",1e4,e),this.eb=Cd("forwardChannelMaxRetries",2,e),this.xa=Cd("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Hk(e&&e.concurrentRequestLimit),this.Ja=new yO,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ne=n6.prototype;ne.ra=8;ne.H=1;function cb(e){if(s6(e),e.H==3){var t=e.W++,n=Uo(e.I);if(An(n,"SID",e.K),An(n,"RID",t),An(n,"TYPE","terminate"),_f(e,n),t=new yf(e,e.l,t),t.L=2,t.v=s0(Uo(n)),n=!1,Me.navigator&&Me.navigator.sendBeacon)try{n=Me.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&Me.Image&&(new Image().src=t.v,n=!0),n||(t.g=d6(t.l,null),t.g.ha(t.v)),t.G=Date.now(),bf(t)}c6(e)}function o0(e){e.g&&(db(e),e.g.cancel(),e.g=null)}function s6(e){o0(e),e.u&&(Me.clearTimeout(e.u),e.u=null),Xg(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Me.clearTimeout(e.m),e.m=null)}function a0(e){if(!Wk(e.i)&&!e.m){e.m=!0;var t=e.Na;Nh||Ak(),Dh||(Nh(),Dh=!0),tb.add(t,e),e.C=0}}function AO(e,t){return Gk(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=mf(Qs(e.Na,e,t),l6(e,e.C)),e.C++,!0)}ne.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new yf(this,this.l,e);let r=this.s;if(this.U&&(r?(r=bk(r),wk(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=i6(this,i,t),n=Uo(this.I),An(n,"RID",e),An(n,"CVER",22),this.F&&An(n,"X-HTTP-Session-Id",this.F),_f(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(e6(r)))+"&"+t:this.o&&lb(n,this.o,r)),ob(this.i,i),this.bb&&An(n,"TYPE","init"),this.P?(An(n,"$req",t),An(n,"SID","null"),i.aa=!0,mv(i,n,null)):mv(i,n,t),this.H=2}}else this.H==3&&(e?Vx(this,e):this.j.length==0||Wk(this.i)||Vx(this))};function Vx(e,t){var n;t?n=t.m:n=e.W++;const s=Uo(e.I);An(s,"SID",e.K),An(s,"RID",n),An(s,"AID",e.V),_f(e,s),e.o&&e.s&&lb(s,e.o,e.s),n=new yf(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=i6(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ob(e.i,n),mv(n,s,t)}function _f(e,t){e.na&&Yy(e.na,function(n,s){An(t,s,n)}),e.h&&$k({},function(n,s){An(t,s,n)})}function i6(e,t,n){n=Math.min(e.j.length,n);var s=e.h?Qs(e.h.Va,e.h,e):null;t:{var i=e.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=r,0>c)r=Math.max(0,i[l].g-100),a=!1;else try{bO(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,s}function r6(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Nh||Ak(),Dh||(Nh(),Dh=!0),tb.add(t,e),e.A=0}}function ub(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=mf(Qs(e.Ma,e),l6(e,e.A)),e.A++,!0)}ne.Ma=function(){if(this.u=null,o6(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=mf(Qs(this.jb,this),e)}};ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ci(10),o0(this),o6(this))};function db(e){e.B!=null&&(Me.clearTimeout(e.B),e.B=null)}function o6(e){e.g=new yf(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Uo(e.wa);An(t,"RID","rpc"),An(t,"SID",e.K),An(t,"AID",e.V),An(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&An(t,"TO",e.qa),An(t,"TYPE","xmlhttp"),_f(e,t),e.o&&e.s&&lb(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=s0(Uo(t)),n.s=null,n.S=!0,Rk(n,e)}ne.ib=function(){this.v!=null&&(this.v=null,o0(this),ub(this),ci(19))};function Xg(e){e.v!=null&&(Me.clearTimeout(e.v),e.v=null)}function a6(e,t){var n=null;if(e.g==t){Xg(e),db(e),e.g=null;var s=2}else if(yv(e.i,t))n=t.F,Kk(e.i,t),s=1;else return;if(e.H!=0){if(t.i)if(s==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;s=Zm(),Ls(s,new Dk(s,n)),a0(e)}else r6(e);else if(i=t.o,i==3||i==0&&0<t.ca||!(s==1&&AO(e,t)||s==2&&ub(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:El(e,5);break;case 4:El(e,10);break;case 3:El(e,6);break;default:El(e,2)}}}function l6(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function El(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var s=Qs(e.pb,e);n||(n=new Bl("//www.google.com/images/cleardot.gif"),Me.location&&Me.location.protocol=="http"||Kg(n,"https"),s0(n)),wO(n.toString(),s)}else ci(2);e.H=0,e.h&&e.h.za(t),c6(e),s6(e)}ne.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ci(2)):(this.l.info("Failed to ping google.com"),ci(1))};function c6(e){if(e.H=0,e.ma=[],e.h){const t=Yk(e.i);(t.length!=0||e.j.length!=0)&&(Nx(e.ma,t),Nx(e.ma,e.j),e.i.i.length=0,Gy(e.j),e.j.length=0),e.h.ya()}}function u6(e,t,n){var s=n instanceof Bl?Uo(n):new Bl(n);if(s.g!="")t&&(s.g=t+"."+s.g),Yg(s,s.m);else{var i=Me.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var r=new Bl(null);s&&Kg(r,s),t&&(r.g=t),i&&Yg(r,i),n&&(r.l=n),s=r}return n=e.F,t=e.Da,n&&t&&An(s,n,t),An(s,"VER",e.ra),_f(e,s),s}function d6(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new qn(new wf({ob:!0})):new qn(e.va),t.Oa(e.J),t}ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function h6(){}ne=h6.prototype;ne.Ba=function(){};ne.Aa=function(){};ne.za=function(){};ne.ya=function(){};ne.isActive=function(){return!0};ne.Va=function(){};function Qg(){if(Cu&&!(10<=Number(B9)))throw Error("Environmental error: no available transport.")}Qg.prototype.g=function(e,t){return new zi(e,t)};function zi(e,t){Cs.call(this),this.g=new n6(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ih(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ih(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new $u(this)}ks(zi,Cs);zi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ci(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=u6(e,null,e.Y),a0(e)};zi.prototype.close=function(){cb(this.g)};zi.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Zy(e),e=n);t.j.push(new gO(t.fb++,e)),t.H==3&&a0(t)};zi.prototype.N=function(){this.g.h=null,delete this.j,cb(this.g),delete this.g,zi.$.N.call(this)};function f6(e){ib.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}ks(f6,ib);function p6(){rb.call(this),this.status=1}ks(p6,rb);function $u(e){this.g=e}ks($u,h6);$u.prototype.Ba=function(){Ls(this.g,"a")};$u.prototype.Aa=function(e){Ls(this.g,new f6(e))};$u.prototype.za=function(e){Ls(this.g,new p6)};$u.prototype.ya=function(){Ls(this.g,"b")};function PO(){this.blockSize=-1}function Pr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ks(Pr,PO);Pr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function n2(e,t,n){n||(n=0);var s=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)s[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var r=e.g[3],o=t+(r^n&(i^r))+s[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[1]+3905402710&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[5]+1200080426&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[9]+2336552879&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[13]+4254626195&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^r&(n^i))+s[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[6]+3225465664&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[10]+38016083&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[14]+3275163606&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[2]+4243563512&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^r)+s[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[8]+2272392833&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[4]+1272893353&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[0]+3936430074&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[12]+3873151461&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~r))+s[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[7]+1126891415&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[3]+2399980690&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[15]+4264355552&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[11]+3174756917&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+r&4294967295}Pr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,s=this.m,i=this.h,r=0;r<t;){if(i==0)for(;r<=n;)n2(this,e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[i++]=e.charCodeAt(r++),i==this.blockSize){n2(this,s),i=0;break}}else for(;r<t;)if(s[i++]=e[r++],i==this.blockSize){n2(this,s),i=0;break}}this.h=i,this.i+=t};Pr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};function pn(e,t){this.h=t;for(var n=[],s=!0,i=e.length-1;0<=i;i--){var r=e[i]|0;s&&r==t||(n[i]=r,s=!1)}this.g=n}var EO={};function hb(e){return-128<=e&&128>e?O9(e,function(t){return new pn([t|0],0>t?-1:0)}):new pn([e|0],0>e?-1:0)}function Kr(e){if(isNaN(e)||!isFinite(e))return ru;if(0>e)return Ns(Kr(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=bv;return new pn(t,0)}function g6(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Ns(g6(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kr(Math.pow(t,8)),s=ru,i=0;i<e.length;i+=8){var r=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+r),t);8>r?(r=Kr(Math.pow(t,r)),s=s.R(r).add(Kr(o))):(s=s.R(n),s=s.add(Kr(o)))}return s}var bv=4294967296,ru=hb(0),wv=hb(1),zx=hb(16777216);ne=pn.prototype;ne.ea=function(){if(tr(this))return-Ns(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.D(n);e+=(0<=s?s:bv+s)*t,t*=bv}return e};ne.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Oo(this))return"0";if(tr(this))return"-"+Ns(this).toString(e);for(var t=Kr(Math.pow(e,6)),n=this,s="";;){var i=Zg(n,t).g;n=Jg(n,i.R(t));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Oo(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};ne.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Oo(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function tr(e){return e.h==-1}ne.X=function(e){return e=Jg(this,e),tr(e)?-1:Oo(e)?0:1};function Ns(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new pn(n,~e.h).add(wv)}ne.abs=function(){return tr(this)?Ns(this):this};ne.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var r=s+(this.D(i)&65535)+(e.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new pn(n,n[n.length-1]&-2147483648?-1:0)};function Jg(e,t){return e.add(Ns(t))}ne.R=function(e){if(Oo(this)||Oo(e))return ru;if(tr(this))return tr(e)?Ns(this).R(Ns(e)):Ns(Ns(this).R(e));if(tr(e))return Ns(this.R(Ns(e)));if(0>this.X(zx)&&0>e.X(zx))return Kr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=e.D(i)>>>16,l=e.D(i)&65535;n[2*s+2*i]+=o*l,Np(n,2*s+2*i),n[2*s+2*i+1]+=r*l,Np(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,Np(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,Np(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new pn(n,0)};function Np(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function kd(e,t){this.g=e,this.h=t}function Zg(e,t){if(Oo(t))throw Error("division by zero");if(Oo(e))return new kd(ru,ru);if(tr(e))return t=Zg(Ns(e),t),new kd(Ns(t.g),Ns(t.h));if(tr(t))return t=Zg(e,Ns(t)),new kd(Ns(t.g),t.h);if(30<e.g.length){if(tr(e)||tr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wv,s=t;0>=s.X(e);)n=Ux(n),s=Ux(s);var i=Oc(n,1),r=Oc(s,1);for(s=Oc(s,2),n=Oc(n,2);!Oo(s);){var o=r.add(s);0>=o.X(e)&&(i=i.add(n),r=o),s=Oc(s,1),n=Oc(n,1)}return t=Jg(e,i.R(t)),new kd(i,t)}for(i=ru;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=Kr(n),o=r.R(t);tr(o)||0<o.X(e);)n-=s,r=Kr(n),o=r.R(t);Oo(r)&&(r=wv),i=i.add(r),e=Jg(e,o)}return new kd(i,e)}ne.gb=function(e){return Zg(this,e).h};ne.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)&e.D(s);return new pn(n,this.h&e.h)};ne.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)|e.D(s);return new pn(n,this.h|e.h)};ne.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)^e.D(s);return new pn(n,this.h^e.h)};function Ux(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.D(s)<<1|e.D(s-1)>>>31;return new pn(n,e.h)}function Oc(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],r=0;r<s;r++)i[r]=0<t?e.D(r+n)>>>t|e.D(r+n+1)<<32-t:e.D(r+n);return new pn(i,e.h)}Qg.prototype.createWebChannel=Qg.prototype.g;zi.prototype.send=zi.prototype.u;zi.prototype.open=zi.prototype.m;zi.prototype.close=zi.prototype.close;t0.NO_ERROR=0;t0.TIMEOUT=8;t0.HTTP_ERROR=6;Lk.COMPLETE="complete";Mk.EventType=vf;vf.OPEN="a";vf.CLOSE="b";vf.ERROR="c";vf.MESSAGE="d";Cs.prototype.listen=Cs.prototype.O;qn.prototype.listenOnce=qn.prototype.P;qn.prototype.getLastError=qn.prototype.Sa;qn.prototype.getLastErrorCode=qn.prototype.Ia;qn.prototype.getStatus=qn.prototype.da;qn.prototype.getResponseJson=qn.prototype.Wa;qn.prototype.getResponseText=qn.prototype.ja;qn.prototype.send=qn.prototype.ha;qn.prototype.setWithCredentials=qn.prototype.Oa;Pr.prototype.digest=Pr.prototype.l;Pr.prototype.reset=Pr.prototype.reset;Pr.prototype.update=Pr.prototype.j;pn.prototype.add=pn.prototype.add;pn.prototype.multiply=pn.prototype.R;pn.prototype.modulo=pn.prototype.gb;pn.prototype.compare=pn.prototype.X;pn.prototype.toNumber=pn.prototype.ea;pn.prototype.toString=pn.prototype.toString;pn.prototype.getBits=pn.prototype.D;pn.fromNumber=Kr;pn.fromString=g6;var IO=function(){return new Qg},TO=function(){return Zm()},s2=t0,NO=Lk,DO=ec,qx={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},LO=wf,Dp=Mk,MO=qn,OO=Pr,ou=pn;const Hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};zs.UNAUTHENTICATED=new zs(null),zs.GOOGLE_CREDENTIALS=new zs("google-credentials-uid"),zs.FIRST_PARTY=new zs("first-party-uid"),zs.MOCK_USER=new zs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new $m("@firebase/firestore");function Wx(){return Wl.logLevel}function pe(e,...t){if(Wl.logLevel<=sn.DEBUG){const n=t.map(fb);Wl.debug(`Firestore (${Vu}): ${e}`,...n)}}function qo(e,...t){if(Wl.logLevel<=sn.ERROR){const n=t.map(fb);Wl.error(`Firestore (${Vu}): ${e}`,...n)}}function ku(e,...t){if(Wl.logLevel<=sn.WARN){const n=t.map(fb);Wl.warn(`Firestore (${Vu}): ${e}`,...n)}}function fb(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(e="Unexpected state"){const t=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: `+e;throw qo(t),new Error(t)}function Cn(e,t){e||De()}function je(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let ce=class extends Tr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m6=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},RO=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(zs.UNAUTHENTICATED))}shutdown(){}},FO=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},BO=class{constructor(t){this.t=t,this.currentUser=zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new to;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new to,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new to)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Cn(typeof s.accessToken=="string"),new m6(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Cn(t===null||typeof t=="string"),new zs(t)}},jO=class{constructor(t,n,s){this.h=t,this.l=n,this.m=s,this.type="FirstParty",this.user=zs.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},$O=class{constructor(t,n,s){this.h=t,this.l=n,this.m=s}getToken(){return Promise.resolve(new jO(this.h,this.l,this.m))}start(t,n){t.enqueueRetryable(()=>n(zs.FIRST_PARTY))}shutdown(){}invalidateToken(){}},VO=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zO=class{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,n){const s=r=>{r.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.T;return this.T=r.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?i(r):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Cn(typeof n.token=="string"),this.T=n.token,new VO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v6=class{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=UO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%t.length))}return s}};function on(e,t){return e<t?-1:e>t?1:0}function Au(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let he=class fg{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ce(zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ce(zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ce(zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return fg.fromMillis(Date.now())}static fromDate(t){return fg.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new fg(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ue=class pg{constructor(t){this.timestamp=t}static fromTimestamp(t){return new pg(t)}static min(){return new pg(new he(0,0))}static max(){return new pg(new he(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y6=class xv{constructor(t,n,s){n===void 0?n=0:n>t.length&&De(),s===void 0?s=t.length-n:s>t.length-n&&De(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return xv.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xv?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=t.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Yn=class gg extends y6{construct(t,n,s){return new gg(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ce(zt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new gg(n)}static emptyPath(){return new gg([])}};const qO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let oo=class Uc extends y6{construct(t,n,s){return new Uc(t,n,s)}static isValidIdentifier(t){return qO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Uc.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Uc(["__name__"])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new ce(zt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new ce(zt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ce(zt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new ce(zt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Uc(n)}static emptyPath(){return new Uc([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ee=class Bd{constructor(t){this.path=t}static fromPath(t){return new Bd(Yn.fromString(t))}static fromName(t){return new Bd(Yn.fromString(t).popFirst(5))}static empty(){return new Bd(Yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Yn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Yn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bd(new Yn(t.slice()))}};function HO(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(s===1e9?new he(n+1,0):new he(n,s));return new Fh(i,Ee.empty(),t)}function WO(e){return new Fh(e.readTime,e.key,-1)}let Fh=class _v{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new _v(Ue.min(),Ee.empty(),-1)}static max(){return new _v(Ue.max(),Ee.empty(),-1)}};function GO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ee.comparator(e.documentKey,t.documentKey),n!==0?n:on(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let YO=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(e){if(e.code!==zt.FAILED_PRECONDITION||e.message!==KO)throw e;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let te=class vi{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new vi((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof vi?n:vi.resolve(n)}catch(n){return vi.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):vi.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):vi.reject(n)}static resolve(t){return new vi((n,s)=>{n(t)})}static reject(t){return new vi((n,s)=>{s(t)})}static waitFor(t){return new vi((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(t){let n=vi.resolve(!1);for(const s of t)n=n.next(i=>i?vi.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new vi((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(t,n){return new vi((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}};function Cf(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pb=class{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>n.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}};pb.ct=-1;function l0(e){return e==null}function tm(e){return e===0&&1/e==-1/0}function XO(e){return typeof e=="number"&&Number.isInteger(e)&&!tm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function b6(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds=class Sv{constructor(t,n){this.comparator=t,this.root=n||Ts.EMPTY}insert(t,n){return new Sv(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(t){return new Sv(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Lp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Lp(this.root,t,this.comparator,!1)}getReverseIterator(){return new Lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Lp(this.root,t,this.comparator,!0)}};class Lp{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ts{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Ts.RED,this.left=i??Ts.EMPTY,this.right=r??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Ts(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ts.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const t=this.left.check();if(t!==this.right.check())throw De();return t+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1;Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,n,s,i){return this}insert(e,t,n){return new Ts(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t){this.comparator=t,this.data=new ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kx(this.data.getIterator())}getIteratorFrom(t){return new Kx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Zs)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Zs(this.comparator);return n.data=t,n}}class Kx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this.fields=t,t.sort(oo.comparator)}static empty(){return new Bi([])}unionWith(t){let n=new Zs(oo.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Bi(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Au(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new w6("Invalid base64 string: "+i):i}}(t);return new ei(n)}static fromUint8Array(t){const n=function(s){let i="";for(let r=0;r<s.length;++r)i+=String.fromCharCode(s[r]);return i}(t);return new ei(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(e){if(Cn(!!e),typeof e=="string"){let t=0;const n=QO.exec(e);if(Cn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:as(e.seconds),nanos:as(e.nanos)}}function as(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Gl(e){return typeof e=="string"?ei.fromBase64String(e):ei.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mb(e){const t=e.mapValue.fields.__previous_value__;return gb(t)?mb(t):t}function Bh(e){const t=Va(e.mapValue.fields.__local_write_time__.timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(t,n,s,i,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jh{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new jh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof jh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp={mapValue:{}};function Kl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gb(e)?4:ZO(e)?9007199254740991:10:De()}function ao(e,t){if(e===t)return!0;const n=Kl(e);if(n!==Kl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bh(e).isEqual(Bh(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const r=Va(s.timestampValue),o=Va(i.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Gl(s.bytesValue).isEqual(Gl(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return as(s.geoPointValue.latitude)===as(i.geoPointValue.latitude)&&as(s.geoPointValue.longitude)===as(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return as(s.integerValue)===as(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const r=as(s.doubleValue),o=as(i.doubleValue);return r===o?tm(r)===tm(o):isNaN(r)&&isNaN(o)}return!1}(e,t);case 9:return Au(e.arrayValue.values||[],t.arrayValue.values||[],ao);case 10:return function(s,i){const r=s.mapValue.fields||{},o=i.mapValue.fields||{};if(Gx(r)!==Gx(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!ao(r[a],o[a])))return!1;return!0}(e,t);default:return De()}}function $h(e,t){return(e.values||[]).find(n=>ao(n,t))!==void 0}function Pu(e,t){if(e===t)return 0;const n=Kl(e),s=Kl(t);if(n!==s)return on(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return on(e.booleanValue,t.booleanValue);case 2:return function(i,r){const o=as(i.integerValue||i.doubleValue),a=as(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(e,t);case 3:return Yx(e.timestampValue,t.timestampValue);case 4:return Yx(Bh(e),Bh(t));case 5:return on(e.stringValue,t.stringValue);case 6:return function(i,r){const o=Gl(i),a=Gl(r);return o.compareTo(a)}(e.bytesValue,t.bytesValue);case 7:return function(i,r){const o=i.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=on(o[l],a[l]);if(c!==0)return c}return on(o.length,a.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,r){const o=on(as(i.latitude),as(r.latitude));return o!==0?o:on(as(i.longitude),as(r.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,r){const o=i.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Pu(o[l],a[l]);if(c)return c}return on(o.length,a.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,r){if(i===Mp.mapValue&&r===Mp.mapValue)return 0;if(i===Mp.mapValue)return 1;if(r===Mp.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=r.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=on(a[u],c[u]);if(h!==0)return h;const g=Pu(o[a[u]],l[c[u]]);if(g!==0)return g}return on(a.length,c.length)}(e.mapValue,t.mapValue);default:throw De()}}function Yx(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return on(e,t);const n=Va(e),s=Va(t),i=on(n.seconds,s.seconds);return i!==0?i:on(n.nanos,s.nanos)}function Eu(e){return Cv(e)}function Cv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(s){const i=Va(s);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Gl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ee.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(s){let i="[",r=!0;for(const o of s.values||[])r?r=!1:i+=",",i+=Cv(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(s){const i=Object.keys(s.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Cv(s.fields[a])}`;return r+"}"}(e.mapValue):De();var t,n}function Xx(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function kv(e){return!!e&&"integerValue"in e}function vb(e){return!!e&&"arrayValue"in e}function Qx(e){return!!e&&"nullValue"in e}function Jx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mg(e){return!!e&&"mapValue"in e}function nh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nc(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=nh(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ZO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t){this.value=t}static empty(){return new yi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!mg(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=nh(n)}setAll(t){let n=oo.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=nh(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());mg(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ao(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];mg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){nc(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new yi(nh(this.value))}}function x6(e){const t=[];return nc(e.fields,(n,s)=>{const i=new oo([n]);if(mg(s)){const r=x6(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Bi(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ws(t,0,Ue.min(),Ue.min(),Ue.min(),yi.empty(),0)}static newFoundDocument(t,n,s,i){return new Ws(t,1,n,Ue.min(),s,i,0)}static newNoDocument(t,n){return new Ws(t,2,n,Ue.min(),Ue.min(),yi.empty(),0)}static newUnknownDocument(t,n){return new Ws(t,3,n,Ue.min(),Ue.min(),yi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ws&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ws(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t,n){this.position=t,this.inclusive=n}}function Zx(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=Ee.comparator(Ee.fromName(o.referenceValue),n.key):s=Pu(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function t4(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ao(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t,n="asc"){this.field=t,this.dir=n}}function tR(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{}class ls extends _6{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new nR(t,n,s):n==="array-contains"?new rR(t,s):n==="in"?new oR(t,s):n==="not-in"?new aR(t,s):n==="array-contains-any"?new lR(t,s):new ls(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new sR(t,s):new iR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pu(n,this.value)):n!==null&&Kl(this.value)===Kl(n)&&this.matchesComparison(Pu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Er extends _6{constructor(t,n){super(),this.filters=t,this.op=n,this.lt=null}static create(t,n){return new Er(t,n)}matches(t){return S6(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft(n=>n.isInequality());return t!==null?t.field:null}ft(t){for(const n of this.getFlattenedFilters())if(t(n))return n;return null}}function S6(e){return e.op==="and"}function C6(e){return eR(e)&&S6(e)}function eR(e){for(const t of e.filters)if(t instanceof Er)return!1;return!0}function Av(e){if(e instanceof ls)return e.field.canonicalString()+e.op.toString()+Eu(e.value);if(C6(e))return e.filters.map(t=>Av(t)).join(",");{const t=e.filters.map(n=>Av(n)).join(",");return`${e.op}(${t})`}}function k6(e,t){return e instanceof ls?function(n,s){return s instanceof ls&&n.op===s.op&&n.field.isEqual(s.field)&&ao(n.value,s.value)}(e,t):e instanceof Er?function(n,s){return s instanceof Er&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,r,o)=>i&&k6(r,s.filters[o]),!0):!1}(e,t):void De()}function A6(e){return e instanceof ls?function(t){return`${t.field.canonicalString()} ${t.op} ${Eu(t.value)}`}(e):e instanceof Er?function(t){return t.op.toString()+" {"+t.getFilters().map(A6).join(" ,")+"}"}(e):"Filter"}class nR extends ls{constructor(t,n,s){super(t,n,s),this.key=Ee.fromName(s.referenceValue)}matches(t){const n=Ee.comparator(t.key,this.key);return this.matchesComparison(n)}}class sR extends ls{constructor(t,n){super(t,"in",n),this.keys=P6("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class iR extends ls{constructor(t,n){super(t,"not-in",n),this.keys=P6("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function P6(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ee.fromName(s.referenceValue))}class rR extends ls{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vb(n)&&$h(n.arrayValue,this.value)}}class oR extends ls{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&$h(this.value.arrayValue,n)}}class aR extends ls{constructor(t,n){super(t,"not-in",n)}matches(t){if($h(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!$h(this.value.arrayValue,n)}}class lR extends ls{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>$h(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.dt=null}}function e4(e,t=null,n=[],s=[],i=null,r=null,o=null){return new cR(e,t,n,s,i,r,o)}function yb(e){const t=je(e);if(t.dt===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Av(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),l0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Eu(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Eu(s)).join(",")),t.dt=n}return t.dt}function bb(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tR(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!k6(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!t4(e.startAt,t.startAt)&&t4(e.endAt,t.endAt)}function Pv(e){return Ee.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function uR(e,t,n,s,i,r,o,a){return new zu(e,t,n,s,i,r,o,a)}function wb(e){return new zu(e)}function n4(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function xb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function c0(e){for(const t of e.filters){const n=t.getFirstInequalityField();if(n!==null)return n}return null}function E6(e){return e.collectionGroup!==null}function lu(e){const t=je(e);if(t.wt===null){t.wt=[];const n=c0(t),s=xb(t);if(n!==null&&s===null)n.isKeyField()||t.wt.push(new au(n)),t.wt.push(new au(oo.keyField(),"asc"));else{let i=!1;for(const r of t.explicitOrderBy)t.wt.push(r),r.field.isKeyField()&&(i=!0);if(!i){const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new au(oo.keyField(),r))}}}return t.wt}function lo(e){const t=je(e);if(!t._t)if(t.limitType==="F")t._t=e4(t.path,t.collectionGroup,lu(t),t.filters,t.limit,t.startAt,t.endAt);else{const n=[];for(const r of lu(t)){const o=r.dir==="desc"?"asc":"desc";n.push(new au(r.field,o))}const s=t.endAt?new em(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new em(t.startAt.position,t.startAt.inclusive):null;t._t=e4(t.path,t.collectionGroup,n,t.filters,t.limit,s,i)}return t._t}function Ev(e,t){t.getFirstInequalityField(),c0(e);const n=e.filters.concat([t]);return new zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nm(e,t,n){return new zu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function u0(e,t){return bb(lo(e),lo(t))&&e.limitType===t.limitType}function I6(e){return`${yb(lo(e))}|lt:${e.limitType}`}function Iv(e){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>A6(s)).join(", ")}]`),l0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Eu(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Eu(s)).join(",")),`Target(${n})`}(lo(e))}; limitType=${e.limitType})`}function d0(e,t){return t.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ee.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,s){for(const i of lu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(n,s){return!(n.startAt&&!function(i,r,o){const a=Zx(i,r,o);return i.inclusive?a<=0:a<0}(n.startAt,lu(n),s)||n.endAt&&!function(i,r,o){const a=Zx(i,r,o);return i.inclusive?a>=0:a>0}(n.endAt,lu(n),s))}(e,t)}function dR(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function T6(e){return(t,n)=>{let s=!1;for(const i of lu(e)){const r=hR(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function hR(e,t,n){const s=e.field.isKeyField()?Ee.comparator(t.key,n.key):function(i,r,o){const a=r.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Pu(a,l):De()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){nc(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return b6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new ds(Ee.comparator);function Ho(){return fR}const N6=new ds(Ee.comparator);function jd(...e){let t=N6;for(const n of e)t=t.insert(n.key,n);return t}function D6(e){let t=N6;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Il(){return sh()}function L6(){return sh()}function sh(){return new Uu(e=>e.toString(),(e,t)=>e.isEqual(t))}const pR=new ds(Ee.comparator),gR=new Zs(Ee.comparator);function Ye(...e){let t=gR;for(const n of e)t=t.add(n);return t}const mR=new Zs(on);function vR(){return mR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(t)?"-0":t}}function O6(e){return{integerValue:""+e}}function yR(e,t){return XO(t)?O6(t):M6(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this._=void 0}}function bR(e,t,n){return e instanceof Vh?function(s,i){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&gb(i)&&(i=mb(i)),i&&(r.fields.__previous_value__=i),{mapValue:r}}(n,t):e instanceof zh?F6(e,t):e instanceof Uh?B6(e,t):function(s,i){const r=R6(s,i),o=s4(r)+s4(s.gt);return kv(r)&&kv(s.gt)?O6(o):M6(s.serializer,o)}(e,t)}function wR(e,t,n){return e instanceof zh?F6(e,t):e instanceof Uh?B6(e,t):n}function R6(e,t){return e instanceof sm?kv(n=t)||function(s){return!!s&&"doubleValue"in s}(n)?t:{integerValue:0}:null;var n}class Vh extends h0{}class zh extends h0{constructor(t){super(),this.elements=t}}function F6(e,t){const n=j6(t);for(const s of e.elements)n.some(i=>ao(i,s))||n.push(s);return{arrayValue:{values:n}}}class Uh extends h0{constructor(t){super(),this.elements=t}}function B6(e,t){let n=j6(t);for(const s of e.elements)n=n.filter(i=>!ao(i,s));return{arrayValue:{values:n}}}class sm extends h0{constructor(t,n){super(),this.serializer=t,this.gt=n}}function s4(e){return as(e.integerValue||e.doubleValue)}function j6(e){return vb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t,n){this.field=t,this.transform=n}}function _R(e,t){return e.field.isEqual(t.field)&&function(n,s){return n instanceof zh&&s instanceof zh||n instanceof Uh&&s instanceof Uh?Au(n.elements,s.elements,ao):n instanceof sm&&s instanceof sm?ao(n.gt,s.gt):n instanceof Vh&&s instanceof Vh}(e.transform,t.transform)}class SR{constructor(t,n){this.version=t,this.transformResults=n}}class sr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new sr}static exists(t){return new sr(void 0,t)}static updateTime(t){return new sr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function vg(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class f0{}function $6(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new _b(e.key,sr.none()):new kf(e.key,e.data,sr.none());{const n=e.data,s=yi.empty();let i=new Zs(oo.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Ja(e.key,s,new Bi(i.toArray()),sr.none())}}function CR(e,t,n){e instanceof kf?function(s,i,r){const o=s.value.clone(),a=r4(s.fieldTransforms,i,r.transformResults);o.setAll(a),i.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(e,t,n):e instanceof Ja?function(s,i,r){if(!vg(s.precondition,i))return void i.convertToUnknownDocument(r.version);const o=r4(s.fieldTransforms,i,r.transformResults),a=i.data;a.setAll(V6(s)),a.setAll(o),i.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(e,t,n):function(s,i,r){i.convertToNoDocument(r.version).setHasCommittedMutations()}(0,t,n)}function ih(e,t,n,s){return e instanceof kf?function(i,r,o,a){if(!vg(i.precondition,r))return o;const l=i.value.clone(),c=o4(i.fieldTransforms,a,r);return l.setAll(c),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null}(e,t,n,s):e instanceof Ja?function(i,r,o,a){if(!vg(i.precondition,r))return o;const l=o4(i.fieldTransforms,a,r),c=r.data;return c.setAll(V6(i)),c.setAll(l),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(e,t,n,s):function(i,r,o){return vg(i.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(e,t,n)}function kR(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=R6(s.transform,i||null);r!=null&&(n===null&&(n=yi.empty()),n.set(s.field,r))}return n||null}function i4(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Au(n,s,(i,r)=>_R(i,r))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class kf extends f0{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ja extends f0{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function V6(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function r4(e,t,n){const s=new Map;Cn(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,wR(o,a,n[i]))}return s}function o4(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,bR(r,o,t))}return s}class _b extends f0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AR extends f0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&CR(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=ih(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=ih(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=L6();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=$6(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ue.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ye())}isEqual(t){return this.batchId===t.batchId&&Au(this.mutations,t.mutations,(n,s)=>i4(n,s))&&Au(this.baseMutations,t.baseMutations,(n,s)=>i4(n,s))}}class Sb{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){Cn(t.mutations.length===s.length);let i=pR;const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Sb(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t,n,s){this.alias=t,this.yt=n,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var os,Je;function NR(e){switch(e){default:return De();case zt.CANCELLED:case zt.UNKNOWN:case zt.DEADLINE_EXCEEDED:case zt.RESOURCE_EXHAUSTED:case zt.INTERNAL:case zt.UNAVAILABLE:case zt.UNAUTHENTICATED:return!1;case zt.INVALID_ARGUMENT:case zt.NOT_FOUND:case zt.ALREADY_EXISTS:case zt.PERMISSION_DENIED:case zt.FAILED_PRECONDITION:case zt.ABORTED:case zt.OUT_OF_RANGE:case zt.UNIMPLEMENTED:case zt.DATA_LOSS:return!0}}function z6(e){if(e===void 0)return qo("GRPC error has no .code"),zt.UNKNOWN;switch(e){case os.OK:return zt.OK;case os.CANCELLED:return zt.CANCELLED;case os.UNKNOWN:return zt.UNKNOWN;case os.DEADLINE_EXCEEDED:return zt.DEADLINE_EXCEEDED;case os.RESOURCE_EXHAUSTED:return zt.RESOURCE_EXHAUSTED;case os.INTERNAL:return zt.INTERNAL;case os.UNAVAILABLE:return zt.UNAVAILABLE;case os.UNAUTHENTICATED:return zt.UNAUTHENTICATED;case os.INVALID_ARGUMENT:return zt.INVALID_ARGUMENT;case os.NOT_FOUND:return zt.NOT_FOUND;case os.ALREADY_EXISTS:return zt.ALREADY_EXISTS;case os.PERMISSION_DENIED:return zt.PERMISSION_DENIED;case os.FAILED_PRECONDITION:return zt.FAILED_PRECONDITION;case os.ABORTED:return zt.ABORTED;case os.OUT_OF_RANGE:return zt.OUT_OF_RANGE;case os.UNIMPLEMENTED:return zt.UNIMPLEMENTED;case os.DATA_LOSS:return zt.DATA_LOSS;default:return De()}}(Je=os||(os={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Op}static getOrCreateInstance(){return Op===null&&(Op=new Cb),Op}onExistenceFilterMismatch(t){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,t),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(t))}}let Op=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new ou([4294967295,4294967295],0);function a4(e){const t=DR().encode(e),n=new OO;return n.update(t),new Uint8Array(n.digest())}function l4(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ou([n,s],0),new ou([i,r],0)]}class kb{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $d(`Invalid padding: ${n}`);if(s<0)throw new $d(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new $d(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new $d(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*t.length-n,this.Tt=ou.fromNumber(this.It)}Et(t,n,s){let i=t.add(n.multiply(ou.fromNumber(s)));return i.compare(LR)===1&&(i=new ou([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}vt(t){if(this.It===0)return!1;const n=a4(t),[s,i]=l4(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(s,i,r);if(!this.At(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new kb(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.It===0)return;const n=a4(t),[s,i]=l4(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(s,i,r);this.Rt(o)}}Rt(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class $d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,Af.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new p0(Ue.min(),i,new ds(on),Ho(),Ye())}}class Af{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Af(s,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,n,s,i){this.Pt=t,this.removedTargetIds=n,this.key=s,this.bt=i}}class U6{constructor(t,n){this.targetId=t,this.Vt=n}}class q6{constructor(t,n,s=ei.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class c4{constructor(){this.St=0,this.Dt=d4(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=Ye(),n=Ye(),s=Ye();return this.Dt.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:De()}}),new Af(this.Ct,this.xt,t,n,s)}Ft(){this.Nt=!1,this.Dt=d4()}Bt(t,n){this.Nt=!0,this.Dt=this.Dt.insert(t,n)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class MR{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=Ho(),this.zt=u4(),this.Wt=new ds(on)}Ht(t){for(const n of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(n,t.bt):this.Yt(n,t.key,t.bt);for(const n of t.removedTargetIds)this.Yt(n,t.key,t.bt)}Xt(t){this.forEachTarget(t,n=>{const s=this.Zt(n);switch(t.state){case 0:this.te(n)&&s.$t(t.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(t.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(n);break;case 3:this.te(n)&&(s.Kt(),s.$t(t.resumeToken));break;case 4:this.te(n)&&(this.ee(n),s.$t(t.resumeToken));break;default:De()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Qt.forEach((s,i)=>{this.te(i)&&n(i)})}ne(t){var n;const s=t.targetId,i=t.Vt.count,r=this.se(s);if(r){const o=r.target;if(Pv(o))if(i===0){const a=new Ee(o.path);this.Yt(s,a,Ws.newNoDocument(a,Ue.min()))}else Cn(i===1);else{const a=this.ie(s);if(a!==i){const l=this.re(t,a);if(l!==0){this.ee(s);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(s,c)}(n=Cb.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var g,p,y,w,S,x;const P={localCacheCount:u,existenceFilterCount:h.count},L=h.unchangedNames;return L&&(P.bloomFilter={applied:c===0,hashCount:(g=L==null?void 0:L.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(w=(y=(p=L==null?void 0:L.bits)===null||p===void 0?void 0:p.bitmap)===null||y===void 0?void 0:y.length)!==null&&w!==void 0?w:0,padding:(x=(S=L==null?void 0:L.bits)===null||S===void 0?void 0:S.padding)!==null&&x!==void 0?x:0}),P}(l,a,t.Vt))}}}}re(t,n){const{unchangedNames:s,count:i}=t.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=s;let l,c;try{l=Gl(r).toUint8Array()}catch(u){if(u instanceof w6)return ku("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new kb(l,o,a)}catch(u){return ku(u instanceof $d?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:i!==n-this.oe(t.targetId,c)?2:0}oe(t,n){const s=this.Gt.getRemoteKeysForTarget(t);let i=0;return s.forEach(r=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;n.vt(a)||(this.Yt(t,r,null),i++)}),i}ce(t){const n=new Map;this.Qt.forEach((r,o)=>{const a=this.se(o);if(a){if(r.current&&Pv(a.target)){const l=new Ee(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Ws.newNoDocument(l,t))}r.Mt&&(n.set(o,r.Ot()),r.Ft())}});let s=Ye();this.zt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.jt.forEach((r,o)=>o.setReadTime(t));const i=new p0(t,n,this.Wt,this.jt,s);return this.jt=Ho(),this.zt=u4(),this.Wt=new ds(on),i}Jt(t,n){if(!this.te(t))return;const s=this.ae(t,n.key)?2:0;this.Zt(t).Bt(n.key,s),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(t))}Yt(t,n,s){if(!this.te(t))return;const i=this.Zt(t);this.ae(t,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(t)),s&&(this.jt=this.jt.insert(n,s))}removeTarget(t){this.Qt.delete(t)}ie(t){const n=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let n=this.Qt.get(t);return n||(n=new c4,this.Qt.set(t,n)),n}he(t){let n=this.zt.get(t);return n||(n=new Zs(on),this.zt=this.zt.insert(t,n)),n}te(t){const n=this.se(t)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",t),n}se(t){const n=this.Qt.get(t);return n&&n.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new c4),this.Gt.getRemoteKeysForTarget(t).forEach(n=>{this.Yt(t,n,null)})}ae(t,n){return this.Gt.getRemoteKeysForTarget(t).has(n)}}function u4(){return new ds(Ee.comparator)}function d4(){return new ds(Ee.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},RR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FR={and:"AND",or:"OR"};class BR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Tv(e,t){return e.useProto3Json||l0(t)?t:{value:t}}function im(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function H6(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jR(e,t){return im(e,t.toTimestamp())}function eo(e){return Cn(!!e),Ue.fromTimestamp(function(t){const n=Va(t);return new he(n.seconds,n.nanos)}(e))}function Ab(e,t){return function(n){return new Yn(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function W6(e){const t=Yn.fromString(e);return Cn(Q6(t)),t}function Nv(e,t){return Ab(e.databaseId,t.path)}function i2(e,t){const n=W6(t);if(n.get(1)!==e.databaseId.projectId)throw new ce(zt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ce(zt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ee(G6(n))}function Dv(e,t){return Ab(e.databaseId,t)}function $R(e){const t=W6(e);return t.length===4?Yn.emptyPath():G6(t)}function Lv(e){return new Yn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function G6(e){return Cn(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function h4(e,t,n){return{name:Nv(e,t),fields:n.value.mapValue.fields}}function VR(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:De()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(l,c){return l.useProto3Json?(Cn(c===void 0||typeof c=="string"),ei.fromBase64String(c||"")):(Cn(c===void 0||c instanceof Uint8Array),ei.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?zt.UNKNOWN:z6(l.code);return new ce(c,l.message||"")}(o);n=new q6(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=i2(e,s.document.name),r=eo(s.document.updateTime),o=s.document.createTime?eo(s.document.createTime):Ue.min(),a=new yi({mapValue:{fields:s.document.fields}}),l=Ws.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new yg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=i2(e,s.document),r=s.readTime?eo(s.readTime):Ue.min(),o=Ws.newNoDocument(i,r),a=s.removedTargetIds||[];n=new yg([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=i2(e,s.document),r=s.removedTargetIds||[];n=new yg([],r,i,null)}else{if(!("filter"in t))return De();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new TR(i,r),a=s.targetId;n=new U6(a,o)}}return n}function zR(e,t){let n;if(t instanceof kf)n={update:h4(e,t.key,t.value)};else if(t instanceof _b)n={delete:Nv(e,t.key)};else if(t instanceof Ja)n={update:h4(e,t.key,t.data),updateMask:XR(t.fieldMask)};else{if(!(t instanceof AR))return De();n={verify:Nv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(i,r){const o=r.transform;if(o instanceof Vh)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zh)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Uh)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof sm)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw De()}(0,s))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:De()}(e,t.precondition)),n}function UR(e,t){return e&&e.length>0?(Cn(t!==void 0),e.map(n=>function(s,i){let r=s.updateTime?eo(s.updateTime):eo(i);return r.isEqual(Ue.min())&&(r=eo(i)),new SR(r,s.transformResults||[])}(n,t))):[]}function qR(e,t){return{documents:[Dv(e,t.path)]}}function K6(e,t){const n={structuredQuery:{}},s=t.path;t.collectionGroup!==null?(n.parent=Dv(e,s),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Dv(e,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(l){if(l.length!==0)return X6(Er.create(l,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const r=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:Ca(u.field),direction:GR(u.dir)}}(c))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Tv(e,t.limit);var a;return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function HR(e){let t=$R(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Cn(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(u){const h=Y6(u);return h instanceof Er&&C6(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new au(qc(h.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,l0(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,g=u.values||[];return new em(g,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,g=u.values||[];return new em(g,h)}(n.endAt)),uR(t,i,o,r,a,"F",l,c)}function WR(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Y6(e){return e.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=qc(t.unaryFilter.field);return ls.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=qc(t.unaryFilter.field);return ls.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qc(t.unaryFilter.field);return ls.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=qc(t.unaryFilter.field);return ls.create(r,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(e):e.fieldFilter!==void 0?function(t){return ls.create(qc(t.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(t){return Er.create(t.compositeFilter.filters.map(n=>Y6(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(e):De()}function GR(e){return OR[e]}function KR(e){return RR[e]}function YR(e){return FR[e]}function Ca(e){return{fieldPath:e.canonicalString()}}function qc(e){return oo.fromServerFormat(e.fieldPath)}function X6(e){return e instanceof ls?function(t){if(t.op==="=="){if(Jx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(t.field),op:KR(t.op),value:t.value}}}(e):e instanceof Er?function(t){const n=t.getFilters().map(s=>X6(s));return n.length===1?n[0]:{compositeFilter:{op:YR(t.op),filters:n}}}(e):De()}function XR(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Q6(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,n,s,i,r=Ue.min(),o=Ue.min(),a=ei.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new ka(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t){this.fe=t}}function JR(e){const t=HR({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?nm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.rn=new tF}addToCollectionParentIndex(t,n){return this.rn.add(n),te.resolve()}getCollectionParents(t,n){return te.resolve(this.rn.getEntries(n))}addFieldIndex(t,n){return te.resolve()}deleteFieldIndex(t,n){return te.resolve()}getDocumentsMatchingTarget(t,n){return te.resolve(null)}getIndexType(t,n){return te.resolve(0)}getFieldIndexes(t,n){return te.resolve([])}getNextCollectionGroupToUpdate(t){return te.resolve(null)}getMinOffset(t,n){return te.resolve(Fh.min())}getMinOffsetFromCollectionGroup(t,n){return te.resolve(Fh.min())}updateCollectionGroup(t,n,s){return te.resolve()}updateIndexEntries(t,n){return te.resolve()}}class tF{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new Zs(Yn.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Zs(Yn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Iu(0)}static Mn(){return new Iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.changes=new Uu(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ws.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&ih(s.mutation,i,Bi.empty(),he.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ye()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ye()){const i=Il();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=jd();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=Il();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ye()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=Ho();const o=sh(),a=sh();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Ja)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ih(u.mutation,c,u.mutation.getFieldMask(),he.now())):o.set(c.key,Bi.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new nF(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const s=sh();let i=new ds((o,a)=>o-a),r=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||Bi.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(i.get(a.batchId)||Ye()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=L6();u.forEach(g=>{if(!r.has(g)){const p=$6(n.get(g),s.get(g));p!==null&&h.set(g,p),r=r.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return te.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s){return function(i){return Ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):E6(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s):this.getDocumentsMatchingCollectionQuery(t,n,s)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):te.resolve(Il());let a=-1,l=r;return o.next(c=>te.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?te.resolve():this.remoteDocumentCache.getEntry(t,u).next(g=>{l=l.insert(u,g)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ye())).next(u=>({batchId:a,changes:D6(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ee(n)).next(s=>{let i=jd();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s){const i=n.collectionGroup;let r=jd();return this.indexManager.getCollectionParents(t,i).next(o=>te.forEach(o,a=>{const l=function(c,u){return new zu(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(t,l,s).next(c=>{c.forEach((u,h)=>{r=r.insert(u,h)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,i))).next(r=>{i.forEach((a,l)=>{const c=l.getKey();r.get(c)===null&&(r=r.insert(c,Ws.newInvalidDocument(c)))});let o=jd();return r.forEach((a,l)=>{const c=i.get(a);c!==void 0&&ih(c.mutation,l,Bi.empty(),he.now()),d0(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,n){return te.resolve(this.cs.get(n))}saveBundleMetadata(t,n){var s;return this.cs.set(n.id,{id:(s=n).id,version:s.version,createTime:eo(s.createTime)}),te.resolve()}getNamedQuery(t,n){return te.resolve(this.hs.get(n))}saveNamedQuery(t,n){return this.hs.set(n.name,function(s){return{name:s.name,query:JR(s.bundledQuery),readTime:eo(s.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(){this.overlays=new ds(Ee.comparator),this.ls=new Map}getOverlay(t,n){return te.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Il();return te.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.we(t,n,r)}),te.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.ls.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.ls.delete(s)),te.resolve()}getOverlaysForCollection(t,n,s){const i=Il(),r=n.length+1,o=new Ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return te.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new ds((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=Il(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Il(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return te.resolve(a)}we(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(s.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new ER(n,s));let r=this.ls.get(n);r===void 0&&(r=Ye(),this.ls.set(n,r)),this.ls.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.fs=new Zs(ys.ds),this.ws=new Zs(ys._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,n){const s=new ys(t,n);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.ys(new ys(t,n))}ps(t,n){t.forEach(s=>this.removeReference(s,n))}Is(t){const n=new Ee(new Yn([])),s=new ys(n,t),i=new ys(n,t+1),r=[];return this.ws.forEachInRange([s,i],o=>{this.ys(o),r.push(o.key)}),r}Ts(){this.fs.forEach(t=>this.ys(t))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const n=new Ee(new Yn([])),s=new ys(n,t),i=new ys(n,t+1);let r=Ye();return this.ws.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new ys(t,0),s=this.fs.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ys{constructor(t,n){this.key=t,this.As=n}static ds(t,n){return Ee.comparator(t.key,n.key)||on(t.As,n.As)}static _s(t,n){return on(t.As,n.As)||Ee.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Zs(ys.ds)}checkEmpty(t){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PR(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new ys(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return te.resolve(o)}lookupMutationBatch(t,n){return te.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.bs(s),r=i<0?0:i;return te.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(t){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ys(n,0),i=new ys(n,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([s,i],o=>{const a=this.Ps(o.As);r.push(a)}),te.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Zs(on);return n.forEach(i=>{const r=new ys(i,0),o=new ys(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,o],a=>{s=s.add(a.As)})}),te.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;Ee.isDocumentKey(r)||(r=r.child(""));const o=new ys(new Ee(r),0);let a=new Zs(on);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.As)),!0)},o),te.resolve(this.Vs(a))}Vs(t){const n=[];return t.forEach(s=>{const i=this.Ps(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Cn(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Rs;return te.forEach(n.mutations,i=>{const r=new ys(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Rs=s})}Cn(t){}containsKey(t,n){const s=new ys(n,0),i=this.Rs.firstAfterOrEqual(s);return te.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,te.resolve()}Ss(t,n){return this.bs(t)}bs(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Ps(t){const n=this.bs(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(t){this.Ds=t,this.docs=new ds(Ee.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():Ws.newInvalidDocument(n))}getEntries(t,n){let s=Ho();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ws.newInvalidDocument(i))}),te.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=Ho();const o=n.path,a=new Ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||GO(WO(u),s)<=0||(i.has(u.key)||d0(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return te.resolve(r)}getAllFromCollectionGroup(t,n,s,i){De()}Cs(t,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new lF(this)}getSize(t){return te.resolve(this.size)}}class lF extends eF{constructor(t){super(),this.os=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.os.addEntry(t,i)):this.os.removeEntry(s)}),te.waitFor(n)}getFromCache(t,n){return this.os.getEntry(t,n)}getAllFromCache(t,n){return this.os.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(t){this.persistence=t,this.xs=new Uu(n=>yb(n),bb),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Pb,this.targetCount=0,this.Ms=Iu.kn()}forEachTarget(t,n){return this.xs.forEach((s,i)=>n(i)),te.resolve()}getLastRemoteSnapshotVersion(t){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return te.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Ns&&(this.Ns=n),te.resolve()}Fn(t){this.xs.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ms=new Iu(n),this.highestTargetId=n),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,n){return this.Fn(n),this.targetCount+=1,te.resolve()}updateTargetData(t,n){return this.Fn(n),te.resolve()}removeTargetData(t,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.xs.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),te.waitFor(r).next(()=>i)}getTargetCount(t){return te.resolve(this.targetCount)}getTargetData(t,n){const s=this.xs.get(n)||null;return te.resolve(s)}addMatchingKeys(t,n,s){return this.ks.gs(n,s),te.resolve()}removeMatchingKeys(t,n,s){this.ks.ps(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),te.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.ks.Is(n),te.resolve()}getMatchingKeysForTargetId(t,n){const s=this.ks.Es(n);return te.resolve(s)}containsKey(t,n){return te.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(t,n){this.$s={},this.overlays={},this.Os=new pb(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new cF(this),this.indexManager=new ZR,this.remoteDocumentCache=function(s){return new aF(s)}(s=>this.referenceDelegate.Ls(s)),this.serializer=new QR(n),this.qs=new iF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new rF,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.$s[t.toKey()];return s||(s=new oF(n,this.referenceDelegate),this.$s[t.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,n,s){pe("MemoryPersistence","Starting transaction:",t);const i=new dF(this.Os.next());return this.referenceDelegate.Us(),s(i).next(r=>this.referenceDelegate.Ks(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Gs(t,n){return te.or(Object.values(this.$s).map(s=>()=>s.containsKey(t,n)))}}class dF extends YO{constructor(t){super(),this.currentSequenceNumber=t}}class Eb{constructor(t){this.persistence=t,this.Qs=new Pb,this.js=null}static zs(t){return new Eb(t)}get Ws(){if(this.js)return this.js;throw De()}addReference(t,n,s){return this.Qs.addReference(s,n),this.Ws.delete(s.toString()),te.resolve()}removeReference(t,n,s){return this.Qs.removeReference(s,n),this.Ws.add(s.toString()),te.resolve()}markPotentiallyOrphaned(t,n){return this.Ws.add(n.toString()),te.resolve()}removeTarget(t,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.Ws.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Us(){this.js=new Set}Ks(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,s=>{const i=Ee.fromPath(s);return this.Hs(t,i).next(r=>{r||n.removeEntry(i,Ue.min())})}).next(()=>(this.js=null,n.apply(t)))}updateLimboDocument(t,n){return this.Hs(t,n).next(s=>{s?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(t){return 0}Hs(t,n){return te.or([()=>te.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gs(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.Fi=s,this.Bi=i}static Li(t,n){let s=Ye(),i=Ye();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Ib(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.qi=!1}initialize(t,n){this.Ui=t,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(t,n,s,i){return this.Ki(t,n).next(r=>r||this.Gi(t,n,i,s)).next(r=>r||this.Qi(t,n))}Ki(t,n){if(n4(n))return te.resolve(null);let s=lo(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nm(n,null,"F"),s=lo(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=Ye(...r);return this.Ui.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(t,nm(n,null,"F")):this.Wi(t,c,n,l)}))})))}Gi(t,n,s,i){return n4(n)||i.isEqual(Ue.min())?this.Qi(t,n):this.Ui.getDocuments(t,s).next(r=>{const o=this.ji(n,r);return this.zi(n,o,s,i)?this.Qi(t,n):(Wx()<=sn.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iv(n)),this.Wi(t,o,n,HO(i,-1)))})}ji(t,n){let s=new Zs(T6(t));return n.forEach((i,r)=>{d0(t,r)&&(s=s.add(r))}),s}zi(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(t,n){return Wx()<=sn.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Iv(n)),this.Ui.getDocumentsMatchingQuery(t,n,Fh.min())}Wi(t,n,s,i){return this.Ui.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(t,n,s,i){this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new ds(on),this.Yi=new Uu(r=>yb(r),bb),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(s)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sF(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ji))}}function pF(e,t,n,s){return new fF(e,t,n,s)}async function J6(e,t){const n=je(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.tr(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=Ye();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function gF(e,t){const n=je(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let g=te.resolve();return h.forEach(p=>{g=g.next(()=>c.getEntry(a,p)).next(y=>{const w=l.docVersions.get(p);Cn(w!==null),y.version.compareTo(w)<0&&(u.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),c.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Ye();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function Z6(e){const t=je(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Bs.getLastRemoteSnapshotVersion(n))}function mF(e,t){const n=je(e),s=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach((u,h)=>{const g=i.get(h);if(!g)return;a.push(n.Bs.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(r,u.addedDocuments,h)));let p=g.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(ei.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,s)),i=i.insert(h,p),function(y,w,S){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,p,u)&&a.push(n.Bs.updateTargetData(r,p))});let l=Ho(),c=Ye();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(vF(r,o,t.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!s.isEqual(Ue.min())){const u=n.Bs.getLastRemoteSnapshotVersion(r).next(h=>n.Bs.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return te.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Ji=i,r))}function vF(e,t,n){let s=Ye(),i=Ye();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=Ho();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ue.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):pe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:i}})}function yF(e,t){const n=je(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function bF(e,t){const n=je(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Bs.getTargetData(s,t).next(r=>r?(i=r,te.resolve(i)):n.Bs.allocateTargetId(s).next(o=>(i=new ka(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Bs.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.Ji.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(s.targetId,s),n.Yi.set(t,s.targetId)),s})}async function Mv(e,t,n){const s=je(e),i=s.Ji.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Cf(o))throw o;pe("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ji=s.Ji.remove(t),s.Yi.delete(i.target)}function f4(e,t,n){const s=je(e);let i=Ue.min(),r=Ye();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=je(a),h=u.Yi.get(c);return h!==void 0?te.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)}(s,o,lo(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.Hi.getDocumentsMatchingQuery(o,t,n?i:Ue.min(),n?r:Ye())).next(a=>(wF(s,dR(t),a),{documents:a,ir:r})))}function wF(e,t,n){let s=e.Xi.get(t)||Ue.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.Xi.set(t,s)}class p4{constructor(){this.activeTargetIds=vR()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xF{constructor(){this.Hr=new p4,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,n,s){this.Jr[t]=n}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new p4,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{Yr(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp=null;function r2(){return Rp===null?Rp=268435456+Math.round(2147483648*Math.random()):Rp++,"0x"+Rp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="WebChannelConnection";class kF extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,n,s,i,r){const o=r2(),a=this.To(t,n);pe("RestConnection",`Sending RPC '${t}' ${o}:`,a,s);const l={};return this.Eo(l,i,r),this.Ao(t,a,l,s).then(c=>(pe("RestConnection",`Received RPC '${t}' ${o}: `,c),c),c=>{throw ku("RestConnection",`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",s),c})}vo(t,n,s,i,r,o){return this.Io(t,n,s,i,r)}Eo(t,n,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Vu,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}To(t,n){const s=SF[t];return`${this.mo}/v1/${n}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,n,s,i){const r=r2();return new Promise((o,a)=>{const l=new MO;l.setWithCredentials(!0),l.listenOnce(NO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case s2.NO_ERROR:const u=l.getResponseJson();pe(Rs,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case s2.TIMEOUT:pe(Rs,`RPC '${t}' ${r} timed out`),a(new ce(zt.DEADLINE_EXCEEDED,"Request time out"));break;case s2.HTTP_ERROR:const h=l.getStatus();if(pe(Rs,`RPC '${t}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const y=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(zt).indexOf(S)>=0?S:zt.UNKNOWN}(p.status);a(new ce(y,p.message))}else a(new ce(zt.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ce(zt.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{pe(Rs,`RPC '${t}' ${r} completed.`)}});const c=JSON.stringify(i);pe(Rs,`RPC '${t}' ${r} sending request:`,i),l.send(n,"POST",c,s,15)})}Ro(t,n,s){const i=r2(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=IO(),a=TO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new LO({})),this.Eo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");pe(Rs,`Creating RPC '${t}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let g=!1,p=!1;const y=new CF({ro:S=>{p?pe(Rs,`Not sending because RPC '${t}' stream ${i} is closed:`,S):(g||(pe(Rs,`Opening RPC '${t}' stream ${i} transport.`),h.open(),g=!0),pe(Rs,`RPC '${t}' stream ${i} sending:`,S),h.send(S))},oo:()=>h.close()}),w=(S,x,P)=>{S.listen(x,L=>{try{P(L)}catch(M){setTimeout(()=>{throw M},0)}})};return w(h,Dp.EventType.OPEN,()=>{p||pe(Rs,`RPC '${t}' stream ${i} transport opened.`)}),w(h,Dp.EventType.CLOSE,()=>{p||(p=!0,pe(Rs,`RPC '${t}' stream ${i} transport closed`),y.wo())}),w(h,Dp.EventType.ERROR,S=>{p||(p=!0,ku(Rs,`RPC '${t}' stream ${i} transport errored:`,S),y.wo(new ce(zt.UNAVAILABLE,"The operation could not be completed")))}),w(h,Dp.EventType.MESSAGE,S=>{var x;if(!p){const P=S.data[0];Cn(!!P);const L=P,M=L.error||((x=L[0])===null||x===void 0?void 0:x.error);if(M){pe(Rs,`RPC '${t}' stream ${i} received error:`,M);const F=M.status;let pt=function(W){const it=os[W];if(it!==void 0)return z6(it)}(F),Y=M.message;pt===void 0&&(pt=zt.INTERNAL,Y="Unknown error status: "+F+" with message "+M.message),p=!0,y.wo(new ce(pt,Y)),h.close()}else pe(Rs,`RPC '${t}' stream ${i} received:`,P),y._o(P)}}),w(a,DO.STAT_EVENT,S=>{S.stat===qx.PROXY?pe(Rs,`RPC '${t}' stream ${i} detected buffering proxy`):S.stat===qx.NOPROXY&&pe(Rs,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function o2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(e){return new BR(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t,n,s=1e3,i=1.5,r=6e4){this.ii=t,this.timerId=n,this.Po=s,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const n=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-s);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),t())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,n,s,i,r,o,a,l){this.ii=t,this.$o=s,this.Oo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new tA(t,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,t!==4?this.qo.reset():n&&n.code===zt.RESOURCE_EXHAUSTED?(qo(n.toString()),qo("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===zt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Fo===n&&this.Zo(s,i)},s=>{t(()=>{const i=new ce(zt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(i)})})}Zo(t,n){const s=this.Xo(this.Fo);this.stream=this.eu(t,n),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{s(()=>this.tu(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(t){return pe("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return n=>{this.ii.enqueueAndForget(()=>this.Fo===t?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AF extends eA{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}eu(t,n){return this.connection.Ro("Listen",t,n)}onMessage(t){this.qo.reset();const n=VR(this.serializer,t),s=function(i){if(!("targetChange"in i))return Ue.min();const r=i.targetChange;return r.targetIds&&r.targetIds.length?Ue.min():r.readTime?eo(r.readTime):Ue.min()}(t);return this.listener.nu(n,s)}su(t){const n={};n.database=Lv(this.serializer),n.addTarget=function(i,r){let o;const a=r.target;if(o=Pv(a)?{documents:qR(i,a)}:{query:K6(i,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=H6(i,r.resumeToken);const l=Tv(i,r.expectedCount);l!==null&&(o.expectedCount=l)}else if(r.snapshotVersion.compareTo(Ue.min())>0){o.readTime=im(i,r.snapshotVersion.toTimestamp());const l=Tv(i,r.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,t);const s=WR(this.serializer,t);s&&(n.labels=s),this.Wo(n)}iu(t){const n={};n.database=Lv(this.serializer),n.removeTarget=t,this.Wo(n)}}class PF extends eA{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,n){return this.connection.Ro("Write",t,n)}onMessage(t){if(Cn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const n=UR(t.writeResults,t.commitTime),s=eo(t.commitTime);return this.listener.cu(s,n)}return Cn(!t.writeResults||t.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const t={};t.database=Lv(this.serializer),this.Wo(t)}uu(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>zR(this.serializer,s))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF extends class{}{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ce(zt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.connection.Io(t,n,s,i,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===zt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(zt.UNKNOWN,i.toString())})}vo(t,n,s,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.vo(t,n,s,r,o,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===zt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ce(zt.UNKNOWN,r.toString())})}terminate(){this.lu=!0}}async function IF(e,t,n){var s;const i=je(e),{request:r,du:o}=function(u,h,g){const p=K6(u,h),y={},w=[];let S=0;return g.forEach(x=>{const P="aggregate_"+S++;y[P]=x.alias,x.yt==="count"?w.push({alias:P,count:{}}):x.yt==="avg"?w.push({alias:P,avg:{field:Ca(x.fieldPath)}}):x.yt==="sum"&&w.push({alias:P,sum:{field:Ca(x.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:w,structuredQuery:p.structuredQuery},parent:p.parent},du:y}}(i.serializer,lo(t),n),a=r.parent;i.connection.po||delete r.parent;const l=(await i.vo("RunAggregationQuery",a,r,1)).filter(u=>!!u.result);Cn(l.length===1);const c=(s=l[0].result)===null||s===void 0?void 0:s.aggregateFields;return Object.keys(c).reduce((u,h)=>(u[o[h]]=c[h],u),{})}class TF{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(t){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,t==="Online"&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qo(n),this.mu=!1):pe("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(o=>{s.enqueueAndForget(async()=>{sc(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=je(a);l.vu.add(4),await Pf(l),l.bu.set("Unknown"),l.vu.delete(4),await m0(l)}(this))})}),this.bu=new TF(s,i)}}async function m0(e){if(sc(e))for(const t of e.Ru)await t(!0)}async function Pf(e){for(const t of e.Ru)await t(!1)}function nA(e,t){const n=je(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Db(n)?Nb(n):qu(n).Ko()&&Tb(n,t))}function sA(e,t){const n=je(e),s=qu(n);n.Au.delete(t),s.Ko()&&iA(n,t),n.Au.size===0&&(s.Ko()?s.jo():sc(n)&&n.bu.set("Unknown"))}function Tb(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ue.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qu(e).su(t)}function iA(e,t){e.Vu.qt(t),qu(e).iu(t)}function Nb(e){e.Vu=new MR({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),qu(e).start(),e.bu.gu()}function Db(e){return sc(e)&&!qu(e).Uo()&&e.Au.size>0}function sc(e){return je(e).vu.size===0}function rA(e){e.Vu=void 0}async function DF(e){e.Au.forEach((t,n)=>{Tb(e,t)})}async function LF(e,t){rA(e),Db(e)?(e.bu.Iu(t),Nb(e)):e.bu.set("Unknown")}async function MF(e,t,n){if(e.bu.set("Online"),t instanceof q6&&t.state===2&&t.cause)try{await async function(s,i){const r=i.cause;for(const o of i.targetIds)s.Au.has(o)&&(await s.remoteSyncer.rejectListen(o,r),s.Au.delete(o),s.Vu.removeTarget(o))}(e,t)}catch(s){pe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await rm(e,s)}else if(t instanceof yg?e.Vu.Ht(t):t instanceof U6?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ue.min()))try{const s=await Z6(e.localStore);n.compareTo(s)>=0&&await function(i,r){const o=i.Vu.ce(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(l);c&&i.Au.set(l,c.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach((a,l)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(ei.EMPTY_BYTE_STRING,c.snapshotVersion)),iA(i,a);const u=new ka(c.target,a,l,c.sequenceNumber);Tb(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(e,n)}catch(s){pe("RemoteStore","Failed to raise snapshot:",s),await rm(e,s)}}async function rm(e,t,n){if(!Cf(t))throw t;e.vu.add(1),await Pf(e),e.bu.set("Offline"),n||(n=()=>Z6(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await m0(e)})}function oA(e,t){return t().catch(n=>rm(e,n,t))}async function v0(e){const t=je(e),n=za(t);let s=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;OF(t);)try{const i=await yF(t.localStore,s);if(i===null){t.Eu.length===0&&n.jo();break}s=i.batchId,RF(t,i)}catch(i){await rm(t,i)}aA(t)&&lA(t)}function OF(e){return sc(e)&&e.Eu.length<10}function RF(e,t){e.Eu.push(t);const n=za(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function aA(e){return sc(e)&&!za(e).Uo()&&e.Eu.length>0}function lA(e){za(e).start()}async function FF(e){za(e).hu()}async function BF(e){const t=za(e);for(const n of e.Eu)t.uu(n.mutations)}async function jF(e,t,n){const s=e.Eu.shift(),i=Sb.from(s,t,n);await oA(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await v0(e)}async function $F(e,t){t&&za(e).ou&&await async function(n,s){if(i=s.code,NR(i)&&i!==zt.ABORTED){const r=n.Eu.shift();za(n).Qo(),await oA(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await v0(n)}var i}(e,t),aA(e)&&lA(e)}async function m4(e,t){const n=je(e);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const s=sc(n);n.vu.add(3),await Pf(n),s&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await m0(n)}async function VF(e,t){const n=je(e);t?(n.vu.delete(2),await m0(n)):t||(n.vu.add(2),await Pf(n),n.bu.set("Unknown"))}function qu(e){return e.Su||(e.Su=function(t,n,s){const i=je(t);return i.fu(),new AF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{uo:DF.bind(null,e),ao:LF.bind(null,e),nu:MF.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Db(e)?Nb(e):e.bu.set("Unknown")):(await e.Su.stop(),rA(e))})),e.Su}function za(e){return e.Du||(e.Du=function(t,n,s){const i=je(t);return i.fu(),new PF(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{uo:FF.bind(null,e),ao:$F.bind(null,e),au:BF.bind(null,e),cu:jF.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await v0(e)):(await e.Du.stop(),e.Eu.length>0&&(pe("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new Lb(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(zt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mb(e,t){if(qo("AsyncQueue",`${t}: ${e}`),Cf(e))return new ce(zt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t){this.comparator=t?(n,s)=>t(n,s)||Ee.comparator(n.key,s.key):(n,s)=>Ee.comparator(n.key,s.key),this.keyedMap=jd(),this.sortedSet=new ds(this.comparator)}static emptySet(t){return new cu(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof cu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new cu;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.Cu=new ds(Ee.comparator)}track(t){const n=t.doc.key,s=this.Cu.get(n);s?t.type!==0&&s.type===3?this.Cu=this.Cu.insert(n,t):t.type===3&&s.type!==1?this.Cu=this.Cu.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Cu=this.Cu.remove(n):t.type===1&&s.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:t.doc}):De():this.Cu=this.Cu.insert(n,t)}xu(){const t=[];return this.Cu.inorderTraversal((n,s)=>{t.push(s)}),t}}class Tu{constructor(t,n,s,i,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Tu(t,n,cu.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&u0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.Nu=void 0,this.listeners=[]}}class UF{constructor(){this.queries=new Uu(t=>I6(t),u0),this.onlineState="Unknown",this.ku=new Set}}async function cA(e,t){const n=je(e),s=t.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new zF),i)try{r.Nu=await n.onListen(s)}catch(o){const a=Mb(o,`Initialization of query '${Iv(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.listeners.push(t),t.Mu(n.onlineState),r.Nu&&t.$u(r.Nu)&&Ob(n)}async function uA(e,t){const n=je(e),s=t.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.listeners.indexOf(t);o>=0&&(r.listeners.splice(o,1),i=r.listeners.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function qF(e,t){const n=je(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.$u(i)&&(s=!0);o.Nu=i}}s&&Ob(n)}function HF(e,t,n){const s=je(e),i=s.queries.get(t);if(i)for(const r of i.listeners)r.onError(n);s.queries.delete(t)}function Ob(e){e.ku.forEach(t=>{t.next()})}class dA{constructor(t,n,s){this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Tu(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),n=!0):this.qu(t,this.onlineState)&&(this.Uu(t),n=!0),this.Bu=t,n}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),n=!0),n}qu(t,n){if(!t.fromCache)return!0;const s=n!=="Offline";return(!this.options.Ku||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Lu(t){if(t.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(t){t=Tu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this.key=t}}class fA{constructor(t){this.key=t}}class WF{constructor(t,n){this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ye(),this.mutatedKeys=Ye(),this.tc=T6(t),this.ec=new cu(this.tc)}get nc(){return this.Yu}sc(t,n){const s=n?n.ic:new v4,i=n?n.ec:this.ec;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,h)=>{const g=i.get(u),p=d0(this.query,h)?h:null,y=!!g&&this.mutatedKeys.has(g.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let S=!1;g&&p?g.data.isEqual(p.data)?y!==w&&(s.track({type:3,doc:p}),S=!0):this.rc(g,p)||(s.track({type:2,doc:p}),S=!0,(l&&this.tc(p,l)>0||c&&this.tc(p,c)<0)&&(a=!0)):!g&&p?(s.track({type:0,doc:p}),S=!0):g&&!p&&(s.track({type:1,doc:g}),S=!0,(l||c)&&(a=!0)),S&&(p?(o=o.add(p),r=w?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{ec:o,ic:s,zi:a,mutatedKeys:r}}rc(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s){const i=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort((c,u)=>function(h,g){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return p(h)-p(g)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(s);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,r.length!==0||l?{snapshot:new Tu(this.query,t.ec,i,r,t.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new v4,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=Ye(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const n=[];return t.forEach(s=>{this.Zu.has(s)||n.push(new fA(s))}),this.Zu.forEach(s=>{t.has(s)||n.push(new hA(s))}),n}hc(t){this.Yu=t.ir,this.Zu=Ye();const n=this.sc(t.documents);return this.applyChanges(n,!0)}lc(){return Tu.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class GF{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class KF{constructor(t){this.key=t,this.fc=!1}}class YF{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Uu(a=>I6(a),u0),this._c=new Map,this.mc=new Set,this.gc=new ds(Ee.comparator),this.yc=new Map,this.Ic=new Pb,this.Tc={},this.Ec=new Map,this.Ac=Iu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function XF(e,t){const n=oB(e);let s,i;const r=n.wc.get(t);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.lc();else{const o=await bF(n.localStore,lo(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await QF(n,t,s,a==="current",o.resumeToken),n.isPrimaryClient&&nA(n.remoteStore,o)}return i}async function QF(e,t,n,s,i){e.Rc=(h,g,p)=>async function(y,w,S,x){let P=w.view.sc(S);P.zi&&(P=await f4(y.localStore,w.query,!1).then(({documents:F})=>w.view.sc(F,P)));const L=x&&x.targetChanges.get(w.targetId),M=w.view.applyChanges(P,y.isPrimaryClient,L);return b4(y,w.targetId,M.cc),M.snapshot}(e,h,g,p);const r=await f4(e.localStore,t,!0),o=new WF(t,r.ir),a=o.sc(r.documents),l=Af.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),c=o.applyChanges(a,e.isPrimaryClient,l);b4(e,n,c.cc);const u=new GF(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function JF(e,t){const n=je(e),s=n.wc.get(t),i=n._c.get(s.targetId);if(i.length>1)return n._c.set(s.targetId,i.filter(r=>!u0(r,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Mv(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),sA(n.remoteStore,s.targetId),Ov(n,s.targetId)}).catch(Sf)):(Ov(n,s.targetId),await Mv(n.localStore,s.targetId,!0))}async function ZF(e,t,n){const s=aB(e);try{const i=await function(r,o){const a=je(r),l=he.now(),c=o.reduce((g,p)=>g.add(p.key),Ye());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let p=Ho(),y=Ye();return a.Zi.getEntries(g,c).next(w=>{p=w,p.forEach((S,x)=>{x.isValidDocument()||(y=y.add(S))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,p)).next(w=>{u=w;const S=[];for(const x of o){const P=kR(x,u.get(x.key).overlayedDocument);P!=null&&S.push(new Ja(x.key,P,x6(P.value.mapValue),sr.exists(!0)))}return a.mutationQueue.addMutationBatch(g,l,S,o)}).next(w=>{h=w;const S=w.applyToLocalDocumentSet(u,y);return a.documentOverlayCache.saveOverlays(g,w.batchId,S)})}).then(()=>({batchId:h.batchId,changes:D6(u)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(r,o,a){let l=r.Tc[r.currentUser.toKey()];l||(l=new ds(on)),l=l.insert(o,a),r.Tc[r.currentUser.toKey()]=l}(s,i.batchId,n),await Ef(s,i.changes),await v0(s.remoteStore)}catch(i){const r=Mb(i,"Failed to persist write");n.reject(r)}}async function pA(e,t){const n=je(e);try{const s=await mF(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.yc.get(r);o&&(Cn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?Cn(o.fc):i.removedDocuments.size>0&&(Cn(o.fc),o.fc=!1))}),await Ef(n,s,t)}catch(s){await Sf(s)}}function y4(e,t,n){const s=je(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.wc.forEach((r,o)=>{const a=o.view.Mu(t);a.snapshot&&i.push(a.snapshot)}),function(r,o){const a=je(r);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)}),l&&Ob(a)}(s.eventManager,t),i.length&&s.dc.nu(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function tB(e,t,n){const s=je(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.yc.get(t),r=i&&i.key;if(r){let o=new ds(Ee.comparator);o=o.insert(r,Ws.newNoDocument(r,Ue.min()));const a=Ye().add(r),l=new p0(Ue.min(),new Map,new ds(on),o,a);await pA(s,l),s.gc=s.gc.remove(r),s.yc.delete(t),Rb(s)}else await Mv(s.localStore,t,!1).then(()=>Ov(s,t,n)).catch(Sf)}async function eB(e,t){const n=je(e),s=t.batch.batchId;try{const i=await gF(n.localStore,t);mA(n,s,null),gA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ef(n,i)}catch(i){await Sf(i)}}async function nB(e,t,n){const s=je(e);try{const i=await function(r,o){const a=je(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Cn(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(s.localStore,t);mA(s,t,n),gA(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Ef(s,i)}catch(i){await Sf(i)}}function gA(e,t){(e.Ec.get(t)||[]).forEach(n=>{n.resolve()}),e.Ec.delete(t)}function mA(e,t,n){const s=je(e);let i=s.Tc[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Tc[s.currentUser.toKey()]=i}}function Ov(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e._c.get(t))e.wc.delete(s),n&&e.dc.Pc(s,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(s=>{e.Ic.containsKey(s)||vA(e,s)})}function vA(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);n!==null&&(sA(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Rb(e))}function b4(e,t,n){for(const s of n)s instanceof hA?(e.Ic.addReference(s.key,t),sB(e,s)):s instanceof fA?(pe("SyncEngine","Document no longer in limbo: "+s.key),e.Ic.removeReference(s.key,t),e.Ic.containsKey(s.key)||vA(e,s.key)):De()}function sB(e,t){const n=t.key,s=n.path.canonicalString();e.gc.get(n)||e.mc.has(s)||(pe("SyncEngine","New document in limbo: "+n),e.mc.add(s),Rb(e))}function Rb(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ee(Yn.fromString(t)),s=e.Ac.next();e.yc.set(s,new KF(n)),e.gc=e.gc.insert(n,s),nA(e.remoteStore,new ka(lo(wb(n.path)),s,"TargetPurposeLimboResolution",pb.ct))}}async function Ef(e,t,n){const s=je(e),i=[],r=[],o=[];s.wc.isEmpty()||(s.wc.forEach((a,l)=>{o.push(s.Rc(l,t,n).then(c=>{if((c||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Ib.Li(l.targetId,c);r.push(u)}}))}),await Promise.all(o),s.dc.nu(i),await async function(a,l){const c=je(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>te.forEach(l,h=>te.forEach(h.Fi,g=>c.persistence.referenceDelegate.addReference(u,h.targetId,g)).next(()=>te.forEach(h.Bi,g=>c.persistence.referenceDelegate.removeReference(u,h.targetId,g)))))}catch(u){if(!Cf(u))throw u;pe("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const g=c.Ji.get(h),p=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(p);c.Ji=c.Ji.insert(h,y)}}}(s.localStore,r))}async function iB(e,t){const n=je(e);if(!n.currentUser.isEqual(t)){pe("SyncEngine","User change. New user:",t.toKey());const s=await J6(n.localStore,t);n.currentUser=t,function(i,r){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new ce(zt.CANCELLED,r))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ef(n,s.er)}}function rB(e,t){const n=je(e),s=n.yc.get(t);if(s&&s.fc)return Ye().add(s.key);{let i=Ye();const r=n._c.get(t);if(!r)return i;for(const o of r){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function oB(e){const t=je(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rB.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tB.bind(null,t),t.dc.nu=qF.bind(null,t.eventManager),t.dc.Pc=HF.bind(null,t.eventManager),t}function aB(e){const t=je(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eB.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nB.bind(null,t),t}class w4{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=g0(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return pF(this.persistence,new hF,t.initialUser,this.serializer)}createPersistence(t){return new uF(Eb.zs,this.serializer)}createSharedClientState(t){return new xF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class lB{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>y4(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iB.bind(null,this.syncEngine),await VF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new UF}createDatastore(t){const n=g0(t.databaseInfo.databaseId),s=(i=t.databaseInfo,new kF(i));var i;return function(r,o,a,l){return new EF(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return n=this.localStore,s=this.datastore,i=t.asyncQueue,r=a=>y4(this.syncEngine,a,0),o=g4.D()?new g4:new _F,new NF(n,s,i,r,o);var n,s,i,r,o}createSyncEngine(t,n){return function(s,i,r,o,a,l,c){const u=new YF(s,i,r,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(t){const n=je(t);pe("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Pf(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):qo("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(t,n,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=zs.UNAUTHENTICATED,this.clientId=v6.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{pe("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(pe("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ce(zt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new to;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Mb(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function a2(e,t){e.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await J6(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function x4(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dB(e);pe("FirestoreClient","Initializing OnlineComponentProvider");const s=await e.getConfiguration();await t.initialize(n,s),e.setCredentialChangeListener(i=>m4(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>m4(t.remoteStore,r)),e._onlineComponents=t}function uB(e){return e.name==="FirebaseError"?e.code===zt.FAILED_PRECONDITION||e.code===zt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function dB(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await a2(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!uB(n))throw n;ku("Error using user provided cache. Falling back to memory cache: "+n),await a2(e,new w4)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await a2(e,new w4);return e._offlineComponents}async function Fb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await x4(e,e._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await x4(e,new lB))),e._onlineComponents}function hB(e){return Fb(e).then(t=>t.syncEngine)}function fB(e){return Fb(e).then(t=>t.datastore)}async function bA(e){const t=await Fb(e),n=t.eventManager;return n.onListen=XF.bind(null,t.syncEngine),n.onUnlisten=JF.bind(null,t.syncEngine),n}function pB(e,t,n={}){const s=new to;return e.asyncQueue.enqueueAndForget(async()=>function(i,r,o,a,l){const c=new yA({next:h=>{r.enqueueAndForget(()=>uA(i,u));const g=h.docs.has(o);!g&&h.fromCache?l.reject(new ce(zt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&h.fromCache&&a&&a.source==="server"?l.reject(new ce(zt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new dA(wb(o.path),c,{includeMetadataChanges:!0,Ku:!0});return cA(i,u)}(await bA(e),e.asyncQueue,t,n,s)),s.promise}function gB(e,t,n={}){const s=new to;return e.asyncQueue.enqueueAndForget(async()=>function(i,r,o,a,l){const c=new yA({next:h=>{r.enqueueAndForget(()=>uA(i,u)),h.fromCache&&a.source==="server"?l.reject(new ce(zt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new dA(o,c,{includeMetadataChanges:!0,Ku:!0});return cA(i,u)}(await bA(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(e,t,n){if(!n)throw new ce(zt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mB(e,t,n,s){if(t===!0&&s===!0)throw new ce(zt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function S4(e){if(!Ee.isDocumentKey(e))throw new ce(zt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function C4(e){if(Ee.isDocumentKey(e))throw new ce(zt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function y0(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":De()}function rr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ce(zt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y0(e);throw new ce(zt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new ce(zt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ce(zt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wA((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ce(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ce(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ce(zt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,s=t.experimentalLongPollingOptions,n.timeoutSeconds===s.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var n,s}}class b0{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ce(zt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ce(zt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k4(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new RO;switch(n.type){case"firstParty":return new $O(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(zt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=_4.get(t);n&&(pe("ComponentProvider","Removing Datastore"),_4.delete(t),n.terminate())}(this),Promise.resolve()}}function vB(e,t,n,s={}){var i;const r=(e=rr(e,b0))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&ku("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,l;if(typeof s.mockUserToken=="string")a=s.mockUserToken,l=zs.MOCK_USER;else{a=kD(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new ce(zt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new zs(c)}e._authCredentials=new FO(new m6(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ui(this.firestore,t,this._key)}}class Za{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Za(this.firestore,t,this._query)}}class Oa extends Za{constructor(t,n,s){super(t,n,wb(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ui(this.firestore,null,new Ee(t))}withConverter(t){return new Oa(this.firestore,t,this._path)}}function Kn(e,t,...n){if(e=us(e),xA("collection","path",t),e instanceof b0){const s=Yn.fromString(t,...n);return C4(s),new Oa(e,null,s)}{if(!(e instanceof ui||e instanceof Oa))throw new ce(zt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Yn.fromString(t,...n));return C4(s),new Oa(e.firestore,null,s)}}function bs(e,t,...n){if(e=us(e),arguments.length===1&&(t=v6.A()),xA("doc","path",t),e instanceof b0){const s=Yn.fromString(t,...n);return S4(s),new ui(e,null,new Ee(s))}{if(!(e instanceof ui||e instanceof Oa))throw new ce(zt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Yn.fromString(t,...n));return S4(s),new ui(e.firestore,e instanceof Oa?e.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new tA(this,"async_queue_retry"),this.Xc=()=>{const n=o2();n&&pe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const t=o2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const n=o2();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new to;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qc.push(t),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Cf(t))throw t;pe("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(t){const n=this.Gc.then(()=>(this.Hc=!0,t().catch(s=>{this.Wc=s,this.Hc=!1;const i=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(s);throw qo("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.Hc=!1,s))));return this.Gc=n,n}enqueueAfterDelay(t,n,s){this.Zc(),this.Yc.indexOf(t)>-1&&(n=0);const i=Lb.createAndSchedule(this,t,n,s,r=>this.na(r));return this.zc.push(i),i}Zc(){this.Wc&&De()}verifyOperationInProgress(){}async sa(){let t;do t=this.Gc,await t;while(t!==this.Gc)}ia(t){for(const n of this.zc)if(n.timerId===t)return!0;return!1}ra(t){return this.sa().then(()=>{this.zc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.sa()})}oa(t){this.Yc.push(t)}na(t){const n=this.zc.indexOf(t);this.zc.splice(n,1)}}class tl extends b0{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=new yB,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_A(this),this._firestoreClient.terminate()}}function bB(e,t){const n=typeof e=="object"?e:Ry(),s=typeof e=="string"?e:"(default)",i=tc(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=SD("firestore");r&&vB(i,...r)}return i}function w0(e){return e._firestoreClient||_A(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _A(e){var t,n,s;const i=e._freezeSettings(),r=function(o,a,l,c){return new JO(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,wA(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new cB(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.cache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(t="count",n){this._aggregateType=t,this._internalFieldPath=n,this.type="AggregateField"}}class xB{constructor(t,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Nu(ei.fromBase64String(t))}catch(n){throw new ce(zt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Nu(ei.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ce(zt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ce(zt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ce(zt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=/^__.*__$/;class SB{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Ja(t,this.data,this.fieldMask,n,this.fieldTransforms):new kf(t,this.data,n,this.fieldTransforms)}}class SA{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Ja(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function CA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class jb{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new jb(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.aa({path:s,la:!1});return i.fa(t),i}da(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.aa({path:s,la:!1});return i.ua(),i}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return om(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(t.length===0)throw this._a("Document fields must not be empty");if(CA(this.ca)&&_B.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class CB{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||g0(t)}ya(t,n,s,i=!1){return new jb({ca:t,methodName:n,ga:s,path:oo.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function S0(e){const t=e._freezeSettings(),n=g0(e._databaseId);return new CB(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kA(e,t,n,s,i,r={}){const o=e.ya(r.merge||r.mergeFields?2:0,t,n,i);Vb("Data must be an object, but it was:",o,s);const a=AA(s,o);let l,c;if(r.merge)l=new Bi(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const g=Rv(t,h,n);if(!o.contains(g))throw new ce(zt.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);EA(u,g)||u.push(g)}l=new Bi(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new SB(new yi(a),l,c)}class C0 extends _0{_toFieldTransform(t){if(t.ca!==2)throw t.ca===1?t._a(`${this._methodName}() can only appear at the top level of your update data`):t._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof C0}}class $b extends _0{_toFieldTransform(t){return new xR(t.path,new Vh)}isEqual(t){return t instanceof $b}}function kB(e,t,n,s){const i=e.ya(1,t,n);Vb("Data must be an object, but it was:",i,s);const r=[],o=yi.empty();nc(s,(l,c)=>{const u=zb(t,l,n);c=us(c);const h=i.da(u);if(c instanceof C0)r.push(u);else{const g=If(c,h);g!=null&&(r.push(u),o.set(u,g))}});const a=new Bi(r);return new SA(o,a,i.fieldTransforms)}function AB(e,t,n,s,i,r){const o=e.ya(1,t,n),a=[Rv(t,s,n)],l=[i];if(r.length%2!=0)throw new ce(zt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<r.length;g+=2)a.push(Rv(t,r[g])),l.push(r[g+1]);const c=[],u=yi.empty();for(let g=a.length-1;g>=0;--g)if(!EA(c,a[g])){const p=a[g];let y=l[g];y=us(y);const w=o.da(p);if(y instanceof C0)c.push(p);else{const S=If(y,w);S!=null&&(c.push(p),u.set(p,S))}}const h=new Bi(c);return new SA(u,h,o.fieldTransforms)}function PB(e,t,n,s=!1){return If(n,e.ya(s?4:3,t))}function If(e,t){if(PA(e=us(e)))return Vb("Unsupported field value:",t,e),AA(e,t);if(e instanceof _0)return function(n,s){if(!CA(s.ca))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&t.ca!==4)throw t._a("Nested arrays are not supported");return function(n,s){const i=[];let r=0;for(const o of n){let a=If(o,s.wa(r));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),r++}return{arrayValue:{values:i}}}(e,t)}return function(n,s){if((n=us(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return yR(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=he.fromDate(n);return{timestampValue:im(s.serializer,i)}}if(n instanceof he){const i=new he(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:im(s.serializer,i)}}if(n instanceof Bb)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nu)return{bytesValue:H6(s.serializer,n._byteString)};if(n instanceof ui){const i=s.databaseId,r=n.firestore._databaseId;if(!r.isEqual(i))throw s._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ab(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${y0(n)}`)}(e,t)}function AA(e,t){const n={};return b6(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nc(e,(s,i)=>{const r=If(i,t.ha(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function PA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof he||e instanceof Bb||e instanceof Nu||e instanceof ui||e instanceof _0)}function Vb(e,t,n){if(!PA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=y0(n);throw s==="an object"?t._a(e+" a custom object"):t._a(e+" "+s)}}function Rv(e,t,n){if((t=us(t))instanceof x0)return t._internalPath;if(typeof t=="string")return zb(e,t);throw om("Field path arguments must be of type string or ",e,!1,void 0,n)}const EB=new RegExp("[~\\*/\\[\\]]");function zb(e,t,n){if(t.search(EB)>=0)throw om(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new x0(...t.split("."))._internalPath}catch{throw om(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function om(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new ce(zt.INVALID_ARGUMENT,a+e+l)}function EA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new IB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(k0("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IB extends IA{data(){return super.data()}}function k0(e,t){return typeof t=="string"?zb(e,t):t instanceof x0?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ce(zt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ub{}class qb extends Ub{}function Gs(e,t,...n){let s=[];t instanceof Ub&&s.push(t),s=s.concat(n),function(i){const r=i.filter(a=>a instanceof Hb).length,o=i.filter(a=>a instanceof A0).length;if(r>1||r>0&&o>0)throw new ce(zt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)e=i._apply(e);return e}class A0 extends qb{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new A0(t,n,s)}_apply(t){const n=this._parse(t);return TA(t._query,n),new Za(t.firestore,t.converter,Ev(t._query,n))}_parse(t){const n=S0(t.firestore);return function(i,r,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ce(zt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){P4(u,c);const g=[];for(const p of u)g.push(A4(a,i,p));h={arrayValue:{values:g}}}else h=A4(a,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||P4(u,c),h=PB(o,r,u,c==="in"||c==="not-in");return ls.create(l,c,h)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Li(e,t,n){const s=t,i=k0("where",e);return A0._create(i,s,n)}class Hb extends Ub{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Hb(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Er.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let r=s;const o=i.getFlattenedFilters();for(const a of o)TA(r,a),r=Ev(r,a)}(t._query,n),new Za(t.firestore,t.converter,Ev(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wb extends qb{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Wb(t,n)}_apply(t){const n=function(s,i,r){if(s.startAt!==null)throw new ce(zt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(zt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new au(i,r);return function(a,l){if(xb(a)===null){const c=c0(a);c!==null&&NA(a,c,l.field)}}(s,o),o}(t._query,this._field,this._direction);return new Za(t.firestore,t.converter,function(s,i){const r=s.explicitOrderBy.concat([i]);return new zu(s.path,s.collectionGroup,r,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function Ra(e,t="asc"){const n=t,s=k0("orderBy",e);return Wb._create(s,n)}class Gb extends qb{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new Gb(t,n,s)}_apply(t){return new Za(t.firestore,t.converter,nm(t._query,this._limit,this._limitType))}}function NB(e){return Gb._create("limit",e,"F")}function A4(e,t,n){if(typeof(n=us(n))=="string"){if(n==="")throw new ce(zt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E6(t)&&n.indexOf("/")!==-1)throw new ce(zt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Yn.fromString(n));if(!Ee.isDocumentKey(s))throw new ce(zt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Xx(e,new Ee(s))}if(n instanceof ui)return Xx(e,n._key);throw new ce(zt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y0(n)}.`)}function P4(e,t){if(!Array.isArray(e)||e.length===0)throw new ce(zt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function TA(e,t){if(t.isInequality()){const s=c0(e),i=t.field;if(s!==null&&!s.isEqual(i))throw new ce(zt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${i.toString()}'`);const r=xb(e);r!==null&&NA(e,i,r)}const n=function(s,i){for(const r of s)for(const o of r.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ce(zt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ce(zt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function NA(e,t,n){if(!n.isEqual(t))throw new ce(zt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class DB{convertValue(t,n="none"){switch(Kl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return as(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Gl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw De()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return nc(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(t){return new Bb(as(t.latitude),as(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=mb(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Bh(t));default:return null}}convertTimestamp(t){const n=Va(t);return new he(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Yn.fromString(t);Cn(Q6(s));const i=new jh(s.get(1),s.get(3)),r=new Ee(s.popFirst(5));return i.isEqual(n)||qo(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}function LB(){return new wB("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class LA extends IA{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(k0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class bg extends LA{data(t={}){return super.data(t)}}class MB{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vd(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new bg(this._firestore,this._userDataWriter,s.key,s,new Vd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(zt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let r=0;return s._snapshot.docChanges.map(o=>{const a=new bg(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Vd(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}})}{let r=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new bg(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Vd(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,c=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:OB(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OB(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(e){e=rr(e,ui);const t=rr(e.firestore,tl);return pB(w0(t),e._key).then(n=>BB(t,e,n))}class Kb extends DB{constructor(t){super(),this.firestore=t}convertBytes(t){return new Nu(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ui(this.firestore,null,n)}}function xs(e){e=rr(e,Za);const t=rr(e.firestore,tl),n=w0(t),s=new Kb(t);return TB(e._query),gB(n,e._query).then(i=>new MB(t,s,e,i))}function FB(e,t,n){e=rr(e,ui);const s=rr(e.firestore,tl),i=DA(e.converter,t,n);return P0(s,[kA(S0(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,sr.none())])}function Aa(e,t,n,...s){e=rr(e,ui);const i=rr(e.firestore,tl),r=S0(i);let o;return o=typeof(t=us(t))=="string"||t instanceof x0?AB(r,"updateDoc",e._key,t,n,s):kB(r,"updateDoc",e._key,t),P0(i,[o.toMutation(e._key,sr.exists(!0))])}function Tl(e){return P0(rr(e.firestore,tl),[new _b(e._key,sr.none())])}function Nl(e,t){const n=rr(e.firestore,tl),s=bs(e),i=DA(e.converter,t);return P0(n,[kA(S0(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,sr.exists(!1))]).then(()=>s)}function P0(e,t){return function(n,s){const i=new to;return n.asyncQueue.enqueueAndForget(async()=>ZF(await hB(n),s,i)),i.promise}(w0(e),t)}function BB(e,t,n){const s=n.docs.get(t._key),i=new Kb(e);return new LA(e,i,t._key,s,new Vd(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(e){return $B(e,{count:LB()})}function $B(e,t){const n=rr(e.firestore,tl),s=w0(n),i=function(r,o){const a=[];for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&a.push(o(r[l],l,r));return a}(t,(r,o)=>new IR(o,r._aggregateType,r._internalFieldPath));return function(r,o,a){const l=new to;return r.asyncQueue.enqueueAndForget(async()=>{try{const c=await fB(r);l.resolve(IF(c,o,a))}catch(c){l.reject(c)}}),l.promise}(s,e._query,i).then(r=>function(o,a,l){const c=new Kb(o);return new xB(a,c,l)}(n,e,r))}function Dl(){return new $b("serverTimestamp")}(function(e,t=!0){(function(n){Vu=n})(Ru),ro(new kr("firestore",(n,{instanceIdentifier:s,options:i})=>{const r=n.getProvider("app").getImmediate(),o=new tl(new BO(n.getProvider("auth-internal")),new zO(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ce(zt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jh(a.options.projectId,l)}(r,s),r);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),nr(Hx,"3.13.0",e),nr(Hx,"3.13.0","esm2017")})();const VB=(e,t)=>t.some(n=>e instanceof n);let E4,I4;function zB(){return E4||(E4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UB(){return I4||(I4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MA=new WeakMap,Fv=new WeakMap,OA=new WeakMap,l2=new WeakMap,Yb=new WeakMap;function qB(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Fa(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&MA.set(n,e)}).catch(()=>{}),Yb.set(t,e),t}function HB(e){if(Fv.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Fv.set(e,t)}let Bv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Fv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||OA.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fa(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WB(e){Bv=e(Bv)}function GB(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(c2(this),t,...n);return OA.set(s,t.sort?t.sort():[t]),Fa(s)}:UB().includes(e)?function(...t){return e.apply(c2(this),t),Fa(MA.get(this))}:function(...t){return Fa(e.apply(c2(this),t))}}function KB(e){return typeof e=="function"?GB(e):(e instanceof IDBTransaction&&HB(e),VB(e,zB())?new Proxy(e,Bv):e)}function Fa(e){if(e instanceof IDBRequest)return qB(e);if(l2.has(e))return l2.get(e);const t=KB(e);return t!==e&&(l2.set(e,t),Yb.set(t,e)),t}const c2=e=>Yb.get(e);function YB(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Fa(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Fa(o.result),l.oldVersion,l.newVersion,Fa(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const XB=["get","getKey","getAll","getAllKeys","count"],QB=["put","add","delete","clear"],u2=new Map;function T4(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(u2.get(t))return u2.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=QB.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||XB.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return u2.set(t,r),r}WB(e=>({...e,get:(t,n,s)=>T4(t,n)||e.get(t,n,s),has:(t,n)=>!!T4(t,n)||e.has(t,n)}));const RA="@firebase/installations",Xb="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=1e4,BA=`w:${Xb}`,jA="FIS_v2",JB="https://firebaseinstallations.googleapis.com/v1",ZB=60*60*1e3,tj="installations",ej="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Yl=new Zl(tj,ej,nj);function $A(e){return e instanceof Tr&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA({projectId:e}){return`${JB}/projects/${e}/installations`}function zA(e){return{token:e.token,requestStatus:2,expiresIn:ij(e.expiresIn),creationTime:Date.now()}}async function UA(e,t){const s=(await t.json()).error;return Yl.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function qA({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function sj(e,{refreshToken:t}){const n=qA(e);return n.append("Authorization",rj(t)),n}async function HA(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ij(e){return Number(e.replace("s","000"))}function rj(e){return`${jA} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=VA(e),i=qA(e),r=t.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:jA,appId:e.appId,sdkVersion:BA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await HA(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:zA(c.authToken)}}else throw await UA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=/^[cdef][\w-]{21}$/,jv="";function cj(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=uj(e);return lj.test(n)?n:jv}catch{return jv}}function uj(e){return aj(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new Map;function KA(e,t){const n=E0(e);YA(n,t),dj(n,t)}function YA(e,t){const n=GA.get(e);if(n)for(const s of n)s(t)}function dj(e,t){const n=hj();n&&n.postMessage({key:e,fid:t}),fj()}let Ll=null;function hj(){return!Ll&&"BroadcastChannel"in self&&(Ll=new BroadcastChannel("[Firebase] FID Change"),Ll.onmessage=e=>{YA(e.data.key,e.data.fid)}),Ll}function fj(){GA.size===0&&Ll&&(Ll.close(),Ll=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj="firebase-installations-database",gj=1,Xl="firebase-installations-store";let d2=null;function Qb(){return d2||(d2=YB(pj,gj,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Xl)}}})),d2}async function am(e,t){const n=E0(e),i=(await Qb()).transaction(Xl,"readwrite"),r=i.objectStore(Xl),o=await r.get(n);return await r.put(t,n),await i.done,(!o||o.fid!==t.fid)&&KA(e,t.fid),t}async function XA(e){const t=E0(e),s=(await Qb()).transaction(Xl,"readwrite");await s.objectStore(Xl).delete(t),await s.done}async function I0(e,t){const n=E0(e),i=(await Qb()).transaction(Xl,"readwrite"),r=i.objectStore(Xl),o=await r.get(n),a=t(o);return a===void 0?await r.delete(n):await r.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&KA(e,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(e){let t;const n=await I0(e.appConfig,s=>{const i=mj(s),r=vj(e,i);return t=r.registrationPromise,r.installationEntry});return n.fid===jv?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function mj(e){const t=e||{fid:cj(),registrationStatus:0};return QA(t)}function vj(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Yl.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=yj(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:bj(e)}:{installationEntry:t}}async function yj(e,t){try{const n=await oj(e,t);return am(e.appConfig,n)}catch(n){throw $A(n)&&n.customData.serverCode===409?await XA(e.appConfig):await am(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function bj(e){let t=await N4(e.appConfig);for(;t.registrationStatus===1;)await WA(100),t=await N4(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Jb(e);return s||n}return t}function N4(e){return I0(e,t=>{if(!t)throw Yl.create("installation-not-found");return QA(t)})}function QA(e){return wj(e)?{fid:e.fid,registrationStatus:0}:e}function wj(e){return e.registrationStatus===1&&e.registrationTime+FA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj({appConfig:e,heartbeatServiceProvider:t},n){const s=_j(e,n),i=sj(e,n),r=t.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:BA,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await HA(()=>fetch(s,a));if(l.ok){const c=await l.json();return zA(c)}else throw await UA("Generate Auth Token",l)}function _j(e,{fid:t}){return`${VA(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(e,t=!1){let n;const s=await I0(e.appConfig,r=>{if(!JA(r))throw Yl.create("not-registered");const o=r.authToken;if(!t&&kj(o))return r;if(o.requestStatus===1)return n=Sj(e,t),r;{if(!navigator.onLine)throw Yl.create("app-offline");const a=Pj(r);return n=Cj(e,a),a}});return n?await n:s.authToken}async function Sj(e,t){let n=await D4(e.appConfig);for(;n.authToken.requestStatus===1;)await WA(100),n=await D4(e.appConfig);const s=n.authToken;return s.requestStatus===0?Zb(e,t):s}function D4(e){return I0(e,t=>{if(!JA(t))throw Yl.create("not-registered");const n=t.authToken;return Ej(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Cj(e,t){try{const n=await xj(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await am(e.appConfig,s),n}catch(n){if($A(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await XA(e.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await am(e.appConfig,s)}throw n}}function JA(e){return e!==void 0&&e.registrationStatus===2}function kj(e){return e.requestStatus===2&&!Aj(e)}function Aj(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+ZB}function Pj(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Ej(e){return e.requestStatus===1&&e.requestTime+FA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(e){const t=e,{installationEntry:n,registrationPromise:s}=await Jb(t);return s?s.catch(console.error):Zb(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(e,t=!1){const n=e;return await Nj(n),(await Zb(n,t)).token}async function Nj(e){const{registrationPromise:t}=await Jb(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(e){if(!e||!e.options)throw h2("App Configuration");if(!e.name)throw h2("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw h2(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function h2(e){return Yl.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="installations",Lj="installations-internal",Mj=e=>{const t=e.getProvider("app").getImmediate(),n=Dj(t),s=tc(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Oj=e=>{const t=e.getProvider("app").getImmediate(),n=tc(t,ZA).getImmediate();return{getId:()=>Ij(n),getToken:i=>Tj(n,i)}};function Rj(){ro(new kr(ZA,Mj,"PUBLIC")),ro(new kr(Lj,Oj,"PRIVATE"))}Rj();nr(RA,Xb);nr(RA,Xb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="analytics",Fj="firebase_id",Bj="origin",jj=60*1e3,$j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t5="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new $m("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vi=new Zl("analytics","Analytics",Vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(e){if(!e.startsWith(t5)){const t=Vi.create("invalid-gtag-resource",{gtagURL:e});return xi.warn(t.message),""}return e}function tP(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Uj(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function qj(e,t){const n=Uj("firebase-js-sdk-policy",{createScriptURL:zj}),s=document.createElement("script"),i=`${t5}?l=${e}&id=${t}`;s.src=n?n==null?void 0:n.createScriptURL(i):i,s.async=!0,document.head.appendChild(s)}function Hj(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Wj(e,t,n,s,i,r){const o=s[i];try{if(o)await t[o];else{const l=(await tP(n)).find(c=>c.measurementId===i);l&&await t[l.appId]}}catch(a){xi.error(a)}e("config",i,r)}async function Gj(e,t,n,s,i){try{let r=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await tP(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",s,i||{})}catch(r){xi.error(r)}}function Kj(e,t,n,s){async function i(r,...o){try{if(r==="event"){const[a,l]=o;await Gj(e,t,n,a,l)}else if(r==="config"){const[a,l]=o;await Wj(e,t,n,s,a,l)}else if(r==="consent"){const[a]=o;e("consent","update",a)}else if(r==="get"){const[a,l,c]=o;e("get",a,l,c)}else if(r==="set"){const[a]=o;e("set",a)}else e(r,...o)}catch(a){xi.error(a)}}return i}function Yj(e,t,n,s,i){let r=function(...o){window[s].push(arguments)};return window[i]&&typeof window[i]=="function"&&(r=window[i]),window[i]=Kj(r,e,t,n),{gtagCore:r,wrappedGtag:window[i]}}function Xj(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(t5)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=30,Jj=1e3;class Zj{constructor(t={},n=Jj){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const eP=new Zj;function t$(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function e$(e){var t;const{appId:n,apiKey:s}=e,i={method:"GET",headers:t$(s)},r=$j.replace("{app-id}",n),o=await fetch(r,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw Vi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function n$(e,t=eP,n){const{appId:s,apiKey:i,measurementId:r}=e.options;if(!s)throw Vi.create("no-app-id");if(!i){if(r)return{measurementId:r,appId:s};throw Vi.create("no-api-key")}const o=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new r$;return setTimeout(async()=>{a.abort()},jj),nP({appId:s,apiKey:i,measurementId:r},o,a,t)}async function nP(e,{throttleEndTimeMillis:t,backoffCount:n},s,i=eP){var r;const{appId:o,measurementId:a}=e;try{await s$(s,t)}catch(l){if(a)return xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await e$(e);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!i$(c)){if(i.deleteThrottleMetadata(o),a)return xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?rx(n,i.intervalMillis,Qj):rx(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),xi.debug(`Calling attemptFetch again in ${u} millis`),nP(e,h,s,i)}}function s$(e,t){return new Promise((n,s)=>{const i=Math.max(t-Date.now(),0),r=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(r),s(Vi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function i$(e){if(!(e instanceof Tr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class r${constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function o$(e,t,n,s,i){if(i&&i.global){e("event",n,s);return}else{const r=await t,o=Object.assign(Object.assign({},s),{send_to:r});e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(){if(EC())try{await IC()}catch(e){return xi.warn(Vi.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return xi.warn(Vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function l$(e,t,n,s,i,r,o){var a;const l=n$(e);l.then(p=>{n[p.measurementId]=p.appId,e.options.measurementId&&p.measurementId!==e.options.measurementId&&xi.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>xi.error(p)),t.push(l);const c=a$().then(p=>{if(p)return s.getId()}),[u,h]=await Promise.all([l,c]);Xj(r)||qj(r,u.measurementId),i("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[Bj]="firebase",g.update=!0,h!=null&&(g[Fj]=h),i("config",u.measurementId,g),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(t){this.app=t}_delete(){return delete rh[this.app.options.appId],Promise.resolve()}}let rh={},L4=[];const M4={};let f2="dataLayer",u$="gtag",O4,sP,R4=!1;function d$(){const e=[];if(PC()&&e.push("This is a browser extension environment."),ID()||e.push("Cookies are not available."),e.length>0){const t=e.map((s,i)=>`(${i+1}) ${s}`).join(" "),n=Vi.create("invalid-analytics-context",{errorInfo:t});xi.warn(n.message)}}function h$(e,t,n){d$();const s=e.options.appId;if(!s)throw Vi.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vi.create("no-api-key");if(rh[s]!=null)throw Vi.create("already-exists",{id:s});if(!R4){Hj(f2);const{wrappedGtag:r,gtagCore:o}=Yj(rh,L4,M4,f2,u$);sP=r,O4=o,R4=!0}return rh[s]=l$(e,L4,M4,t,O4,f2,n),new c$(e)}function f$(e=Ry()){e=us(e);const t=tc(e,lm);return t.isInitialized()?t.getImmediate():p$(e)}function p$(e,t={}){const n=tc(e,lm);if(n.isInitialized()){const i=n.getImmediate();if(Ch(t,n.getOptions()))return i;throw Vi.create("already-initialized")}return n.initialize({options:t})}function g$(e,t,n,s){e=us(e),o$(sP,rh[e.app.options.appId],t,n,s).catch(i=>xi.error(i))}const F4="@firebase/analytics",B4="0.10.0";function m$(){ro(new kr(lm,(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return h$(s,i,n)},"PUBLIC")),ro(new kr("analytics-internal",e,"PRIVATE")),nr(F4,B4),nr(F4,B4,"esm2017");function e(t){try{const n=t.getProvider(lm).getImmediate();return{logEvent:(s,i,r)=>g$(n,s,i,r)}}catch(n){throw Vi.create("interop-component-reg-failed",{reason:n})}}}m$();const v$={apiKey:"AIzaSyAfg7VAw2F6umMmYBY0r0aL09OHXgqGHgI",authDomain:"fincontrol-app.firebaseapp.com",projectId:"fincontrol-app",storageBucket:"fincontrol-app.firebasestorage.app",messagingSenderId:"714910121771",appId:"1:714910121771:web:be6f6fe8dc7de987528f6e",measurementId:"G-TB4C5Z2Q29"},e5=DC(v$),y$=pk(e5),qe=bB(e5);f$(e5);const ic=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},b$={class:"login-page"},w$={id:"particleCanvas",ref:"particleCanvas"},x$={class:"login-container"},_$={class:"input-group"},S$={class:"input-group"},C$={key:0,class:"error-message"},k$=["disabled"],A$={__name:"Login",setup(e){const t=wC(),n=Gt(""),s=Gt(""),i=Gt(!1),r=Gt(""),o=Gt([]),a=Gt({x:null,y:null,radius:100});let l=null,c=null;const u=async()=>{i.value=!0,r.value="";try{await O7(y$,n.value,s.value),t.push("/dashboard")}catch(_){console.error(_),r.value="Credenciales incorrectas o error de red.",i.value=!1}},h=()=>{alert("Para recuperar tu contraseña, por favor contacta al administrador del sistema.")};co(()=>{document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.documentElement.style.overflow="hidden";const _=document.createElement("link");_.rel="stylesheet",_.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css",document.head.appendChild(_),w(),W(),J(),setTimeout(it,2e3),window.addEventListener("resize",g),window.addEventListener("mousemove",p),window.addEventListener("mouseout",y)}),Iy(()=>{document.body.style.margin="",document.body.style.padding="",document.body.style.overflow="",document.documentElement.style.margin="",document.documentElement.style.padding="",document.documentElement.style.overflow="",window.removeEventListener("resize",g),window.removeEventListener("mousemove",p),window.removeEventListener("mouseout",y),c&&cancelAnimationFrame(c)});const g=()=>{S(),W()},p=_=>{a.value.x=_.x,a.value.y=_.y},y=()=>{a.value.x=void 0,a.value.y=void 0},w=()=>{l=document.getElementById("particleCanvas").getContext("2d"),S(),x(),Y()},S=()=>{const _=document.getElementById("particleCanvas");_.width=window.innerWidth,_.height=window.innerHeight},x=()=>{o.value=[];for(let A=0;A<150;A++)o.value.push(P())},P=()=>{const _=document.getElementById("particleCanvas");return{x:Math.random()*_.width,y:Math.random()*_.height,size:Math.random()*2+.5,speedX:Math.random()*1-.5,speedY:Math.random()*1-.5,color:L()}},L=()=>{const _=["rgba(180, 180, 180, 0.3)","rgba(150, 150, 150, 0.3)","rgba(100, 170, 255, 0.3)","rgba(200, 200, 210, 0.3)"];return _[Math.floor(Math.random()*_.length)]},M=_=>{const A=document.getElementById("particleCanvas");if(_.x+=_.speedX,_.y+=_.speedY,(_.x>A.width||_.x<0)&&(_.speedX=-_.speedX),(_.y>A.height||_.y<0)&&(_.speedY=-_.speedY),a.value.x!==void 0){const Q=a.value.x-_.x,et=a.value.y-_.y,mt=Math.sqrt(Q*Q+et*et);if(mt<a.value.radius){const ht=Q/mt,gt=et/mt,tt=(a.value.radius-mt)/a.value.radius,T=ht*tt*.6,rt=gt*tt*.6;_.speedX-=T,_.speedY-=rt}}},F=_=>{l.fillStyle=_.color,l.beginPath(),l.arc(_.x,_.y,_.size,0,Math.PI*2),l.fill()},pt=()=>{for(let A=0;A<o.value.length;A++)for(let Q=A;Q<o.value.length;Q++){const et=o.value[A].x-o.value[Q].x,mt=o.value[A].y-o.value[Q].y,ht=Math.sqrt(et*et+mt*mt);if(ht<150){const gt=1-ht/150;l.strokeStyle=`rgba(150, 150, 150, ${gt*.2})`,l.lineWidth=.5,l.beginPath(),l.moveTo(o.value[A].x,o.value[A].y),l.lineTo(o.value[Q].x,o.value[Q].y),l.stroke()}}},Y=()=>{const _=document.getElementById("particleCanvas");l.clearRect(0,0,_.width,_.height);for(let A=0;A<o.value.length;A++)M(o.value[A]),F(o.value[A]);pt(),c=requestAnimationFrame(Y)},W=()=>{const _=document.querySelectorAll(".corner-glow"),A=document.querySelector(".login-container");if(!A)return;const Q=A.getBoundingClientRect();_[0]&&(_[0].style.top=`${Q.top+10}px`,_[0].style.left=`${Q.left+10}px`),_[1]&&(_[1].style.top=`${Q.top+10}px`,_[1].style.left=`${Q.right-10}px`),_[2]&&(_[2].style.top=`${Q.bottom-10}px`,_[2].style.left=`${Q.left+10}px`),_[3]&&(_[3].style.top=`${Q.bottom-10}px`,_[3].style.left=`${Q.right-10}px`)},it=()=>{const _=document.querySelectorAll(".corner-glow");if(!_.length)return;const A=Math.floor(Math.random()*_.length);_[A].style.opacity="1",setTimeout(()=>{_[A].style.opacity="0"},700),setTimeout(it,Math.random()*3e3+1e3)},J=()=>{document.querySelectorAll("input").forEach(A=>{A.addEventListener("focus",function(){this.parentElement.style.transition="transform 0.3s ease",this.parentElement.style.transform="translateY(-2px)"}),A.addEventListener("blur",function(){this.parentElement.style.transform="translateY(0)"})})};return(_,A)=>(at(),ft("div",b$,[d("canvas",w$,null,512),d("div",x$,[A[4]||(A[4]=$a('<div class="corner-glow top-left" data-v-209192a5></div><div class="corner-glow top-right" data-v-209192a5></div><div class="corner-glow bottom-left" data-v-209192a5></div><div class="corner-glow bottom-right" data-v-209192a5></div><div class="logo-container" data-v-209192a5><svg class="logo" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" data-v-209192a5><g data-v-209192a5><circle cx="100" cy="100" r="95" fill="white" opacity="0.1" data-v-209192a5></circle><path d="M100,50 L60,120 L85,120 L100,90 L115,120 L140,120 Z" fill="#4CAF50" data-v-209192a5></path><path d="M60,60 L40,100 L50,120 L80,70 Z" fill="#66BB6A" data-v-209192a5></path><path d="M140,60 L160,100 L150,120 L120,70 Z" fill="#66BB6A" data-v-209192a5></path></g></svg></div><h1 data-v-209192a5>Sistema Financiero GN</h1>',6)),d("form",{id:"loginForm",onSubmit:gr(u,["prevent"])},[d("div",_$,[oe(d("input",{type:"email",required:"","onUpdate:modelValue":A[0]||(A[0]=Q=>n.value=Q)},null,512),[[ke,n.value]]),A[2]||(A[2]=d("label",null,"Correo electrónico",-1))]),d("div",S$,[oe(d("input",{type:"password",required:"","onUpdate:modelValue":A[1]||(A[1]=Q=>s.value=Q)},null,512),[[ke,s.value]]),A[3]||(A[3]=d("label",null,"Contraseña",-1))]),r.value?(at(),ft("div",C$,lt(r.value),1)):Ut("",!0),d("button",{type:"submit",class:"btn-login",disabled:i.value},lt(i.value?"Accediendo...":"Iniciar Sesión"),9,k$),d("button",{type:"button",class:"btn-forgot",onClick:h}," ¿Olvidaste tu contraseña? ")],32),A[5]||(A[5]=$a('<div class="social-links" data-v-209192a5><a href="https://wa.me/50235125327" target="_blank" class="social-icon" data-v-209192a5><i class="fab fa-whatsapp" data-v-209192a5></i></a><a href="https://www.facebook.com/JARDINESGALICIAGT" target="_blank" class="social-icon" data-v-209192a5><i class="fab fa-facebook-f" data-v-209192a5></i></a></div>',1))])]))}},P$=ic(A$,[["__scopeId","data-v-209192a5"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Tf(e){return e+.5|0}const Pa=(e,t,n)=>Math.max(Math.min(e,n),t);function zd(e){return Pa(Tf(e*2.55),0,255)}function Ba(e){return Pa(Tf(e*255),0,255)}function To(e){return Pa(Tf(e/2.55)/100,0,1)}function j4(e){return Pa(Tf(e*100),0,100)}const Zi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$v=[..."0123456789ABCDEF"],E$=e=>$v[e&15],I$=e=>$v[(e&240)>>4]+$v[e&15],Fp=e=>(e&240)>>4===(e&15),T$=e=>Fp(e.r)&&Fp(e.g)&&Fp(e.b)&&Fp(e.a);function N$(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Zi[e[1]]*17,g:255&Zi[e[2]]*17,b:255&Zi[e[3]]*17,a:t===5?Zi[e[4]]*17:255}:(t===7||t===9)&&(n={r:Zi[e[1]]<<4|Zi[e[2]],g:Zi[e[3]]<<4|Zi[e[4]],b:Zi[e[5]]<<4|Zi[e[6]],a:t===9?Zi[e[7]]<<4|Zi[e[8]]:255})),n}const D$=(e,t)=>e<255?t(e):"";function L$(e){var t=T$(e)?E$:I$;return e?"#"+t(e.r)+t(e.g)+t(e.b)+D$(e.a,t):void 0}const M$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iP(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function O$(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function R$(e,t,n){const s=iP(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function F$(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function n5(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=F$(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function s5(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Ba)}function i5(e,t,n){return s5(iP,e,t,n)}function B$(e,t,n){return s5(R$,e,t,n)}function j$(e,t,n){return s5(O$,e,t,n)}function rP(e){return(e%360+360)%360}function $$(e){const t=M$.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?zd(+t[5]):Ba(+t[5]));const i=rP(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=B$(i,r,o):t[1]==="hsv"?s=j$(i,r,o):s=i5(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function V$(e,t){var n=n5(e);n[0]=rP(n[0]+t),n=i5(n),e.r=n[0],e.g=n[1],e.b=n[2]}function z$(e){if(!e)return;const t=n5(e),n=t[0],s=j4(t[1]),i=j4(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${To(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const $4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},V4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function U$(){const e={},t=Object.keys(V4),n=Object.keys($4);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,$4[r]);r=parseInt(V4[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Bp;function q$(e){Bp||(Bp=U$(),Bp.transparent=[0,0,0,0]);const t=Bp[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const H$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function W$(e){const t=H$.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?zd(o):Pa(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?zd(s):Pa(s,0,255)),i=255&(t[4]?zd(i):Pa(i,0,255)),r=255&(t[6]?zd(r):Pa(r,0,255)),{r:s,g:i,b:r,a:n}}}function G$(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${To(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const p2=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Rc=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function K$(e,t,n){const s=Rc(To(e.r)),i=Rc(To(e.g)),r=Rc(To(e.b));return{r:Ba(p2(s+n*(Rc(To(t.r))-s))),g:Ba(p2(i+n*(Rc(To(t.g))-i))),b:Ba(p2(r+n*(Rc(To(t.b))-r))),a:e.a+n*(t.a-e.a)}}function jp(e,t,n){if(e){let s=n5(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=i5(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function oP(e,t){return e&&Object.assign(t||{},e)}function z4(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ba(e[3]))):(t=oP(e,{r:0,g:0,b:0,a:1}),t.a=Ba(t.a)),t}function Y$(e){return e.charAt(0)==="r"?W$(e):$$(e)}class qh{constructor(t){if(t instanceof qh)return t;const n=typeof t;let s;n==="object"?s=z4(t):n==="string"&&(s=N$(t)||q$(t)||Y$(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=oP(this._rgb);return t&&(t.a=To(t.a)),t}set rgb(t){this._rgb=z4(t)}rgbString(){return this._valid?G$(this._rgb):void 0}hexString(){return this._valid?L$(this._rgb):void 0}hslString(){return this._valid?z$(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=K$(this._rgb,t._rgb,n)),this}clone(){return new qh(this.rgb)}alpha(t){return this._rgb.a=Ba(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Tf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return jp(this._rgb,2,t),this}darken(t){return jp(this._rgb,2,-t),this}saturate(t){return jp(this._rgb,1,t),this}desaturate(t){return jp(this._rgb,1,-t),this}rotate(t){return V$(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ko(){}const X$=(()=>{let e=0;return()=>e++})();function He(e){return e==null}function Dn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Xe(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function zn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ni(e,t){return zn(e)?e:t}function Ve(e,t){return typeof e>"u"?t:e}const Q$=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,aP=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Sn(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function hn(e,t,n,s){let i,r,o;if(Dn(e))for(r=e.length,i=0;i<r;i++)t.call(n,e[i],i);else if(Xe(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function cm(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function um(e){if(Dn(e))return e.map(um);if(Xe(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=um(e[n[i]]);return t}return e}function lP(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function J$(e,t,n,s){if(!lP(e))return;const i=t[e],r=n[e];Xe(i)&&Xe(r)?Hh(i,r,s):t[e]=um(r)}function Hh(e,t,n){const s=Dn(t)?t:[t],i=s.length;if(!Xe(e))return e;n=n||{};const r=n.merger||J$;let o;for(let a=0;a<i;++a){if(o=s[a],!Xe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,n)}return e}function oh(e,t){return Hh(e,t,{merger:Z$})}function Z$(e,t,n){if(!lP(e))return;const s=t[e],i=n[e];Xe(s)&&Xe(i)?oh(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=um(i))}const U4={"":e=>e,x:e=>e.x,y:e=>e.y};function tV(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function eV(e){const t=tV(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Ua(e,t){return(U4[t]||(U4[t]=eV(t)))(e)}function r5(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Wh=e=>typeof e<"u",qa=e=>typeof e=="function",q4=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function nV(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const In=Math.PI,En=2*In,sV=En+In,dm=Number.POSITIVE_INFINITY,iV=In/180,Zn=In/2,gl=In/4,H4=In*2/3,Ea=Math.log10,no=Math.sign;function ah(e,t,n){return Math.abs(e-t)<n}function W4(e){const t=Math.round(e);e=ah(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ea(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function rV(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function oV(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Du(e){return!oV(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function aV(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function cP(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function vr(e){return e*(In/180)}function o5(e){return e*(180/In)}function G4(e){if(!zn(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function uP(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*In&&(r+=En),{angle:r,distance:i}}function Vv(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function lV(e,t){return(e-t+sV)%En-In}function Mi(e){return(e%En+En)%En}function Gh(e,t,n,s){const i=Mi(e),r=Mi(t),o=Mi(n),a=Mi(r-i),l=Mi(o-i),c=Mi(i-r),u=Mi(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function Ss(e,t,n){return Math.max(t,Math.min(n,e))}function cV(e){return Ss(e,-32768,32767)}function Ro(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function a5(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const Fo=(e,t,n,s)=>a5(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),uV=(e,t,n)=>a5(e,n,s=>e[s][t]>=n);function dV(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const dP=["push","pop","shift","splice","unshift"];function hV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),dP.forEach(n=>{const s="_onData"+r5(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function K4(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(dP.forEach(r=>{delete e[r]}),delete e._chartjs)}function hP(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const fP=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function pP(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,fP.call(window,()=>{s=!1,e.apply(t,n)}))}}function fV(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const l5=e=>e==="start"?"left":e==="end"?"right":"center",Vs=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,pV=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function gP(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:g,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(i=Math.min(Fo(l,u,h).lo,n?s:Fo(t,u,o.getPixelForValue(h)).lo),c){const w=l.slice(0,i+1).reverse().findIndex(S=>!He(S[a.axis]));i-=Math.max(0,w)}i=Ss(i,0,s-1)}if(y){let w=Math.max(Fo(l,o.axis,g,!0).hi+1,n?0:Fo(t,u,o.getPixelForValue(g),!0).hi+1);if(c){const S=l.slice(w-1).findIndex(x=>!He(x[a.axis]));w+=Math.max(0,S)}r=Ss(w,i,s)-i}else r=s-i}return{start:i,count:r}}function mP(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const $p=e=>e===0||e===1,Y4=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*En/n)),X4=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*En/n)+1,lh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Zn)+1,easeOutSine:e=>Math.sin(e*Zn),easeInOutSine:e=>-.5*(Math.cos(In*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>$p(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>$p(e)?e:Y4(e,.075,.3),easeOutElastic:e=>$p(e)?e:X4(e,.075,.3),easeInOutElastic(e){return $p(e)?e:e<.5?.5*Y4(e*2,.1125,.45):.5+.5*X4(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-lh.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?lh.easeInBounce(e*2)*.5:lh.easeOutBounce(e*2-1)*.5+.5};function c5(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Q4(e){return c5(e)?e:new qh(e)}function g2(e){return c5(e)?e:new qh(e).saturate(.5).darken(.1).hexString()}const gV=["x","y","borderWidth","radius","tension"],mV=["color","borderColor","backgroundColor"];function vV(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:mV},numbers:{type:"number",properties:gV}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function yV(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const J4=new Map;function bV(e,t){t=t||{};const n=e+JSON.stringify(t);let s=J4.get(n);return s||(s=new Intl.NumberFormat(e,t),J4.set(n,s)),s}function Nf(e,t,n){return bV(t,n).format(e)}const vP={values(e){return Dn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=wV(e,n)}const o=Ea(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Nf(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Ea(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?vP.numeric.call(this,e,t,n):""}};function wV(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var T0={formatters:vP};function xV(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:T0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ql=Object.create(null),zv=Object.create(null);function ch(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function m2(e,t,n){return typeof t=="string"?Hh(ch(e,t),n):Hh(ch(e,""),t)}class _V{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>g2(i.backgroundColor),this.hoverBorderColor=(s,i)=>g2(i.borderColor),this.hoverColor=(s,i)=>g2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return m2(this,t,n)}get(t){return ch(this,t)}describe(t,n){return m2(zv,t,n)}override(t,n){return m2(Ql,t,n)}route(t,n,s,i){const r=ch(this,t),o=ch(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Xe(l)?Object.assign({},c,l):Ve(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var Ln=new _V({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vV,yV,xV]);function SV(e){return!e||He(e.size)||He(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function hm(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function CV(e,t,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,g;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Dn(h))o=hm(e,i,r,o,h);else if(Dn(h))for(c=0,u=h.length;c<u;c++)g=h[c],g!=null&&!Dn(g)&&(o=hm(e,i,r,o,g));e.restore();const p=r.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[r[l]];r.splice(0,p)}return o}function ml(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function Z4(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Uv(e,t,n,s){yP(e,t,n,s,null)}function yP(e,t,n,s,i){let r,o,a,l,c,u,h,g;const p=t.pointStyle,y=t.rotation,w=t.radius;let S=(y||0)*iV;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(S),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,s,i/2,w,0,0,En):e.arc(n,s,w,0,En),e.closePath();break;case"triangle":u=i?i/2:w,e.moveTo(n+Math.sin(S)*u,s-Math.cos(S)*w),S+=H4,e.lineTo(n+Math.sin(S)*u,s-Math.cos(S)*w),S+=H4,e.lineTo(n+Math.sin(S)*u,s-Math.cos(S)*w),e.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(S+gl)*l,h=Math.cos(S+gl)*(i?i/2-c:l),a=Math.sin(S+gl)*l,g=Math.sin(S+gl)*(i?i/2-c:l),e.arc(n-h,s-a,c,S-In,S-Zn),e.arc(n+g,s-o,c,S-Zn,S),e.arc(n+h,s+a,c,S,S+Zn),e.arc(n-g,s+o,c,S+Zn,S+In),e.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*w,u=i?i/2:l,e.rect(n-u,s-l,2*u,2*l);break}S+=gl;case"rectRot":h=Math.cos(S)*(i?i/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,g=Math.sin(S)*(i?i/2:w),e.moveTo(n-h,s-a),e.lineTo(n+g,s-o),e.lineTo(n+h,s+a),e.lineTo(n-g,s+o),e.closePath();break;case"crossRot":S+=gl;case"cross":h=Math.cos(S)*(i?i/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,g=Math.sin(S)*(i?i/2:w),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o);break;case"star":h=Math.cos(S)*(i?i/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,g=Math.sin(S)*(i?i/2:w),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o),S+=gl,h=Math.cos(S)*(i?i/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,g=Math.sin(S)*(i?i/2:w),e.moveTo(n-h,s-a),e.lineTo(n+h,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o);break;case"line":o=i?i/2:Math.cos(S)*w,a=Math.sin(S)*w,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(S)*(i?i/2:w),s+Math.sin(S)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Bo(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function N0(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function D0(e){e.restore()}function kV(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function AV(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function PV(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),He(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function EV(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function IV(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Jl(e,t,n,s,i,r={}){const o=Dn(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,PV(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&IV(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),He(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,s,r.maxWidth)),e.fillText(c,n,s,r.maxWidth),EV(e,n,s,c,r),s+=Number(i.lineHeight);e.restore()}function Kh(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*In,In,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,In,Zn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Zn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-Zn,!0),e.lineTo(n+o.topLeft,s)}const TV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,NV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function DV(e,t){const n=(""+e).match(TV);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const LV=e=>+e||0;function u5(e,t){const n={},s=Xe(t),i=s?Object.keys(t):t,r=Xe(e)?s?o=>Ve(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=LV(r(o));return n}function bP(e){return u5(e,{top:"y",right:"x",bottom:"y",left:"x"})}function jl(e){return u5(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ni(e){const t=bP(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function fs(e,t){e=e||{},t=t||Ln.font;let n=Ve(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ve(e.style,t.style);s&&!(""+s).match(NV)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ve(e.family,t.family),lineHeight:DV(Ve(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Ve(e.weight,t.weight),string:""};return i.string=SV(i),i}function Ud(e,t,n,s){let i,r,o;for(i=0,r=e.length;i<r;++i)if(o=e[i],o!==void 0&&o!==void 0)return o}function MV(e,t,n){const{min:s,max:i}=e,r=aP(t,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function el(e,t){return Object.assign(Object.create(e),t)}function d5(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=SP("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>d5([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return xP(a,l,()=>zV(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return e_(a).includes(l)},ownKeys(a){return e_(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Lu(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:wP(e,s),setContext:r=>Lu(e,r,n,s),override:r=>Lu(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return xP(r,o,()=>RV(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function wP(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:qa(n)?n:()=>n,isIndexable:qa(s)?s:()=>s}}const OV=(e,t)=>e?e+r5(t):t,h5=(e,t)=>Xe(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function xP(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function RV(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return qa(a)&&o.isScriptable(t)&&(a=FV(t,a,e,n)),Dn(a)&&a.length&&(a=BV(t,a,e,o.isIndexable)),h5(t,a)&&(a=Lu(a,i,r&&r[t],o)),a}function FV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||s);return a.delete(e),h5(e,l)&&(l=f5(i._scopes,i,e,l)),l}function BV(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Xe(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=f5(c,i,e,u);t.push(Lu(h,r,o&&o[e],a))}}return t}function _P(e,t,n){return qa(e)?e(t,n):e}const jV=(e,t)=>e===!0?t:typeof e=="string"?Ua(t,e):void 0;function $V(e,t,n,s,i){for(const r of t){const o=jV(n,r);if(o){e.add(o);const a=_P(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function f5(e,t,n,s){const i=t._rootScopes,r=_P(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let l=t_(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=t_(a,o,r,l,s),l===null)?!1:d5(Array.from(a),[""],i,r,()=>VV(t,n,s))}function t_(e,t,n,s,i){for(;n;)n=$V(e,t,n,s,i);return n}function VV(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Dn(i)&&Xe(n)?n:i||{}}function zV(e,t,n,s){let i;for(const r of t)if(i=SP(OV(r,e),n),typeof i<"u")return h5(e,i)?f5(n,s,e,i):i}function SP(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function e_(e){let t=e._keys;return t||(t=e._keys=UV(e._scopes)),t}function UV(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function CP(e,t,n,s){const{iScale:i}=e,{key:r="r"}=this._parsing,o=new Array(s);let a,l,c,u;for(a=0,l=s;a<l;++a)c=a+n,u=t[c],o[a]={r:i.parse(Ua(u,r),c)};return o}const qV=Number.EPSILON||1e-14,Mu=(e,t)=>t<e.length&&!e[t].skip&&e[t],kP=e=>e==="x"?"y":"x";function HV(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=Vv(r,i),l=Vv(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,g=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+g*(o.x-i.x),y:r.y+g*(o.y-i.y)}}}function WV(e,t,n){const s=e.length;let i,r,o,a,l,c=Mu(e,0);for(let u=0;u<s-1;++u)if(l=c,c=Mu(e,u+1),!(!l||!c)){if(ah(t[u],0,qV)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],r=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=r*o*t[u])}}function GV(e,t,n="x"){const s=kP(n),i=e.length;let r,o,a,l=Mu(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Mu(e,c+1),!a)continue;const u=a[n],h=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=h-r*t[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=h+r*t[c])}}function KV(e,t="x"){const n=kP(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Mu(e,0);for(o=0;o<s;++o)if(a=l,l=c,c=Mu(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?no(i[o-1])!==no(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}WV(e,i,r),GV(e,r,t)}function Vp(e,t,n){return Math.max(Math.min(e,n),t)}function YV(e,t){let n,s,i,r,o,a=Bo(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&Bo(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Vp(i.cp1x,t.left,t.right),i.cp1y=Vp(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Vp(i.cp2x,t.left,t.right),i.cp2y=Vp(i.cp2y,t.top,t.bottom)))}function XV(e,t,n,s,i){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")KV(e,i);else{let c=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=HV(c,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&YV(e,n)}function p5(){return typeof window<"u"&&typeof document<"u"}function g5(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function fm(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const L0=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function QV(e,t){return L0(e).getPropertyValue(t)}const JV=["top","right","bottom","left"];function $l(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=JV[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const ZV=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function tz(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(ZV(i,r,e.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function xl(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=L0(n),r=i.boxSizing==="border-box",o=$l(i,"padding"),a=$l(i,"border","width"),{x:l,y:c,box:u}=tz(e,n),h=o.left+(u&&a.left),g=o.top+(u&&a.top);let{width:p,height:y}=t;return r&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-h)/p*n.width/s),y:Math.round((c-g)/y*n.height/s)}}function ez(e,t,n){let s,i;if(t===void 0||n===void 0){const r=e&&g5(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=L0(r),l=$l(a,"border","width"),c=$l(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,s=fm(a.maxWidth,r,"clientWidth"),i=fm(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||dm,maxHeight:i||dm}}const zp=e=>Math.round(e*10)/10;function nz(e,t,n,s){const i=L0(e),r=$l(i,"margin"),o=fm(i.maxWidth,e,"clientWidth")||dm,a=fm(i.maxHeight,e,"clientHeight")||dm,l=ez(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const g=$l(i,"border","width"),p=$l(i,"padding");c-=p.width+g.width,u-=p.height+g.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=zp(Math.min(c,o,l.maxWidth)),u=zp(Math.min(u,a,l.maxHeight)),c&&!u&&(u=zp(c/2)),(t!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=zp(Math.floor(u*s))),{width:c,height:u}}function n_(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const sz=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};p5()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function s_(e,t){const n=QV(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function _l(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function iz(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rz(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=_l(e,i,n),a=_l(i,r,n),l=_l(r,t,n),c=_l(o,a,n),u=_l(a,l,n);return _l(c,u,n)}const oz=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},az=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function uu(e,t,n){return e?oz(t,n):az()}function AP(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function PP(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function EP(e){return e==="angle"?{between:Gh,compare:lV,normalize:Mi}:{between:Ro,compare:(t,n)=>t-n,normalize:t=>t}}function i_({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function lz(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=EP(s),l=t.length;let{start:c,end:u,loop:h}=e,g,p;if(h){for(c+=l,u+=l,g=0,p=l;g<p&&o(a(t[c%l][s]),i,r);++g)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function IP(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:l,normalize:c}=EP(s),{start:u,end:h,loop:g,style:p}=lz(e,t,n),y=[];let w=!1,S=null,x,P,L;const M=()=>l(i,L,x)&&a(i,L)!==0,F=()=>a(r,x)===0||l(r,L,x),pt=()=>w||M(),Y=()=>!w||F();for(let W=u,it=u;W<=h;++W)P=t[W%o],!P.skip&&(x=c(P[s]),x!==L&&(w=l(x,i,r),S===null&&pt()&&(S=a(x,i)===0?W:it),S!==null&&Y()&&(y.push(i_({start:S,end:W,loop:g,count:o,style:p})),S=null),it=W,L=x));return S!==null&&y.push(i_({start:S,end:h,loop:g,count:o,style:p})),y}function TP(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=IP(s[i],e.points,t);r.length&&n.push(...r)}return n}function cz(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function uz(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function dz(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=cz(n,i,r,s);if(s===!0)return r_(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return r_(e,uz(n,o,l,c),n,t)}function r_(e,t,n,s){return!s||!s.setContext||!n?t:hz(e,t,n,s)}function hz(e,t,n,s){const i=e._chart.getContext(),r=o_(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=r,h=t[0].start,g=h;function p(y,w,S,x){const P=a?-1:1;if(y!==w){for(y+=l;n[y%l].skip;)y-=P;for(;n[w%l].skip;)w+=P;y%l!==w%l&&(c.push({start:y%l,end:w%l,loop:S,style:x}),u=x,h=w%l)}}for(const y of t){h=a?h:y.start;let w=n[h%l],S;for(g=h+1;g<=y.end;g++){const x=n[g%l];S=o_(s.setContext(el(i,{type:"segment",p0:w,p1:x,p0DataIndex:(g-1)%l,p1DataIndex:g%l,datasetIndex:o}))),fz(S,u)&&p(h,g-1,y.loop,u),w=x,u=S}h<g-1&&p(h,g-1,y.loop,u)}return c}function o_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function fz(e,t){if(!t)return!1;const n=[],s=function(i,r){return c5(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Up(e,t,n){return e.options.clip?e[n]:t[n]}function pz(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Up(n,t,"left"),right:Up(n,t,"right"),top:Up(s,t,"top"),bottom:Up(s,t,"bottom")}:t}function NP(e,t){const n=t._clip;if(n.disabled)return!1;const s=pz(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class gz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Po=new gz;const a_="transparent",mz={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Q4(e||a_),i=s.valid&&Q4(t||a_);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class vz{constructor(t,n,s,i){const r=n[s];i=Ud([t.to,i,r,t.from]);const o=Ud([t.from,r,i]);this._active=!0,this._fn=t.fn||mz[t.type||typeof o],this._easing=lh[t.easing]||lh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ud([t.to,n,i,t.from]),this._from=Ud([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class DP{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Xe(t))return;const n=Object.keys(Ln.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Xe(r))return;const o={};for(const a of n)o[a]=r[a];(Dn(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=bz(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&yz(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let h=r[c];const g=s.get(c);if(h)if(g&&h.active()){h.update(g,u,a);continue}else h.cancel();if(!g||!g.duration){t[c]=u;continue}r[c]=h=new vz(g,t,c,u),i.push(h)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Po.add(this._chart,s),!0}}function yz(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function bz(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function l_(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function wz(e,t,n){if(n===!1)return!1;const s=l_(e,n),i=l_(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function xz(e){let t,n,s,i;return Xe(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function LP(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function c_(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=e.values[l],zn(c)&&(r||t===0||no(t)===no(c))&&(t+=c)}return!u&&!s.all?0:t}function _z(e,t){const{iScale:n,vScale:s}=t,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:e[u]};return a}function v2(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Sz(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Cz(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function kz(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function u_(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function d_(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=Sz(r,o,s),h=t.length;let g;for(let p=0;p<h;++p){const y=t[p],{[l]:w,[c]:S}=y,x=y._stacks||(y._stacks={});g=x[c]=kz(i,u,w),g[a]=S,g._top=u_(g,o,!0,s.type),g._bottom=u_(g,o,!1,s.type);const P=g._visualValues||(g._visualValues={});P[a]=S}}function y2(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function Az(e,t){return el(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Pz(e,t,n){return el(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ad(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const b2=e=>e==="reset"||e==="none",h_=(e,t)=>t?e:Object.assign({},e),Ez=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:LP(n,!0),values:null};class xr{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=v2(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ad(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(h,g,p,y)=>h==="x"?g:h==="r"?y:p,r=n.xAxisID=Ve(s.xAxisID,y2(t,"x")),o=n.yAxisID=Ve(s.yAxisID,y2(t,"y")),a=n.rAxisID=Ve(s.rAxisID,y2(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&K4(this._data,this),t._stacked&&Ad(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Xe(n)){const i=this._cachedMeta;this._data=_z(n,i)}else if(s!==n){if(s){K4(s,this);const i=this._cachedMeta;Ad(i),i._parsed=[]}n&&Object.isExtensible(n)&&hV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=v2(n.vScale,n),n.stack!==s.stack&&(i=!0,Ad(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&(d_(this,n._parsed),n._stacked=v2(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&n===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,h,g;if(this._parsing===!1)s._parsed=i,s._sorted=!0,g=i;else{Dn(i[t])?g=this.parseArrayData(s,i,t,n):Xe(i[t])?g=this.parseObjectData(s,i,t,n):g=this.parsePrimitiveData(s,i,t,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+t]=h=g[u],l&&(p()&&(l=!1),c=h);s._sorted=l}o&&d_(this,g)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(i);let g,p,y;for(g=0,p=i;g<p;++g)y=g+s,h[g]={[a]:u||r.parse(c[y],y),[l]:o.parse(n[y],y)};return h}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+s,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,g,p;for(u=0,h=i;u<h;++u)g=u+s,p=n[g],c[u]={x:r.parse(Ua(p,a),g),y:o.parse(Ua(p,l),g)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:LP(i,!0),values:n._stacks[t.axis]._visualValues};return c_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=c_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=Ez(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Cz(a);let g,p;function y(){p=i[g];const w=p[a.axis];return!zn(p[t.axis])||u>w||h<w}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(c,t,p,l),r));++g);if(r){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],zn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=xz(Ve(this.options.clip,wz(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,r,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Pz(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Az(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Wh(s);if(a)return h_(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],g=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Ln.elements[t]),y=()=>this.getContext(s,i,n),w=c.resolveNamedOptions(g,p,y,h);return w.$shared&&(w.$shared=l,r[o]=Object.freeze(h_(w,l))),w}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),g=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(g,this.getContext(t,s,n))}const c=new DP(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||b2(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){b2(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!b2(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&Ad(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Qt(xr,"defaults",{}),Qt(xr,"datasetElementType",null),Qt(xr,"dataElementType",null);function Iz(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=n.length;i<r;i++)s=s.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=hP(s.sort((i,r)=>i-r))}return e._cache.$bar}function Tz(e){const t=e.iScale,n=Iz(t,e.type);let s=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(Wh(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function Nz(e,t,n,s){const i=n.barThickness;let r,o;return He(i)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function Dz(e,t,n,s){const i=t.pixels,r=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:c}}function Lz(e,t,n,s){const i=n.parse(e[0],s),r=n.parse(e[1],s),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function MP(e,t,n,s){return Dn(e)?Lz(e,t,n,s):t[n.axis]=n.parse(e,s),t}function f_(e,t,n,s){const i=e.iScale,r=e.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,h,g;for(c=n,u=n+s;c<u;++c)g=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(MP(g,h,r,c));return l}function w2(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Mz(e,t,n){return e!==0?no(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Oz(e){let t,n,s,i,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:n,end:s,reverse:t,top:i,bottom:r}}function Rz(e,t,n,s){let i=t.borderSkipped;const r={};if(!i){e.borderSkipped=r;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Oz(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?i=c:(n._bottom||0)===s?i=u:(r[p_(u,o,a,l)]=!0,i=c)),r[p_(i,o,a,l)]=!0,e.borderSkipped=r}function p_(e,t,n,s){return s?(e=Fz(e,t,n),e=g_(e,n,t)):e=g_(e,t,n),e}function Fz(e,t,n){return e===t?n:e===n?t:e}function g_(e,t,n){return e==="start"?t:e==="end"?n:e}function Bz(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class uh extends xr{parsePrimitiveData(t,n,s,i){return f_(t,n,s,i)}parseArrayData(t,n,s,i){return f_(t,n,s,i)}parseObjectData(t,n,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let g,p,y,w;for(g=s,p=s+i;g<p;++g)w=n[g],y={},y[r.axis]=r.parse(Ua(w,c),g),h.push(MP(Ua(w,u),y,o,g));return h}updateRangeFromParsed(t,n,s,i){super.updateRangeFromParsed(t,n,s,i);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:i}=n,r=this.getParsed(t),o=r._custom,a=w2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:g}=this._getSharedOptions(n,i);for(let p=n;p<n+s;p++){const y=this.getParsed(p),w=r||He(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),S=this._calculateBarIndexPixels(p,u),x=(y._stacks||{})[a.axis],P={horizontal:c,base:w.base,enableBorderRadius:!x||w2(y._custom)||o===x._top||o===x._bottom,x:c?w.head:S.center,y:c?S.center:w.head,height:c?S.size:Math.abs(w.size),width:c?Math.abs(w.size):S.size};g&&(P.options=h||this.resolveDataElementOptions(p,t[p].active?"active":i));const L=P.options||t[p].options;Rz(P,L,x,o),Bz(P,L,u.ratio),this.updateElement(t[p],p,P,i)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],c=u=>{const h=u._parsed.find(p=>p[s.axis]===l),g=h&&h[u.vScale.axis];if(He(g)||isNaN(g))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const i=this._getStacks(t,s),r=n!==void 0?i.indexOf(n):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,i=[];let r,o;for(r=0,o=n.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||Tz(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,u=w2(c);let h=l[n.axis],g=0,p=s?this.applyStack(n,l,s):h,y,w;p!==h&&(g=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&no(h)!==no(c.barEnd)&&(g=0),g+=h);const S=!He(r)&&!u?r:g;let x=n.getPixelForValue(S);if(this.chart.getDataVisibility(t)?y=n.getPixelForValue(g+p):y=x,w=y-x,Math.abs(w)<o){w=Mz(w,n,a)*o,h===a&&(x-=w/2);const P=n.getPixelForDecimal(0),L=n.getPixelForDecimal(1),M=Math.min(P,L),F=Math.max(P,L);x=Math.max(Math.min(x,F),M),y=x+w,s&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(x))}if(x===n.getPixelForValue(a)){const P=no(w)*n.getLineWidthForValue(a)/2;x+=P,w-=P}return{size:w,base:x,head:y,center:y+w/2}}_calculateBarIndexPixels(t,n){const s=n.scale,i=this.options,r=i.skipNull,o=Ve(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(t):n.stackCount,u=i.barThickness==="flex"?Dz(t,n,i,c):Nz(t,n,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[n.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}Qt(uh,"id","bar"),Qt(uh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Qt(uh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class wg extends xr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,i){const r=super.parsePrimitiveData(t,n,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,n,s,i){const r=super.parseArrayData(t,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Ve(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,n,s,i){const r=super.parseObjectData(t,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Ve(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let g=n;g<n+s;g++){const p=t[g],y=!r&&this.getParsed(g),w={},S=w[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(y[u]),x=w[h]=r?a.getBasePixel():a.getPixelForValue(y[h]);w.skip=isNaN(S)||isNaN(x),c&&(w.options=l||this.resolveDataElementOptions(g,p.active?"active":i),r&&(w.options.radius=0)),this.updateElement(p,g,w,i)}}resolveDataElementOptions(t,n){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Ve(s&&s._custom,r),i}}Qt(wg,"id","bubble"),Qt(wg,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Qt(wg,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function jz(e,t,n){let s=1,i=1,r=0,o=0;if(t<En){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),g=Math.sin(l),p=(L,M,F)=>Gh(L,a,l,!0)?1:Math.max(M,M*n,F,F*n),y=(L,M,F)=>Gh(L,a,l,!0)?-1:Math.min(M,M*n,F,F*n),w=p(0,c,h),S=p(Zn,u,g),x=y(In,c,h),P=y(In+Zn,u,g);s=(w-x)/2,i=(S-P)/2,r=-(w+x)/2,o=-(S+P)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class Ia extends xr{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Xe(s[t])){const{key:l="value"}=this._parsing;r=c=>+Ua(s[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return vr(this.options.rotation-90)}_getCircumference(){return vr(this.options.circumference)}_getRotationExtents(){let t=En,n=-En;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(Q$(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:g,ratioY:p,offsetX:y,offsetY:w}=jz(h,u,l),S=(s.width-o)/g,x=(s.height-o)/p,P=Math.max(Math.min(S,x)/2,0),L=aP(this.options.radius,P),M=Math.max(L*l,0),F=(L-M)/this._getVisibleDatasetWeightTotal();this.offsetX=y*L,this.offsetY=w*L,i.total=this.calculateTotal(),this.outerRadius=L-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/En)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,g=r&&c.animateScale,p=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:w,includeOptions:S}=this._getSharedOptions(n,i);let x=this._getRotation(),P;for(P=0;P<n;++P)x+=this._circumference(P,r);for(P=n;P<n+s;++P){const L=this._circumference(P,r),M=t[P],F={x:u+this.offsetX,y:h+this.offsetY,startAngle:x,endAngle:x+L,circumference:L,outerRadius:y,innerRadius:p};S&&(F.options=w||this.resolveDataElementOptions(P,M.active?"active":i)),x+=L,this.updateElement(M,P,F,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?En*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Nf(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Ve(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Qt(Ia,"id","doughnut"),Qt(Ia,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Qt(Ia,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Qt(Ia,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class dh extends xr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=gP(n,i,o);this._drawStart=a,this._drawCount=l,mP(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),g=o.axis,p=a.axis,{spanGaps:y,segment:w}=this.options,S=Du(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||i==="none",P=n+s,L=t.length;let M=n>0&&this.getParsed(n-1);for(let F=0;F<L;++F){const pt=t[F],Y=x?pt:{};if(F<n||F>=P){Y.skip=!0;continue}const W=this.getParsed(F),it=He(W[p]),J=Y[g]=o.getPixelForValue(W[g],F),_=Y[p]=r||it?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,W,l):W[p],F);Y.skip=isNaN(J)||isNaN(_)||it,Y.stop=F>0&&Math.abs(W[g]-M[g])>S,w&&(Y.parsed=W,Y.raw=c.data[F]),h&&(Y.options=u||this.resolveDataElementOptions(F,pt.active?"active":i)),x||this.updateElement(pt,F,Y,i),M=W}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Qt(dh,"id","line"),Qt(dh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Qt(dh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class hh extends xr{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Nf(n._parsed[t].r,s.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,n,s,i){return CP.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,i=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,g=c.getIndexAngle(0)-.5*In;let p=g,y;const w=360/this.countVisibleElements();for(y=0;y<n;++y)p+=this._computeAngle(y,i,w);for(y=n;y<n+s;y++){const S=t[y];let x=p,P=p+this._computeAngle(y,i,w),L=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;p=P,r&&(l.animateScale&&(L=0),l.animateRotate&&(x=P=g));const M={x:u,y:h,innerRadius:0,outerRadius:L,startAngle:x,endAngle:P,options:this.resolveDataElementOptions(y,S.active?"active":i)};this.updateElement(S,y,M,i)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?vr(this.resolveDataElementOptions(t,n).angle||s):0}}Qt(hh,"id","polarArea"),Qt(hh,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Qt(hh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class qv extends Ia{}Qt(qv,"id","pie"),Qt(qv,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xg extends xr{getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(t,n,s,i){return CP.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta,s=n.dataset,i=n.data||[],r=n.iScale.getLabels();if(s.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,n,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+s;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,g=o?r.yCenter:u.y,p={x:h,y:g,angle:u.angle,skip:isNaN(h)||isNaN(g),options:c};this.updateElement(l,a,p,i)}}}Qt(xg,"id","radar"),Qt(xg,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Qt(xg,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _g extends xr{getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:r,count:o}=gP(n,s,i);if(this._drawStart=r,this._drawCount=o,mP(n)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),g=this.includeOptions(i,h),p=o.axis,y=a.axis,{spanGaps:w,segment:S}=this.options,x=Du(w)?w:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||r||i==="none";let L=n>0&&this.getParsed(n-1);for(let M=n;M<n+s;++M){const F=t[M],pt=this.getParsed(M),Y=P?F:{},W=He(pt[y]),it=Y[p]=o.getPixelForValue(pt[p],M),J=Y[y]=r||W?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,pt,l):pt[y],M);Y.skip=isNaN(it)||isNaN(J)||W,Y.stop=M>0&&Math.abs(pt[p]-L[p])>x,S&&(Y.parsed=pt,Y.raw=c.data[M]),g&&(Y.options=h||this.resolveDataElementOptions(M,F.active?"active":i)),P||this.updateElement(F,M,Y,i),L=pt}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}}Qt(_g,"id","scatter"),Qt(_g,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Qt(_g,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var $z=Object.freeze({__proto__:null,BarController:uh,BubbleController:wg,DoughnutController:Ia,LineController:dh,PieController:qv,PolarAreaController:hh,RadarController:xg,ScatterController:_g});function vl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class m5{constructor(t){Qt(this,"options");this.options=t||{}}static override(t){Object.assign(m5.prototype,t)}init(){}formats(){return vl()}parse(){return vl()}format(){return vl()}add(){return vl()}diff(){return vl()}startOf(){return vl()}endOf(){return vl()}}var Vz={_date:m5};function zz(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?uV:Fo;if(s){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const g=c(r,t,n-h),p=c(r,t,n+h);return{lo:g.lo,hi:p.hi}}}}else{const u=c(r,t,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:g}=e,p=g.slice(0,u.lo+1).reverse().findIndex(w=>!He(w[h.axis]));u.lo-=Math.max(0,p);const y=g.slice(u.hi).findIndex(w=>!He(w[h.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:r.length-1}}function M0(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:g}=zz(r[a],t,o,i);for(let p=h;p<=g;++p){const y=u[p];y.skip||s(y,c,p)}}}function Uz(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function x2(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||M0(e,n,t,function(a,l,c){!i&&!Bo(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function qz(e,t,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=uP(o,{x:t.x,y:t.y});Gh(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return M0(e,n,t,r),i}function Hz(e,t,n,s,i,r){let o=[];const a=Uz(n);let l=Number.POSITIVE_INFINITY;function c(u,h,g){const p=u.inRange(t.x,t.y,i);if(s&&!p)return;const y=u.getCenterPoint(i);if(!(!!r||e.isPointInArea(y))&&!p)return;const S=a(t,y);S<l?(o=[{element:u,datasetIndex:h,index:g}],l=S):S===l&&o.push({element:u,datasetIndex:h,index:g})}return M0(e,n,t,c),o}function _2(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?qz(e,t,n,i):Hz(e,t,n,s,i,r)}function m_(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return M0(e,n,t,(l,c,u)=>{l[o]&&l[o](t[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var Wz={modes:{index(e,t,n,s){const i=xl(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?x2(e,i,r,s,o):_2(e,i,r,!1,s,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,s){const i=xl(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?x2(e,i,r,s,o):_2(e,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,s){const i=xl(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return x2(e,i,r,s,o)},nearest(e,t,n,s){const i=xl(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return _2(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=xl(t,e);return m_(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=xl(t,e);return m_(e,i,"y",n.intersect,s)}}};const OP=["left","top","right","bottom"];function Pd(e,t){return e.filter(n=>n.pos===t)}function v_(e,t){return e.filter(n=>OP.indexOf(n.pos)===-1&&n.box.axis===t)}function Ed(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function Gz(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function Kz(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!OP.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Yz(e,t){const n=Kz(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&t.availableHeight)}return n}function Xz(e){const t=Gz(e),n=Ed(t.filter(c=>c.box.fullSize),!0),s=Ed(Pd(t,"left"),!0),i=Ed(Pd(t,"right")),r=Ed(Pd(t,"top"),!0),o=Ed(Pd(t,"bottom")),a=v_(t,"x"),l=v_(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Pd(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function y_(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function RP(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Qz(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Xe(i)){n.size&&(e[i]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,e[i]+=n.size}r.getPadding&&RP(o,r.getPadding());const a=Math.max(0,t.outerWidth-y_(o,e,"left","right")),l=Math.max(0,t.outerHeight-y_(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Jz(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Zz(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function qd(e,t,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,Zz(a.horizontal,t));const{same:h,other:g}=Qz(t,n,a,s);c|=h&&i.length,u=u||g,l.fullSize||i.push(a)}return c&&qd(i,t,n,s)||u}function qp(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function b_(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,g=c.size||l.height;Wh(c.start)&&(o=c.start),l.fullSize?qp(l,i.left,o,n.outerWidth-i.right-i.left,g):qp(l,t.left+c.placed,o,h,g),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,g=c.size||l.width;Wh(c.start)&&(r=c.start),l.fullSize?qp(l,r,i.top,g,n.outerHeight-i.bottom-i.top):qp(l,r,t.top+c.placed,g,h),c.start=r,c.placed+=h,r=l.right}}t.x=r,t.y=o}var Ys={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=ni(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=Xz(e.boxes),l=a.vertical,c=a.horizontal;hn(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const u=l.reduce((w,S)=>S.box.options&&S.box.options.display===!1?w:w+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),g=Object.assign({},i);RP(g,ni(s));const p=Object.assign({maxPadding:g,w:r,h:o,x:i.left,y:i.top},i),y=Yz(l.concat(c),h);qd(a.fullSize,p,h,y),qd(l,p,h,y),qd(c,p,h,y)&&qd(l,p,h,y),Jz(p),b_(a.leftAndTop,p,h,y),p.x+=p.w,p.y+=p.h,b_(a.rightAndBottom,p,h,y),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},hn(a.chartArea,w=>{const S=w.box;Object.assign(S,e.chartArea),S.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class FP{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class tU extends FP{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Sg="$chartjs",eU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},w_=e=>e===null||e==="";function nU(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[Sg]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",w_(i)){const r=s_(e,"width");r!==void 0&&(e.width=r)}if(w_(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=s_(e,"height");r!==void 0&&(e.height=r)}return e}const BP=sz?{passive:!0}:!1;function sU(e,t,n){e&&e.addEventListener(t,n,BP)}function iU(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,BP)}function rU(e,t){const n=eU[e.type]||e.type,{x:s,y:i}=xl(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function pm(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function oU(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||pm(a.addedNodes,s),o=o&&!pm(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function aU(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||pm(a.removedNodes,s),o=o&&!pm(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Yh=new Map;let x_=0;function jP(){const e=window.devicePixelRatio;e!==x_&&(x_=e,Yh.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function lU(e,t){Yh.size||window.addEventListener("resize",jP),Yh.set(e,t)}function cU(e){Yh.delete(e),Yh.size||window.removeEventListener("resize",jP)}function uU(e,t,n){const s=e.canvas,i=s&&g5(s);if(!i)return;const r=pP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),lU(e,r),o}function S2(e,t,n){n&&n.disconnect(),t==="resize"&&cU(e)}function dU(e,t,n){const s=e.canvas,i=pP(r=>{e.ctx!==null&&n(rU(r,e))},e);return sU(s,t,i),i}class hU extends FP{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(nU(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Sg])return!1;const s=n[Sg].initial;["height","width"].forEach(r=>{const o=s[r];He(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Sg],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:oU,detach:aU,resize:uU}[n]||dU;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:S2,detach:S2,resize:S2}[n]||iU)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return nz(t,n,s,i)}isAttached(t){const n=t&&g5(t);return!!(n&&n.isConnected)}}function fU(e){return!p5()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?tU:hU}var ng;let Ko=(ng=class{constructor(){Qt(this,"x");Qt(this,"y");Qt(this,"active",!1);Qt(this,"options");Qt(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Du(this.x)&&Du(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},Qt(ng,"defaults",{}),Qt(ng,"defaultRoutes"),ng);function pU(e,t){const n=e.options.ticks,s=gU(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?vU(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return yU(t,c,r,o/i),c;const u=mU(r,t,i);if(o>0){let h,g;const p=o>1?Math.round((l-a)/(o-1)):null;for(Hp(t,c,u,He(p)?0:a-p,a),h=0,g=o-1;h<g;h++)Hp(t,c,u,r[h],r[h+1]);return Hp(t,c,u,l,He(p)?t.length:l+p),c}return Hp(t,c,u),c}function gU(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function mU(e,t,n){const s=bU(e),i=t.length/n;if(!s)return Math.max(i,1);const r=rV(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function vU(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function yU(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Hp(e,t,n,s,i){const r=Ve(s,0),o=Math.min(Ve(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*n))}function bU(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const wU=e=>e==="left"?"right":e==="right"?"left":e,__=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,S_=(e,t)=>Math.min(t||e,e);function C_(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function xU(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function _U(e,t){hn(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Id(e){return e.drawTicks?e.tickLength:0}function k_(e,t){if(!e.display)return 0;const n=fs(e.font,t),s=ni(e.padding);return(Dn(e.text)?e.text.length:1)*n.lineHeight+s.height}function SU(e,t){return el(e,{scale:t,type:"scale"})}function CU(e,t,n){return el(e,{tick:n,index:t,type:"tick"})}function kU(e,t,n){let s=l5(e);return(n&&t!=="right"||!n&&t==="right")&&(s=wU(s)),s}function AU(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,g,p,y;const w=o-i,S=a-r;if(e.isHorizontal()){if(p=Vs(s,r,a),Xe(n)){const x=Object.keys(n)[0],P=n[x];y=u[x].getPixelForValue(P)+w-t}else n==="center"?y=(c.bottom+c.top)/2+w-t:y=__(e,n,t);g=a-r}else{if(Xe(n)){const x=Object.keys(n)[0],P=n[x];p=u[x].getPixelForValue(P)-S+t}else n==="center"?p=(c.left+c.right)/2-S+t:p=__(e,n,t);y=Vs(s,o,i),h=n==="left"?-Zn:Zn}return{titleX:p,titleY:y,maxWidth:g,rotation:h}}class rc extends Ko{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Ni(t,Number.POSITIVE_INFINITY),n=Ni(n,Number.NEGATIVE_INFINITY),s=Ni(s,Number.POSITIVE_INFINITY),i=Ni(i,Number.NEGATIVE_INFINITY),{min:Ni(t,s),max:Ni(n,i),minDefined:zn(t),maxDefined:zn(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Ni(n,Ni(s,n)),max:Ni(s,Ni(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Sn(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=MV(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?C_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=pU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Sn(this.options.afterUpdate,[this])}beforeSetDimensions(){Sn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Sn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Sn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Sn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Sn(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Sn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Sn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=S_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,g=u.highest.height,p=Ss(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),h+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-Id(t.grid)-n.padding-k_(t.title,this.chart.options.font),c=Math.sqrt(h*h+g*g),o=o5(Math.min(Math.asin(Ss((u.highest.height+6)/a,-1,1)),Math.asin(Ss(l/c,-1,1))-Math.asin(Ss(g/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Sn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Sn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=k_(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=Id(r)+l):(t.height=this.maxHeight,t.width=Id(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:g}=this._getLabelSizes(),p=s.padding*2,y=vr(this.labelRotation),w=Math.cos(y),S=Math.sin(y);if(a){const x=s.mirror?0:S*h.width+w*g.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=s.mirror?0:w*h.width+S*g.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,u,S,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,p=0;l?c?(g=i*t.width,p=s*n.height):(g=s*t.height,p=i*n.width):r==="start"?p=n.width:r==="end"?g=t.width:r!=="inner"&&(g=t.width/2,p=n.width/2),this.paddingLeft=Math.max((g-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;r==="start"?(u=0,h=t.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Sn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)He(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=C_(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/S_(n,s));let c=0,u=0,h,g,p,y,w,S,x,P,L,M,F;for(h=0;h<n;h+=l){if(y=t[h].label,w=this._resolveTickFontOptions(h),i.font=S=w.string,x=r[S]=r[S]||{data:{},gc:[]},P=w.lineHeight,L=M=0,!He(y)&&!Dn(y))L=hm(i,x.data,x.gc,L,y),M=P;else if(Dn(y))for(g=0,p=y.length;g<p;++g)F=y[g],!He(F)&&!Dn(F)&&(L=hm(i,x.data,x.gc,L,F),M+=P);o.push(L),a.push(M),c=Math.max(L,c),u=Math.max(M,u)}_U(r,n);const pt=o.indexOf(c),Y=a.indexOf(u),W=it=>({width:o[it]||0,height:a[it]||0});return{first:W(0),last:W(n-1),widest:W(pt),highest:W(Y),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return cV(this._alignToPixels?ml(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=CU(this.getContext(),t,s))}return this.$context||(this.$context=SU(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=vr(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),g=Id(r),p=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,S=w/2,x=function(ht){return ml(s,ht,w)};let P,L,M,F,pt,Y,W,it,J,_,A,Q;if(o==="top")P=x(this.bottom),Y=this.bottom-g,it=P-S,_=x(t.top)+S,Q=t.bottom;else if(o==="bottom")P=x(this.top),_=t.top,Q=x(t.bottom)-S,Y=P+S,it=this.top+g;else if(o==="left")P=x(this.right),pt=this.right-g,W=P-S,J=x(t.left)+S,A=t.right;else if(o==="right")P=x(this.left),J=t.left,A=x(t.right)-S,pt=P+S,W=this.left+g;else if(n==="x"){if(o==="center")P=x((t.top+t.bottom)/2+.5);else if(Xe(o)){const ht=Object.keys(o)[0],gt=o[ht];P=x(this.chart.scales[ht].getPixelForValue(gt))}_=t.top,Q=t.bottom,Y=P+S,it=Y+g}else if(n==="y"){if(o==="center")P=x((t.left+t.right)/2);else if(Xe(o)){const ht=Object.keys(o)[0],gt=o[ht];P=x(this.chart.scales[ht].getPixelForValue(gt))}pt=P-S,W=pt-g,J=t.left,A=t.right}const et=Ve(i.ticks.maxTicksLimit,h),mt=Math.max(1,Math.ceil(h/et));for(L=0;L<h;L+=mt){const ht=this.getContext(L),gt=r.setContext(ht),tt=a.setContext(ht),T=gt.lineWidth,rt=gt.color,kt=tt.dash||[],I=tt.dashOffset,O=gt.tickWidth,E=gt.tickColor,R=gt.tickBorderDash||[],Z=gt.tickBorderDashOffset;M=xU(this,L,l),M!==void 0&&(F=ml(s,M,T),c?pt=W=J=A=F:Y=it=_=Q=F,p.push({tx1:pt,ty1:Y,tx2:W,ty2:it,x1:J,y1:_,x2:A,y2:Q,width:T,color:rt,borderDash:kt,borderDashOffset:I,tickWidth:O,tickColor:E,tickBorderDash:R,tickBorderDashOffset:Z}))}return this._ticksLength=h,this._borderValue=P,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,g=Id(s.grid),p=g+u,y=h?-u:p,w=-vr(this.labelRotation),S=[];let x,P,L,M,F,pt,Y,W,it,J,_,A,Q="middle";if(i==="top")pt=this.bottom-y,Y=this._getXAxisLabelAlignment();else if(i==="bottom")pt=this.top+y,Y=this._getXAxisLabelAlignment();else if(i==="left"){const mt=this._getYAxisLabelAlignment(g);Y=mt.textAlign,F=mt.x}else if(i==="right"){const mt=this._getYAxisLabelAlignment(g);Y=mt.textAlign,F=mt.x}else if(n==="x"){if(i==="center")pt=(t.top+t.bottom)/2+p;else if(Xe(i)){const mt=Object.keys(i)[0],ht=i[mt];pt=this.chart.scales[mt].getPixelForValue(ht)+p}Y=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")F=(t.left+t.right)/2-p;else if(Xe(i)){const mt=Object.keys(i)[0],ht=i[mt];F=this.chart.scales[mt].getPixelForValue(ht)}Y=this._getYAxisLabelAlignment(g).textAlign}n==="y"&&(l==="start"?Q="top":l==="end"&&(Q="bottom"));const et=this._getLabelSizes();for(x=0,P=a.length;x<P;++x){L=a[x],M=L.label;const mt=r.setContext(this.getContext(x));W=this.getPixelForTick(x)+r.labelOffset,it=this._resolveTickFontOptions(x),J=it.lineHeight,_=Dn(M)?M.length:1;const ht=_/2,gt=mt.color,tt=mt.textStrokeColor,T=mt.textStrokeWidth;let rt=Y;o?(F=W,Y==="inner"&&(x===P-1?rt=this.options.reverse?"left":"right":x===0?rt=this.options.reverse?"right":"left":rt="center"),i==="top"?c==="near"||w!==0?A=-_*J+J/2:c==="center"?A=-et.highest.height/2-ht*J+J:A=-et.highest.height+J/2:c==="near"||w!==0?A=J/2:c==="center"?A=et.highest.height/2-ht*J:A=et.highest.height-_*J,h&&(A*=-1),w!==0&&!mt.showLabelBackdrop&&(F+=J/2*Math.sin(w))):(pt=W,A=(1-_)*J/2);let kt;if(mt.showLabelBackdrop){const I=ni(mt.backdropPadding),O=et.heights[x],E=et.widths[x];let R=A-I.top,Z=0-I.left;switch(Q){case"middle":R-=O/2;break;case"bottom":R-=O;break}switch(Y){case"center":Z-=E/2;break;case"right":Z-=E;break;case"inner":x===P-1?Z-=E:x>0&&(Z-=E/2);break}kt={left:Z,top:R,width:E+I.width,height:O+I.height,color:mt.backdropColor}}S.push({label:M,font:it,textOffset:A,options:{rotation:w,color:gt,strokeColor:tt,strokeWidth:T,textAlign:rt,textBaseline:Q,translation:[F,pt],backdrop:kt}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-vr(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,g;this.isHorizontal()?(c=ml(t,this.left,o)-o/2,u=ml(t,this.right,a)+a/2,h=g=l):(h=ml(t,this.top,o)-o/2,g=ml(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,g),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&N0(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Jl(s,c,0,u,l,a)}i&&D0(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=fs(s.font),o=ni(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||Xe(n)?(l+=o.bottom,Dn(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:g}=AU(this,l,n,a);Jl(t,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:g,textAlign:kU(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Ve(t.grid&&t.grid.z,-1),i=Ve(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==rc.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return fs(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Wp{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;IU(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,PU(t,o,s),this.override&&Ln.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in Ln[i]&&(delete Ln[i][s],this.override&&delete Ql[s])}}function PU(e,t,n){const s=Hh(Object.create(null),[n?Ln.get(n):{},Ln.get(t),e.defaults]);Ln.set(t,s),e.defaultRoutes&&EU(t,e.defaultRoutes),e.descriptors&&Ln.describe(t,e.descriptors)}function EU(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Ln.route(r,i,l,a)})}function IU(e){return"id"in e&&"defaults"in e}class TU{constructor(){this.controllers=new Wp(xr,"datasets",!0),this.elements=new Wp(Ko,"elements"),this.plugins=new Wp(Object,"plugins"),this.scales=new Wp(rc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):hn(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=r5(t);Sn(s["before"+i],[],s),n[t](s),Sn(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Ur=new TU;class NU{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[n,i,r.options];if(Sn(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){He(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=Ve(s.options&&s.options.plugins,{}),r=DU(s);return i===!1&&!n?[]:MU(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function DU(e){const t={},n=[],s=Object.keys(Ur.plugins.items);for(let r=0;r<s.length;r++)n.push(Ur.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function LU(e,t){return!t&&e===!1?null:e===!0?{}:e}function MU(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=LU(s[l],i);c!==null&&r.push({plugin:a,options:OU(e.config,{plugin:a,local:n[l]},c,o)})}return r}function OU(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hv(e,t){const n=Ln.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function RU(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function FU(e,t){return e===t?"_index_":"_value_"}function A_(e){if(e==="x"||e==="y"||e==="r")return e}function BU(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Wv(e,...t){if(A_(e))return e;for(const n of t){const s=n.axis||BU(n.position)||e.length>1&&A_(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function P_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function jU(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return P_(e,"x",n[0])||P_(e,"y",n[0])}return{}}function $U(e,t){const n=Ql[e.type]||{scales:{}},s=t.scales||{},i=Hv(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Wv(o,a,jU(o,e),Ln.scales[a.type]),c=FU(l,i),u=n.scales||{};r[o]=oh(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||Hv(a,t),u=(Ql[a]||{}).scales||{};Object.keys(u).forEach(h=>{const g=RU(h,l),p=o[g+"AxisID"]||g;r[p]=r[p]||Object.create(null),oh(r[p],[{axis:g},s[p],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];oh(a,[Ln.scales[a.type],Ln.scale])}),r}function $P(e){const t=e.options||(e.options={});t.plugins=Ve(t.plugins,{}),t.scales=$U(e,t)}function VP(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function VU(e){return e=e||{},e.data=VP(e.data),$P(e),e}const E_=new Map,zP=new Set;function Gp(e,t){let n=E_.get(e);return n||(n=t(),E_.set(e,n),zP.add(n)),n}const Td=(e,t,n)=>{const s=Ua(t,n);s!==void 0&&e.add(s)};class zU{constructor(t){this._config=VU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=VP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$P(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Gp(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Gp(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Gp(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Gp(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>Td(l,t,h))),u.forEach(h=>Td(l,i,h)),u.forEach(h=>Td(l,Ql[r]||{},h)),u.forEach(h=>Td(l,Ln,h)),u.forEach(h=>Td(l,zv,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),zP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ql[n]||{},Ln.datasets[n]||{},{type:n},Ln,zv]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=I_(this._resolverCache,t,i);let l=o;if(qU(o,n)){r.$shared=!1,s=qa(s)?s():s;const c=this.createResolver(t,s,a);l=Lu(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,s=[""],i){const{resolver:r}=I_(this._resolverCache,t,s);return Xe(n)?Lu(r,n,void 0,i):r}}function I_(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:d5(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const UU=e=>Xe(e)&&Object.getOwnPropertyNames(e).some(t=>qa(e[t]));function qU(e,t){const{isScriptable:n,isIndexable:s}=wP(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(qa(a)||UU(a))||o&&Dn(a))return!0}return!1}var HU="4.4.9";const WU=["top","bottom","left","right","chartArea"];function T_(e,t){return e==="top"||e==="bottom"||WU.indexOf(e)===-1&&t==="x"}function N_(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function D_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Sn(n&&n.onComplete,[e],t)}function GU(e){const t=e.chart,n=t.options.animation;Sn(n&&n.onProgress,[e],t)}function UP(e){return p5()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Cg={},L_=e=>{const t=UP(e);return Object.values(Cg).filter(n=>n.canvas===t).pop()};function KU(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function YU(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var pa;let oc=(pa=class{static register(...t){Ur.add(...t),M_()}static unregister(...t){Ur.remove(...t),M_()}constructor(t,n){const s=this.config=new zU(n),i=UP(t),r=L_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||fU(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=X$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fV(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Cg[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Po.listen(this,"complete",D_),Po.listen(this,"progress",GU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return He(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():n_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Z4(this.canvas,this.ctx),this}stop(){return Po.stop(this),this}resize(t,n){Po.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,n_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Sn(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};hn(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Wv(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),hn(r,o=>{const a=o.options,l=a.id,c=Wv(l,a),u=Ve(a.type,o.dtype);(a.position===void 0||T_(a.position,c)!==T_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const g=Ur.getScale(u);h=new g({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,t)}),hn(i,(o,a)=>{o||delete s[a]}),hn(s,o=>{Ys.configure(this,o,o.options),Ys.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(N_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Hv(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Ur.getController(a),{datasetElementType:c,dataElementType:u}=Ln.datasets[a];Object.assign(l,{dataElementType:Ur.getElement(u),datasetElementType:c&&Ur.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){hn(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),g=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(g),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||hn(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(N_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){hn(this.scales,t=>{Ys.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!q4(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;KU(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!q4(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ys.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],hn(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,qa(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Po.has(this)?this.attached&&!Po.running(this)&&Po.start(this):(this.draw(),D_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=NP(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&N0(n,i),t.controller.draw(),i&&D0(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Bo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=Wz.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=el(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Wh(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Po.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Z4(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};hn(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){hn(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},hn(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!cm(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),l=nV(t),c=YU(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Sn(r.onHover,[t,a,this],this),l&&Sn(r.onClick,[t,a,this],this));const u=!cm(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},Qt(pa,"defaults",Ln),Qt(pa,"instances",Cg),Qt(pa,"overrides",Ql),Qt(pa,"registry",Ur),Qt(pa,"version",HU),Qt(pa,"getChart",L_),pa);function M_(){return hn(oc.instances,e=>e._plugins.invalidate())}function XU(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(r,o,a,s-c,n+c),l>i?(c=i/l,e.arc(r,o,l,n+c,s-c,!0)):e.arc(r,o,i,n+Zn,s-Zn),e.closePath(),e.clip()}function QU(e){return u5(e,["outerStart","outerEnd","innerStart","innerEnd"])}function JU(e,t,n,s){const i=QU(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(n-Math.min(r,l))*s/2;return Ss(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ss(i.innerStart,0,o),innerEnd:Ss(i.innerEnd,0,o)}}function Fc(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function gm(e,t,n,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+s+n-c,0),g=u>0?u+s+n+c:0;let p=0;const y=i-l;if(s){const mt=u>0?u-s:0,ht=h>0?h-s:0,gt=(mt+ht)/2,tt=gt!==0?y*gt/(gt+s):y;p=(y-tt)/2}const w=Math.max(.001,y*h-n/In)/h,S=(y-w)/2,x=l+S+p,P=i-S-p,{outerStart:L,outerEnd:M,innerStart:F,innerEnd:pt}=JU(t,g,h,P-x),Y=h-L,W=h-M,it=x+L/Y,J=P-M/W,_=g+F,A=g+pt,Q=x+F/_,et=P-pt/A;if(e.beginPath(),r){const mt=(it+J)/2;if(e.arc(o,a,h,it,mt),e.arc(o,a,h,mt,J),M>0){const T=Fc(W,J,o,a);e.arc(T.x,T.y,M,J,P+Zn)}const ht=Fc(A,P,o,a);if(e.lineTo(ht.x,ht.y),pt>0){const T=Fc(A,et,o,a);e.arc(T.x,T.y,pt,P+Zn,et+Math.PI)}const gt=(P-pt/g+(x+F/g))/2;if(e.arc(o,a,g,P-pt/g,gt,!0),e.arc(o,a,g,gt,x+F/g,!0),F>0){const T=Fc(_,Q,o,a);e.arc(T.x,T.y,F,Q+Math.PI,x-Zn)}const tt=Fc(Y,x,o,a);if(e.lineTo(tt.x,tt.y),L>0){const T=Fc(Y,it,o,a);e.arc(T.x,T.y,L,x-Zn,it)}}else{e.moveTo(o,a);const mt=Math.cos(it)*h+o,ht=Math.sin(it)*h+a;e.lineTo(mt,ht);const gt=Math.cos(J)*h+o,tt=Math.sin(J)*h+a;e.lineTo(gt,tt)}e.closePath()}function ZU(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){gm(e,t,n,s,l,i);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%En||En))}return gm(e,t,n,s,l,i),e.fill(),l}function tq(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:g}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=g,p?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let y=t.endAngle;if(r){gm(e,t,n,s,y,i);for(let w=0;w<r;++w)e.stroke();isNaN(a)||(y=o+(a%En||En))}p&&XU(e,t,y),r||(gm(e,t,n,s,y,i),e.stroke())}class Ml extends Ko{constructor(n){super();Qt(this,"circumference");Qt(this,"endAngle");Qt(this,"fullCircles");Qt(this,"innerRadius");Qt(this,"outerRadius");Qt(this,"pixelMargin");Qt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=uP(r,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,y=Ve(g,c-l),w=Gh(o,l,c)&&l!==c,S=y>=En||w,x=Ro(a,u+p,h+p);return S&&x}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(r+o)/2,g=(a+l+u+c)/2;return{x:s+Math.cos(h)*g,y:i+Math.sin(h)*g}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>En?Math.floor(i/En):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(In,i||0)),u=r*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,ZU(n,this,u,o,a),tq(n,this,u,o,a),n.restore()}}Qt(Ml,"id","arc"),Qt(Ml,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Qt(Ml,"defaultRoutes",{backgroundColor:"backgroundColor"}),Qt(Ml,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function qP(e,t,n=t){e.lineCap=Ve(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Ve(n.borderDash,t.borderDash)),e.lineDashOffset=Ve(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Ve(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Ve(n.borderWidth,t.borderWidth),e.strokeStyle=Ve(n.borderColor,t.borderColor)}function eq(e,t,n){e.lineTo(n.x,n.y)}function nq(e){return e.stepped?kV:e.tension||e.cubicInterpolationMode==="monotone"?AV:eq}function HP(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!u?s+c-l:c-l}}function sq(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=HP(i,n,s),u=nq(r);let{move:h=!0,reverse:g}=s||{},p,y,w;for(p=0;p<=c;++p)y=i[(a+(g?c-p:p))%o],!y.skip&&(h?(e.moveTo(y.x,y.y),h=!1):u(e,w,y,g,r.stepped),w=y);return l&&(y=i[(a+(g?c:0))%o],u(e,w,y,g,r.stepped)),!!l}function iq(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=HP(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,g,p,y,w,S,x;const P=M=>(o+(c?a-M:M))%r,L=()=>{w!==S&&(e.lineTo(u,S),e.lineTo(u,w),e.lineTo(u,x))};for(l&&(p=i[P(0)],e.moveTo(p.x,p.y)),g=0;g<=a;++g){if(p=i[P(g)],p.skip)continue;const M=p.x,F=p.y,pt=M|0;pt===y?(F<w?w=F:F>S&&(S=F),u=(h*u+M)/++h):(L(),e.lineTo(M,F),y=pt,h=0,w=S=F),x=F}L()}function Gv(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?iq:sq}function rq(e){return e.stepped?iz:e.tension||e.cubicInterpolationMode==="monotone"?rz:_l}function oq(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),qP(e,t.options),e.stroke(i)}function aq(e,t,n,s){const{segments:i,options:r}=t,o=Gv(t);for(const a of i)qP(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const lq=typeof Path2D=="function";function cq(e,t,n,s){lq&&!t.options.segment?oq(e,t,n,s):aq(e,t,n,s)}class Yr extends Ko{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;XV(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dz(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=TP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=rq(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:g}=o[c],p=r[h],y=r[g];if(p===y){a.push(p);continue}const w=Math.abs((i-p[n])/(y[n]-p[n])),S=l(p,y,w,s.stepped);S[n]=t[n],a.push(S)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Gv(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=Gv(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),cq(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Qt(Yr,"id","line"),Qt(Yr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Qt(Yr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Qt(Yr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function O_(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class du extends Ko{constructor(n){super();Qt(this,"parsed");Qt(this,"skip");Qt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return O_(this,n,"x",s)}inYRange(n,s){return O_(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!Bo(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Uv(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Qt(du,"id","point"),Qt(du,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Qt(du,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function WP(e,t){const{x:n,y:s,base:i,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=s-h,u=s+h):(h=r/2,a=n-h,l=n+h,c=Math.min(s,i),u=Math.max(s,i)),{left:a,top:c,right:l,bottom:u}}function Ta(e,t,n,s){return e?0:Ss(t,n,s)}function uq(e,t,n){const s=e.options.borderWidth,i=e.borderSkipped,r=bP(s);return{t:Ta(i.top,r.top,0,n),r:Ta(i.right,r.right,0,t),b:Ta(i.bottom,r.bottom,0,n),l:Ta(i.left,r.left,0,t)}}function dq(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,r=jl(i),o=Math.min(t,n),a=e.borderSkipped,l=s||Xe(i);return{topLeft:Ta(!l||a.top||a.left,r.topLeft,0,o),topRight:Ta(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Ta(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ta(!l||a.bottom||a.right,r.bottomRight,0,o)}}function hq(e){const t=WP(e),n=t.right-t.left,s=t.bottom-t.top,i=uq(e,n/2,s/2),r=dq(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function C2(e,t,n,s){const i=t===null,r=n===null,a=e&&!(i&&r)&&WP(e,s);return a&&(i||Ro(t,a.left,a.right))&&(r||Ro(n,a.top,a.bottom))}function fq(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function pq(e,t){e.rect(t.x,t.y,t.w,t.h)}function k2(e,t,n={}){const s=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+s,y:e.y+i,w:e.w+r,h:e.h+o,radius:e.radius}}class hu extends Ko{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=hq(this),a=fq(o.radius)?Kh:pq;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,k2(o,n,r)),t.clip(),a(t,k2(r,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,k2(r,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,s){return C2(this,t,n,s)}inXRange(t,n){return C2(this,t,null,n)}inYRange(t,n){return C2(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+i)/2:n,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Qt(hu,"id","bar"),Qt(hu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Qt(hu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var gq=Object.freeze({__proto__:null,ArcElement:Ml,BarElement:hu,LineElement:Yr,PointElement:du});const Kv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],R_=Kv.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function GP(e){return Kv[e%Kv.length]}function KP(e){return R_[e%R_.length]}function mq(e,t){return e.borderColor=GP(t),e.backgroundColor=KP(t),++t}function vq(e,t){return e.backgroundColor=e.data.map(()=>GP(t++)),t}function yq(e,t){return e.backgroundColor=e.data.map(()=>KP(t++)),t}function bq(e){let t=0;return(n,s)=>{const i=e.getDatasetMeta(s).controller;i instanceof Ia?t=vq(n,t):i instanceof hh?t=yq(n,t):i&&(t=mq(n,t))}}function F_(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function wq(e){return e&&(e.borderColor||e.backgroundColor)}function xq(){return Ln.borderColor!=="rgba(0,0,0,0.1)"||Ln.backgroundColor!=="rgba(0,0,0,0.1)"}var _q={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=e.config,{elements:r}=i,o=F_(s)||wq(i)||r&&F_(r)||xq();if(!n.forceOverride&&o)return;const a=bq(e);s.forEach(a)}};function Sq(e,t,n,s,i){const r=i.samples||s;if(r>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(r-2);let l=0;const c=t+n-1;let u=t,h,g,p,y,w;for(o[l++]=e[u],h=0;h<r-2;h++){let S=0,x=0,P;const L=Math.floor((h+1)*a)+1+t,M=Math.min(Math.floor((h+2)*a)+1,n)+t,F=M-L;for(P=L;P<M;P++)S+=e[P].x,x+=e[P].y;S/=F,x/=F;const pt=Math.floor(h*a)+1+t,Y=Math.min(Math.floor((h+1)*a)+1,n)+t,{x:W,y:it}=e[u];for(p=y=-1,P=pt;P<Y;P++)y=.5*Math.abs((W-S)*(e[P].y-it)-(W-e[P].x)*(x-it)),y>p&&(p=y,g=e[P],w=P);o[l++]=g,u=w}return o[l++]=e[c],o}function Cq(e,t,n,s){let i=0,r=0,o,a,l,c,u,h,g,p,y,w;const S=[],x=t+n-1,P=e[t].x,M=e[x].x-P;for(o=t;o<t+n;++o){a=e[o],l=(a.x-P)/M*s,c=a.y;const F=l|0;if(F===u)c<y?(y=c,h=o):c>w&&(w=c,g=o),i=(r*i+a.x)/++r;else{const pt=o-1;if(!He(h)&&!He(g)){const Y=Math.min(h,g),W=Math.max(h,g);Y!==p&&Y!==pt&&S.push({...e[Y],x:i}),W!==p&&W!==pt&&S.push({...e[W],x:i})}o>0&&pt!==p&&S.push(e[pt]),S.push(a),u=F,r=0,y=w=c,h=g=p=o}}return S}function YP(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function B_(e){e.data.datasets.forEach(t=>{YP(t)})}function kq(e,t){const n=t.length;let s=0,i;const{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=Ss(Fo(t,r.axis,o).lo,0,n-1)),c?i=Ss(Fo(t,r.axis,a).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var Aq={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){B_(e);return}const s=e.width;e.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=e.getDatasetMeta(r),c=o||i.data;if(Ud([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:g}=kq(l,c);const p=n.threshold||4*s;if(g<=p){YP(i);return}He(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let y;switch(n.algorithm){case"lttb":y=Sq(c,h,g,s,n);break;case"min-max":y=Cq(c,h,g,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=y})},destroy(e){B_(e)}};function Pq(e,t,n){const s=e.segments,i=e.points,r=t.points,o=[];for(const a of s){let{start:l,end:c}=a;c=v5(l,c,i);const u=Yv(n,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=TP(t,u);for(const g of h){const p=Yv(n,r[g.start],r[g.end],g.loop),y=IP(a,i,p);for(const w of y)o.push({source:w,target:g,start:{[n]:j_(u,p,"start",Math.max)},end:{[n]:j_(u,p,"end",Math.min)}})}}return o}function Yv(e,t,n,s){if(s)return;let i=t[e],r=n[e];return e==="angle"&&(i=Mi(i),r=Mi(r)),{property:e,start:i,end:r}}function Eq(e,t){const{x:n=null,y:s=null}=e||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=v5(o,a,i);const l=i[o],c=i[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function v5(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function j_(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function XP(e,t){let n=[],s=!1;return Dn(e)?(s=!0,n=e):n=Eq(e,t),n.length?new Yr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function $_(e){return e&&e.fill!==!1}function Iq(e,t,n){let i=e[t].fill;const r=[t];let o;if(!n)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!zn(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function Tq(e,t,n){const s=Mq(e);if(Xe(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return zn(i)&&Math.floor(i)===i?Nq(s[0],t,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Nq(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function Dq(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Xe(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Lq(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:Xe(e)?s=e.value:s=t.getBaseValue(),s}function Mq(e){const t=e.options,n=t.fill;let s=Ve(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Oq(e){const{scale:t,index:n,line:s}=e,i=[],r=s.segments,o=s.points,a=Rq(t,n);a.push(XP({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)Fq(i,o[u],a)}return new Yr({points:i,options:{}})}function Rq(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function Fq(e,t,n){const s=[];for(let i=0;i<n.length;i++){const r=n[i],{first:o,last:a,point:l}=Bq(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function Bq(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const i=s[n],r=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][n],g=o[u.end][n];if(Ro(i,h,g)){a=i===h,l=i===g;break}}return{first:a,last:l,point:s}}class QP{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:i,y:r,radius:o}=this;return n=n||{start:0,end:En},t.arc(i,r,o,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:i}=this,r=t.angle;return{x:n+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function jq(e){const{chart:t,fill:n,line:s}=e;if(zn(n))return $q(t,n);if(n==="stack")return Oq(e);if(n==="shape")return!0;const i=Vq(e);return i instanceof QP?i:XP(i,s)}function $q(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Vq(e){return(e.scale||{}).getPointPositionForValue?Uq(e):zq(e)}function zq(e){const{scale:t={},fill:n}=e,s=Dq(n,t);if(zn(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function Uq(e){const{scale:t,fill:n}=e,s=t.options,i=t.getLabels().length,r=s.reverse?t.max:t.min,o=Lq(n,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new QP({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function A2(e,t,n){const s=jq(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,h=c.backgroundColor,{above:g=h,below:p=h}=u||{},y=i.getDatasetMeta(r),w=NP(i,y);s&&o.points.length&&(N0(e,n),qq(e,{line:o,target:s,above:g,below:p,area:n,scale:a,axis:l,clip:w}),D0(e))}function qq(e,t){const{line:n,target:s,above:i,below:r,area:o,scale:a,clip:l}=t,c=n._loop?"angle":t.axis;e.save(),c==="x"&&r!==i&&(V_(e,s,o.top),z_(e,{line:n,target:s,color:i,scale:a,property:c,clip:l}),e.restore(),e.save(),V_(e,s,o.bottom)),z_(e,{line:n,target:s,color:r,scale:a,property:c,clip:l}),e.restore()}function V_(e,t,n){const{segments:s,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of s){const{start:l,end:c}=a,u=i[l],h=i[v5(l,c,i)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function z_(e,t){const{line:n,target:s,property:i,color:r,scale:o,clip:a}=t,l=Pq(n,s,i);for(const{source:c,target:u,start:h,end:g}of l){const{style:{backgroundColor:p=r}={}}=c,y=s!==!0;e.save(),e.fillStyle=p,Hq(e,o,a,y&&Yv(i,h,g)),e.beginPath();const w=!!n.pathSegment(e,c);let S;if(y){w?e.closePath():U_(e,s,g,i);const x=!!s.pathSegment(e,u,{move:w,reverse:!0});S=w&&x,S||U_(e,s,h,i)}e.closePath(),e.fill(S?"evenodd":"nonzero"),e.restore()}}function Hq(e,t,n,s){const i=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let l,c,u,h;r==="x"?(l=o,c=i.top,u=a,h=i.bottom):(l=i.left,c=o,u=i.right,h=a),e.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),e.rect(l,c,u-l,h-c),e.clip()}}function U_(e,t,n,s){const i=t.interpolate(n,s);i&&e.lineTo(i.x,i.y)}var y5={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<s;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Yr&&(l={visible:e.isDatasetVisible(o),index:o,fill:Tq(a,o,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<s;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Iq(i,o,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&A2(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;$_(r)&&A2(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!$_(s)||n.drawTime!=="beforeDatasetDraw"||A2(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const q_=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Wq=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class H_ extends Ko{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Sn(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=fs(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=q_(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=t;r.textAlign="left",r.textBaseline="middle";let g=-1,p=-u;return this.legendItems.forEach((y,w)=>{const S=s+n/2+r.measureText(y.text).width;(w===0||c[c.length-1]+S+2*a>o)&&(h+=u,c[c.length-(w>0?0:1)]=0,p+=u,g++),l[w]={left:0,top:p,row:g,width:S,height:i},c[c.length-1]+=S+a}),h}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,g=0,p=0,y=0,w=0;return this.legendItems.forEach((S,x)=>{const{itemWidth:P,itemHeight:L}=Gq(s,n,r,S,i);x>0&&p+L+2*a>u&&(h+=g+a,c.push({width:g,height:p}),y+=g+a,w++,g=p=0),l[x]={left:y,top:p,col:w,width:P,height:L},g=Math.max(g,P),p+=L+a}),h+=g,c.push({width:g,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=uu(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Vs(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Vs(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Vs(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Vs(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;N0(t,this),this._draw(),D0(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=Ln.color,l=uu(t.rtl,this.left,this.width),c=fs(o.font),{padding:u}=o,h=c.size,g=h/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:w,itemHeight:S}=q_(o,h),x=function(pt,Y,W){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;i.save();const it=Ve(W.lineWidth,1);if(i.fillStyle=Ve(W.fillStyle,a),i.lineCap=Ve(W.lineCap,"butt"),i.lineDashOffset=Ve(W.lineDashOffset,0),i.lineJoin=Ve(W.lineJoin,"miter"),i.lineWidth=it,i.strokeStyle=Ve(W.strokeStyle,a),i.setLineDash(Ve(W.lineDash,[])),o.usePointStyle){const J={radius:w*Math.SQRT2/2,pointStyle:W.pointStyle,rotation:W.rotation,borderWidth:it},_=l.xPlus(pt,y/2),A=Y+g;yP(i,J,_,A,o.pointStyleWidth&&y)}else{const J=Y+Math.max((h-w)/2,0),_=l.leftForLtr(pt,y),A=jl(W.borderRadius);i.beginPath(),Object.values(A).some(Q=>Q!==0)?Kh(i,{x:_,y:J,w:y,h:w,radius:A}):i.rect(_,J,y,w),i.fill(),it!==0&&i.stroke()}i.restore()},P=function(pt,Y,W){Jl(i,W.text,pt,Y+S/2,c,{strikethrough:W.hidden,textAlign:l.textAlign(W.textAlign)})},L=this.isHorizontal(),M=this._computeTitleHeight();L?p={x:Vs(r,this.left+u,this.right-s[0]),y:this.top+u+M,line:0}:p={x:this.left+u,y:Vs(r,this.top+M+u,this.bottom-n[0].height),line:0},AP(this.ctx,t.textDirection);const F=S+u;this.legendItems.forEach((pt,Y)=>{i.strokeStyle=pt.fontColor,i.fillStyle=pt.fontColor;const W=i.measureText(pt.text).width,it=l.textAlign(pt.textAlign||(pt.textAlign=o.textAlign)),J=y+g+W;let _=p.x,A=p.y;l.setWidth(this.width),L?Y>0&&_+J+u>this.right&&(A=p.y+=F,p.line++,_=p.x=Vs(r,this.left+u,this.right-s[p.line])):Y>0&&A+F>this.bottom&&(_=p.x=_+n[p.line].width+u,p.line++,A=p.y=Vs(r,this.top+M+u,this.bottom-n[p.line].height));const Q=l.x(_);if(x(Q,A,pt),_=pV(it,_+y+g,L?_+J:this.right,t.rtl),P(l.x(_),A,pt),L)p.x+=J+u;else if(typeof pt.text!="string"){const et=c.lineHeight;p.y+=JP(pt,et)+u}else p.y+=F}),PP(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=fs(n.font),i=ni(n.padding);if(!n.display)return;const r=uu(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,h=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),u=this.top+c,h=Vs(t.align,h,this.right-g);else{const y=this.columnSizes.reduce((w,S)=>Math.max(w,S.height),0);u=c+Vs(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const p=Vs(a,h,h+g);o.textAlign=r.textAlign(l5(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Jl(o,n.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,n=fs(t.font),s=ni(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(Ro(t,this.left,this.right)&&Ro(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Ro(t,i.left,i.left+i.width)&&Ro(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!Xq(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=Wq(i,s);i&&!r&&Sn(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Sn(n.onHover,[t,s,this],this)}else s&&Sn(n.onClick,[t,s,this],this)}}function Gq(e,t,n,s,i){const r=Kq(s,e,t,n),o=Yq(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Kq(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function Yq(e,t,n){let s=e;return typeof t.text!="string"&&(s=JP(t,n)),s}function JP(e,t){const n=e.text?e.text.length:0;return t*n}function Xq(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var b5={id:"legend",_element:H_,start(e,t,n){const s=e.legend=new H_({ctx:e.ctx,options:n,chart:e});Ys.configure(e,s,n),Ys.addBox(e,s)},stop(e){Ys.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Ys.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ni(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class w5 extends Ko{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Dn(s.text)?s.text.length:1;this._padding=ni(s.padding);const r=i*fs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Vs(a,s,r),h=n+t,c=r-s):(o.position==="left"?(u=s+t,h=Vs(a,i,n),l=In*-.5):(u=r-t,h=Vs(a,n,i),l=In*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=fs(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Jl(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:l5(n.align),textBaseline:"middle",translation:[o,a]})}}function Qq(e,t){const n=new w5({ctx:e.ctx,options:t,chart:e});Ys.configure(e,n,t),Ys.addBox(e,n),e.titleBlock=n}var x5={id:"title",_element:w5,start(e,t,n){Qq(e,n)},stop(e){const t=e.titleBlock;Ys.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Ys.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Kp=new WeakMap;var Jq={id:"subtitle",start(e,t,n){const s=new w5({ctx:e.ctx,options:n,chart:e});Ys.configure(e,s,n),Ys.addBox(e,s),Kp.set(e,s)},stop(e){Ys.removeBox(e,Kp.get(e)),Kp.delete(e)},beforeUpdate(e,t,n){const s=Kp.get(e);Ys.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Vv(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function $r(e,t){return t&&(Dn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Eo(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Zq(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function W_(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=fs(t.bodyFont),c=fs(t.titleFont),u=fs(t.footerFont),h=r.length,g=i.length,p=s.length,y=ni(t.padding);let w=y.height,S=0,x=s.reduce((M,F)=>M+F.before.length+F.lines.length+F.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,h&&(w+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),x){const M=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=p*M+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}g&&(w+=t.footerMarginTop+g*u.lineHeight+(g-1)*t.footerSpacing);let P=0;const L=function(M){S=Math.max(S,n.measureText(M).width+P)};return n.save(),n.font=c.string,hn(e.title,L),n.font=l.string,hn(e.beforeBody.concat(e.afterBody),L),P=t.displayColors?o+2+t.boxPadding:0,hn(s,M=>{hn(M.before,L),hn(M.lines,L),hn(M.after,L)}),P=0,n.font=u.string,hn(e.footer,L),n.restore(),S+=y.width,{width:S,height:w}}function tH(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function eH(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function nH(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),eH(c,e,t,n)&&(c="center"),c}function G_(e,t,n){const s=n.yAlign||t.yAlign||tH(e,n);return{xAlign:n.xAlign||t.xAlign||nH(e,t,n,s),yAlign:s}}function sH(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function iH(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function K_(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:h,bottomLeft:g,bottomRight:p}=jl(o);let y=sH(t,a);const w=iH(t,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,g)+i:a==="right"&&(y+=Math.max(h,p)+i),{x:Ss(y,0,s.width-t.width),y:Ss(w,0,s.height-t.height)}}function Yp(e,t,n){const s=ni(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function Y_(e){return $r([],Eo(e))}function rH(e,t,n){return el(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function X_(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ZP={beforeTitle:ko,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ko,beforeBody:ko,beforeLabel:ko,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return He(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ko,afterBody:ko,beforeFooter:ko,footer:ko,afterFooter:ko};function mi(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?ZP[t].call(n,s):i}class Xv extends Ko{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new DP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=rH(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=mi(s,"beforeTitle",this,t),r=mi(s,"title",this,t),o=mi(s,"afterTitle",this,t);let a=[];return a=$r(a,Eo(i)),a=$r(a,Eo(r)),a=$r(a,Eo(o)),a}getBeforeBody(t,n){return Y_(mi(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return hn(t,r=>{const o={before:[],lines:[],after:[]},a=X_(s,r);$r(o.before,Eo(mi(a,"beforeLabel",this,r))),$r(o.lines,mi(a,"label",this,r)),$r(o.after,Eo(mi(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return Y_(mi(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=mi(s,"beforeFooter",this,t),r=mi(s,"footer",this,t),o=mi(s,"afterFooter",this,t);let a=[];return a=$r(a,Eo(i)),a=$r(a,Eo(r)),a=$r(a,Eo(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Zq(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,g)=>t.filter(u,h,g,s))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,s))),hn(a,u=>{const h=X_(t.callbacks,u);i.push(mi(h,"labelColor",this,u)),r.push(mi(h,"labelPointStyle",this,u)),o.push(mi(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Hd[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=W_(this,s),c=Object.assign({},a,l),u=G_(this.chart,s,c),h=K_(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=jl(a),{x:g,y:p}=t,{width:y,height:w}=n;let S,x,P,L,M,F;return r==="center"?(M=p+w/2,i==="left"?(S=g,x=S-o,L=M+o,F=M-o):(S=g+y,x=S+o,L=M-o,F=M+o),P=S):(i==="left"?x=g+Math.max(l,u)+o:i==="right"?x=g+y-Math.max(c,h)-o:x=this.caretX,r==="top"?(L=p,M=L-o,S=x-o,P=x+o):(L=p+w,M=L+o,S=x+o,P=x-o),F=L),{x1:S,x2:x,x3:P,y1:L,y2:M,y3:F}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=uu(s.rtl,this.x,this.width);for(t.x=Yp(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=fs(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=fs(r.bodyFont),h=Yp(this,"left",r),g=i.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(r.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=i.leftForLtr(g,c)+c/2,x=y+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Uv(t,w,S,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Uv(t,w,S,x)}else{t.lineWidth=Xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const w=i.leftForLtr(g,c),S=i.leftForLtr(i.xPlus(g,1),c-2),x=jl(o.borderRadius);Object.values(x).some(P=>P!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Kh(t,{x:w,y,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Kh(t,{x:S,y:y+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,y,c,l),t.strokeRect(w,y,c,l),t.fillStyle=o.backgroundColor,t.fillRect(S,y+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=fs(s.bodyFont);let g=h.lineHeight,p=0;const y=uu(s.rtl,this.x,this.width),w=function(W){n.fillText(W,y.x(t.x+p),t.y+g/2),t.y+=g+r},S=y.textAlign(o);let x,P,L,M,F,pt,Y;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Yp(this,S,s),n.fillStyle=s.bodyColor,hn(this.beforeBody,w),p=a&&S!=="right"?o==="center"?c/2+u:c+2+u:0,M=0,pt=i.length;M<pt;++M){for(x=i[M],P=this.labelTextColors[M],n.fillStyle=P,hn(x.before,w),L=x.lines,a&&L.length&&(this._drawColorBox(n,t,M,y,s),g=Math.max(h.lineHeight,l)),F=0,Y=L.length;F<Y;++F)w(L[F]),g=h.lineHeight;hn(x.after,w)}p=0,g=h.lineHeight,hn(this.afterBody,w),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=uu(s.rtl,this.x,this.width);for(t.x=Yp(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=fs(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:h,topRight:g,bottomLeft:p,bottomRight:y}=jl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+c-g,l),n.quadraticCurveTo(a+c,l,a+c,l+g),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Hd[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=W_(this,t),l=Object.assign({},o,this._size),c=G_(n,t,l),u=K_(t,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ni(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),AP(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),PP(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!cm(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),l=n||!cm(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Hd[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}Qt(Xv,"positioners",Hd);var _5={id:"tooltip",_element:Xv,positioners:Hd,afterInit(e,t,n){n&&(e.tooltip=new Xv({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ZP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},oH=Object.freeze({__proto__:null,Colors:_q,Decimation:Aq,Filler:y5,Legend:b5,SubTitle:Jq,Title:x5,Tooltip:_5});const aH=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function lH(e,t,n,s){const i=e.indexOf(t);if(i===-1)return aH(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const cH=(e,t)=>e===null?null:Ss(Math.round(e),0,t);function Q_(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Xh extends rc{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(He(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:lH(s,t,Ve(n,t),this._addedLabels),cH(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return Q_.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Qt(Xh,"id","category"),Qt(Xh,"defaults",{ticks:{callback:Q_}});function uH(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:g}=e,p=r||1,y=u-1,{min:w,max:S}=t,x=!He(o),P=!He(a),L=!He(c),M=(S-w)/(h+1);let F=W4((S-w)/y/p)*p,pt,Y,W,it;if(F<1e-14&&!x&&!P)return[{value:w},{value:S}];it=Math.ceil(S/F)-Math.floor(w/F),it>y&&(F=W4(it*F/y/p)*p),He(l)||(pt=Math.pow(10,l),F=Math.ceil(F*pt)/pt),i==="ticks"?(Y=Math.floor(w/F)*F,W=Math.ceil(S/F)*F):(Y=w,W=S),x&&P&&r&&aV((a-o)/r,F/1e3)?(it=Math.round(Math.min((a-o)/F,u)),F=(a-o)/it,Y=o,W=a):L?(Y=x?o:Y,W=P?a:W,it=c-1,F=(W-Y)/it):(it=(W-Y)/F,ah(it,Math.round(it),F/1e3)?it=Math.round(it):it=Math.ceil(it));const J=Math.max(G4(F),G4(Y));pt=Math.pow(10,He(l)?J:l),Y=Math.round(Y*pt)/pt,W=Math.round(W*pt)/pt;let _=0;for(x&&(g&&Y!==o?(n.push({value:o}),Y<o&&_++,ah(Math.round((Y+_*F)*pt)/pt,o,J_(o,M,e))&&_++):Y<o&&_++);_<it;++_){const A=Math.round((Y+_*F)*pt)/pt;if(P&&A>a)break;n.push({value:A})}return P&&g&&W!==a?n.length&&ah(n[n.length-1].value,a,J_(a,M,e))?n[n.length-1].value=a:n.push({value:a}):(!P||W===a)&&n.push({value:W}),n}function J_(e,t,{horizontal:n,minRotation:s}){const i=vr(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class mm extends rc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return He(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(t){const l=no(i),c=no(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=uH(i,r);return t.bounds==="ticks"&&cP(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Nf(t,this.chart.options.locale,this.options.ticks.format)}}class Qh extends mm{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=zn(t)?t:0,this.max=zn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=vr(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Qt(Qh,"id","linear"),Qt(Qh,"defaults",{ticks:{callback:T0.formatters.numeric}});const Jh=e=>Math.floor(Ea(e)),yl=(e,t)=>Math.pow(10,Jh(e)+t);function Z_(e){return e/Math.pow(10,Jh(e))===1}function t3(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function dH(e,t){const n=t-e;let s=Jh(n);for(;t3(e,t,s)>10;)s++;for(;t3(e,t,s)<10;)s--;return Math.min(s,Jh(e))}function hH(e,{min:t,max:n}){t=Ni(e.min,t);const s=[],i=Jh(t);let r=dH(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),g=Ni(e.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;g<n;)s.push({value:g,major:Z_(g),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),g=Math.round((l+u+h*Math.pow(10,r))*o)/o;const p=Ni(e.max,g);return s.push({value:p,major:Z_(p),significand:h}),s}class Qv extends rc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=mm.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return zn(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=zn(t)?Math.max(0,t):null,this.max=zn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zn(this._userMin)&&(this.min=t===yl(this.min,0)?yl(this.min,-1):yl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(yl(s,-1)),o(yl(i,1)))),s<=0&&r(yl(i,-1)),i<=0&&o(yl(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=hH(n,this);return t.bounds==="ticks"&&cP(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Nf(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ea(t),this._valueRange=Ea(this.max)-Ea(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ea(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}Qt(Qv,"id","logarithmic"),Qt(Qv,"defaults",{ticks:{callback:T0.formatters.logarithmic,major:{enabled:!0}}});function Jv(e){const t=e.ticks;if(t.display&&e.display){const n=ni(t.backdropPadding);return Ve(t.font&&t.font.size,Ln.font.size)+n.height}return 0}function fH(e,t,n){return n=Dn(n)?n:[n],{w:CV(e,t.string,n),h:n.length*t.lineHeight}}function e3(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function pH(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?In/r:0;for(let l=0;l<r;l++){const c=o.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),h=fs(c.font),g=fH(e.ctx,h,e._pointLabels[l]);s[l]=g;const p=Mi(e.getIndexAngle(l)+a),y=Math.round(o5(p)),w=e3(y,u.x,g.w,0,180),S=e3(y,u.y,g.h,90,270);gH(n,t,p,w,S)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=yH(e,s,i)}function gH(e,t,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function mH(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,l=e.getPointPosition(t,s+i+o,r),c=Math.round(o5(Mi(l.angle+Zn))),u=xH(l.y,a.h,c),h=bH(c),g=wH(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:g,top:u,right:g+a.w,bottom:u+a.h}}function vH(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:r}=e;return!(Bo({x:n,y:s},t)||Bo({x:n,y:r},t)||Bo({x:i,y:s},t)||Bo({x:i,y:r},t))}function yH(e,t,n){const s=[],i=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Jv(r)/2,additionalAngle:o?In/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const h=mH(e,u,l);s.push(h),a==="auto"&&(h.visible=vH(h,c),h.visible&&(c=h))}return s}function bH(e){return e===0||e===180?"center":e<180?"left":"right"}function wH(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function xH(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function _H(e,t,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=t;if(!He(a)){const l=jl(t.borderRadius),c=ni(t.backdropPadding);e.fillStyle=a;const u=s-c.left,h=i-c.top,g=r-s+c.width,p=o-i+c.height;Object.values(l).some(y=>y!==0)?(e.beginPath(),Kh(e,{x:u,y:h,w:g,h:p,radius:l}),e.fill()):e.fillRect(u,h,g,p)}}function SH(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const r=e._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(i));_H(n,o,r);const a=fs(o.font),{x:l,y:c,textAlign:u}=r;Jl(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function tE(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,En);else{let r=e.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function CH(e,t,n,s,i){const r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),tE(e,n,o,s),r.closePath(),r.stroke(),r.restore())}function kH(e,t,n){return el(e,{label:n,index:t,type:"pointLabel"})}class Wd extends mm{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ni(Jv(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=zn(t)&&!isNaN(t)?t:0,this.max=zn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jv(this.options))}generateTickLabels(t){mm.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=Sn(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?pH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=En/(this._pointLabels.length||1),s=this.options.startAngle||0;return Mi(t*n+vr(s))}getDistanceFromCenterForValue(t){if(He(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(He(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return kH(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-Zn+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),tE(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&SH(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const g=this.getContext(h),p=i.setContext(g),y=r.setContext(g);CH(this,p,l,o,y)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const u=s.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:g}=u;!g||!h||(t.lineWidth=g,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=s.setContext(this.getContext(l)),u=fs(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=ni(c.backdropPadding);t.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Jl(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}Qt(Wd,"id","radialLinear"),Qt(Wd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:T0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Qt(Wd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Qt(Wd,"descriptors",{angleLines:{_fallback:"grid"}});const O0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bi=Object.keys(O0);function n3(e,t){return e-t}function s3(e,t){if(He(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),zn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Du(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function i3(e,t,n,s){const i=bi.length;for(let r=bi.indexOf(e);r<i-1;++r){const o=O0[bi[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return bi[r]}return bi[i-1]}function AH(e,t,n,s,i){for(let r=bi.length-1;r>=bi.indexOf(n);r--){const o=bi[r];if(O0[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return bi[n?bi.indexOf(n):0]}function PH(e){for(let t=bi.indexOf(e)+1,n=bi.length;t<n;++t)if(O0[bi[t]].common)return bi[t]}function r3(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=a5(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function EH(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function o3(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:EH(e,s,i,n)}class Zh extends rc{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new Vz._date(t.adapters.date);i.init(n),oh(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:s3(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=zn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=zn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=dV(i,r,o);return this._unit=n.unit||(s.autoSkip?i3(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):AH(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:PH(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),o3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Ss(n,0,o),s=Ss(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||i3(r.minUnit,n,s,this._getLabelCapacity(n)),a=Ve(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Du(l)||l===!0,u={};let h=n,g,p;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(g=h,p=0;g<s;g=+t.add(g,a,o),p++)r3(u,g,y);return(g===s||i.bounds==="ticks"||p===1)&&r3(u,g,y),Object.keys(u).sort(n3).map(w=>+w)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Sn(o,[t,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],g=s[n],p=c&&h&&g&&g.major;return this._adapter.format(t,i||(p?h:u))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=vr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,o3(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(s3(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return hP(t.sort(n3))}}Qt(Zh,"id","time"),Qt(Zh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Xp(e,t,n){let s=0,i=e.length-1,r,o,a,l;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=Fo(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:l}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=Fo(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:l}=e[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class Zv extends Zh{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Xp(n,this.min),this._tableRange=Xp(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Xp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Xp(this._table,s*this._tableRange+this._minPos,!0)}}Qt(Zv,"id","timeseries"),Qt(Zv,"defaults",Zh.defaults);var IH=Object.freeze({__proto__:null,CategoryScale:Xh,LinearScale:Qh,LogarithmicScale:Qv,RadialLinearScale:Wd,TimeScale:Zh,TimeSeriesScale:Zv});const TH=[$z,gq,oH,IH];oc.register(...TH);const NH={name:"EnterpriseDashboard",data(){return{usuario:"Usuario Principal",ultimoAcceso:`Último acceso: ${new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`,currentDate:"",currentTime:"",timer:null,alertas:[],filtroPeriodo:"mes",vistaSeleccionada:"general",isLoading:!1,totalTiendas:0,crecimientoTiendas:0,serviciosPendientes:0,totalServiciosPeriodo:0,montoPendiente:0,crecimientoPorCobrar:0,ingresosTotales:0,crecimientoIngresos:0,gastosTotales:0,crecimientoGastos:0,cashFlowData:{diario:{labels:[],ingresos:[],gastos:[]},semanal:{labels:[],ingresos:[],gastos:[]},mensual:{labels:[],ingresos:[],gastos:[]}},vistaCashFlow:"mensual",cashFlowChartInstance:null,tiendasRecientes:[],cobrosProximos:[],margenGanancia:0}},computed:{nombrePeriodo(){return{hoy:"Hoy",semana:"Esta Semana",mes:"Este Mes",trimestre:"Este Trimestre",anual:"Este Año"}[this.filtroPeriodo]||"Período Desconocido"},nombrePeriodoVistaCashFlow(){const e={hoy:"Hoy",semana:"Esta Semana",mes:"Este Mes",trimestre:"Este Trimestre",anual:"Este Año"};if(this.vistaCashFlow==="diario")return"Últimos 30 días";if(this.vistaCashFlow==="semanal")return"Últimas 12 semanas";if(this.vistaCashFlow==="mensual"){if(["mes","semana","hoy"].includes(this.filtroPeriodo))return`Mes de ${e[this.filtroPeriodo]}`;if(this.filtroPeriodo==="trimestre")return"Trimestre Actual";if(this.filtroPeriodo==="anual")return`Año ${new Date().getFullYear()}`}return e[this.filtroPeriodo]},porcentajePendientes(){return this.totalServiciosPeriodo===0?0:(this.serviciosPendientes/this.totalServiciosPeriodo*100).toFixed(0)}},methods:{updateDateTime(){const e=new Date;this.currentDate=e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),this.currentTime=e.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},formatearDinero(e){return(Number(e)||0).toLocaleString("es-GT",{style:"currency",currency:"GTQ",minimumFractionDigits:2,maximumFractionDigits:2})},formatearFecha(e,t=!1){if(!e)return"N/A";let n;if(e instanceof he)n=e.toDate();else if(typeof e=="string"||e instanceof Date)n=new Date(e);else return console.warn("FormatearFecha: Tipo de fecha no reconocido",e),"Fecha Inválida";if(isNaN(n.getTime()))return console.warn("FormatearFecha: Fecha inválida después de la conversión",e),"Fecha Inválida";const s={year:"numeric",month:"short",day:"numeric"};return t&&(s.hour="2-digit",s.minute="2-digit"),n.toLocaleDateString("es-ES",s)},getDateRangeForFilter(e,t=!1){let n,s;const i=new Date;let r=i.getFullYear(),o=i.getMonth(),a=i.getDate();if(t)switch(e){case"hoy":{const l=new Date(i);l.setDate(i.getDate()-1),r=l.getFullYear(),o=l.getMonth(),a=l.getDate();break}case"semana":{const l=new Date(i);l.setDate(i.getDate()-i.getDay()+(i.getDay()===0?-6:1)-7),r=l.getFullYear(),o=l.getMonth(),a=l.getDate();break}case"mes":o-=1,o<0&&(o=11,r-=1);break;case"trimestre":o-=3,o<0&&(o+=12,r-=1);break;case"anual":r-=1;break}switch(e){case"hoy":n=new Date(r,o,a,0,0,0,0),s=new Date(r,o,a,23,59,59,999);break;case"semana":{const l=new Date(r,o,a),c=l.getDate()-l.getDay()+(l.getDay()===0?-6:1);n=new Date(l.getFullYear(),l.getMonth(),c,0,0,0,0),s=new Date(l.getFullYear(),l.getMonth(),c+6,23,59,59,999);break}case"mes":n=new Date(r,o,1,0,0,0,0),s=new Date(r,o+1,0,23,59,59,999);break;case"trimestre":{const l=Math.floor(o/3)*3;n=new Date(r,l,1,0,0,0,0),s=new Date(r,l+3,0,23,59,59,999);break}case"anual":n=new Date(r,0,1,0,0,0,0),s=new Date(r,11,31,23,59,59,999);break;default:n=new Date(r,o,1,0,0,0,0),s=new Date(r,o+1,0,23,59,59,999)}return{fechaInicio:n,fechaFin:s}},calcularCrecimiento(e,t,n=!1){if(t==null)return 0;if(t===0)return e>0?1e3:0;let s=(e-t)/Math.abs(t)*100;return parseFloat(s.toFixed(1))},async actualizarDatos(){this.isLoading=!0,console.log(`Dashboard: Iniciando actualización de datos para período: ${this.filtroPeriodo}`);const{fechaInicio:e,fechaFin:t}=this.getDateRangeForFilter(this.filtroPeriodo),{fechaInicio:n,fechaFin:s}=this.getDateRangeForFilter(this.filtroPeriodo,!0);console.log(`Dashboard: Período actual -> Inicio: ${e.toISOString()}, Fin: ${t.toISOString()}`),console.log(`Dashboard: Período anterior -> Inicio: ${n.toISOString()}, Fin: ${s.toISOString()}`);try{const i=Kn(qe,"tiendas"),r=await xs(i);this.totalTiendas=r.size,console.log("Dashboard: Total tiendas (global):",this.totalTiendas);const o=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`,a=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;let l=Gs(i,Li("mesServicio",">=",o),Li("mesServicio","<=",a));const u=(await xs(l)).docs.map(R=>({id:R.id,...R.data()}));this.totalServiciosPeriodo=u.length,console.log("Dashboard: Tiendas en período actual ("+o+" a "+a+"):",this.totalServiciosPeriodo,u);const h=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,g=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;let p=Gs(i,Li("mesServicio",">=",h),Li("mesServicio","<=",g));const w=(await xs(p)).docs.map(R=>({id:R.id,...R.data()}));this.crecimientoTiendas=this.calcularCrecimiento(this.totalServiciosPeriodo,w.length),console.log("Dashboard: Tiendas período anterior ("+h+" a "+g+"):",w.length);const S=["Pendiente","En proceso de ODS","En COVA"];this.serviciosPendientes=u.filter(R=>S.includes(R.estadoProceso)).length,console.log("Dashboard: Servicios pendientes (período actual):",this.serviciosPendientes);const x=u.filter(R=>R.estadoProceso==="Pagado").reduce((R,Z)=>R+(Number(Z.costo)||0),0);this.ingresosTotales=x;const P=w.filter(R=>R.estadoProceso==="Pagado").reduce((R,Z)=>R+(Number(Z.costo)||0),0);this.crecimientoIngresos=this.calcularCrecimiento(x,P),console.log("Dashboard: Ingresos período actual:",this.ingresosTotales,"| Anterior:",P);const L=Kn(qe,"gastos"),M=he.fromDate(e),F=he.fromDate(t),pt=Gs(L,Li("fecha",">=",M),Li("fecha","<=",F)),W=(await xs(pt)).docs.map(R=>({id:R.id,...R.data()})),it=W.reduce((R,Z)=>R+(Number(Z.monto)||0),0);this.gastosTotales=it,console.log("Dashboard: Gastos período actual:",this.gastosTotales,W);const J=he.fromDate(n),_=he.fromDate(s),A=Gs(L,Li("fecha",">=",J),Li("fecha","<=",_)),mt=(await xs(A)).docs.map(R=>({id:R.id,...R.data()})).reduce((R,Z)=>R+(Number(Z.monto)||0),0);this.crecimientoGastos=this.calcularCrecimiento(it,mt,!0),console.log("Dashboard: Gastos período anterior:",mt);const ht=u.filter(R=>R.estadoProceso==="Facturado").reduce((R,Z)=>R+(Number(Z.costo)||0),0);this.montoPendiente=ht;const gt=w.filter(R=>R.estadoProceso==="Facturado").reduce((R,Z)=>R+(Number(Z.costo)||0),0);this.crecimientoPorCobrar=this.calcularCrecimiento(ht,gt),console.log("Dashboard: Monto por cobrar (Facturado) período actual:",this.montoPendiente,"| Anterior:",gt),this.ingresosTotales>0?this.margenGanancia=(this.ingresosTotales-this.gastosTotales)/this.ingresosTotales*100:this.gastosTotales>0&&this.ingresosTotales===0?this.margenGanancia=-100:this.margenGanancia=0,console.log("Dashboard: Margen de ganancia calculado:",this.margenGanancia);const tt=Gs(i,Ra("fechaCreacion","desc"),NB(5)),T=await xs(tt);this.tiendasRecientes=T.docs.map(R=>({id:R.id,...R.data()})),console.log("Dashboard: Tiendas recientes (global top 5):",this.tiendasRecientes);const rt=[],I=(await xs(Gs(i,Li("estadoProceso","==","Facturado")))).docs.map(R=>({id:R.id,...R.data()}));console.log("Dashboard: Tiendas Facturadas Global para Cobros Próximos:",I);for(const R of I)if(R.tipoPago==="Crédito"&&Number(R.diasCredito)>0&&R.mesServicio){const[Z,q]=R.mesServicio.split("-").map(Number),st=new Date(Z,q,0);if(isNaN(st.getTime())){console.warn(`Cobros Próximos: Fecha inválida para fin de mes de servicio ${R.mesServicio} en tienda ${R.id}`);continue}let ct=new Date(st);ct.setDate(st.getDate()+(Number(R.diasCredito)||0));const At=new Date;At.setHours(0,0,0,0);let Dt="Próximo";ct<At&&(Dt="Vencido"),rt.push({id:R.id+"_cobro",tiendaId:R.id,cliente:R.nombre,monto:Number(R.costo)||0,fechaVencimiento:ct,estadoCobro:Dt})}const O=new Date,E=new Date;E.setDate(O.getDate()+30),this.cobrosProximos=rt.filter(R=>R.estadoCobro==="Vencido"||R.fechaVencimiento>=O&&R.fechaVencimiento<=E).sort((R,Z)=>R.fechaVencimiento-Z.fechaVencimiento).slice(0,10),console.log("Dashboard: Cobros próximos/vencidos procesados:",this.cobrosProximos),await this.prepararDatosCashFlow(u,W,e,t),this.initOrUpdateCashFlowChart()}catch(i){console.error("Dashboard: Error al cargar datos del dashboard:",i)}finally{this.isLoading=!1,console.log("Dashboard: Actualización de datos finalizada.")}},async prepararDatosCashFlow(e,t,n,s){console.log("CashFlow: Iniciando preparación de datos. Vista:",this.vistaCashFlow,"Período Filtro:",this.filtroPeriodo),console.log("CashFlow: Tiendas del período para ingresos:",e),console.log("CashFlow: Gastos del período:",t),this.cashFlowData={diario:{labels:[],ingresos:[],gastos:[]},semanal:{labels:[],ingresos:[],gastos:[]},mensual:{labels:[],ingresos:[],gastos:[]}};const i=this.vistaCashFlow,r=e.filter(a=>a.estadoProceso==="Pagado"&&a.costo>0&&a.mesServicio).map(a=>{const[l,c]=a.mesServicio.split("-").map(Number);return isNaN(l)||isNaN(c)?(console.warn(`CashFlow: mesServicio inválido '${a.mesServicio}' para tienda ${a.id}`),null):{fecha:new Date(l,c-1,15),monto:Number(a.costo)}}).filter(a=>a!==null&&!isNaN(a.fecha.getTime()));console.log("CashFlow: Ingresos procesados (Pagados, con fecha al día 15):",r);const o=t.map(a=>{let l;if(a.fecha instanceof he)l=a.fecha.toDate();else if(typeof a.fecha=="string")a.fecha.length===10&&a.fecha.match(/^\d{4}-\d{2}-\d{2}$/)?l=new Date(a.fecha+"T00:00:00Z"):l=new Date(a.fecha);else if(a.fecha instanceof Date)l=a.fecha;else return console.warn(`CashFlow: Fecha de gasto en formato inesperado: ${a.fecha} (tipo: ${typeof a.fecha}) para gasto ID: ${a.id}`),null;return isNaN(l.getTime())?(console.error(`CashFlow: Fecha de gasto inválida después de conversión: ${a.fecha} para gasto ID: ${a.id}`),null):{fecha:l,monto:Number(a.monto)||0}}).filter(a=>a!==null);if(console.log("CashFlow: Gastos procesados (con fecha convertida):",o),i==="diario"){let a=new Date(s);a.setDate(s.getDate()-29),a<n&&(a=new Date(n));for(let l=0;;l++){const c=new Date(a);if(c.setDate(a.getDate()+l),c>s)break;this.cashFlowData.diario.labels.push(c.toLocaleDateString("es-ES",{day:"2-digit",month:"short"}));const u=r.filter(g=>g.fecha.toDateString()===c.toDateString()).reduce((g,p)=>g+p.monto,0);this.cashFlowData.diario.ingresos.push(u);const h=o.filter(g=>g.fecha.toDateString()===c.toDateString()).reduce((g,p)=>g+p.monto,0);if(this.cashFlowData.diario.gastos.push(h),this.cashFlowData.diario.labels.length>=30)break}console.log("CashFlow (Diario):",JSON.parse(JSON.stringify(this.cashFlowData.diario)))}else if(i==="semanal"){let a=new Date(s);for(let l=0;l<12;l++){let c=new Date(a);c.setDate(a.getDate()-l*7);let u=new Date(c);u.setDate(c.getDate()-c.getDay()+(c.getDay()===0?-6:1)),u.setHours(0,0,0,0);let h=new Date(u);if(h.setDate(u.getDate()+6),h.setHours(23,59,59,999),h<n)break;u<n&&(u=new Date(n)),this.cashFlowData.semanal.labels.unshift(`${u.toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}`);const g=r.filter(y=>y.fecha>=u&&y.fecha<=h).reduce((y,w)=>y+w.monto,0);this.cashFlowData.semanal.ingresos.unshift(g);const p=o.filter(y=>y.fecha>=u&&y.fecha<=h).reduce((y,w)=>y+w.monto,0);if(this.cashFlowData.semanal.gastos.unshift(p),u<=n&&l>0)break}console.log("CashFlow (Semanal):",JSON.parse(JSON.stringify(this.cashFlowData.semanal)))}else if(i==="mensual"){let a=new Date(n);for(;a<=s;){const l=a.getFullYear(),c=a.getMonth(),u=new Date(l,c,1);this.cashFlowData.mensual.labels.push(u.toLocaleDateString("es-ES",{month:"short",year:"2-digit"}));const h=r.filter(p=>p.fecha.getFullYear()===l&&p.fecha.getMonth()===c).reduce((p,y)=>p+y.monto,0);this.cashFlowData.mensual.ingresos.push(h);const g=o.filter(p=>p.fecha.getFullYear()===l&&p.fecha.getMonth()===c).reduce((p,y)=>p+y.monto,0);this.cashFlowData.mensual.gastos.push(g),c===11?a=new Date(l+1,0,1):a=new Date(l,c+1,1)}console.log("CashFlow (Mensual):",JSON.parse(JSON.stringify(this.cashFlowData.mensual)))}},initOrUpdateCashFlowChart(){if(this.cashFlowChartInstance&&(this.cashFlowChartInstance.destroy(),this.cashFlowChartInstance=null),!this.$refs.cashFlowChart){console.warn("CashFlow Chart: Canvas element no encontrado.");return}const e=this.$refs.cashFlowChart.getContext("2d"),t=this.cashFlowData[this.vistaCashFlow];if(!t||!t.labels||t.labels.length===0){console.warn("CashFlow Chart: No hay datos para la vista:",this.vistaCashFlow,"Config:",t),e.clearRect(0,0,this.$refs.cashFlowChart.width,this.$refs.cashFlowChart.height),e.textAlign="center",e.fillStyle="#9CA3AF",e.font="16px Inter",e.fillText("No hay datos disponibles para esta vista y período.",this.$refs.cashFlowChart.width/2,this.$refs.cashFlowChart.height/2);return}console.log("CashFlow Chart: Renderizando con datos para vista",this.vistaCashFlow,":",t),this.cashFlowChartInstance=new oc(e,{type:"bar",data:{labels:t.labels,datasets:[{label:"Ingresos",data:t.ingresos,backgroundColor:"rgba(52, 211, 153, 0.7)",borderColor:"#34D399",borderWidth:1,borderRadius:4},{label:"Gastos",data:t.gastos,backgroundColor:"rgba(248, 113, 113, 0.7)",borderColor:"#F87171",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{labels:{color:"#D1D5DB"}},tooltip:{backgroundColor:"rgba(31, 41, 55, 0.9)",titleColor:"#F3F4F6",bodyColor:"#F3F4F6",borderColor:"#4B5563",borderWidth:1,padding:10,callbacks:{label:n=>`${n.dataset.label}: ${this.formatearDinero(n.parsed.y)}`}}},scales:{x:{ticks:{color:"#9CA3AF"},grid:{color:"rgba(75, 85, 99, 0.3)"}},y:{ticks:{color:"#9CA3AF",callback:n=>this.formatearDinero(n)},grid:{color:"rgba(75, 85, 99, 0.3)"},beginAtZero:!0}}}})},cambiarVistaCashFlow(e){this.vistaCashFlow=e,this.actualizarDatos()},exportarDatos(){console.log("Exportando datos para el período:",this.filtroPeriodo,"y vista:",this.vistaSeleccionada),alert("Funcionalidad de exportar no implementada en este ejemplo.")},verDetallesTienda(e){console.log("Ver detalles de tienda con ID (desde Dashboard):",e),alert("Navegación a detalles de tienda no implementada.")},verDetallesCobro(e){console.log("Ver detalles de cobro (tienda ID):",e),alert("Navegación a detalles de cobro no implementada.")},getEstadoProcesoClass(e){return{Pendiente:"bg-yellow-900/50 text-yellow-300 border border-yellow-500/30","En proceso":"bg-blue-900/50 text-blue-300 border border-blue-500/30","En proceso de ODS":"bg-blue-900/50 text-blue-300 border border-blue-500/30","En COVA":"bg-cyan-900/50 text-cyan-300 border border-cyan-500/30",Facturado:"bg-indigo-900/50 text-indigo-300 border border-indigo-500/30",Pagado:"bg-emerald-900/50 text-emerald-300 border border-emerald-500/30",Cancelado:"bg-red-900/50 text-red-300 border border-red-500/30"}[e]||"bg-gray-700/50 text-gray-300 border border-gray-500/30"},getCobroStatusClass(e){return e==="Vencido"?"bg-red-900/50 text-red-300 border border-red-500/30":e==="Próximo"?"bg-yellow-900/50 text-yellow-300 border border-yellow-500/30":"bg-gray-700/50 text-gray-300 border border-gray-500/30"},actualizarDatosVisuales(){this.vistaSeleccionada==="general"&&this.$nextTick(()=>{this.$refs.cashFlowChart&&(!this.cashFlowChartInstance||this.cashFlowChartInstance.ctx===null)?(console.log("ActualizarDatosVisuales: Vista general seleccionada, intentando re-renderizar gráfico si es necesario."),this.actualizarDatos()):this.$refs.cashFlowChart&&this.cashFlowChartInstance&&console.log("ActualizarDatosVisuales: Gráfico ya existe, se actualizará con los datos del período.")})}},mounted(){this.updateDateTime(),this.timer=setInterval(this.updateDateTime,1e3),this.actualizarDatos()},beforeUnmount(){clearInterval(this.timer),this.cashFlowChartInstance&&(this.cashFlowChartInstance.destroy(),this.cashFlowChartInstance=null)}},DH={class:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-6 relative overflow-hidden text-gray-200"},LH={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 pb-16"},MH={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4"},OH={key:0,class:"bg-gradient-to-r from-blue-900/90 to-blue-800/90 backdrop-blur-sm text-white py-2 px-4 rounded-lg shadow-lg shadow-blue-500/20 flex items-center gap-2 border border-blue-500/30 animate-[fade-in-right_0.6s_ease-out]"},RH={class:"font-medium text-sm"},FH={class:"text-xs text-blue-200/80"},BH={class:"bg-gradient-to-r from-emerald-900/80 to-emerald-800/80 backdrop-blur-md text-white py-2 px-4 rounded-lg shadow-lg shadow-emerald-500/20 border border-emerald-500/30 animate-[fade-in-left_0.6s_ease-out]"},jH={class:"flex flex-col items-end"},$H={class:"text-xs opacity-90 font-medium"},VH={class:"font-mono font-bold text-base leading-tight tracking-wider text-emerald-300"},zH={key:0,class:"mb-8 animate-[fade-in_0.8s_ease-out]"},UH={class:"glass-container rounded-xl shadow-lg p-4 mb-6 animate-[fade-in_0.7s_ease-out]"},qH={class:"flex flex-wrap gap-4 items-center justify-between"},HH={class:"flex flex-wrap gap-3 items-center"},WH={class:"relative"},GH={class:"relative"},KH={class:"flex flex-wrap gap-3"},YH=["disabled"],XH={class:"z-10 relative flex items-center"},QH={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},JH={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ZH={key:1},tW={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-10"},eW={class:"summary-card border-emerald-500",style:{"animation-delay":"0s"}},nW={class:"flex justify-between items-start"},sW={class:"text-3xl font-bold text-emerald-400"},iW={key:0,class:"flex items-center mt-1 text-xs"},rW={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},oW={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},aW={class:"summary-card border-amber-500",style:{"animation-delay":"0.1s"}},lW={class:"flex justify-between items-start"},cW={class:"text-3xl font-bold text-amber-400"},uW={class:"flex items-center justify-between mt-1 text-xs w-full"},dW={class:"text-amber-400/80"},hW={class:"mt-3 w-full bg-gray-700 rounded-full h-1.5"},fW={class:"summary-card border-blue-500",style:{"animation-delay":"0.2s"}},pW={class:"flex justify-between items-start"},gW={class:"text-3xl font-bold text-blue-400"},mW={key:0,class:"flex items-center mt-1 text-xs"},vW={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},yW={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bW={class:"summary-card border-purple-500",style:{"animation-delay":"0.3s"}},wW={class:"flex justify-between items-start"},xW={class:"text-3xl font-bold text-purple-400"},_W={key:0,class:"flex items-center mt-1 text-xs"},SW={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},CW={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kW={class:"summary-card border-red-500",style:{"animation-delay":"0.4s"}},AW={class:"flex justify-between items-start"},PW={class:"text-3xl font-bold text-red-400"},EW={key:0,class:"flex items-center mt-1 text-xs"},IW={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},TW={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},NW={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},DW={class:"lg:col-span-2 chart-container animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},LW={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3 sm:gap-0"},MW={class:"chart-title"},OW={class:"flex space-x-2 flex-shrink-0"},RW={class:"chart-wrapper"},FW={class:"h-72 md:h-96 w-full"},BW={ref:"cashFlowChart"},jW={class:"chart-container animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.2s"}},$W={class:"flex flex-col space-y-4 p-2"},VW={class:"metric-card"},zW={class:"flex justify-between mb-2"},UW={class:"w-full bg-gray-700 rounded-full h-2"},qW={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},HW={class:"bg-gray-800/40 backdrop-blur-md rounded-2xl shadow-xl p-6 border border-gray-700/50 transform transition-all duration-500 hover:bg-gray-800/60 hover:shadow-emerald-500/5 animate-[fade-in-up_0.6s_ease-out]"},WW={class:"flex justify-between items-center mb-6"},GW={class:"overflow-hidden rounded-xl border border-gray-700/50 shadow-inner shadow-emerald-900/10"},KW={class:"overflow-x-auto"},YW={class:"min-w-full divide-y divide-gray-700/50"},XW={class:"bg-gray-800/30 divide-y divide-gray-700/30"},QW={key:0},JW=["onClick"],ZW={class:"px-4 py-3 whitespace-nowrap font-medium text-gray-200"},tG={class:"px-4 py-3 whitespace-nowrap text-gray-300"},eG={class:"hidden md:table-cell px-4 py-3 whitespace-nowrap text-gray-300"},nG={class:"px-4 py-3 whitespace-nowrap"},sG={class:"bg-gray-800/40 backdrop-blur-md rounded-2xl shadow-xl p-6 border border-gray-700/50 transform transition-all duration-500 hover:bg-gray-800/60 hover:shadow-blue-500/5 animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.2s"}},iG={class:"flex justify-between items-center mb-6"},rG={class:"overflow-hidden rounded-xl border border-gray-700/50 shadow-inner shadow-blue-900/10"},oG={class:"overflow-x-auto"},aG={class:"min-w-full divide-y divide-gray-700/50"},lG={class:"bg-gray-800/30 divide-y divide-gray-700/30"},cG={key:0},uG=["onClick"],dG={class:"px-4 py-3 whitespace-nowrap font-medium text-gray-200"},hG={class:"px-4 py-3 whitespace-nowrap text-gray-300"},fG={class:"px-4 py-3 whitespace-nowrap text-gray-300"},pG={class:"px-4 py-3 whitespace-nowrap"},gG={key:2,class:"flex justify-center items-center py-10"},mG={key:3,class:"animate-[fade-in_0.8s_ease-out]"},vG={class:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-300 mb-6"},yG={class:"bg-gray-800/40 backdrop-blur-md rounded-xl shadow-lg p-6 border border-gray-700/50"},bG={class:"text-gray-300"},wG={class:"text-gray-300 mt-2"};function xG(e,t,n,s,i,r){const o=$o("router-link");return at(),ft("div",DH,[t[60]||(t[60]=d("div",{class:"absolute top-0 left-0 w-96 h-96 bg-emerald-500 rounded-full filter blur-3xl opacity-5 -translate-x-1/2 -translate-y-1/2","aria-hidden":"true"},null,-1)),t[61]||(t[61]=d("div",{class:"absolute top-1/3 right-0 w-96 h-96 bg-blue-400 rounded-full filter blur-3xl opacity-5 translate-x-1/2","aria-hidden":"true"},null,-1)),t[62]||(t[62]=d("div",{class:"absolute bottom-0 left-1/3 w-96 h-96 bg-emerald-400 rounded-full filter blur-3xl opacity-5","aria-hidden":"true"},null,-1)),d("div",LH,[d("div",MH,[i.usuario?(at(),ft("div",OH,[t[9]||(t[9]=d("div",{class:"bg-blue-500/30 rounded-full p-1 flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),d("div",null,[d("span",RH,lt(i.usuario),1),d("p",FH,lt(i.ultimoAcceso),1)])])):Ut("",!0),t[10]||(t[10]=d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-300 text-center glow-emerald animate-[fade-in-down_0.6s_ease-out]"}," Dashboard Empresarial ",-1)),d("div",BH,[d("div",jH,[d("div",$H,lt(i.currentDate),1),d("div",VH,lt(i.currentTime),1)])])]),i.alertas.length>0?(at(),ft("div",zH)):Ut("",!0),d("div",UH,[d("div",qH,[d("div",HH,[d("div",WH,[oe(d("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.filtroPeriodo=a),onChange:t[1]||(t[1]=(...a)=>r.actualizarDatos&&r.actualizarDatos(...a)),class:"input-primary select-input pr-10 pl-10"},t[11]||(t[11]=[$a('<option value="hoy" data-v-a315c554>Hoy</option><option value="semana" data-v-a315c554>Esta semana</option><option value="mes" data-v-a315c554>Este mes</option><option value="trimestre" data-v-a315c554>Este trimestre</option><option value="anual" data-v-a315c554>Este año</option>',5)]),544),[[Vn,i.filtroPeriodo]]),t[12]||(t[12]=d("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-emerald-500"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),d("div",GH,[oe(d("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>i.vistaSeleccionada=a),onChange:t[3]||(t[3]=(...a)=>r.actualizarDatosVisuales&&r.actualizarDatosVisuales(...a)),class:"input-primary select-input pr-10 pl-10"},t[13]||(t[13]=[d("option",{value:"general"},"Vista General",-1),d("option",{value:"financiera"},"Vista Financiera",-1),d("option",{value:"operativa"},"Vista Operativa",-1),d("option",{value:"detallada"},"Vista Detallada",-1)]),544),[[Vn,i.vistaSeleccionada]]),t[14]||(t[14]=d("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-emerald-500"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2z"})])],-1))])]),d("div",KH,[d("button",{onClick:t[4]||(t[4]=(...a)=>r.actualizarDatos&&r.actualizarDatos(...a)),disabled:i.isLoading,class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed"},[d("span",XH,[i.isLoading?(at(),ft("svg",QH,t[15]||(t[15]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l2.088-2.088z"},null,-1)]))):(at(),ft("svg",JH,t[16]||(t[16]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),Vt(" "+lt(i.isLoading?"Cargando...":"Actualizar"),1)]),t[17]||(t[17]=d("span",{class:"tech-btn-bg absolute inset-0"},null,-1))],8,YH),d("button",{onClick:t[5]||(t[5]=(...a)=>r.exportarDatos&&r.exportarDatos(...a)),class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0"},t[18]||(t[18]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Vt(" Exportar ")]))])])]),i.vistaSeleccionada==="general"&&!i.isLoading?(at(),ft("div",ZH,[d("div",tW,[d("div",eW,[d("div",nW,[d("div",null,[t[21]||(t[21]=d("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"Tiendas",-1)),d("p",sW,lt(i.totalTiendas),1),i.filtroPeriodo!=="anual"?(at(),ft("div",iW,[d("div",{class:ve(["flex items-center",i.crecimientoTiendas>=0?"text-green-400":"text-red-400"])},[i.crecimientoTiendas>=0?(at(),ft("svg",rW,t[19]||(t[19]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):(at(),ft("svg",oW,t[20]||(t[20]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))),Vt(" "+lt(Math.abs(i.crecimientoTiendas))+"% vs período ant. ",1)],2)])):Ut("",!0)]),t[22]||(t[22]=d("div",{class:"p-3 bg-emerald-900/30 rounded-lg shadow-inner flex items-center justify-center border border-emerald-500/20"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))]),ze(o,{to:"/tiendas",class:"mt-3 block text-sm text-emerald-400 hover:text-emerald-300 transition-colors flex items-center gap-1 w-max group"},{default:an(()=>t[23]||(t[23]=[d("span",null,"Ver tiendas",-1),d("span",{class:"transition-transform group-hover:translate-x-1"},"→",-1)])),_:1})]),d("div",aW,[d("div",lW,[d("div",null,[t[24]||(t[24]=d("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"Servicios Pendientes",-1)),d("p",cW,lt(i.serviciosPendientes),1),d("div",uW,[d("span",dW,lt(r.porcentajePendientes)+"% del total",1)])]),t[25]||(t[25]=d("div",{class:"p-3 bg-amber-900/30 rounded-lg shadow-inner flex items-center justify-center border border-amber-500/20"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),d("div",hW,[d("div",{class:"bg-amber-500 h-1.5 rounded-full",style:Wr({width:r.porcentajePendientes+"%"})},null,4)])]),d("div",fW,[d("div",pW,[d("div",null,[t[28]||(t[28]=d("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"Por cobrar",-1)),d("p",gW,lt(r.formatearDinero(i.montoPendiente)),1),i.filtroPeriodo!=="anual"?(at(),ft("div",mW,[d("div",{class:ve(["flex items-center",i.crecimientoPorCobrar>=0?"text-green-400":"text-red-400"])},[i.crecimientoPorCobrar>=0?(at(),ft("svg",vW,t[26]||(t[26]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):(at(),ft("svg",yW,t[27]||(t[27]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))),Vt(" "+lt(Math.abs(i.crecimientoPorCobrar))+"% vs período ant. ",1)],2)])):Ut("",!0)]),t[29]||(t[29]=d("div",{class:"p-3 bg-blue-900/30 rounded-lg shadow-inner flex items-center justify-center border border-blue-500/20"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))]),ze(o,{to:"/finanzas",class:"mt-3 block text-sm text-blue-400 hover:text-blue-300 transition-colors flex items-center gap-1 w-max group"},{default:an(()=>t[30]||(t[30]=[d("span",null,"Ver finanzas",-1),d("span",{class:"transition-transform group-hover:translate-x-1"},"→",-1)])),_:1})]),d("div",bW,[d("div",wW,[d("div",null,[t[33]||(t[33]=d("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"Ingresos (Tiendas Pagadas)",-1)),d("p",xW,lt(r.formatearDinero(i.ingresosTotales)),1),i.filtroPeriodo!=="anual"?(at(),ft("div",_W,[d("div",{class:ve(["flex items-center",i.crecimientoIngresos>=0?"text-green-400":"text-red-400"])},[i.crecimientoIngresos>=0?(at(),ft("svg",SW,t[31]||(t[31]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):(at(),ft("svg",CW,t[32]||(t[32]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))),Vt(" "+lt(Math.abs(i.crecimientoIngresos))+"% vs período ant. ",1)],2)])):Ut("",!0)]),t[34]||(t[34]=d("div",{class:"p-3 bg-purple-900/30 rounded-lg shadow-inner flex items-center justify-center border border-purple-500/20"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),ze(o,{to:"/finanzas",class:"mt-3 block text-sm text-purple-400 hover:text-purple-300 transition-colors flex items-center gap-1 w-max group"},{default:an(()=>t[35]||(t[35]=[d("span",null,"Ver finanzas",-1),d("span",{class:"transition-transform group-hover:translate-x-1"},"→",-1)])),_:1})]),d("div",kW,[d("div",AW,[d("div",null,[t[38]||(t[38]=d("h3",{class:"text-sm font-medium text-gray-400 mb-1"},"Gastos",-1)),d("p",PW,lt(r.formatearDinero(i.gastosTotales)),1),i.filtroPeriodo!=="anual"?(at(),ft("div",EW,[d("div",{class:ve(["flex items-center",i.crecimientoGastos>=0?"text-red-400":"text-green-400"])},[i.crecimientoGastos>=0?(at(),ft("svg",IW,t[36]||(t[36]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):(at(),ft("svg",TW,t[37]||(t[37]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))),Vt(" "+lt(Math.abs(i.crecimientoGastos))+"% vs período ant. ",1)],2)])):Ut("",!0)]),t[39]||(t[39]=d("div",{class:"p-3 bg-red-900/30 rounded-lg shadow-inner flex items-center justify-center border border-red-500/20"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1))]),ze(o,{to:"/finanzas",class:"mt-3 block text-sm text-red-400 hover:text-red-300 transition-colors flex items-center gap-1 w-max group"},{default:an(()=>t[40]||(t[40]=[d("span",null,"Ver finanzas",-1),d("span",{class:"transition-transform group-hover:translate-x-1"},"→",-1)])),_:1})])]),d("div",NW,[d("div",DW,[d("div",LW,[d("h3",MW,[t[41]||(t[41]=d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 inline text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1)),Vt(" Flujo de Caja ("+lt(r.nombrePeriodoVistaCashFlow)+") ",1)]),d("div",OW,[d("button",{onClick:t[6]||(t[6]=a=>r.cambiarVistaCashFlow("diario")),class:ve(["chart-tab-btn",{active:i.vistaCashFlow==="diario"}])},"Diario",2),d("button",{onClick:t[7]||(t[7]=a=>r.cambiarVistaCashFlow("semanal")),class:ve(["chart-tab-btn",{active:i.vistaCashFlow==="semanal"}])},"Semanal",2),d("button",{onClick:t[8]||(t[8]=a=>r.cambiarVistaCashFlow("mensual")),class:ve(["chart-tab-btn",{active:i.vistaCashFlow==="mensual"}])},"Mensual",2)])]),d("div",RW,[d("div",FW,[d("canvas",BW,null,512)])])]),d("div",jW,[t[44]||(t[44]=d("h3",{class:"chart-title flex items-center mb-4"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),Vt(" Métricas Clave ")],-1)),d("div",$W,[d("div",VW,[d("div",zW,[t[42]||(t[42]=d("span",{class:"text-sm font-medium text-gray-400"},"Margen de Ganancia",-1)),d("span",{class:ve(["text-sm font-semibold",i.margenGanancia>=40?"text-emerald-400":i.margenGanancia>=20?"text-blue-400":i.margenGanancia>=0?"text-yellow-400":"text-red-400"])},lt(i.margenGanancia.toFixed(1))+"%",3)]),d("div",UW,[d("div",{class:ve(["h-2 rounded-full transition-all duration-500 ease-out",i.margenGanancia>=40?"bg-emerald-500":i.margenGanancia>=20?"bg-blue-500":i.margenGanancia>=0?"bg-yellow-500":"bg-red-500"]),style:Wr({width:`${Math.min(Math.max(0,i.margenGanancia),100)}%`})},null,6)])]),t[43]||(t[43]=$a('<div class="metric-card" data-v-a315c554><div class="flex justify-between mb-2" data-v-a315c554><span class="text-sm font-medium text-gray-400" data-v-a315c554>Tasa de Cumplimiento (Ej.)</span> <span class="text-sm font-semibold text-gray-500" data-v-a315c554>N/D</span></div><div class="w-full bg-gray-700 rounded-full h-2" data-v-a315c554><div class="bg-gray-500 h-2 rounded-full" style="width:0%;" data-v-a315c554></div></div></div>',1))])])]),d("div",qW,[d("section",HW,[d("header",WW,[t[46]||(t[46]=d("h3",{class:"text-lg font-semibold text-emerald-400 flex items-center gap-2"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})]),Vt(" Servicios Recientes ")],-1)),ze(o,{to:"/tiendas",class:"text-sm bg-emerald-900/30 hover:bg-emerald-800/40 text-emerald-400 hover:text-emerald-300 px-3 py-1.5 rounded-full transition-all duration-300 flex items-center gap-1 group border border-emerald-500/20"},{default:an(()=>t[45]||(t[45]=[d("span",null,"Ver todos",-1),d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)])),_:1})]),d("div",GW,[d("div",KW,[d("table",YW,[t[48]||(t[48]=d("thead",{class:"bg-gray-800/60"},[d("tr",null,[d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Cliente"),d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Marca"),d("th",{scope:"col",class:"hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Fecha"),d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Estado Proceso")])],-1)),d("tbody",XW,[i.tiendasRecientes.length===0&&!i.isLoading?(at(),ft("tr",QW,t[47]||(t[47]=[d("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-400"},[d("div",{class:"flex flex-col items-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),Vt(" No hay servicios recientes para mostrar. ")])],-1)]))):Ut("",!0),(at(!0),ft(ye,null,Ke(i.tiendasRecientes,(a,l)=>(at(),ft("tr",{key:a.id,class:"hover:bg-gray-700/30 transition-colors cursor-pointer animate-[fade-in_0.6s_ease-out]",style:Wr({animationDelay:`${.05*l}s`}),onClick:c=>r.verDetallesTienda(a.id)},[d("td",ZW,lt(a.nombre),1),d("td",tG,lt(a.marca),1),d("td",eG,lt(r.formatearFecha(a.fechaCreacion)),1),d("td",nG,[d("span",{class:ve(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",r.getEstadoProcesoClass(a.estadoProceso)])},lt(a.estadoProceso||"N/A"),3)])],12,JW))),128))])])])])]),d("section",sG,[d("header",iG,[t[50]||(t[50]=d("h3",{class:"text-lg font-semibold text-blue-400 flex items-center gap-2"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),Vt(" Cobros Próximos / Vencidos ")],-1)),ze(o,{to:"/finanzas",class:"text-sm bg-blue-900/30 hover:bg-blue-800/40 text-blue-400 hover:text-blue-300 px-3 py-1.5 rounded-full transition-all duration-300 flex items-center gap-1 group border border-blue-500/20"},{default:an(()=>t[49]||(t[49]=[d("span",null,"Ver todos",-1),d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)])),_:1})]),d("div",rG,[d("div",oG,[d("table",aG,[t[52]||(t[52]=d("thead",{class:"bg-gray-800/60"},[d("tr",null,[d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Cliente"),d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Monto"),d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Fecha Venc. (Estimada)"),d("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"},"Estado Cobro")])],-1)),d("tbody",lG,[i.cobrosProximos.length===0&&!i.isLoading?(at(),ft("tr",cG,t[51]||(t[51]=[d("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-400"},[d("div",{class:"flex flex-col items-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})]),Vt(" No hay cobros próximos o vencidos para mostrar. ")])],-1)]))):Ut("",!0),(at(!0),ft(ye,null,Ke(i.cobrosProximos,(a,l)=>(at(),ft("tr",{key:a.id,class:"hover:bg-gray-700/30 transition-colors cursor-pointer animate-[fade-in_0.6s_ease-out]",style:Wr({animationDelay:`${.05*l}s`}),onClick:c=>r.verDetallesCobro(a.tiendaId)},[d("td",dG,lt(a.cliente),1),d("td",hG,lt(r.formatearDinero(a.monto)),1),d("td",fG,lt(r.formatearFecha(a.fechaVencimiento)),1),d("td",pG,[d("span",{class:ve(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",r.getCobroStatusClass(a.estadoCobro)])},lt(a.estadoCobro),3)])],12,uG))),128))])])])])])])])):Ut("",!0),i.isLoading?(at(),ft("div",gG,t[53]||(t[53]=[d("div",{class:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-emerald-500"},null,-1),d("p",{class:"ml-4 text-emerald-400 text-lg"},"Cargando datos del dashboard...",-1)]))):Ut("",!0),i.vistaSeleccionada!=="general"&&!i.isLoading?(at(),ft("div",mG,[d("h3",vG," Contenido de Vista "+lt(i.vistaSeleccionada.charAt(0).toUpperCase()+i.vistaSeleccionada.slice(1)),1),d("div",yG,[d("p",bG,'Aquí se mostraría el contenido específico para la vista "'+lt(i.vistaSeleccionada)+'".',1),d("p",wG,[t[56]||(t[56]=Vt("Por ejemplo, la vista ")),ze(o,{to:"/finanzas",class:"text-cyan-400 hover:underline"},{default:an(()=>t[54]||(t[54]=[Vt("Financiera Detallada")])),_:1}),t[57]||(t[57]=Vt(" o la ")),ze(o,{to:"/tiendas",class:"text-emerald-400 hover:underline"},{default:an(()=>t[55]||(t[55]=[Vt("Gestión de Tiendas")])),_:1}),t[58]||(t[58]=Vt(" ya existen como módulos separados."))]),t[59]||(t[59]=d("p",{class:"mt-4 text-sm text-gray-400"},"Este dashboard principal consolida los indicadores clave.",-1))])])):Ut("",!0)])])}const _G=ic(NH,[["render",xG],["__scopeId","data-v-a315c554"]]),SG="modulepreload",CG=function(e){return"/"+e},a3={},ty=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=CG(l),l in a3)return;a3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":SG,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};function fn(e){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(e)}var Ks=Uint8Array,ji=Uint16Array,S5=Int32Array,R0=new Ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F0=new Ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ey=new Ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eE=function(e,t){for(var n=new ji(31),s=0;s<31;++s)n[s]=t+=1<<e[s-1];for(var i=new S5(n[30]),s=1;s<30;++s)for(var r=n[s];r<n[s+1];++r)i[r]=r-n[s]<<5|s;return{b:n,r:i}},nE=eE(R0,2),sE=nE.b,ny=nE.r;sE[28]=258,ny[258]=28;var iE=eE(F0,0),kG=iE.b,l3=iE.r,sy=new ji(32768);for(var Pn=0;Pn<32768;++Pn){var ha=(Pn&43690)>>1|(Pn&21845)<<1;ha=(ha&52428)>>2|(ha&13107)<<2,ha=(ha&61680)>>4|(ha&3855)<<4,sy[Pn]=((ha&65280)>>8|(ha&255)<<8)>>1}var so=function(e,t,n){for(var s=e.length,i=0,r=new ji(t);i<s;++i)e[i]&&++r[e[i]-1];var o=new ji(t);for(i=1;i<t;++i)o[i]=o[i-1]+r[i-1]<<1;var a;if(n){a=new ji(1<<t);var l=15-t;for(i=0;i<s;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=o[e[i]-1]++<<u,g=h|(1<<u)-1;h<=g;++h)a[sy[h]>>l]=c}else for(a=new ji(s),i=0;i<s;++i)e[i]&&(a[i]=sy[o[e[i]-1]++]>>15-e[i]);return a},Ha=new Ks(288);for(var Pn=0;Pn<144;++Pn)Ha[Pn]=8;for(var Pn=144;Pn<256;++Pn)Ha[Pn]=9;for(var Pn=256;Pn<280;++Pn)Ha[Pn]=7;for(var Pn=280;Pn<288;++Pn)Ha[Pn]=8;var tf=new Ks(32);for(var Pn=0;Pn<32;++Pn)tf[Pn]=5;var AG=so(Ha,9,0),PG=so(Ha,9,1),EG=so(tf,5,0),IG=so(tf,5,1),P2=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},hr=function(e,t,n){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&n},E2=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},C5=function(e){return(e+7)/8|0},rE=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ks(e.subarray(t,n))},TG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pr=function(e,t,n){var s=new Error(t||TG[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,pr),!n)throw s;return s},NG=function(e,t,n,s){var i=e.length,r=0;if(!i||t.f&&!t.l)return n||new Ks(0);var o=!n,a=o||t.i!=2,l=t.i;o&&(n=new Ks(i*3));var c=function(Dt){var K=n.length;if(Dt>K){var H=new Ks(Math.max(K*2,Dt));H.set(n),n=H}},u=t.f||0,h=t.p||0,g=t.b||0,p=t.l,y=t.d,w=t.m,S=t.n,x=i*8;do{if(!p){u=hr(e,h,1);var P=hr(e,h+1,3);if(h+=3,P)if(P==1)p=PG,y=IG,w=9,S=5;else if(P==2){var pt=hr(e,h,31)+257,Y=hr(e,h+10,15)+4,W=pt+hr(e,h+5,31)+1;h+=14;for(var it=new Ks(W),J=new Ks(19),_=0;_<Y;++_)J[ey[_]]=hr(e,h+_*3,7);h+=Y*3;for(var A=P2(J),Q=(1<<A)-1,et=so(J,A,1),_=0;_<W;){var mt=et[hr(e,h,Q)];h+=mt&15;var L=mt>>4;if(L<16)it[_++]=L;else{var ht=0,gt=0;for(L==16?(gt=3+hr(e,h,3),h+=2,ht=it[_-1]):L==17?(gt=3+hr(e,h,7),h+=3):L==18&&(gt=11+hr(e,h,127),h+=7);gt--;)it[_++]=ht}}var tt=it.subarray(0,pt),T=it.subarray(pt);w=P2(tt),S=P2(T),p=so(tt,w,1),y=so(T,S,1)}else pr(1);else{var L=C5(h)+4,M=e[L-4]|e[L-3]<<8,F=L+M;if(F>i){l&&pr(0);break}a&&c(g+M),n.set(e.subarray(L,F),g),t.b=g+=M,t.p=h=F*8,t.f=u;continue}if(h>x){l&&pr(0);break}}a&&c(g+131072);for(var rt=(1<<w)-1,kt=(1<<S)-1,I=h;;I=h){var ht=p[E2(e,h)&rt],O=ht>>4;if(h+=ht&15,h>x){l&&pr(0);break}if(ht||pr(2),O<256)n[g++]=O;else if(O==256){I=h,p=null;break}else{var E=O-254;if(O>264){var _=O-257,R=R0[_];E=hr(e,h,(1<<R)-1)+sE[_],h+=R}var Z=y[E2(e,h)&kt],q=Z>>4;Z||pr(3),h+=Z&15;var T=kG[q];if(q>3){var R=F0[q];T+=E2(e,h)&(1<<R)-1,h+=R}if(h>x){l&&pr(0);break}a&&c(g+131072);var st=g+E;if(g<T){var ct=r-T,At=Math.min(T,st);for(ct+g<0&&pr(3);g<At;++g)n[g]=s[ct+g]}for(;g<st;++g)n[g]=n[g-T]}}t.l=p,t.p=I,t.b=g,t.f=u,p&&(u=1,t.m=w,t.d=y,t.n=S)}while(!u);return g!=n.length&&o?rE(n,0,g):n.subarray(0,g)},Ao=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8},Nd=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8,e[s+2]|=n>>16},I2=function(e,t){for(var n=[],s=0;s<e.length;++s)e[s]&&n.push({s,f:e[s]});var i=n.length,r=n.slice();if(!i)return{t:aE,l:0};if(i==1){var o=new Ks(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(F,pt){return F.f-pt.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var g=r[0].s,s=1;s<i;++s)r[s].s>g&&(g=r[s].s);var p=new ji(g+1),y=iy(n[u-1],p,0);if(y>t){var s=0,w=0,S=y-t,x=1<<S;for(r.sort(function(pt,Y){return p[Y.s]-p[pt.s]||pt.f-Y.f});s<i;++s){var P=r[s].s;if(p[P]>t)w+=x-(1<<y-p[P]),p[P]=t;else break}for(w>>=S;w>0;){var L=r[s].s;p[L]<t?w-=1<<t-p[L]++-1:++s}for(;s>=0&&w;--s){var M=r[s].s;p[M]==t&&(--p[M],++w)}y=t}return{t:new Ks(p),l:y}},iy=function(e,t,n){return e.s==-1?Math.max(iy(e.l,t,n+1),iy(e.r,t,n+1)):t[e.s]=n},c3=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ji(++t),s=0,i=e[0],r=1,o=function(l){n[s++]=l},a=1;a<=t;++a)if(e[a]==i&&a!=t)++r;else{if(!i&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(i),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(i);r=1,i=e[a]}return{c:n.subarray(0,s),n:t}},Dd=function(e,t){for(var n=0,s=0;s<t.length;++s)n+=e[s]*t[s];return n},oE=function(e,t,n){var s=n.length,i=C5(t+2);e[i]=s&255,e[i+1]=s>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var r=0;r<s;++r)e[i+r+4]=n[r];return(i+4+s)*8},u3=function(e,t,n,s,i,r,o,a,l,c,u){Ao(t,u++,n),++i[256];for(var h=I2(i,15),g=h.t,p=h.l,y=I2(r,15),w=y.t,S=y.l,x=c3(g),P=x.c,L=x.n,M=c3(w),F=M.c,pt=M.n,Y=new ji(19),W=0;W<P.length;++W)++Y[P[W]&31];for(var W=0;W<F.length;++W)++Y[F[W]&31];for(var it=I2(Y,7),J=it.t,_=it.l,A=19;A>4&&!J[ey[A-1]];--A);var Q=c+5<<3,et=Dd(i,Ha)+Dd(r,tf)+o,mt=Dd(i,g)+Dd(r,w)+o+14+3*A+Dd(Y,J)+2*Y[16]+3*Y[17]+7*Y[18];if(l>=0&&Q<=et&&Q<=mt)return oE(t,u,e.subarray(l,l+c));var ht,gt,tt,T;if(Ao(t,u,1+(mt<et)),u+=2,mt<et){ht=so(g,p,0),gt=g,tt=so(w,S,0),T=w;var rt=so(J,_,0);Ao(t,u,L-257),Ao(t,u+5,pt-1),Ao(t,u+10,A-4),u+=14;for(var W=0;W<A;++W)Ao(t,u+3*W,J[ey[W]]);u+=3*A;for(var kt=[P,F],I=0;I<2;++I)for(var O=kt[I],W=0;W<O.length;++W){var E=O[W]&31;Ao(t,u,rt[E]),u+=J[E],E>15&&(Ao(t,u,O[W]>>5&127),u+=O[W]>>12)}}else ht=AG,gt=Ha,tt=EG,T=tf;for(var W=0;W<a;++W){var R=s[W];if(R>255){var E=R>>18&31;Nd(t,u,ht[E+257]),u+=gt[E+257],E>7&&(Ao(t,u,R>>23&31),u+=R0[E]);var Z=R&31;Nd(t,u,tt[Z]),u+=T[Z],Z>3&&(Nd(t,u,R>>5&8191),u+=F0[Z])}else Nd(t,u,ht[R]),u+=gt[R]}return Nd(t,u,ht[256]),u+gt[256]},DG=new S5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aE=new Ks(0),LG=function(e,t,n,s,i,r){var o=r.z||e.length,a=new Ks(s+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(s,a.length-i),c=r.l,u=(r.r||0)&7;if(t){u&&(l[0]=r.r>>3);for(var h=DG[t-1],g=h>>13,p=h&8191,y=(1<<n)-1,w=r.p||new ji(32768),S=r.h||new ji(y+1),x=Math.ceil(n/3),P=2*x,L=function(dt){return(e[dt]^e[dt+1]<<x^e[dt+2]<<P)&y},M=new S5(25e3),F=new ji(288),pt=new ji(32),Y=0,W=0,it=r.i||0,J=0,_=r.w||0,A=0;it+2<o;++it){var Q=L(it),et=it&32767,mt=S[Q];if(w[et]=mt,S[Q]=et,_<=it){var ht=o-it;if((Y>7e3||J>24576)&&(ht>423||!c)){u=u3(e,l,0,M,F,pt,W,J,A,it-A,u),J=Y=W=0,A=it;for(var gt=0;gt<286;++gt)F[gt]=0;for(var gt=0;gt<30;++gt)pt[gt]=0}var tt=2,T=0,rt=p,kt=et-mt&32767;if(ht>2&&Q==L(it-kt))for(var I=Math.min(g,ht)-1,O=Math.min(32767,it),E=Math.min(258,ht);kt<=O&&--rt&&et!=mt;){if(e[it+tt]==e[it+tt-kt]){for(var R=0;R<E&&e[it+R]==e[it+R-kt];++R);if(R>tt){if(tt=R,T=kt,R>I)break;for(var Z=Math.min(kt,R-2),q=0,gt=0;gt<Z;++gt){var st=it-kt+gt&32767,ct=w[st],At=st-ct&32767;At>q&&(q=At,mt=st)}}}et=mt,mt=w[et],kt+=et-mt&32767}if(T){M[J++]=268435456|ny[tt]<<18|l3[T];var Dt=ny[tt]&31,K=l3[T]&31;W+=R0[Dt]+F0[K],++F[257+Dt],++pt[K],_=it+tt,++Y}else M[J++]=e[it],++F[e[it]]}}for(it=Math.max(it,_);it<o;++it)M[J++]=e[it],++F[e[it]];u=u3(e,l,c,M,F,pt,W,J,A,it-A,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=S,r.p=w,r.i=it,r.w=_)}else{for(var it=r.w||0;it<o+c;it+=65535){var H=it+65535;H>=o&&(l[u/8|0]=c,H=o),u=oE(l,u+1,e.subarray(it,H))}r.i=o}return rE(a,0,s+C5(u)+i)},lE=function(){var e=1,t=0;return{p:function(n){for(var s=e,i=t,r=n.length|0,o=0;o!=r;){for(var a=Math.min(o+2655,r);o<a;++o)i+=s+=n[o];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}e=s,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},MG=function(e,t,n,s,i){if(!i&&(i={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),o=new Ks(r.length+e.length);o.set(r),o.set(e,r.length),e=o,i.w=r.length}return LG(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,s,i)},cE=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},OG=function(e,t){var n=t.level,s=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=lE();i.p(t.dictionary),cE(e,2,i.d())}},RG=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&pr(6,"invalid zlib data"),(e[1]>>5&1)==1&&pr(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ry(e,t){t||(t={});var n=lE();n.p(e);var s=MG(e,t,t.dictionary?6:2,4);return OG(s,t),cE(s,s.length-4,n.d()),s}function FG(e,t){return NG(e.subarray(RG(e),-4),{i:2},t,t)}var BG=typeof TextDecoder<"u"&&new TextDecoder,jG=0;try{BG.decode(aE,{stream:!0}),jG=1}catch{}var Pe=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function T2(){Pe.console&&typeof Pe.console.log=="function"&&Pe.console.log.apply(Pe.console,arguments)}var vn={log:T2,warn:function(e){Pe.console&&(typeof Pe.console.warn=="function"?Pe.console.warn.apply(Pe.console,arguments):T2.call(null,arguments))},error:function(e){Pe.console&&(typeof Pe.console.error=="function"?Pe.console.error.apply(Pe.console,arguments):T2(e))}};function N2(e,t,n){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Sl(s.response,t,n)},s.onerror=function(){vn.error("could not download file")},s.send()}function d3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Qp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var fh,oy,Sl=Pe.saveAs||((typeof window>"u"?"undefined":fn(window))!=="object"||window!==Pe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var s=Pe.URL||Pe.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?d3(i.href)?N2(e,t,n):Qp(i,i.target="_blank"):Qp(i)):(i.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){Qp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(d3(e))N2(e,t,n);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){Qp(s)})}else navigator.msSaveOrOpenBlob(function(i,r){return r===void 0?r={autoBom:!1}:fn(r)!=="object"&&(vn.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return N2(e,t,n);var i=e.type==="application/octet-stream",r=/constructor/i.test(Pe.HTMLElement)||Pe.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&r)&&(typeof FileReader>"u"?"undefined":fn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},a.readAsDataURL(e)}else{var l=Pe.URL||Pe.webkitURL,c=l.createObjectURL(e);s?s.location=c:location.href=c,s=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function uE(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<n.length;s++){var i=n[s].re,r=n[s].process,o=i.exec(e);o&&(t=r(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function D2(e,t){var n=e[0],s=e[1],i=e[2],r=e[3];n=Fs(n,s,i,r,t[0],7,-680876936),r=Fs(r,n,s,i,t[1],12,-389564586),i=Fs(i,r,n,s,t[2],17,606105819),s=Fs(s,i,r,n,t[3],22,-1044525330),n=Fs(n,s,i,r,t[4],7,-176418897),r=Fs(r,n,s,i,t[5],12,1200080426),i=Fs(i,r,n,s,t[6],17,-1473231341),s=Fs(s,i,r,n,t[7],22,-45705983),n=Fs(n,s,i,r,t[8],7,1770035416),r=Fs(r,n,s,i,t[9],12,-1958414417),i=Fs(i,r,n,s,t[10],17,-42063),s=Fs(s,i,r,n,t[11],22,-1990404162),n=Fs(n,s,i,r,t[12],7,1804603682),r=Fs(r,n,s,i,t[13],12,-40341101),i=Fs(i,r,n,s,t[14],17,-1502002290),n=Bs(n,s=Fs(s,i,r,n,t[15],22,1236535329),i,r,t[1],5,-165796510),r=Bs(r,n,s,i,t[6],9,-1069501632),i=Bs(i,r,n,s,t[11],14,643717713),s=Bs(s,i,r,n,t[0],20,-373897302),n=Bs(n,s,i,r,t[5],5,-701558691),r=Bs(r,n,s,i,t[10],9,38016083),i=Bs(i,r,n,s,t[15],14,-660478335),s=Bs(s,i,r,n,t[4],20,-405537848),n=Bs(n,s,i,r,t[9],5,568446438),r=Bs(r,n,s,i,t[14],9,-1019803690),i=Bs(i,r,n,s,t[3],14,-187363961),s=Bs(s,i,r,n,t[8],20,1163531501),n=Bs(n,s,i,r,t[13],5,-1444681467),r=Bs(r,n,s,i,t[2],9,-51403784),i=Bs(i,r,n,s,t[7],14,1735328473),n=js(n,s=Bs(s,i,r,n,t[12],20,-1926607734),i,r,t[5],4,-378558),r=js(r,n,s,i,t[8],11,-2022574463),i=js(i,r,n,s,t[11],16,1839030562),s=js(s,i,r,n,t[14],23,-35309556),n=js(n,s,i,r,t[1],4,-1530992060),r=js(r,n,s,i,t[4],11,1272893353),i=js(i,r,n,s,t[7],16,-155497632),s=js(s,i,r,n,t[10],23,-1094730640),n=js(n,s,i,r,t[13],4,681279174),r=js(r,n,s,i,t[0],11,-358537222),i=js(i,r,n,s,t[3],16,-722521979),s=js(s,i,r,n,t[6],23,76029189),n=js(n,s,i,r,t[9],4,-640364487),r=js(r,n,s,i,t[12],11,-421815835),i=js(i,r,n,s,t[15],16,530742520),n=$s(n,s=js(s,i,r,n,t[2],23,-995338651),i,r,t[0],6,-198630844),r=$s(r,n,s,i,t[7],10,1126891415),i=$s(i,r,n,s,t[14],15,-1416354905),s=$s(s,i,r,n,t[5],21,-57434055),n=$s(n,s,i,r,t[12],6,1700485571),r=$s(r,n,s,i,t[3],10,-1894986606),i=$s(i,r,n,s,t[10],15,-1051523),s=$s(s,i,r,n,t[1],21,-2054922799),n=$s(n,s,i,r,t[8],6,1873313359),r=$s(r,n,s,i,t[15],10,-30611744),i=$s(i,r,n,s,t[6],15,-1560198380),s=$s(s,i,r,n,t[13],21,1309151649),n=$s(n,s,i,r,t[4],6,-145523070),r=$s(r,n,s,i,t[11],10,-1120210379),i=$s(i,r,n,s,t[2],15,718787259),s=$s(s,i,r,n,t[9],21,-343485551),e[0]=Na(n,e[0]),e[1]=Na(s,e[1]),e[2]=Na(i,e[2]),e[3]=Na(r,e[3])}function B0(e,t,n,s,i,r){return t=Na(Na(t,e),Na(s,r)),Na(t<<i|t>>>32-i,n)}function Fs(e,t,n,s,i,r,o){return B0(t&n|~t&s,e,t,i,r,o)}function Bs(e,t,n,s,i,r,o){return B0(t&s|n&~s,e,t,i,r,o)}function js(e,t,n,s,i,r,o){return B0(t^n^s,e,t,i,r,o)}function $s(e,t,n,s,i,r,o){return B0(n^(t|~s),e,t,i,r,o)}function dE(e){var t,n=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)D2(s,$G(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(D2(s,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,D2(s,i),s}function $G(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}fh=Pe.atob.bind(Pe),oy=Pe.btoa.bind(Pe);var h3="0123456789abcdef".split("");function VG(e){for(var t="",n=0;n<4;n++)t+=h3[e>>8*n+4&15]+h3[e>>8*n&15];return t}function zG(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function ay(e){return dE(e).map(zG).join("")}var UG=function(e){for(var t=0;t<e.length;t++)e[t]=VG(e[t]);return e.join("")}(dE("hello"))!="5d41402abc4b2a76b9719d911017c592";function Na(e,t){if(UG){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ly(e,t){var n,s,i,r;if(e!==n){for(var o=(i=e,r=1+(256/e.length>>0),new Array(r+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=e,s=a}else a=s;var h=t.length,g=0,p=0,y="";for(l=0;l<h;l++)p=(p+(u=a[g=(g+1)%256]))%256,a[g]=a[p],a[p]=u,o=a[(a[g]+a[p])%256],y+=String.fromCharCode(t.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var f3={print:4,modify:8,copy:16,"annot-forms":32};function Hc(e,t,n,s){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(f3.perm!==void 0)throw new Error("Invalid permission: "+a);i+=f3[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var r=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,o),this.P=-(1+(255^i)),this.encryptionKey=ay(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=ly(this.encryptionKey,this.padding)}function Wc(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,s=0;s<n;s++){var i=e.charCodeAt(s);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[s]}return t}function p3(e){if(fn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,s,i){if(i=i||!1,typeof n!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var r=Math.random().toString(35);return t[n][r]=[s,!!i],r},this.unsubscribe=function(n){for(var s in t)if(t[s][n])return delete t[s][n],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var r in t[n]){var o=t[n][r];try{o[0].apply(e,s)}catch(a){Pe.console&&vn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(r)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vm(e){if(!(this instanceof vm))return new vm(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function hE(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Al(e,t,n,s,i){if(!(this instanceof Al))return new Al(e,t,n,s,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,hE.call(this,s,i)}function Yc(e,t,n,s,i){if(!(this instanceof Yc))return new Yc(e,t,n,s,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,hE.call(this,s,i)}function Ae(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],r=arguments[3],o=[],a=1,l=16,c="S",u=null;fn(e=e||{})==="object"&&(n=e.orientation,s=e.unit||s,i=e.format||i,r=e.compress||e.compressPdf||r,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),o=e.filters||(r===!0?["FlateEncode"]:o),s=s||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=p3;var y="1.3",w=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(v){y=v};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var x=p.__private__.getPageFormat=function(v){return S[v]};i=i||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},L=P.COMPAT;function M(){this.saveGraphicsState(),V(new xe(Yt,0,0,-Yt,0,Qo()*Yt).toString()+" cm"),this.setFontSize(this.getFontSize()/Yt),c="n",L=P.ADVANCED}function F(){this.restoreGraphicsState(),c="S",L=P.COMPAT}var pt=p.__private__.combineFontStyleAndFontWeight=function(v,D){if(v=="bold"&&D=="normal"||v=="bold"&&D==400||v=="normal"&&D=="italic"||v=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(v=D==400||D==="normal"?v==="italic"?"italic":"normal":D!=700&&D!=="bold"||v!=="normal"?(D==700?"bold":D)+""+v:"bold"),v};p.advancedAPI=function(v){var D=L===P.COMPAT;return D&&M.call(this),typeof v!="function"||(v(this),D&&F.call(this)),this},p.compatAPI=function(v){var D=L===P.ADVANCED;return D&&F.call(this),typeof v!="function"||(v(this),D&&M.call(this)),this},p.isAdvancedAPI=function(){return L===P.ADVANCED};var Y,W=function(v){if(L!==P.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},it=p.roundToPrecision=p.__private__.roundToPrecision=function(v,D){var ot=t||D;if(isNaN(v)||isNaN(ot))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(ot).replace(/0+$/,"")};Y=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return it(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return it(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return it(v,16)};var J=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return it(v,2)},_=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return it(v,3)},A=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return L===P.COMPAT?v*Yt:L===P.ADVANCED?v:void 0},Q=function(v){return L===P.COMPAT?Qo()-v:L===P.ADVANCED?v:void 0},et=function(v){return A(Q(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var mt,ht="00000000000000000000000000000000",gt=p.__private__.getFileId=function(){return ht},tt=p.__private__.setFileId=function(v){return ht=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ht.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Ms=new Hc(u.userPermissions,u.userPassword,u.ownerPassword,ht)),ht};p.setFileId=function(v){return tt(v),this},p.getFileId=function(){return gt()};var T=p.__private__.convertDateToPDFDate=function(v){var D=v.getTimezoneOffset(),ot=D<0?"+":"-",vt=Math.floor(Math.abs(D/60)),Pt=Math.abs(D%60),Ot=[ot,E(vt),"'",E(Pt),"'"].join("");return["D:",v.getFullYear(),E(v.getMonth()+1),E(v.getDate()),E(v.getHours()),E(v.getMinutes()),E(v.getSeconds()),Ot].join("")},rt=p.__private__.convertPDFDateToDate=function(v){var D=parseInt(v.substr(2,4),10),ot=parseInt(v.substr(6,2),10)-1,vt=parseInt(v.substr(8,2),10),Pt=parseInt(v.substr(10,2),10),Ot=parseInt(v.substr(12,2),10),Ht=parseInt(v.substr(14,2),10);return new Date(D,ot,vt,Pt,Ot,Ht,0)},kt=p.__private__.setCreationDate=function(v){var D;if(v===void 0&&(v=new Date),v instanceof Date)D=T(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=v}return mt=D},I=p.__private__.getCreationDate=function(v){var D=mt;return v==="jsDate"&&(D=rt(mt)),D};p.setCreationDate=function(v){return kt(v),this},p.getCreationDate=function(v){return I(v)};var O,E=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},R=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},Z=0,q=[],st=[],ct=0,At=[],Dt=[],K=!1,H=st,dt=function(){Z=0,ct=0,st=[],q=[],At=[],Rt=Mn(),_t=Mn()};p.__private__.setCustomOutputDestination=function(v){K=!0,H=v};var ut=function(v){K||(H=v)};p.__private__.resetCustomOutputDestination=function(){K=!1,H=st};var V=p.__private__.out=function(v){return v=v.toString(),ct+=v.length+1,H.push(v),H},Et=p.__private__.write=function(v){return V(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Lt=p.__private__.getArrayBuffer=function(v){for(var D=v.length,ot=new ArrayBuffer(D),vt=new Uint8Array(ot);D--;)vt[D]=v.charCodeAt(D);return ot},U=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return U};var C=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return C=L===P.ADVANCED?v/Yt:v,this};var $,wt=p.__private__.getFontSize=p.getFontSize=function(){return L===P.COMPAT?C:C*Yt},It=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return It=v,this},p.__private__.getR2L=p.getR2L=function(){return It};var Ft,Wt=p.__private__.setZoomMode=function(v){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))$=v;else if(isNaN(v)){if(D.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');$=v}else $=parseInt(v,10)};p.__private__.getZoomMode=function(){return $};var Xt,se=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ft=v};p.__private__.getPageMode=function(){return Ft};var Kt=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Xt=v};p.__private__.getLayoutMode=function(){return Xt},p.__private__.setDisplayMode=p.setDisplayMode=function(v,D,ot){return Wt(v),Kt(D),se(ot),this};var ie={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(ie).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ie[v]},p.__private__.getDocumentProperties=function(){return ie},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var D in ie)ie.hasOwnProperty(D)&&v[D]&&(ie[D]=v[D]);return this},p.__private__.setDocumentProperty=function(v,D){if(Object.keys(ie).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ie[v]=D};var fe,Yt,Ze,Ie,ts,Zt={},me={},es=[],en={},ho={},Tn={},Si={},or=null,Nn=0,Te=[],nn=new p3(p),fo=e.hotfixes||[],Rn={},Ui={},qi=[],xe=function v(D,ot,vt,Pt,Ot,Ht){if(!(this instanceof v))return new v(D,ot,vt,Pt,Ot,Ht);isNaN(D)&&(D=1),isNaN(ot)&&(ot=0),isNaN(vt)&&(vt=0),isNaN(Pt)&&(Pt=1),isNaN(Ot)&&(Ot=0),isNaN(Ht)&&(Ht=0),this._matrix=[D,ot,vt,Pt,Ot,Ht]};Object.defineProperty(xe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(xe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(xe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(xe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(xe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(xe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(xe.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(xe.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(xe.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(xe.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(xe.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(xe.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(xe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xe.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(v)},xe.prototype.multiply=function(v){var D=v.sx*this.sx+v.shy*this.shx,ot=v.sx*this.shy+v.shy*this.sy,vt=v.shx*this.sx+v.sy*this.shx,Pt=v.shx*this.shy+v.sy*this.sy,Ot=v.tx*this.sx+v.ty*this.shx+this.tx,Ht=v.tx*this.shy+v.ty*this.sy+this.ty;return new xe(D,ot,vt,Pt,Ot,Ht)},xe.prototype.decompose=function(){var v=this.sx,D=this.shy,ot=this.shx,vt=this.sy,Pt=this.tx,Ot=this.ty,Ht=Math.sqrt(v*v+D*D),ae=(v/=Ht)*ot+(D/=Ht)*vt;ot-=v*ae,vt-=D*ae;var we=Math.sqrt(ot*ot+vt*vt);return ae/=we,v*(vt/=we)<D*(ot/=we)&&(v=-v,D=-D,ae=-ae,Ht=-Ht),{scale:new xe(Ht,0,0,we,0,0),translate:new xe(1,0,0,1,Pt,Ot),rotate:new xe(v,D,-D,v,0,0),skew:new xe(1,0,ae,1,0,0)}},xe.prototype.toString=function(v){return this.join(" ")},xe.prototype.inversed=function(){var v=this.sx,D=this.shy,ot=this.shx,vt=this.sy,Pt=this.tx,Ot=this.ty,Ht=1/(v*vt-D*ot),ae=vt*Ht,we=-D*Ht,Be=-ot*Ht,Oe=v*Ht;return new xe(ae,we,Be,Oe,-ae*Pt-Be*Ot,-we*Pt-Oe*Ot)},xe.prototype.applyToPoint=function(v){var D=v.x*this.sx+v.y*this.shx+this.tx,ot=v.x*this.shy+v.y*this.sy+this.ty;return new yc(D,ot)},xe.prototype.applyToRectangle=function(v){var D=this.applyToPoint(v),ot=this.applyToPoint(new yc(v.x+v.w,v.y+v.h));return new ed(D.x,D.y,ot.x-D.x,ot.y-D.y)},xe.prototype.clone=function(){var v=this.sx,D=this.shy,ot=this.shx,vt=this.sy,Pt=this.tx,Ot=this.ty;return new xe(v,D,ot,vt,Pt,Ot)},p.Matrix=xe;var Ci=p.matrixMult=function(v,D){return D.multiply(v)},ns=new xe(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ns;var As=function(v,D){if(!ho[v]){var ot=(D instanceof Al?"Sh":"P")+(Object.keys(en).length+1).toString(10);D.id=ot,ho[v]=ot,en[ot]=D,nn.publish("addPattern",D)}};p.ShadingPattern=Al,p.TilingPattern=Yc,p.addShadingPattern=function(v,D){return W("addShadingPattern()"),As(v,D),this},p.beginTilingPattern=function(v){W("beginTilingPattern()"),Qf(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,D){W("endTilingPattern()"),D.stream=Dt[O].join(`
`),As(v,D),nn.publish("endTilingPattern",D),qi.pop().restore()};var Fn=p.__private__.newObject=function(){var v=Mn();return xt(v,!0),v},Mn=p.__private__.newObjectDeferred=function(){return Z++,q[Z]=function(){return ct},Z},xt=function(v,D){return D=typeof D=="boolean"&&D,q[v]=ct,D&&V(v+" 0 obj"),v},X=p.__private__.newAdditionalObject=function(){var v={objId:Mn(),content:""};return At.push(v),v},Rt=Mn(),_t=Mn(),re=p.__private__.decodeColorString=function(v){var D=v.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var ot=parseFloat(D[0]);D=[ot,ot,ot,"r"]}for(var vt="#",Pt=0;Pt<3;Pt++)vt+=("0"+Math.floor(255*parseFloat(D[Pt])).toString(16)).slice(-2);return vt},ge=p.__private__.encodeColorString=function(v){var D;typeof v=="string"&&(v={ch1:v});var ot=v.ch1,vt=v.ch2,Pt=v.ch3,Ot=v.ch4,Ht=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ot=="string"&&ot.charAt(0)!=="#"){var ae=new uE(ot);if(ae.ok)ot=ae.toHex();else if(!/^\d*\.?\d*$/.test(ot))throw new Error('Invalid color "'+ot+'" passed to jsPDF.encodeColorString.')}if(typeof ot=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ot)&&(ot="#"+ot[1]+ot[1]+ot[2]+ot[2]+ot[3]+ot[3]),typeof ot=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ot)){var we=parseInt(ot.substr(1),16);ot=we>>16&255,vt=we>>8&255,Pt=255&we}if(vt===void 0||Ot===void 0&&ot===vt&&vt===Pt)if(typeof ot=="string")D=ot+" "+Ht[0];else switch(v.precision){case 2:D=J(ot/255)+" "+Ht[0];break;case 3:default:D=_(ot/255)+" "+Ht[0]}else if(Ot===void 0||fn(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return D=["1.","1.","1.",Ht[1]].join(" ");if(typeof ot=="string")D=[ot,vt,Pt,Ht[1]].join(" ");else switch(v.precision){case 2:D=[J(ot/255),J(vt/255),J(Pt/255),Ht[1]].join(" ");break;default:case 3:D=[_(ot/255),_(vt/255),_(Pt/255),Ht[1]].join(" ")}}else if(typeof ot=="string")D=[ot,vt,Pt,Ot,Ht[2]].join(" ");else switch(v.precision){case 2:D=[J(ot),J(vt),J(Pt),J(Ot),Ht[2]].join(" ");break;case 3:default:D=[_(ot),_(vt),_(Pt),_(Ot),Ht[2]].join(" ")}return D},be=p.__private__.getFilters=function(){return o},Ce=p.__private__.putStream=function(v){var D=(v=v||{}).data||"",ot=v.filters||be(),vt=v.alreadyAppliedFilters||[],Pt=v.addLength1||!1,Ot=D.length,Ht=v.objectId,ae=function(Os){return Os};if(u!==null&&Ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ae=Ms.encryptor(Ht,0));var we={};ot===!0&&(ot=["FlateEncode"]);var Be=v.additionalKeyValues||[],Oe=(we=Ae.API.processDataByFilters!==void 0?Ae.API.processDataByFilters(D,ot):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(vt)?vt.join(" "):vt.toString());if(we.data.length!==0&&(Be.push({key:"Length",value:we.data.length}),Pt===!0&&Be.push({key:"Length1",value:Ot})),Oe.length!=0)if(Oe.split("/").length-1==1)Be.push({key:"Filter",value:Oe});else{Be.push({key:"Filter",value:"["+Oe+"]"});for(var Qe=0;Qe<Be.length;Qe+=1)if(Be[Qe].key==="DecodeParms"){for(var On=[],Bn=0;Bn<we.reverseChain.split("/").length-1;Bn+=1)On.push("null");On.push(Be[Qe].value),Be[Qe].value="["+On.join(" ")+"]"}}V("<<");for(var ss=0;ss<Be.length;ss++)V("/"+Be[ss].key+" "+Be[ss].value);V(">>"),we.data.length!==0&&(V("stream"),V(ae(we.data)),V("endstream"))},kn=p.__private__.putPage=function(v){var D=v.number,ot=v.data,vt=v.objId,Pt=v.contentsObjId;xt(vt,!0),V("<</Type /Page"),V("/Parent "+v.rootDictionaryObjId+" 0 R"),V("/Resources "+v.resourceDictionaryObjId+" 0 R"),V("/MediaBox ["+parseFloat(Y(v.mediaBox.bottomLeftX))+" "+parseFloat(Y(v.mediaBox.bottomLeftY))+" "+Y(v.mediaBox.topRightX)+" "+Y(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&V("/CropBox ["+Y(v.cropBox.bottomLeftX)+" "+Y(v.cropBox.bottomLeftY)+" "+Y(v.cropBox.topRightX)+" "+Y(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&V("/BleedBox ["+Y(v.bleedBox.bottomLeftX)+" "+Y(v.bleedBox.bottomLeftY)+" "+Y(v.bleedBox.topRightX)+" "+Y(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&V("/TrimBox ["+Y(v.trimBox.bottomLeftX)+" "+Y(v.trimBox.bottomLeftY)+" "+Y(v.trimBox.topRightX)+" "+Y(v.trimBox.topRightY)+"]"),v.artBox!==null&&V("/ArtBox ["+Y(v.artBox.bottomLeftX)+" "+Y(v.artBox.bottomLeftY)+" "+Y(v.artBox.topRightX)+" "+Y(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&V("/UserUnit "+v.userUnit),nn.publish("putPage",{objId:vt,pageContext:Te[D],pageNumber:D,page:ot}),V("/Contents "+Pt+" 0 R"),V(">>"),V("endobj");var Ot=ot.join(`
`);return L===P.ADVANCED&&(Ot+=`
Q`),xt(Pt,!0),Ce({data:Ot,filters:be(),objectId:Pt}),V("endobj"),vt},Ps=p.__private__.putPages=function(){var v,D,ot=[];for(v=1;v<=Nn;v++)Te[v].objId=Mn(),Te[v].contentsObjId=Mn();for(v=1;v<=Nn;v++)ot.push(kn({number:v,data:Dt[v],objId:Te[v].objId,contentsObjId:Te[v].contentsObjId,mediaBox:Te[v].mediaBox,cropBox:Te[v].cropBox,bleedBox:Te[v].bleedBox,trimBox:Te[v].trimBox,artBox:Te[v].artBox,userUnit:Te[v].userUnit,rootDictionaryObjId:Rt,resourceDictionaryObjId:_t}));xt(Rt,!0),V("<</Type /Pages");var vt="/Kids [";for(D=0;D<Nn;D++)vt+=ot[D]+" 0 R ";V(vt+"]"),V("/Count "+Nn),V(">>"),V("endobj"),nn.publish("postPutPages")},ki=function(v){nn.publish("putFont",{font:v,out:V,newObject:Fn,putStream:Ce}),v.isAlreadyPutted!==!0&&(v.objectNumber=Fn(),V("<<"),V("/Type /Font"),V("/BaseFont /"+Wc(v.postScriptName)),V("/Subtype /Type1"),typeof v.encoding=="string"&&V("/Encoding /"+v.encoding),V("/FirstChar 32"),V("/LastChar 255"),V(">>"),V("endobj"))},Lr=function(){for(var v in Zt)Zt.hasOwnProperty(v)&&(h===!1||h===!0&&g.hasOwnProperty(v))&&ki(Zt[v])},lc=function(v){v.objectNumber=Fn();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[Y(v.x),Y(v.y),Y(v.x+v.width),Y(v.y+v.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var ot=v.pages[1].join(`
`);Ce({data:ot,additionalKeyValues:D,objectId:v.objectNumber}),V("endobj")},cc=function(){for(var v in Rn)Rn.hasOwnProperty(v)&&lc(Rn[v])},Lf=function(v,D){var ot,vt=[],Pt=1/(D-1);for(ot=0;ot<1;ot+=Pt)vt.push(ot);if(vt.push(1),v[0].offset!=0){var Ot={offset:0,color:v[0].color};v.unshift(Ot)}if(v[v.length-1].offset!=1){var Ht={offset:1,color:v[v.length-1].color};v.push(Ht)}for(var ae="",we=0,Be=0;Be<vt.length;Be++){for(ot=vt[Be];ot>v[we+1].offset;)we++;var Oe=v[we].offset,Qe=(ot-Oe)/(v[we+1].offset-Oe),On=v[we].color,Bn=v[we+1].color;ae+=R(Math.round((1-Qe)*On[0]+Qe*Bn[0]).toString(16))+R(Math.round((1-Qe)*On[1]+Qe*Bn[1]).toString(16))+R(Math.round((1-Qe)*On[2]+Qe*Bn[2]).toString(16))}return ae.trim()},z0=function(v,D){D||(D=21);var ot=Fn(),vt=Lf(v.colors,D),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+D+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce({data:vt,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ot}),V("endobj"),v.objectNumber=Fn(),V("<< /ShadingType "+v.type),V("/ColorSpace /DeviceRGB");var Ot="/Coords ["+Y(parseFloat(v.coords[0]))+" "+Y(parseFloat(v.coords[1]))+" ";v.type===2?Ot+=Y(parseFloat(v.coords[2]))+" "+Y(parseFloat(v.coords[3])):Ot+=Y(parseFloat(v.coords[2]))+" "+Y(parseFloat(v.coords[3]))+" "+Y(parseFloat(v.coords[4]))+" "+Y(parseFloat(v.coords[5])),V(Ot+="]"),v.matrix&&V("/Matrix ["+v.matrix.toString()+"]"),V("/Function "+ot+" 0 R"),V("/Extend [true true]"),V(">>"),V("endobj")},U0=function(v,D){var ot=Mn(),vt=Fn();D.push({resourcesOid:ot,objectOid:vt}),v.objectNumber=vt;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+v.boundingBox.map(Y).join(" ")+"]"}),Pt.push({key:"XStep",value:Y(v.xStep)}),Pt.push({key:"YStep",value:Y(v.yStep)}),Pt.push({key:"Resources",value:ot+" 0 R"}),v.matrix&&Pt.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Ce({data:v.stream,additionalKeyValues:Pt,objectId:v.objectNumber}),V("endobj")},uc=function(v){var D;for(D in en)en.hasOwnProperty(D)&&(en[D]instanceof Al?z0(en[D]):en[D]instanceof Yc&&U0(en[D],v))},Mf=function(v){for(var D in v.objectNumber=Fn(),V("<<"),v)switch(D){case"opacity":V("/ca "+J(v[D]));break;case"stroke-opacity":V("/CA "+J(v[D]))}V(">>"),V("endobj")},q0=function(){var v;for(v in Tn)Tn.hasOwnProperty(v)&&Mf(Tn[v])},Hu=function(){for(var v in V("/XObject <<"),Rn)Rn.hasOwnProperty(v)&&Rn[v].objectNumber>=0&&V("/"+v+" "+Rn[v].objectNumber+" 0 R");nn.publish("putXobjectDict"),V(">>")},H0=function(){Ms.oid=Fn(),V("<<"),V("/Filter /Standard"),V("/V "+Ms.v),V("/R "+Ms.r),V("/U <"+Ms.toHexString(Ms.U)+">"),V("/O <"+Ms.toHexString(Ms.O)+">"),V("/P "+Ms.P),V(">>"),V("endobj")},Of=function(){for(var v in V("/Font <<"),Zt)Zt.hasOwnProperty(v)&&(h===!1||h===!0&&g.hasOwnProperty(v))&&V("/"+v+" "+Zt[v].objectNumber+" 0 R");V(">>")},W0=function(){if(Object.keys(en).length>0){for(var v in V("/Shading <<"),en)en.hasOwnProperty(v)&&en[v]instanceof Al&&en[v].objectNumber>=0&&V("/"+v+" "+en[v].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),V(">>")}},dc=function(v){if(Object.keys(en).length>0){for(var D in V("/Pattern <<"),en)en.hasOwnProperty(D)&&en[D]instanceof p.TilingPattern&&en[D].objectNumber>=0&&en[D].objectNumber<v&&V("/"+D+" "+en[D].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),V(">>")}},G0=function(){if(Object.keys(Tn).length>0){var v;for(v in V("/ExtGState <<"),Tn)Tn.hasOwnProperty(v)&&Tn[v].objectNumber>=0&&V("/"+v+" "+Tn[v].objectNumber+" 0 R");nn.publish("putGStateDict"),V(">>")}},Hn=function(v){xt(v.resourcesOid,!0),V("<<"),V("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Of(),W0(),dc(v.objectOid),G0(),Hu(),V(">>"),V("endobj")},Rf=function(){var v=[];Lr(),q0(),cc(),uc(v),nn.publish("putResources"),v.forEach(Hn),Hn({resourcesOid:_t,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},Ff=function(){nn.publish("putAdditionalObjects");for(var v=0;v<At.length;v++){var D=At[v];xt(D.objId,!0),V(D.content),V("endobj")}nn.publish("postPutAdditionalObjects")},Bf=function(v){me[v.fontName]=me[v.fontName]||{},me[v.fontName][v.fontStyle]=v.id},Wu=function(v,D,ot,vt,Pt){var Ot={id:"F"+(Object.keys(Zt).length+1).toString(10),postScriptName:v,fontName:D,fontStyle:ot,encoding:vt,isStandardFont:Pt||!1,metadata:{}};return nn.publish("addFont",{font:Ot,instance:this}),Zt[Ot.id]=Ot,Bf(Ot),Ot.id},K0=function(v){for(var D=0,ot=U.length;D<ot;D++){var vt=Wu.call(this,v[D][0],v[D][1],v[D][2],U[D][3],!0);h===!1&&(g[vt]=!0);var Pt=v[D][0].split("-");Bf({id:vt,fontName:Pt[0],fontStyle:Pt[1]||""})}nn.publish("addFonts",{fonts:Zt,dictionary:me})},ar=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(vt){var D=vt.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ot="Error in function "+D.split(`
`)[0].split("<")[0]+": "+vt.message;if(!Pe.console)throw new Error(ot);Pe.console.error(ot,vt),Pe.alert&&alert(ot)}},v.foo.bar=v,v.foo},hc=function(v,D){var ot,vt,Pt,Ot,Ht,ae,we,Be,Oe;if(Pt=(D=D||{}).sourceEncoding||"Unicode",Ht=D.outputEncoding,(D.autoencode||Ht)&&Zt[fe].metadata&&Zt[fe].metadata[Pt]&&Zt[fe].metadata[Pt].encoding&&(Ot=Zt[fe].metadata[Pt].encoding,!Ht&&Zt[fe].encoding&&(Ht=Zt[fe].encoding),!Ht&&Ot.codePages&&(Ht=Ot.codePages[0]),typeof Ht=="string"&&(Ht=Ot[Ht]),Ht)){for(we=!1,ae=[],ot=0,vt=v.length;ot<vt;ot++)(Be=Ht[v.charCodeAt(ot)])?ae.push(String.fromCharCode(Be)):ae.push(v[ot]),ae[ot].charCodeAt(0)>>8&&(we=!0);v=ae.join("")}for(ot=v.length;we===void 0&&ot!==0;)v.charCodeAt(ot-1)>>8&&(we=!0),ot--;if(!we)return v;for(ae=D.noBOM?[]:[254,255],ot=0,vt=v.length;ot<vt;ot++){if((Oe=(Be=v.charCodeAt(ot))>>8)>>8)throw new Error("Character at position "+ot+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ae.push(Oe),ae.push(Be-(Oe<<8))}return String.fromCharCode.apply(void 0,ae)},di=p.__private__.pdfEscape=p.pdfEscape=function(v,D){return hc(v,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gu=p.__private__.beginPage=function(v){Dt[++Nn]=[],Te[Nn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},$f(Nn),ut(Dt[O])},jf=function(v,D){var ot,vt,Pt;switch(n=D||n,typeof v=="string"&&(ot=x(v.toLowerCase()),Array.isArray(ot)&&(vt=ot[0],Pt=ot[1])),Array.isArray(v)&&(vt=v[0]*Yt,Pt=v[1]*Yt),isNaN(vt)&&(vt=i[0],Pt=i[1]),(vt>14400||Pt>14400)&&(vn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),vt=Math.min(14400,vt),Pt=Math.min(14400,Pt)),i=[vt,Pt],n.substr(0,1)){case"l":Pt>vt&&(i=[Pt,vt]);break;case"p":vt>Pt&&(i=[Pt,vt])}Gu(i),Wf(Qu),V(lr),Zu!==0&&V(Zu+" J"),td!==0&&V(td+" j"),nn.publish("addPage",{pageNumber:Nn})},Y0=function(v){v>0&&v<=Nn&&(Dt.splice(v,1),Te.splice(v,1),Nn--,O>Nn&&(O=Nn),this.setPage(O))},$f=function(v){v>0&&v<=Nn&&(O=v)},X0=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Dt.length-1},Vf=function(v,D,ot){var vt,Pt=void 0;return ot=ot||{},v=v!==void 0?v:Zt[fe].fontName,D=D!==void 0?D:Zt[fe].fontStyle,vt=v.toLowerCase(),me[vt]!==void 0&&me[vt][D]!==void 0?Pt=me[vt][D]:me[v]!==void 0&&me[v][D]!==void 0?Pt=me[v][D]:ot.disableWarning===!1&&vn.warn("Unable to look up font label for font '"+v+"', '"+D+"'. Refer to getFontList() for available fonts."),Pt||ot.noFallback||(Pt=me.times[D])==null&&(Pt=me.times.normal),Pt},Q0=p.__private__.putInfo=function(){var v=Fn(),D=function(vt){return vt};for(var ot in u!==null&&(D=Ms.encryptor(v,0)),V("<<"),V("/Producer ("+di(D("jsPDF "+Ae.version))+")"),ie)ie.hasOwnProperty(ot)&&ie[ot]&&V("/"+ot.substr(0,1).toUpperCase()+ot.substr(1)+" ("+di(D(ie[ot]))+")");V("/CreationDate ("+di(D(mt))+")"),V(">>"),V("endobj")},Ku=p.__private__.putCatalog=function(v){var D=(v=v||{}).rootDictionaryObjId||Rt;switch(Fn(),V("<<"),V("/Type /Catalog"),V("/Pages "+D+" 0 R"),$||($="fullwidth"),$){case"fullwidth":V("/OpenAction [3 0 R /FitH null]");break;case"fullheight":V("/OpenAction [3 0 R /FitV null]");break;case"fullpage":V("/OpenAction [3 0 R /Fit]");break;case"original":V("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ot=""+$;ot.substr(ot.length-1)==="%"&&($=parseInt($)/100),typeof $=="number"&&V("/OpenAction [3 0 R /XYZ null null "+J($)+"]")}switch(Xt||(Xt="continuous"),Xt){case"continuous":V("/PageLayout /OneColumn");break;case"single":V("/PageLayout /SinglePage");break;case"two":case"twoleft":V("/PageLayout /TwoColumnLeft");break;case"tworight":V("/PageLayout /TwoColumnRight")}Ft&&V("/PageMode /"+Ft),nn.publish("putCatalog"),V(">>"),V("endobj")},J0=p.__private__.putTrailer=function(){V("trailer"),V("<<"),V("/Size "+(Z+1)),V("/Root "+Z+" 0 R"),V("/Info "+(Z-1)+" 0 R"),u!==null&&V("/Encrypt "+Ms.oid+" 0 R"),V("/ID [ <"+ht+"> <"+ht+"> ]"),V(">>")},Z0=p.__private__.putHeader=function(){V("%PDF-"+y),V("%ºß¬à")},t1=p.__private__.putXRef=function(){var v="0000000000";V("xref"),V("0 "+(Z+1)),V("0000000000 65535 f ");for(var D=1;D<=Z;D++)typeof q[D]=="function"?V((v+q[D]()).slice(-10)+" 00000 n "):q[D]!==void 0?V((v+q[D]).slice(-10)+" 00000 n "):V("0000000000 00000 n ")},po=p.__private__.buildDocument=function(){dt(),ut(st),nn.publish("buildDocument"),Z0(),Ps(),Ff(),Rf(),u!==null&&H0(),Q0(),Ku();var v=ct;return t1(),J0(),V("startxref"),V(""+v),V("%%EOF"),ut(Dt[O]),st.join(`
`)},fc=p.__private__.getBlob=function(v){return new Blob([Lt(v)],{type:"application/pdf"})},pc=p.output=p.__private__.output=ar(function(v,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",v){case void 0:return po();case"save":p.save(D.filename);break;case"arraybuffer":return Lt(po());case"blob":return fc(po());case"bloburi":case"bloburl":if(Pe.URL!==void 0&&typeof Pe.URL.createObjectURL=="function")return Pe.URL&&Pe.URL.createObjectURL(fc(po()))||void 0;vn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ot="",vt=po();try{ot=oy(vt)}catch{ot=oy(unescape(encodeURIComponent(vt)))}return"data:application/pdf;filename="+D.filename+";base64,"+ot;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pe)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(Pt=D.pdfObjectUrl,Ot="");var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",ae=Pe.open();return ae!==null&&ae.document.write(Ht),ae}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pe)==="[object Window]"){var we='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',Be=Pe.open();if(Be!==null){Be.document.write(we);var Oe=this;Be.document.documentElement.querySelector("#pdfViewer").onload=function(){Be.document.title=D.filename,Be.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Oe.output("bloburl"))}}return Be}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',On=Pe.open();if(On!==null&&(On.document.write(Qe),On.document.title=D.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return Pe.document.location.href=this.output("datauristring",D);default:return null}}),zf=function(v){return Array.isArray(fo)===!0&&fo.indexOf(v)>-1};switch(s){case"pt":Yt=1;break;case"mm":Yt=72/25.4;break;case"cm":Yt=72/2.54;break;case"in":Yt=72;break;case"px":Yt=zf("px_scaling")==1?.75:96/72;break;case"pc":case"em":Yt=12;break;case"ex":Yt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Yt=s}var Ms=null;kt(),tt();var e1=function(v){return u!==null?Ms.encryptor(v,0):function(D){return D}},Uf=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Te[v].objId,pageNumber:v,pageContext:Te[v]}},Le=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in Te)if(Te[D].objId===v)break;return Uf(D)},n1=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Te[O].objId,pageNumber:O,pageContext:Te[O]}};p.addPage=function(){return jf.apply(this,arguments),this},p.setPage=function(){return $f.apply(this,arguments),ut.call(this,Dt[O]),this},p.insertPage=function(v){return this.addPage(),this.movePage(O,v),this},p.movePage=function(v,D){var ot,vt;if(v>D){ot=Dt[v],vt=Te[v];for(var Pt=v;Pt>D;Pt--)Dt[Pt]=Dt[Pt-1],Te[Pt]=Te[Pt-1];Dt[D]=ot,Te[D]=vt,this.setPage(D)}else if(v<D){ot=Dt[v],vt=Te[v];for(var Ot=v;Ot<D;Ot++)Dt[Ot]=Dt[Ot+1],Te[Ot]=Te[Ot+1];Dt[D]=ot,Te[D]=vt,this.setPage(D)}return this},p.deletePage=function(){return Y0.apply(this,arguments),this},p.__private__.text=p.text=function(v,D,ot,vt,Pt){var Ot,Ht,ae,we,Be,Oe,Qe,On,Bn,ss=(vt=vt||{}).scope||this;if(typeof v=="number"&&typeof D=="number"&&(typeof ot=="string"||Array.isArray(ot))){var Os=ot;ot=D,D=v,v=Os}if(arguments[3]instanceof xe?(W("The transform parameter of text() with a Matrix value"),Bn=Pt):(ae=arguments[4],we=arguments[5],fn(Qe=arguments[3])==="object"&&Qe!==null||(typeof ae=="string"&&(we=ae,ae=null),typeof Qe=="string"&&(we=Qe,Qe=null),typeof Qe=="number"&&(ae=Qe,Qe=null),vt={flags:Qe,angle:ae,align:we})),isNaN(D)||isNaN(ot)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return ss;var gs="",cr=!1,Ai=typeof vt.lineHeightFactor=="number"?vt.lineHeightFactor:sl,Rr=ss.internal.scaleFactor;function Jf(wn){return wn=wn.split("	").join(Array(vt.TabLen||9).join(" ")),di(wn,Qe)}function rd(wn){for(var xn,Gn=wn.concat(),hs=[],bo=Gn.length;bo--;)typeof(xn=Gn.shift())=="string"?hs.push(xn):Array.isArray(wn)&&(xn.length===1||xn[1]===void 0&&xn[2]===void 0)?hs.push(xn[0]):hs.push([xn[0],xn[1],xn[2]]);return hs}function od(wn,xn){var Gn;if(typeof wn=="string")Gn=xn(wn)[0];else if(Array.isArray(wn)){for(var hs,bo,pd=wn.concat(),Ic=[],sp=pd.length;sp--;)typeof(hs=pd.shift())=="string"?Ic.push(xn(hs)[0]):Array.isArray(hs)&&typeof hs[0]=="string"&&(bo=xn(hs[0],hs[1],hs[2]),Ic.push([bo[0],bo[1],bo[2]]));Gn=Ic}return Gn}var wc=!1,ad=!0;if(typeof v=="string")wc=!0;else if(Array.isArray(v)){var ld=v.concat();Ht=[];for(var xc,Es=ld.length;Es--;)(typeof(xc=ld.shift())!="string"||Array.isArray(xc)&&typeof xc[0]!="string")&&(ad=!1);wc=ad}if(wc===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var _c=C/ss.internal.scaleFactor,Sc=_c*(Ai-1);switch(vt.baseline){case"bottom":ot-=Sc;break;case"top":ot+=_c-Sc;break;case"hanging":ot+=_c-2*Sc;break;case"middle":ot+=_c/2-Sc}if((Oe=vt.maxWidth||0)>0&&(typeof v=="string"?v=ss.splitTextToSize(v,Oe):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(wn,xn){return wn.concat(ss.splitTextToSize(xn,Oe))},[]))),Ot={text:v,x:D,y:ot,options:vt,mutex:{pdfEscape:di,activeFontKey:fe,fonts:Zt,activeFontSize:C}},nn.publish("preProcessText",Ot),v=Ot.text,ae=(vt=Ot.options).angle,!(Bn instanceof xe)&&ae&&typeof ae=="number"){ae*=Math.PI/180,vt.rotationDirection===0&&(ae=-ae),L===P.ADVANCED&&(ae=-ae);var Cc=Math.cos(ae),cd=Math.sin(ae);Bn=new xe(Cc,cd,-cd,Cc,0,0)}else ae&&ae instanceof xe&&(Bn=ae);L!==P.ADVANCED||Bn||(Bn=ns),(Be=vt.charSpace||vc)!==void 0&&(gs+=Y(A(Be))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=vt.horizontalScale)!==void 0&&(gs+=Y(100*On)+` Tz
`),vt.lang;var hi=-1,h1=vt.renderingMode!==void 0?vt.renderingMode:vt.stroke,ud=ss.internal.getCurrentPageInfo().pageContext;switch(h1){case 0:case!1:case"fill":hi=0;break;case 1:case!0:case"stroke":hi=1;break;case 2:case"fillThenStroke":hi=2;break;case 3:case"invisible":hi=3;break;case 4:case"fillAndAddForClipping":hi=4;break;case 5:case"strokeAndAddPathForClipping":hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hi=6;break;case 7:case"addToPathForClipping":hi=7}var Zf=ud.usedRenderingMode!==void 0?ud.usedRenderingMode:-1;hi!==-1?gs+=hi+` Tr
`:Zf!==-1&&(gs+=`0 Tr
`),hi!==-1&&(ud.usedRenderingMode=hi),we=vt.align||"left";var Hi,kc=C*Ai,tp=ss.internal.pageSize.getWidth(),ep=Zt[fe];Be=vt.charSpace||vc,Oe=vt.maxWidth||0,Qe=Object.assign({autoencode:!0,noBOM:!0},vt.flags);var Jo=[],ol=function(wn){return ss.getStringUnitWidth(wn,{font:ep,charSpace:Be,fontSize:C,doKerning:!1})*C/Rr};if(Object.prototype.toString.call(v)==="[object Array]"){var fi;Ht=rd(v),we!=="left"&&(Hi=Ht.map(ol));var si,Zo=0;if(we==="right"){D-=Hi[0],v=[],Es=Ht.length;for(var mo=0;mo<Es;mo++)mo===0?(si=Or(D),fi=go(ot)):(si=A(Zo-Hi[mo]),fi=-kc),v.push([Ht[mo],si,fi]),Zo=Hi[mo]}else if(we==="center"){D-=Hi[0]/2,v=[],Es=Ht.length;for(var vo=0;vo<Es;vo++)vo===0?(si=Or(D),fi=go(ot)):(si=A((Zo-Hi[vo])/2),fi=-kc),v.push([Ht[vo],si,fi]),Zo=Hi[vo]}else if(we==="left"){v=[],Es=Ht.length;for(var Ac=0;Ac<Es;Ac++)v.push(Ht[Ac])}else if(we==="justify"&&ep.encoding==="Identity-H"){v=[],Es=Ht.length,Oe=Oe!==0?Oe:tp;for(var yo=0,Wn=0;Wn<Es;Wn++)if(fi=Wn===0?go(ot):-kc,si=Wn===0?Or(D):yo,Wn<Es-1){var dd=A((Oe-Hi[Wn])/(Ht[Wn].split(" ").length-1)),ii=Ht[Wn].split(" ");v.push([ii[0]+" ",si,fi]),yo=0;for(var Wi=1;Wi<ii.length;Wi++){var Pc=(ol(ii[Wi-1]+" "+ii[Wi])-ol(ii[Wi]))*Rr+dd;Wi==ii.length-1?v.push([ii[Wi],Pc,0]):v.push([ii[Wi]+" ",Pc,0]),yo-=Pc}}else v.push([Ht[Wn],si,fi]);v.push(["",yo,0])}else{if(we!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Es=Ht.length,Oe=Oe!==0?Oe:tp,Wn=0;Wn<Es;Wn++)fi=Wn===0?go(ot):-kc,si=Wn===0?Or(D):0,Wn<Es-1?Jo.push(Y(A((Oe-Hi[Wn])/(Ht[Wn].split(" ").length-1)))):Jo.push(0),v.push([Ht[Wn],si,fi])}}var np=typeof vt.R2L=="boolean"?vt.R2L:It;np===!0&&(v=od(v,function(wn,xn,Gn){return[wn.split("").reverse().join(""),xn,Gn]})),Ot={text:v,x:D,y:ot,options:vt,mutex:{pdfEscape:di,activeFontKey:fe,fonts:Zt,activeFontSize:C}},nn.publish("postProcessText",Ot),v=Ot.text,cr=Ot.mutex.isHex||!1;var hd=Zt[fe].encoding;hd!=="WinAnsiEncoding"&&hd!=="StandardEncoding"||(v=od(v,function(wn,xn,Gn){return[Jf(wn),xn,Gn]})),Ht=rd(v),v=[];for(var al,ll,ta,cl=0,Ec=1,ul=Array.isArray(Ht[0])?Ec:cl,ea="",fd=function(wn,xn,Gn){var hs="";return Gn instanceof xe?(Gn=typeof vt.angle=="number"?Ci(Gn,new xe(1,0,0,1,wn,xn)):Ci(new xe(1,0,0,1,wn,xn),Gn),L===P.ADVANCED&&(Gn=Ci(new xe(1,0,0,-1,0,0),Gn)),hs=Gn.join(" ")+` Tm
`):hs=Y(wn)+" "+Y(xn)+` Td
`,hs},Gi=0;Gi<Ht.length;Gi++){switch(ea="",ul){case Ec:ta=(cr?"<":"(")+Ht[Gi][0]+(cr?">":")"),al=parseFloat(Ht[Gi][1]),ll=parseFloat(Ht[Gi][2]);break;case cl:ta=(cr?"<":"(")+Ht[Gi]+(cr?">":")"),al=Or(D),ll=go(ot)}Jo!==void 0&&Jo[Gi]!==void 0&&(ea=Jo[Gi]+` Tw
`),Gi===0?v.push(ea+fd(al,ll,Bn)+ta):ul===cl?v.push(ea+ta):ul===Ec&&v.push(ea+fd(al,ll,Bn)+ta)}v=ul===cl?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Ki=`BT
/`;return Ki+=fe+" "+C+` Tf
`,Ki+=Y(C*Ai)+` TL
`,Ki+=il+`
`,Ki+=gs,Ki+=v,V(Ki+="ET"),g[fe]=!0,ss};var s1=p.__private__.clip=p.clip=function(v){return V(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return s1("evenodd")},p.__private__.discardPath=p.discardPath=function(){return V("n"),this};var Mr=p.__private__.isValidStyle=function(v){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(D=!0),D};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Mr(v)&&(c=v),this};var qf=p.__private__.getStyle=p.getStyle=function(v){var D=c;switch(v){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=v}return D},Hf=p.close=function(){return V("h"),this};p.stroke=function(){return V("S"),this},p.fill=function(v){return gc("f",v),this},p.fillEvenOdd=function(v){return gc("f*",v),this},p.fillStroke=function(v){return gc("B",v),this},p.fillStrokeEvenOdd=function(v){return gc("B*",v),this};var gc=function(v,D){fn(D)==="object"?r1(D,v):V(v)},Yu=function(v){v===null||L===P.ADVANCED&&v===void 0||(v=qf(v),V(v))};function i1(v,D,ot,vt,Pt){var Ot=new Yc(D||this.boundingBox,ot||this.xStep,vt||this.yStep,this.gState,Pt||this.matrix);Ot.stream=this.stream;var Ht=v+"$$"+this.cloneIndex+++"$$";return As(Ht,Ot),Ot}var r1=function(v,D){var ot=ho[v.key],vt=en[ot];if(vt instanceof Al)V("q"),V(o1(D)),vt.gState&&p.setGState(vt.gState),V(v.matrix.toString()+" cm"),V("/"+ot+" sh"),V("Q");else if(vt instanceof Yc){var Pt=new xe(1,0,0,-1,0,Qo());v.matrix&&(Pt=Pt.multiply(v.matrix||ns),ot=i1.call(vt,v.key,v.boundingBox,v.xStep,v.yStep,Pt).id),V("q"),V("/Pattern cs"),V("/"+ot+" scn"),vt.gState&&p.setGState(vt.gState),V(D),V("Q")}},o1=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Xu=p.moveTo=function(v,D){return V(Y(A(v))+" "+Y(et(D))+" m"),this},nl=p.lineTo=function(v,D){return V(Y(A(v))+" "+Y(et(D))+" l"),this},Yo=p.curveTo=function(v,D,ot,vt,Pt,Ot){return V([Y(A(v)),Y(et(D)),Y(A(ot)),Y(et(vt)),Y(A(Pt)),Y(et(Ot)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,D,ot,vt,Pt){if(isNaN(v)||isNaN(D)||isNaN(ot)||isNaN(vt)||!Mr(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return L===P.COMPAT?this.lines([[ot-v,vt-D]],v,D,[1,1],Pt||"S"):this.lines([[ot-v,vt-D]],v,D,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,D,ot,vt,Pt,Ot){var Ht,ae,we,Be,Oe,Qe,On,Bn,ss,Os,gs,cr;if(typeof v=="number"&&(cr=ot,ot=D,D=v,v=cr),vt=vt||[1,1],Ot=Ot||!1,isNaN(D)||isNaN(ot)||!Array.isArray(v)||!Array.isArray(vt)||!Mr(Pt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xu(D,ot),Ht=vt[0],ae=vt[1],Be=v.length,Os=D,gs=ot,we=0;we<Be;we++)(Oe=v[we]).length===2?(Os=Oe[0]*Ht+Os,gs=Oe[1]*ae+gs,nl(Os,gs)):(Qe=Oe[0]*Ht+Os,On=Oe[1]*ae+gs,Bn=Oe[2]*Ht+Os,ss=Oe[3]*ae+gs,Os=Oe[4]*Ht+Os,gs=Oe[5]*ae+gs,Yo(Qe,On,Bn,ss,Os,gs));return Ot&&Hf(),Yu(Pt),this},p.path=function(v){for(var D=0;D<v.length;D++){var ot=v[D],vt=ot.c;switch(ot.op){case"m":Xu(vt[0],vt[1]);break;case"l":nl(vt[0],vt[1]);break;case"c":Yo.apply(this,vt);break;case"h":Hf()}}return this},p.__private__.rect=p.rect=function(v,D,ot,vt,Pt){if(isNaN(v)||isNaN(D)||isNaN(ot)||isNaN(vt)||!Mr(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return L===P.COMPAT&&(vt=-vt),V([Y(A(v)),Y(et(D)),Y(A(ot)),Y(A(vt)),"re"].join(" ")),Yu(Pt),this},p.__private__.triangle=p.triangle=function(v,D,ot,vt,Pt,Ot,Ht){if(isNaN(v)||isNaN(D)||isNaN(ot)||isNaN(vt)||isNaN(Pt)||isNaN(Ot)||!Mr(Ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ot-v,vt-D],[Pt-ot,Ot-vt],[v-Pt,D-Ot]],v,D,[1,1],Ht,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,D,ot,vt,Pt,Ot,Ht){if(isNaN(v)||isNaN(D)||isNaN(ot)||isNaN(vt)||isNaN(Pt)||isNaN(Ot)||!Mr(Ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ae=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*ot),Ot=Math.min(Ot,.5*vt),this.lines([[ot-2*Pt,0],[Pt*ae,0,Pt,Ot-Ot*ae,Pt,Ot],[0,vt-2*Ot],[0,Ot*ae,-Pt*ae,Ot,-Pt,Ot],[2*Pt-ot,0],[-Pt*ae,0,-Pt,-Ot*ae,-Pt,-Ot],[0,2*Ot-vt],[0,-Ot*ae,Pt*ae,-Ot,Pt,-Ot]],v+Pt,D,[1,1],Ht,!0),this},p.__private__.ellipse=p.ellipse=function(v,D,ot,vt,Pt){if(isNaN(v)||isNaN(D)||isNaN(ot)||isNaN(vt)||!Mr(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*ot,Ht=4/3*(Math.SQRT2-1)*vt;return Xu(v+ot,D),Yo(v+ot,D-Ht,v+Ot,D-vt,v,D-vt),Yo(v-Ot,D-vt,v-ot,D-Ht,v-ot,D),Yo(v-ot,D+Ht,v-Ot,D+vt,v,D+vt),Yo(v+Ot,D+vt,v+ot,D+Ht,v+ot,D),Yu(Pt),this},p.__private__.circle=p.circle=function(v,D,ot,vt){if(isNaN(v)||isNaN(D)||isNaN(ot)||!Mr(vt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,D,ot,ot,vt)},p.setFont=function(v,D,ot){return ot&&(D=pt(D,ot)),fe=Vf(v,D,{disableWarning:!1}),this};var a1=p.__private__.getFont=p.getFont=function(){return Zt[Vf.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,D,ot={};for(v in me)if(me.hasOwnProperty(v))for(D in ot[v]=[],me[v])me[v].hasOwnProperty(D)&&ot[v].push(D);return ot},p.addFont=function(v,D,ot,vt,Pt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(ot=pt(ot,vt)),Pt=Pt||"Identity-H",Wu.call(this,v,D,ot,Pt)};var sl,Qu=e.lineWidth||.200025,mc=p.__private__.getLineWidth=p.getLineWidth=function(){return Qu},Wf=p.__private__.setLineWidth=p.setLineWidth=function(v){return Qu=v,V(Y(A(v))+" w"),this};p.__private__.setLineDash=Ae.API.setLineDash=Ae.API.setLineDashPattern=function(v,D){if(v=v||[],D=D||0,isNaN(D)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(ot){return Y(A(ot))}).join(" "),D=Y(A(D)),V("["+v+"] "+D+" d"),this};var Gf=p.__private__.getLineHeight=p.getLineHeight=function(){return C*sl};p.__private__.getLineHeight=p.getLineHeight=function(){return C*sl};var Kf=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(sl=v),this},Yf=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return sl};Kf(e.lineHeight);var Or=p.__private__.getHorizontalCoordinate=function(v){return A(v)},go=p.__private__.getVerticalCoordinate=function(v){return L===P.ADVANCED?v:Te[O].mediaBox.topRightY-Te[O].mediaBox.bottomLeftY-A(v)},l1=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return Y(Or(v))},Xo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return Y(go(v))},lr=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return re(lr)},p.__private__.setStrokeColor=p.setDrawColor=function(v,D,ot,vt){return lr=ge({ch1:v,ch2:D,ch3:ot,ch4:vt,pdfColorType:"draw",precision:2}),V(lr),this};var Ju=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return re(Ju)},p.__private__.setFillColor=p.setFillColor=function(v,D,ot,vt){return Ju=ge({ch1:v,ch2:D,ch3:ot,ch4:vt,pdfColorType:"fill",precision:2}),V(Ju),this};var il=e.textColor||"0 g",c1=p.__private__.getTextColor=p.getTextColor=function(){return re(il)};p.__private__.setTextColor=p.setTextColor=function(v,D,ot,vt){return il=ge({ch1:v,ch2:D,ch3:ot,ch4:vt,pdfColorType:"text",precision:3}),this};var vc=e.charSpace,u1=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(vc||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vc=v,this};var Zu=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var D=p.CapJoinStyles[v];if(D===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zu=D,V(D+" J"),this};var td=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var D=p.CapJoinStyles[v];if(D===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return td=D,V(D+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return V(Y(A(v))+" M"),this},p.GState=vm,p.setGState=function(v){(v=typeof v=="string"?Tn[Si[v]]:Xf(null,v)).equals(or)||(V("/"+v.id+" gs"),or=v)};var Xf=function(v,D){if(!v||!Si[v]){var ot=!1;for(var vt in Tn)if(Tn.hasOwnProperty(vt)&&Tn[vt].equals(D)){ot=!0;break}if(ot)D=Tn[vt];else{var Pt="GS"+(Object.keys(Tn).length+1).toString(10);Tn[Pt]=D,D.id=Pt}return v&&(Si[v]=D.id),nn.publish("addGState",D),D}};p.addGState=function(v,D){return Xf(v,D),this},p.saveGraphicsState=function(){return V("q"),es.push({key:fe,size:C,color:il}),this},p.restoreGraphicsState=function(){V("Q");var v=es.pop();return fe=v.key,C=v.size,il=v.color,or=null,this},p.setCurrentTransformationMatrix=function(v){return V(v.toString()+" cm"),this},p.comment=function(v){return V("#"+v),this};var yc=function(v,D){var ot=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ot},set:function(Ot){isNaN(Ot)||(ot=parseFloat(Ot))}});var vt=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return vt},set:function(Ot){isNaN(Ot)||(vt=parseFloat(Ot))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(Ot){Pt=Ot.toString()}}),this},ed=function(v,D,ot,vt){yc.call(this,v,D),this.type="rect";var Pt=ot||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(Ht){isNaN(Ht)||(Pt=parseFloat(Ht))}});var Ot=vt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(Ht){isNaN(Ht)||(Ot=parseFloat(Ht))}}),this},nd=function(){this.page=Nn,this.currentPage=O,this.pages=Dt.slice(0),this.pagesContext=Te.slice(0),this.x=Ze,this.y=Ie,this.matrix=ts,this.width=rl(O),this.height=Qo(O),this.outputDestination=H,this.id="",this.objectNumber=-1};nd.prototype.restore=function(){Nn=this.page,O=this.currentPage,Te=this.pagesContext,Dt=this.pages,Ze=this.x,Ie=this.y,ts=this.matrix,sd(O,this.width),id(O,this.height),H=this.outputDestination};var Qf=function(v,D,ot,vt,Pt){qi.push(new nd),Nn=O=0,Dt=[],Ze=v,Ie=D,ts=Pt,Gu([ot,vt])},d1=function(v){if(Ui[v])qi.pop().restore();else{var D=new nd,ot="Xo"+(Object.keys(Rn).length+1).toString(10);D.id=ot,Ui[v]=ot,Rn[ot]=D,nn.publish("addFormObject",D),qi.pop().restore()}};for(var bc in p.beginFormObject=function(v,D,ot,vt,Pt){return Qf(v,D,ot,vt,Pt),this},p.endFormObject=function(v){return d1(v),this},p.doFormObject=function(v,D){var ot=Rn[Ui[v]];return V("q"),V(D.toString()+" cm"),V("/"+ot.id+" Do"),V("Q"),this},p.getFormObject=function(v){var D=Rn[Ui[v]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},p.save=function(v,D){return v=v||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(Sl(fc(po()),v),typeof Sl.unload=="function"&&Pe.setTimeout&&setTimeout(Sl.unload,911),this):new Promise(function(ot,vt){try{var Pt=Sl(fc(po()),v);typeof Sl.unload=="function"&&Pe.setTimeout&&setTimeout(Sl.unload,911),ot(Pt)}catch(Ot){vt(Ot.message)}})},Ae.API)Ae.API.hasOwnProperty(bc)&&(bc==="events"&&Ae.API.events.length?function(v,D){var ot,vt,Pt;for(Pt=D.length-1;Pt!==-1;Pt--)ot=D[Pt][0],vt=D[Pt][1],v.subscribe.apply(v,[ot].concat(typeof vt=="function"?[vt]:vt))}(nn,Ae.API.events):p[bc]=Ae.API[bc]);var rl=p.getPageWidth=function(v){return(Te[v=v||O].mediaBox.topRightX-Te[v].mediaBox.bottomLeftX)/Yt},sd=p.setPageWidth=function(v,D){Te[v].mediaBox.topRightX=D*Yt+Te[v].mediaBox.bottomLeftX},Qo=p.getPageHeight=function(v){return(Te[v=v||O].mediaBox.topRightY-Te[v].mediaBox.bottomLeftY)/Yt},id=p.setPageHeight=function(v,D){Te[v].mediaBox.topRightY=D*Yt+Te[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:di,getStyle:qf,getFont:a1,getFontSize:wt,getCharSpace:u1,getTextColor:c1,getLineHeight:Gf,getLineHeightFactor:Yf,getLineWidth:mc,write:Et,getHorizontalCoordinate:Or,getVerticalCoordinate:go,getCoordinateString:l1,getVerticalCoordinateString:Xo,collections:{},newObject:Fn,newAdditionalObject:X,newObjectDeferred:Mn,newObjectDeferredBegin:xt,getFilters:be,putStream:Ce,events:nn,scaleFactor:Yt,pageSize:{getWidth:function(){return rl(O)},setWidth:function(v){sd(O,v)},getHeight:function(){return Qo(O)},setHeight:function(v){id(O,v)}},encryptionOptions:u,encryption:Ms,getEncryptor:e1,output:pc,getNumberOfPages:X0,pages:Dt,out:V,f2:J,f3:_,getPageInfo:Uf,getPageInfoByObjId:Le,getCurrentPageInfo:n1,getPDFVersion:w,Point:yc,Rectangle:ed,Matrix:xe,hasHotfix:zf},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return rl(O)},set:function(v){sd(O,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Qo(O)},set:function(v){id(O,v)},enumerable:!0,configurable:!0}),K0.call(p,U),fe="F1",jf(i,n),nn.publish("initialized"),p}Hc.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Hc.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hc.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Hc.prototype.processOwnerPassword=function(e,t){return ly(ay(t).substr(0,5),e)},Hc.prototype.encryptor=function(e,t){var n=ay(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return ly(n,s)}},vm.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||fn(e)!==fn(this))return!1;var s=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&s--;return s===0},Ae.API={events:[]},Ae.version="3.0.1";var $n=Ae.API,k5=1,ac=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bc=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Re=function(e){return e.toFixed(2)},fa=function(e){return e.toFixed(5)};$n.__acroform__={};var _i=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},g3=function(e){return e*k5},Vr=function(e){var t=new pE,n=ue.internal.getHeight(e)||0,s=ue.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Re(s)),Number(Re(n))],t},qG=$n.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},HG=$n.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},WG=$n.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Xn=$n.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return WG(e,t-1)},Qn=$n.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qG(e,t-1)},Jn=$n.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HG(e,t-1)},GG=$n.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,i=e[0],r=e[1],o=e[2],a=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=s(r+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=s(r)||0,[Number(Re(l.lowerLeft_X)),Number(Re(l.lowerLeft_Y)),Number(Re(l.upperRight_X)),Number(Re(l.upperRight_Y))]},KG=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,s=cy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Re(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Vr(e);return r.scope=e.scope,r.stream=t.join(`
`),r}},cy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(_){return _.split(`
`)}):i.map(function(_){return[_]});var r=n,o=ue.internal.getHeight(e)||0;o=o<0?-o:o;var a=ue.internal.getWidth(e)||0;a=a<0?-a:a;var l=function(_,A,Q){if(_+1<i.length){var et=A+" "+i[_+1][0];return Jp(et,e,Q).width<=a-4}return!1};r++;t:for(;r>0;){t="",r--;var c,u,h=Jp("3",e,r).height,g=e.multiline?o-r:(o-h)/2,p=g+=2,y=0,w=0,S=0;if(r<=0){t=`(...) Tj
`,t+="% Width of Text: "+Jp(t,e,r=12).width+", FieldWidth:"+a+`
`;break}for(var x="",P=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var M=!1;if(i[L].length!==1&&S!==i[L].length-1){if((h+2)*(P+2)+2>o)continue t;x+=i[L][S],M=!0,w=L,L--}else{x=(x+=i[L][S]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var F=parseInt(L),pt=l(F,x,r),Y=L>=i.length-1;if(pt&&!Y){x+=" ",S=0;continue}if(pt||Y){if(Y)w=F;else if(e.multiline&&(h+2)*(P+2)+2>o)continue t}else{if(!e.multiline||(h+2)*(P+2)+2>o)continue t;w=F}}for(var W="",it=y;it<=w;it++){var J=i[it];if(e.multiline){if(it===w){W+=J[S]+" ",S=(S+1)%J.length;continue}if(it===y){W+=J[J.length-1]+" ";continue}}W+=J[0]+" "}switch(W=W.substr(W.length-1)==" "?W.substr(0,W.length-1):W,u=Jp(W,e,r).width,e.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}t+=Re(c)+" "+Re(p)+` Td
`,t+="("+ac(W)+`) Tj
`,t+=-Re(c)+` 0 Td
`,p=-(r+2),u=0,y=M?w:w+1,P++,x=""}break}return s.text=t,s.fontSize=r,s},Jp=function(e,t,n){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},YG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},XG=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===n.type&&s.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},QG=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var s=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),fn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[s]}},JG=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Nr.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(YG)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");k5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new gE,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var r=s[i];r.objId=void 0,r.hasAnnotation&&XG(r,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(s,i){var r=!s;for(var o in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var a=s[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=GG(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ue.createDefaultAppearanceStream(a),fn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=KG(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var g in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(g)){var p=a.appearanceStreamContent[g];if(h+="/"+g+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,a)),h+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,a)),h+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}r&&QG(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},fE=$n.__acroform__.arrayToPdfArray=function(e,t,n){var s=function(o){return o};if(Array.isArray(e)){for(var i="[",r=0;r<e.length;r++)switch(r!==0&&(i+=" "),fn(e[r])){case"boolean":case"number":case"object":i+=e[r].toString();break;case"string":e[r].substr(0,1)!=="/"?(t!==void 0&&n&&(s=n.internal.getEncryptor(t)),i+="("+ac(s(e[r].toString()))+")"):i+=e[r].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},L2=function(e,t,n){var s=function(i){return i};return t!==void 0&&n&&(s=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ac(s(e))+")"},Xr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xr.prototype.toString=function(){return this.objId+" 0 R"},Xr.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Xr.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var s=t[n],i=this[s];i&&(Array.isArray(i)?e.push({key:s,value:fE(i,this.objId,this.scope)}):i instanceof Xr?(i.scope=this.scope,e.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:s,value:i}))}return e};var pE=function(){Xr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};_i(pE,Xr);var gE=function(){Xr.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(s){return s};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ac(n(e))+")"}},set:function(n){e=n}})};_i(gE,Xr);var Nr=function e(){Xr.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xn(t,3)},set:function(x){x?this.F=Qn(t,3):this.F=Jn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(x){s=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(x){s[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(x){s[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(x){s[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(x){s[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof ym)return;r="FieldObject"+e.FieldNum++}var x=function(P){return P};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ac(x(r))+")"},set:function(x){r=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(x){r=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/k5:c},set:function(x){c=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ym||this instanceof Vl))return L2(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=x}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof ws?g:L2(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=this instanceof ws?x:x.substr(0,1)==="("?Bc(x.substr(1,x.length-2)):Bc(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ws?Bc(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof ws?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ws?p:L2(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof ws?x:x.substr(0,1)==="("?Bc(x.substr(1,x.length-2)):Bc(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ws?Bc(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof ws?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(x){y=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,1)},set:function(x){x?this.Ff=Qn(this.Ff,1):this.Ff=Jn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,2)},set:function(x){x?this.Ff=Qn(this.Ff,2):this.Ff=Jn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,3)},set:function(x){x?this.Ff=Qn(this.Ff,3):this.Ff=Jn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');S=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(S){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};_i(Nr,Xr);var fu=function(){Nr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fE(t,this.objId,this.scope)},set:function(n){var s,i;i=[],typeof(s=n)=="string"&&(i=function(r,o,a){a||(a=1);for(var l,c=[];l=o.exec(r);)c.push(l[a]);return c}(s,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,s){for(s=s||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,18)},set:function(n){n?this.Ff=Qn(this.Ff,18):this.Ff=Jn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Qn(this.Ff,19):this.Ff=Jn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,20)},set:function(n){n?(this.Ff=Qn(this.Ff,20),t.sort()):this.Ff=Jn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,22)},set:function(n){n?this.Ff=Qn(this.Ff,22):this.Ff=Jn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,23)},set:function(n){n?this.Ff=Qn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,27)},set:function(n){n?this.Ff=Qn(this.Ff,27):this.Ff=Jn(this.Ff,27)}}),this.hasAppearanceStream=!1};_i(fu,Nr);var pu=function(){fu.call(this),this.fontName="helvetica",this.combo=!1};_i(pu,fu);var gu=function(){pu.call(this),this.combo=!0};_i(gu,pu);var kg=function(){gu.call(this),this.edit=!0};_i(kg,gu);var ws=function(){Nr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,15)},set:function(n){n?this.Ff=Qn(this.Ff,15):this.Ff=Jn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,16)},set:function(n){n?this.Ff=Qn(this.Ff,16):this.Ff=Jn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,17)},set:function(n){n?this.Ff=Qn(this.Ff,17):this.Ff=Jn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,26)},set:function(n){n?this.Ff=Qn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(r){return r};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,i=[];for(s in i.push("<<"),t)i.push("/"+s+" ("+ac(n(t[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){fn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};_i(ws,Nr);var Ag=function(){ws.call(this),this.pushButton=!0};_i(Ag,ws);var mu=function(){ws.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};_i(mu,ws);var ym=function(){var e,t;Nr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var r,o=[];for(r in o.push("<<"),s)o.push("/"+r+" ("+ac(i(s[r]))+")");return o.push(">>"),o.join(`
`)},set:function(i){fn(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ue.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_i(ym,Nr),mu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},mu.prototype.createOption=function(e){var t=new ym;return t.Parent=this,t.optionName=e,this.Kids.push(t),ZG.call(this.scope,t),t};var Pg=function(){ws.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ue.CheckBox.createAppearanceStream()};_i(Pg,ws);var Vl=function(){Nr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,13)},set:function(t){t?this.Ff=Qn(this.Ff,13):this.Ff=Jn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,21)},set:function(t){t?this.Ff=Qn(this.Ff,21):this.Ff=Jn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,23)},set:function(t){t?this.Ff=Qn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,24)},set:function(t){t?this.Ff=Qn(this.Ff,24):this.Ff=Jn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,25)},set:function(t){t?this.Ff=Qn(this.Ff,25):this.Ff=Jn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,26)},set:function(t){t?this.Ff=Qn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_i(Vl,Nr);var Eg=function(){Vl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xn(this.Ff,14)},set:function(e){e?this.Ff=Qn(this.Ff,14):this.Ff=Jn(this.Ff,14)}}),this.password=!0};_i(Eg,Vl);var ue={CheckBox:{createAppearanceStream:function(){return{N:{On:ue.CheckBox.YesNormal},D:{On:ue.CheckBox.YesPushDown,Off:ue.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),r=cy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Re(ue.internal.getWidth(e))+" "+Re(ue.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+s+" "+Re(r.fontSize)+" Tf "+i),n.push("BT"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Vr(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=[],r=ue.internal.getHeight(e),o=ue.internal.getWidth(e),a=cy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Re(o)+" "+Re(r)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Re(o-1)+" "+Re(r-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Re(a.fontSize)+" Tf "+s),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Re(ue.internal.getWidth(e))+" "+Re(ue.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ue.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ue.RadioButton.Circle.YesNormal,t.D[e]=ue.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Vr(e);t.scope=e.scope;var n=[],s=ue.internal.getWidth(e)<=ue.internal.getHeight(e)?ue.internal.getWidth(e)/4:ue.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=ue.internal.Bezier_C,r=Number((s*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+fa(ue.internal.getWidth(e)/2)+" "+fa(ue.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),n.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),n.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),n.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=[],s=ue.internal.getWidth(e)<=ue.internal.getHeight(e)?ue.internal.getWidth(e)/4:ue.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*ue.internal.Bezier_C).toFixed(5)),o=Number((s*ue.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+fa(ue.internal.getWidth(e)/2)+" "+fa(ue.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+fa(ue.internal.getWidth(e)/2)+" "+fa(ue.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=[],s=ue.internal.getWidth(e)<=ue.internal.getHeight(e)?ue.internal.getWidth(e)/4:ue.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),r=Number((i*ue.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+fa(ue.internal.getWidth(e)/2)+" "+fa(ue.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ue.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ue.RadioButton.Cross.YesNormal,t.D[e]=ue.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Vr(e);t.scope=e.scope;var n=[],s=ue.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Re(ue.internal.getWidth(e)-2)+" "+Re(ue.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Re(s.x1.x)+" "+Re(s.x1.y)+" m"),n.push(Re(s.x2.x)+" "+Re(s.x2.y)+" l"),n.push(Re(s.x4.x)+" "+Re(s.x4.y)+" m"),n.push(Re(s.x3.x)+" "+Re(s.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=ue.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Re(ue.internal.getWidth(e))+" "+Re(ue.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Re(ue.internal.getWidth(e)-2)+" "+Re(ue.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Re(n.x1.x)+" "+Re(n.x1.y)+" m"),s.push(Re(n.x2.x)+" "+Re(n.x2.y)+" l"),s.push(Re(n.x4.x)+" "+Re(n.x4.y)+" m"),s.push(Re(n.x3.x)+" "+Re(n.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Vr(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Re(ue.internal.getWidth(e))+" "+Re(ue.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};ue.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ue.internal.getWidth(e),n=ue.internal.getHeight(e),s=Math.min(t,n);return{x1:{x:(t-s)/2,y:(n-s)/2+s},x2:{x:(t-s)/2+s,y:(n-s)/2},x3:{x:(t-s)/2,y:(n-s)/2},x4:{x:(t-s)/2+s,y:(n-s)/2+s}}}},ue.internal.getWidth=function(e){var t=0;return fn(e)==="object"&&(t=g3(e.Rect[2])),t},ue.internal.getHeight=function(e){var t=0;return fn(e)==="object"&&(t=g3(e.Rect[3])),t};var ZG=$n.addField=function(e){if(JG(this,e),!(e instanceof Nr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};$n.AcroFormChoiceField=fu,$n.AcroFormListBox=pu,$n.AcroFormComboBox=gu,$n.AcroFormEditBox=kg,$n.AcroFormButton=ws,$n.AcroFormPushButton=Ag,$n.AcroFormRadioButton=mu,$n.AcroFormCheckBox=Pg,$n.AcroFormTextField=Vl,$n.AcroFormPasswordField=Eg,$n.AcroFormAppearance=ue,$n.AcroForm={ChoiceField:fu,ListBox:pu,ComboBox:gu,EditBox:kg,Button:ws,PushButton:Ag,RadioButton:mu,CheckBox:Pg,TextField:Vl,PasswordField:Eg,Appearance:ue},Ae.AcroForm={ChoiceField:fu,ListBox:pu,ComboBox:gu,EditBox:kg,Button:ws,PushButton:Ag,RadioButton:mu,CheckBox:Pg,TextField:Vl,PasswordField:Eg,Appearance:ue};Ae.AcroForm;function mE(e){return e.reduce(function(t,n,s){return t[n]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(_,A){var Q,et,mt,ht,gt,tt=t;if((A=A||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(pt(_))for(gt in n)for(mt=n[gt],Q=0;Q<mt.length;Q+=1){for(ht=!0,et=0;et<mt[Q].length;et+=1)if(mt[Q][et]!==void 0&&mt[Q][et]!==_[et]){ht=!1;break}if(ht===!0){tt=gt;break}}else for(gt in n)for(mt=n[gt],Q=0;Q<mt.length;Q+=1){for(ht=!0,et=0;et<mt[Q].length;et+=1)if(mt[Q][et]!==void 0&&mt[Q][et]!==_.charCodeAt(et)){ht=!1;break}if(ht===!0){tt=gt;break}}return tt===t&&A!==t&&(tt=A),tt},i=function _(A){for(var Q=this.internal.write,et=this.internal.putStream,mt=(0,this.internal.getFilters)();mt.indexOf("FlateEncode")!==-1;)mt.splice(mt.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var ht=[];if(ht.push({key:"Type",value:"/XObject"}),ht.push({key:"Subtype",value:"/Image"}),ht.push({key:"Width",value:A.width}),ht.push({key:"Height",value:A.height}),A.colorSpace===S.INDEXED?ht.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(ht.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===S.DEVICE_CMYK&&ht.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ht.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&ht.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var gt="",tt=0,T=A.transparency.length;tt<T;tt++)gt+=A.transparency[tt]+" "+A.transparency[tt]+" ";ht.push({key:"Mask",value:"["+gt+"]"})}A.sMask!==void 0&&ht.push({key:"SMask",value:A.objectId+1+" 0 R"});var rt=A.filter!==void 0?["/"+A.filter]:void 0;if(et({data:A.data,additionalKeyValues:ht,alreadyAppliedFilters:rt,objectId:A.objectId}),Q("endobj"),"sMask"in A&&A.sMask!==void 0){var kt="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,I={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:kt,data:A.sMask};"filter"in A&&(I.filter=A.filter),_.call(this,I)}if(A.colorSpace===S.INDEXED){var O=this.internal.newObject();et({data:W(new Uint8Array(A.palette)),objectId:O}),Q("endobj")}},r=function(){var _=this.internal.collections.addImage_images;for(var A in _)i.call(this,_[A])},o=function(){var _,A=this.internal.collections.addImage_images,Q=this.internal.write;for(var et in A)Q("/I"+(_=A[et]).index,_.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var _=this.internal.collections.addImage_images;return a.call(this),_},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(_){return typeof e["process"+_.toUpperCase()]=="function"},h=function(_){return fn(_)==="object"&&_.nodeType===1},g=function(_,A){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var Q=""+_.getAttribute("src");if(Q.indexOf("data:image/")===0)return fh(unescape(Q).split("base64,").pop());var et=e.loadFile(Q,!0);if(et!==void 0)return et}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var mt;switch(A){case"PNG":mt="image/png";break;case"WEBP":mt="image/webp";break;case"JPEG":case"JPG":default:mt="image/jpeg"}return fh(_.toDataURL(mt,1).split("base64,").pop())}},p=function(_){var A=this.internal.collections.addImage_images;if(A){for(var Q in A)if(_===A[Q].alias)return A[Q]}},y=function(_,A,Q){return _||A||(_=-96,A=-96),_<0&&(_=-1*Q.width*72/_/this.internal.scaleFactor),A<0&&(A=-1*Q.height*72/A/this.internal.scaleFactor),_===0&&(_=A*Q.width/Q.height),A===0&&(A=_*Q.height/Q.width),[_,A]},w=function(_,A,Q,et,mt,ht){var gt=y.call(this,Q,et,mt),tt=this.internal.getCoordinateString,T=this.internal.getVerticalCoordinateString,rt=l.call(this);if(Q=gt[0],et=gt[1],rt[mt.index]=mt,ht){ht*=Math.PI/180;var kt=Math.cos(ht),I=Math.sin(ht),O=function(R){return R.toFixed(4)},E=[O(kt),O(I),O(-1*I),O(kt),0,0,"cm"]}this.internal.write("q"),ht?(this.internal.write([1,"0","0",1,tt(_),T(A+et),"cm"].join(" ")),this.internal.write(E.join(" ")),this.internal.write([tt(Q),"0","0",tt(et),"0","0","cm"].join(" "))):this.internal.write([tt(Q),"0","0",tt(et),tt(_),T(A+et),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+mt.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=e.__addimage__.sHashCode=function(_){var A,Q,et=0;if(typeof _=="string")for(Q=_.length,A=0;A<Q;A++)et=(et<<5)-et+_.charCodeAt(A),et|=0;else if(pt(_))for(Q=_.byteLength/2,A=0;A<Q;A++)et=(et<<5)-et+_[A],et|=0;return et},L=e.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var A=!0;return _.length===0&&(A=!1),_.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(A=!1),A},M=e.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var A=_.indexOf(",");return A<0?null:_.substring(0,A).trim().endsWith("base64")?_.substring(A+1):null},F=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(_){return F()&&_ instanceof ArrayBuffer};var pt=e.__addimage__.isArrayBufferView=function(_){return F()&&typeof Uint32Array<"u"&&(_ instanceof Int8Array||_ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)},Y=e.__addimage__.binaryStringToUint8Array=function(_){for(var A=_.length,Q=new Uint8Array(A),et=0;et<A;et++)Q[et]=_.charCodeAt(et);return Q},W=e.__addimage__.arrayBufferToBinaryString=function(_){for(var A="",Q=pt(_)?_:new Uint8Array(_),et=0;et<Q.length;et+=8192)A+=String.fromCharCode.apply(null,Q.subarray(et,et+8192));return A};e.addImage=function(){var _,A,Q,et,mt,ht,gt,tt,T;if(typeof arguments[1]=="number"?(A=t,Q=arguments[1],et=arguments[2],mt=arguments[3],ht=arguments[4],gt=arguments[5],tt=arguments[6],T=arguments[7]):(A=arguments[1],Q=arguments[2],et=arguments[3],mt=arguments[4],ht=arguments[5],gt=arguments[6],tt=arguments[7],T=arguments[8]),fn(_=arguments[0])==="object"&&!h(_)&&"imageData"in _){var rt=_;_=rt.imageData,A=rt.format||A||t,Q=rt.x||Q||0,et=rt.y||et||0,mt=rt.w||rt.width||mt,ht=rt.h||rt.height||ht,gt=rt.alias||gt,tt=rt.compression||tt,T=rt.rotation||rt.angle||T}var kt=this.internal.getFilters();if(tt===void 0&&kt.indexOf("FlateEncode")!==-1&&(tt="SLOW"),isNaN(Q)||isNaN(et))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var I=it.call(this,_,A,gt,tt);return w.call(this,Q,et,mt,ht,I,T),this};var it=function(_,A,Q,et){var mt,ht,gt;if(typeof _=="string"&&s(_)===t){_=unescape(_);var tt=J(_,!1);(tt!==""||(tt=e.loadFile(_,!0))!==void 0)&&(_=tt)}if(h(_)&&(_=g(_,A)),A=s(_,A),!u(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((gt=Q)==null||gt.length===0)&&(Q=function(T){return typeof T=="string"||pt(T)?P(T):pt(T.data)?P(T.data):null}(_)),(mt=p.call(this,Q))||(F()&&(_ instanceof Uint8Array||A==="RGBA"||(ht=_,_=Y(_))),mt=this["process"+A.toUpperCase()](_,c.call(this),Q,function(T){return T&&typeof T=="string"&&(T=T.toUpperCase()),T in e.image_compression?T:x.NONE}(et),ht)),!mt)throw new Error("An unknown error occurred whilst processing the image.");return mt},J=e.__addimage__.convertBase64ToBinaryString=function(_,A){A=typeof A!="boolean"||A;var Q,et="";if(typeof _=="string"){var mt;Q=(mt=M(_))!==null&&mt!==void 0?mt:_;try{et=fh(Q)}catch(ht){if(A)throw L(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ht.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};e.getImageProperties=function(_){var A,Q,et="";if(h(_)&&(_=g(_)),typeof _=="string"&&s(_)===t&&((et=J(_,!1))===""&&(et=e.loadFile(_)||""),_=et),Q=s(_),!u(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!F()||_ instanceof Uint8Array||(_=Y(_)),!(A=this["process"+Q.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=Q,A}})(Ae.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ae.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var s,i,r,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((s=c[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){s=c[g];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),P=s.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+p(x(s.contents))+")",r+=" /Popup "+S.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+p(x(P))+") >>",w.content=r;var L=w.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+L,s.open&&(r+=" /Open true"),r+=" >>",S.content=r,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+o(s.bounds.x)+" "+a(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var M=s.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(s.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(s.options.name){var F=this.annotations._nameMap[s.options.name];s.options.pageNumber=F.page,s.options.top=F.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",r="",s.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(s.options.url))+") >>";else if(s.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,r+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var pt=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),r+=" /XYZ "+s.options.left+" "+pt+" "+s.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var s=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":s.pageContext.annotations.push(n)}},e.link=function(n,s,i,r,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(s),w:l(n+i),h:c(s+r)},options:o,type:"link"})},e.textWithLink=function(n,s,i,r){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){a=r.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,s,i,r),i+=.2*c,r.align==="center"&&(s-=l/2),r.align==="right"&&(s-=l),this.link(s,i-c,a,o,r),l},e.getTextWidth=function(n){var s=this.internal.getFontSize();return this.getStringUnitWidth(n)*s/this.internal.scaleFactor}}(Ae.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var r=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=e.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&r(w)&&t[w.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&r(w)&&t[w.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&r(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&r(w)&&t[w.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&r(w)&&t[w.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(w){var S=0,x=n,P="",L=0;for(S=0;S<w.length;S+=1)x[w.charCodeAt(S)]!==void 0?(L++,typeof(x=x[w.charCodeAt(S)])=="number"&&(P+=String.fromCharCode(x),x=n,L=0),S===w.length-1&&(x=n,P+=w.charAt(S-(L-1)),S-=L-1,L=0)):(x=n,P+=w.charAt(S-L),S-=L,L=0);return P};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&s[w.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(w,S,x){return o(w)?r(w)===!1?-1:!c(w)||!o(S)&&!o(x)||!o(x)&&a(S)||a(w)&&!o(S)||a(w)&&l(S)||a(w)&&a(S)?0:u(w)&&o(S)&&!a(S)&&o(x)&&c(x)?3:a(w)||!o(x)?1:2:-1},p=function(w){var S=0,x=0,P=0,L="",M="",F="",pt=(w=w||"").split("\\s+"),Y=[];for(S=0;S<pt.length;S+=1){for(Y.push(""),x=0;x<pt[S].length;x+=1)L=pt[S][x],M=pt[S][x-1],F=pt[S][x+1],o(L)?(P=g(L,M,F),Y[S]+=P!==-1?String.fromCharCode(t[L.charCodeAt(0)][P]):L):Y[S]+=L;Y[S]=h(Y[S])}return Y.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(S)){var P=0;for(x=[],P=0;P<S.length;P+=1)Array.isArray(S[P])?x.push([p(S[P][0]),S[P][1],S[P][2]]):x.push([p(S[P])]);w=x}else w=p(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",y])}(Ae.API),Ae.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(a){r=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,s){var i;if((n=n||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ae.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(w){y=w}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return s.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){s.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,w=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(L,M){return L.concat(S.splitTextToSize(M,x))},[])):l=Array.isArray(l)?l:[l];for(var P=0;P<l.length;P++)p<(w=this.getStringUnitWidth(l[P],{font:h})*u)&&(p=w);return p!==0&&(y=l.length),{w:p/=g,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,h,g){if(s.call(this),!u)throw new Error("No data for PDF table.");var p,y,w,S,x=[],P=[],L=[],M={},F={},pt=[],Y=[],W=(g=g||{}).autoSize||!1,it=g.printHeaders!==!1,J=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,_=g.margins||Object.assign({width:this.getPageWidth()},t),A=typeof g.padding=="number"?g.padding:3,Q=g.headerBackgroundColor||"#c8c8c8",et=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=it,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=et,this.setFontSize(J),h==null)P=x=Object.keys(u[0]),L=x.map(function(){return"left"});else if(Array.isArray(h)&&fn(h[0])==="object")for(x=h.map(function(rt){return rt.name}),P=h.map(function(rt){return rt.prompt||rt.name||""}),L=h.map(function(rt){return rt.align||"left"}),p=0;p<h.length;p+=1)F[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(P=x=h,L=x.map(function(){return"left"}));if(W||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<x.length;p+=1){for(M[S=x[p]]=u.map(function(rt){return rt[S]}),this.setFont(void 0,"bold"),pt.push(this.getTextDimensions(P[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=M[S],this.setFont(void 0,"normal"),w=0;w<y.length;w+=1)pt.push(this.getTextDimensions(y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[S]=Math.max.apply(null,pt)+A+A,pt=[]}if(it){var mt={};for(p=0;p<x.length;p+=1)mt[x[p]]={},mt[x[p]].text=P[p],mt[x[p]].align=L[p];var ht=a.call(this,mt,F);Y=x.map(function(rt){return new r(l,c,F[rt],ht,mt[rt].text,void 0,mt[rt].align)}),this.setTableHeaderRow(Y),this.printHeaderRow(1,!1)}var gt=h.reduce(function(rt,kt){return rt[kt.name]=kt.align,rt},{});for(p=0;p<u.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:u[p]},this);var tt=a.call(this,u[p],F);for(w=0;w<x.length;w+=1){var T=u[p][x[w]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:w,data:T},this),o.call(this,new r(l,c,F[x[w]],tt,T,p+2,gt[x[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/g+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};e.setTableHeaderRow=function(l){s.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,g.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(Ae.API);var vE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uy=mE(yE),bE=[100,200,300,400,500,600,700,800,900],tK=mE(bE);function dy(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(r){return vE[r=r||"normal"]?r:"normal"}(e.style),s=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(r){return typeof uy[r=r||"normal"]=="number"?r:"normal"}(e.stretch);return{family:t,style:n,weight:s,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,s].join(" ")}}}function m3(e,t,n,s){var i;for(i=n;i>=0&&i<t.length;i+=s)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=s)if(e[t[i]])return e[t[i]]}var eK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},v3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function y3(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function nK(e,t,n){for(var s=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},eK,n.genericFontFamilies||{}),r=null,o=null,a=0;a<t.length;++a)if(i[(r=dy(t[a])).family]&&(r.family=i[r.family]),e.hasOwnProperty(r.family)){o=e[r.family];break}if(!(o=o||e[s]))throw new Error("Could not find a font-family for the rule '"+y3(r)+"' and default family '"+s+"'.");if(o=function(l,c){if(c[l])return c[l];var u=uy[l],h=u<=uy.normal?-1:1,g=m3(c,yE,u,h);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(r.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=vE[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(r.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=tK[l],h=m3(c,bE,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(r.weight,o)))throw new Error("Failed to resolve a font for the rule '"+y3(r)+"'.");return o}function b3(e){return e.trimLeft()}function sK(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function iK(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Zp,w3,x3,M2=["times"];(function(e){var t,n,s,i,r,o,a,l,c,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=I;Object.defineProperty(this,"pdf",{get:function(){return O}});var E=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return E},set:function(ut){E=!!ut}});var R=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return R},set:function(ut){R=!!ut}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(ut){isNaN(ut)||(Z=ut)}});var q=0;Object.defineProperty(this,"posY",{get:function(){return q},set:function(ut){isNaN(ut)||(q=ut)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ut){var V;typeof ut=="number"?V=[ut,ut,ut,ut]:((V=new Array(4))[0]=ut[0],V[1]=ut.length>=2?ut[1]:V[0],V[2]=ut.length>=3?ut[2]:V[0],V[3]=ut.length>=4?ut[3]:V[1]),c.margin=V}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(ut){st=ut}});var ct=0;Object.defineProperty(this,"lastBreak",{get:function(){return ct},set:function(ut){ct=ut}});var At=[];Object.defineProperty(this,"pageBreaks",{get:function(){return At},set:function(ut){At=ut}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ut){ut instanceof u&&(c=ut)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ut){c.path=ut}});var Dt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Dt},set:function(ut){Dt=ut}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ut){var V;V=g(ut),this.ctx.fillStyle=V.style,this.ctx.isFillTransparent=V.a===0,this.ctx.fillOpacity=V.a,this.pdf.setFillColor(V.r,V.g,V.b,{a:V.a}),this.pdf.setTextColor(V.r,V.g,V.b,{a:V.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ut){var V=g(ut);this.ctx.strokeStyle=V.style,this.ctx.isStrokeTransparent=V.a===0,this.ctx.strokeOpacity=V.a,V.a===0?this.pdf.setDrawColor(255,255,255):(V.a,this.pdf.setDrawColor(V.r,V.g,V.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ut){["butt","round","square"].indexOf(ut)!==-1&&(this.ctx.lineCap=ut,this.pdf.setLineCap(ut))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ut){isNaN(ut)||(this.ctx.lineWidth=ut,this.pdf.setLineWidth(ut))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ut){["bevel","round","miter"].indexOf(ut)!==-1&&(this.ctx.lineJoin=ut,this.pdf.setLineJoin(ut))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ut){isNaN(ut)||(this.ctx.miterLimit=ut,this.pdf.setMiterLimit(ut))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ut){this.ctx.textBaseline=ut}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ut){["right","end","center","left","start"].indexOf(ut)!==-1&&(this.ctx.textAlign=ut)}});var K=null;function H(ut,V){if(K===null){var Et=function(Lt){var U=[];return Object.keys(Lt).forEach(function(C){Lt[C].forEach(function($){var wt=null;switch($){case"bold":wt={family:C,weight:"bold"};break;case"italic":wt={family:C,style:"italic"};break;case"bolditalic":wt={family:C,weight:"bold",style:"italic"};break;case"":case"normal":wt={family:C}}wt!==null&&(wt.ref={name:C,style:$},U.push(wt))})}),U}(ut.getFontList());K=function(Lt){for(var U={},C=0;C<Lt.length;++C){var $=dy(Lt[C]),wt=$.family,It=$.stretch,Ft=$.style,Wt=$.weight;U[wt]=U[wt]||{},U[wt][It]=U[wt][It]||{},U[wt][It][Ft]=U[wt][It][Ft]||{},U[wt][It][Ft][Wt]=$}return U}(Et.concat(V))}return K}var dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return dt},set:function(ut){K=null,dt=ut}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ut){var V;if(this.ctx.font=ut,(V=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ut))!==null){var Et=V[1];V[2];var Lt=V[3],U=V[4];V[5];var C=V[6],$=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(U)[2];U=Math.floor($==="px"?parseFloat(U)*this.pdf.internal.scaleFactor:$==="em"?parseFloat(U)*this.pdf.getFontSize():parseFloat(U)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(U);var wt=function(ie){var fe,Yt,Ze=[],Ie=ie.trim();if(Ie==="")return M2;if(Ie in v3)return[v3[Ie]];for(;Ie!=="";){switch(Yt=null,fe=(Ie=b3(Ie)).charAt(0)){case'"':case"'":Yt=sK(Ie.substring(1),fe);break;default:Yt=iK(Ie)}if(Yt===null||(Ze.push(Yt[0]),(Ie=b3(Yt[1]))!==""&&Ie.charAt(0)!==","))return M2;Ie=Ie.replace(/^,/,"")}return Ze}(C);if(this.fontFaces){var It=nK(H(this.pdf,this.fontFaces),wt.map(function(ie){return{family:ie,stretch:"normal",weight:Lt,style:Et}}));this.pdf.setFont(It.ref.name,It.ref.style)}else{var Ft="";(Lt==="bold"||parseInt(Lt,10)>=700||Et==="bold")&&(Ft="bold"),Et==="italic"&&(Ft+="italic"),Ft.length===0&&(Ft="normal");for(var Wt="",Xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},se=0;se<wt.length;se++){if(this.pdf.internal.getFont(wt[se],Ft,{noFallback:!0,disableWarning:!0})!==void 0){Wt=wt[se];break}if(Ft==="bolditalic"&&this.pdf.internal.getFont(wt[se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=wt[se],Ft="bold";else if(this.pdf.internal.getFont(wt[se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=wt[se],Ft="normal";break}}if(Wt===""){for(var Kt=0;Kt<wt.length;Kt++)if(Xt[wt[Kt]]){Wt=Xt[wt[Kt]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,Ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ut){this.ctx.globalCompositeOperation=ut}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ut){this.ctx.globalAlpha=ut}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ut){this.ctx.lineDashOffset=ut,kt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ut){this.ctx.lineDash=ut,kt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ut){this.ctx.ignoreClearRect=!!ut}})};h.prototype.setLineDash=function(I){this.lineDash=I},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){M.call(this,"fill",!1)},h.prototype.stroke=function(){M.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(I,O){if(isNaN(I)||isNaN(O))throw vn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var E=this.ctx.transform.applyToPoint(new o(I,O));this.path.push({type:"mt",x:E.x,y:E.y}),this.ctx.lastPoint=new o(I,O)},h.prototype.closePath=function(){var I=new o(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&fn(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){I=new o(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},h.prototype.lineTo=function(I,O){if(isNaN(I)||isNaN(O))throw vn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var E=this.ctx.transform.applyToPoint(new o(I,O));this.path.push({type:"lt",x:E.x,y:E.y}),this.ctx.lastPoint=new o(E.x,E.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},h.prototype.quadraticCurveTo=function(I,O,E,R){if(isNaN(E)||isNaN(R)||isNaN(I)||isNaN(O))throw vn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new o(E,R)),q=this.ctx.transform.applyToPoint(new o(I,O));this.path.push({type:"qct",x1:q.x,y1:q.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},h.prototype.bezierCurveTo=function(I,O,E,R,Z,q){if(isNaN(Z)||isNaN(q)||isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R))throw vn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new o(Z,q)),ct=this.ctx.transform.applyToPoint(new o(I,O)),At=this.ctx.transform.applyToPoint(new o(E,R));this.path.push({type:"bct",x1:ct.x,y1:ct.y,x2:At.x,y2:At.y,x:st.x,y:st.y}),this.ctx.lastPoint=new o(st.x,st.y)},h.prototype.arc=function(I,O,E,R,Z,q){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R)||isNaN(Z))throw vn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(q=!!q,!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new o(I,O));I=st.x,O=st.y;var ct=this.ctx.transform.applyToPoint(new o(0,E)),At=this.ctx.transform.applyToPoint(new o(0,0));E=Math.sqrt(Math.pow(ct.x-At.x,2)+Math.pow(ct.y-At.y,2))}Math.abs(Z-R)>=2*Math.PI&&(R=0,Z=2*Math.PI),this.path.push({type:"arc",x:I,y:O,radius:E,startAngle:R,endAngle:Z,counterclockwise:q})},h.prototype.arcTo=function(I,O,E,R,Z){throw new Error("arcTo not implemented.")},h.prototype.rect=function(I,O,E,R){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R))throw vn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,O),this.lineTo(I+E,O),this.lineTo(I+E,O+R),this.lineTo(I,O+R),this.lineTo(I,O),this.lineTo(I+E,O),this.lineTo(I,O)},h.prototype.fillRect=function(I,O,E,R){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R))throw vn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,O,E,R),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},h.prototype.strokeRect=function(I,O,E,R){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R))throw vn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(I,O,E,R),this.stroke())},h.prototype.clearRect=function(I,O,E,R){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R))throw vn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,O,E,R))},h.prototype.save=function(I){I=typeof I!="boolean"||I;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var R=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=R}},h.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,E=0;E<this.pdf.internal.getNumberOfPages();E++)this.pdf.setPage(E+1),this.pdf.internal.out("Q");this.pdf.setPage(O),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var O,E,R,Z;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))O=0,E=0,R=0,Z=0;else{var q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(q!==null)O=parseInt(q[1]),E=parseInt(q[2]),R=parseInt(q[3]),Z=1;else if((q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)O=parseInt(q[1]),E=parseInt(q[2]),R=parseInt(q[3]),Z=parseFloat(q[4]);else{if(Z=1,typeof I=="string"&&I.charAt(0)!=="#"){var st=new uE(I);I=st.ok?st.toHex():"#000000"}I.length===4?(O=I.substring(1,2),O+=O,E=I.substring(2,3),E+=E,R=I.substring(3,4),R+=R):(O=I.substring(1,3),E=I.substring(3,5),R=I.substring(5,7)),O=parseInt(O,16),E=parseInt(E,16),R=parseInt(R,16)}}return{r:O,g:E,b:R,a:Z,style:I}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(I,O,E,R){if(isNaN(O)||isNaN(E)||typeof I!="string")throw vn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(R=isNaN(R)?void 0:R,!p.call(this)){var Z=tt(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;A.call(this,{text:I,x:O,y:E,scale:q,angle:Z,align:this.textAlign,maxWidth:R})}},h.prototype.strokeText=function(I,O,E,R){if(isNaN(O)||isNaN(E)||typeof I!="string")throw vn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){R=isNaN(R)?void 0:R;var Z=tt(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;A.call(this,{text:I,x:O,y:E,scale:q,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:R})}},h.prototype.measureText=function(I){if(typeof I!="string")throw vn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,E=this.pdf.internal.scaleFactor,R=O.internal.getFontSize(),Z=O.getStringUnitWidth(I)*R/O.internal.scaleFactor,q=function(st){var ct=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ct}}),this};return new q({width:Z*=Math.round(96*E/72*1e4)/1e4})},h.prototype.scale=function(I,O){if(isNaN(I)||isNaN(O))throw vn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var E=new l(I,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(E)},h.prototype.rotate=function(I){if(isNaN(I))throw vn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},h.prototype.translate=function(I,O){if(isNaN(I)||isNaN(O))throw vn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var E=new l(1,0,0,1,I,O);this.ctx.transform=this.ctx.transform.multiply(E)},h.prototype.transform=function(I,O,E,R,Z,q){if(isNaN(I)||isNaN(O)||isNaN(E)||isNaN(R)||isNaN(Z)||isNaN(q))throw vn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new l(I,O,E,R,Z,q);this.ctx.transform=this.ctx.transform.multiply(st)},h.prototype.setTransform=function(I,O,E,R,Z,q){I=isNaN(I)?1:I,O=isNaN(O)?0:O,E=isNaN(E)?0:E,R=isNaN(R)?1:R,Z=isNaN(Z)?0:Z,q=isNaN(q)?0:q,this.ctx.transform=new l(I,O,E,R,Z,q)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(I,O,E,R,Z,q,st,ct,At){var Dt=this.pdf.getImageProperties(I),K=1,H=1,dt=1,ut=1;R!==void 0&&ct!==void 0&&(dt=ct/R,ut=At/Z,K=Dt.width/R*ct/R,H=Dt.height/Z*At/Z),q===void 0&&(q=O,st=E,O=0,E=0),R!==void 0&&ct===void 0&&(ct=R,At=Z),R===void 0&&ct===void 0&&(ct=Dt.width,At=Dt.height);for(var V,Et=this.ctx.transform.decompose(),Lt=tt(Et.rotate.shx),U=new l,C=(U=(U=(U=U.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new a(q-O*dt,st-E*ut,R*K,Z*H)),$=S.call(this,C),wt=[],It=0;It<$.length;It+=1)wt.indexOf($[It])===-1&&wt.push($[It]);if(L(wt),this.autoPaging)for(var Ft=wt[0],Wt=wt[wt.length-1],Xt=Ft;Xt<Wt+1;Xt++){this.pdf.setPage(Xt);var se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=Xt===1?this.posY+this.margin[0]:this.margin[0],ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=Xt===1?0:ie+(Xt-2)*fe;if(this.ctx.clip_path.length!==0){var Ze=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(V,this.posX+this.margin[3],-Yt+Kt+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=Ze}var Ie=JSON.parse(JSON.stringify(C));Ie=P([Ie],this.posX+this.margin[3],-Yt+Kt+this.ctx.prevPageLastElemOffset)[0];var ts=(Xt>Ft||Xt<Wt)&&w.call(this);ts&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],se,fe,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,Lt),ts&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",C.x,C.y,C.w,C.h,null,null,Lt)};var S=function(I,O,E){var R=[];O=O||this.pdf.internal.pageSize.width,E=E||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":R.push(Math.floor((I.y+Z)/E)+1);break;case"arc":R.push(Math.floor((I.y+Z-I.radius)/E)+1),R.push(Math.floor((I.y+Z+I.radius)/E)+1);break;case"qct":var q=T(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);R.push(Math.floor((q.y+Z)/E)+1),R.push(Math.floor((q.y+q.h+Z)/E)+1);break;case"bct":var st=rt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);R.push(Math.floor((st.y+Z)/E)+1),R.push(Math.floor((st.y+st.h+Z)/E)+1);break;case"rect":R.push(Math.floor((I.y+Z)/E)+1),R.push(Math.floor((I.y+I.h+Z)/E)+1)}for(var ct=0;ct<R.length;ct+=1)for(;this.pdf.internal.getNumberOfPages()<R[ct];)x.call(this);return R},x=function(){var I=this.fillStyle,O=this.strokeStyle,E=this.font,R=this.lineCap,Z=this.lineWidth,q=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=O,this.font=E,this.lineCap=R,this.lineWidth=Z,this.lineJoin=q},P=function(I,O,E){for(var R=0;R<I.length;R++)switch(I[R].type){case"bct":I[R].x2+=O,I[R].y2+=E;case"qct":I[R].x1+=O,I[R].y1+=E;case"mt":case"lt":case"arc":default:I[R].x+=O,I[R].y+=E}return I},L=function(I){return I.sort(function(O,E){return O-E})},M=function(I,O){for(var E,R,Z=this.fillStyle,q=this.strokeStyle,st=this.lineCap,ct=this.lineWidth,At=Math.abs(ct*this.ctx.transform.scaleX),Dt=this.lineJoin,K=JSON.parse(JSON.stringify(this.path)),H=JSON.parse(JSON.stringify(this.path)),dt=[],ut=0;ut<H.length;ut++)if(H[ut].x!==void 0)for(var V=S.call(this,H[ut]),Et=0;Et<V.length;Et+=1)dt.indexOf(V[Et])===-1&&dt.push(V[Et]);for(var Lt=0;Lt<dt.length;Lt++)for(;this.pdf.internal.getNumberOfPages()<dt[Lt];)x.call(this);if(L(dt),this.autoPaging)for(var U=dt[0],C=dt[dt.length-1],$=U;$<C+1;$++){this.pdf.setPage($),this.fillStyle=Z,this.strokeStyle=q,this.lineCap=st,this.lineWidth=At,this.lineJoin=Dt;var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=$===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xt=$===1?0:Ft+($-2)*Wt;if(this.ctx.clip_path.length!==0){var se=this.path;E=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(E,this.posX+this.margin[3],-Xt+It+this.ctx.prevPageLastElemOffset),F.call(this,I,!0),this.path=se}if(R=JSON.parse(JSON.stringify(K)),this.path=P(R,this.posX+this.margin[3],-Xt+It+this.ctx.prevPageLastElemOffset),O===!1||$===0){var Kt=($>U||$<C)&&w.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Wt,null).clip().discardPath()),F.call(this,I,O),Kt&&this.pdf.restoreGraphicsState()}this.lineWidth=ct}else this.lineWidth=At,F.call(this,I,O),this.lineWidth=ct;this.path=K},F=function(I,O){if((I!=="stroke"||O||!y.call(this))&&(I==="stroke"||O||!p.call(this))){for(var E,R,Z=[],q=this.path,st=0;st<q.length;st++){var ct=q[st];switch(ct.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ct,deltas:[],abs:[]});break;case"lt":var At=Z.length;if(q[st-1]&&!isNaN(q[st-1].x)&&(E=[ct.x-q[st-1].x,ct.y-q[st-1].y],At>0)){for(;At>=0;At--)if(Z[At-1].close!==!0&&Z[At-1].begin!==!0){Z[At-1].deltas.push(E),Z[At-1].abs.push(ct);break}}break;case"bct":E=[ct.x1-q[st-1].x,ct.y1-q[st-1].y,ct.x2-q[st-1].x,ct.y2-q[st-1].y,ct.x-q[st-1].x,ct.y-q[st-1].y],Z[Z.length-1].deltas.push(E);break;case"qct":var Dt=q[st-1].x+2/3*(ct.x1-q[st-1].x),K=q[st-1].y+2/3*(ct.y1-q[st-1].y),H=ct.x+2/3*(ct.x1-ct.x),dt=ct.y+2/3*(ct.y1-ct.y),ut=ct.x,V=ct.y;E=[Dt-q[st-1].x,K-q[st-1].y,H-q[st-1].x,dt-q[st-1].y,ut-q[st-1].x,V-q[st-1].y],Z[Z.length-1].deltas.push(E);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ct)}}R=O?null:I==="stroke"?"stroke":"fill";for(var Et=!1,Lt=0;Lt<Z.length;Lt++)if(Z[Lt].arc)for(var U=Z[Lt].abs,C=0;C<U.length;C++){var $=U[C];$.type==="arc"?W.call(this,$.x,$.y,$.radius,$.startAngle,$.endAngle,$.counterclockwise,void 0,O,!Et):Q.call(this,$.x,$.y),Et=!0}else if(Z[Lt].close===!0)this.pdf.internal.out("h"),Et=!1;else if(Z[Lt].begin!==!0){var wt=Z[Lt].start.x,It=Z[Lt].start.y;et.call(this,Z[Lt].deltas,wt,It),Et=!0}R&&it.call(this,R),O&&J.call(this)}},pt=function(I){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,E=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-E;case"top":return I+O-E;case"hanging":return I+O-2*E;case"middle":return I+O/2-E;case"ideographic":return I;case"alphabetic":default:return I}},Y=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(O,E){this.colorStops.push([O,E])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var W=function(I,O,E,R,Z,q,st,ct,At){for(var Dt=ht.call(this,E,R,Z,q),K=0;K<Dt.length;K++){var H=Dt[K];K===0&&(At?_.call(this,H.x1+I,H.y1+O):Q.call(this,H.x1+I,H.y1+O)),mt.call(this,I,O,H.x2,H.y2,H.x3,H.y3,H.x4,H.y4)}ct?J.call(this):it.call(this,st)},it=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(I,O){this.pdf.internal.out(n(I)+" "+s(O)+" m")},A=function(I){var O;switch(I.align){case"right":case"end":O="right";break;case"center":O="center";break;case"left":case"start":default:O="left"}var E=this.pdf.getTextDimensions(I.text),R=pt.call(this,I.y),Z=Y.call(this,R)-E.h,q=this.ctx.transform.applyToPoint(new o(I.x,R)),st=this.ctx.transform.decompose(),ct=new l;ct=(ct=(ct=ct.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var At,Dt,K,H=this.ctx.transform.applyToRectangle(new a(I.x,R,E.w,E.h)),dt=ct.applyToRectangle(new a(I.x,Z,E.w,E.h)),ut=S.call(this,dt),V=[],Et=0;Et<ut.length;Et+=1)V.indexOf(ut[Et])===-1&&V.push(ut[Et]);if(L(V),this.autoPaging)for(var Lt=V[0],U=V[V.length-1],C=Lt;C<U+1;C++){this.pdf.setPage(C);var $=C===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[2],Ft=It-this.margin[0],Wt=this.pdf.internal.pageSize.width-this.margin[1],Xt=Wt-this.margin[3],se=C===1?0:wt+(C-2)*Ft;if(this.ctx.clip_path.length!==0){var Kt=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(At,this.posX+this.margin[3],-1*se+$),F.call(this,"fill",!0),this.path=Kt}var ie=P([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-se+$+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*I.scale),K=this.lineWidth,this.lineWidth=K*I.scale);var fe=this.autoPaging!=="text";if(fe||ie.y+ie.h<=It){if(fe||ie.y>=$&&ie.x<=Wt){var Yt=fe?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Wt-ie.x)[0],Ze=P([JSON.parse(JSON.stringify(H))],this.posX+this.margin[3],-se+$+this.ctx.prevPageLastElemOffset)[0],Ie=fe&&(C>Lt||C<U)&&w.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,Ft,null).clip().discardPath()),this.pdf.text(Yt,Ze.x,Ze.y,{angle:I.angle,align:O,renderingMode:I.renderingMode}),Ie&&this.pdf.restoreGraphicsState()}}else ie.y<It&&(this.ctx.prevPageLastElemOffset+=It-ie.y);I.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=K)}else I.scale>=.01&&(Dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dt*I.scale),K=this.lineWidth,this.lineWidth=K*I.scale),this.pdf.text(I.text,q.x+this.posX,q.y+this.posY,{angle:I.angle,align:O,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Dt),this.lineWidth=K)},Q=function(I,O,E,R){E=E||0,R=R||0,this.pdf.internal.out(n(I+E)+" "+s(O+R)+" l")},et=function(I,O,E){return this.pdf.lines(I,O,E,null,null)},mt=function(I,O,E,R,Z,q,st,ct){this.pdf.internal.out([t(i(E+I)),t(r(R+O)),t(i(Z+I)),t(r(q+O)),t(i(st+I)),t(r(ct+O)),"c"].join(" "))},ht=function(I,O,E,R){for(var Z=2*Math.PI,q=Math.PI/2;O>E;)O-=Z;var st=Math.abs(E-O);st<Z&&R&&(st=Z-st);for(var ct=[],At=R?-1:1,Dt=O;st>1e-5;){var K=Dt+At*Math.min(st,q);ct.push(gt.call(this,I,Dt,K)),st-=Math.abs(K-Dt),Dt=K}return ct},gt=function(I,O,E){var R=(E-O)/2,Z=I*Math.cos(R),q=I*Math.sin(R),st=Z,ct=-q,At=st*st+ct*ct,Dt=At+st*Z+ct*q,K=4/3*(Math.sqrt(2*At*Dt)-Dt)/(st*q-ct*Z),H=st-K*ct,dt=ct+K*st,ut=H,V=-dt,Et=R+O,Lt=Math.cos(Et),U=Math.sin(Et);return{x1:I*Math.cos(O),y1:I*Math.sin(O),x2:H*Lt-dt*U,y2:H*U+dt*Lt,x3:ut*Lt-V*U,y3:ut*U+V*Lt,x4:I*Math.cos(E),y4:I*Math.sin(E)}},tt=function(I){return 180*I/Math.PI},T=function(I,O,E,R,Z,q){var st=I+.5*(E-I),ct=O+.5*(R-O),At=Z+.5*(E-Z),Dt=q+.5*(R-q),K=Math.min(I,Z,st,At),H=Math.max(I,Z,st,At),dt=Math.min(O,q,ct,Dt),ut=Math.max(O,q,ct,Dt);return new a(K,dt,H-K,ut-dt)},rt=function(I,O,E,R,Z,q,st,ct){var At,Dt,K,H,dt,ut,V,Et,Lt,U,C,$,wt,It,Ft=E-I,Wt=R-O,Xt=Z-E,se=q-R,Kt=st-Z,ie=ct-q;for(Dt=0;Dt<41;Dt++)Lt=(V=(K=I+(At=Dt/40)*Ft)+At*((dt=E+At*Xt)-K))+At*(dt+At*(Z+At*Kt-dt)-V),U=(Et=(H=O+At*Wt)+At*((ut=R+At*se)-H))+At*(ut+At*(q+At*ie-ut)-Et),Dt==0?(C=Lt,$=U,wt=Lt,It=U):(C=Math.min(C,Lt),$=Math.min($,U),wt=Math.max(wt,Lt),It=Math.max(It,U));return new a(Math.round(C),Math.round($),Math.round(wt-C),Math.round(It-$))},kt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,O,E=(I=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:O}));this.prevLineDash!==E&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=E)}}})(Ae.API),function(e){var t=function(r){var o,a,l,c,u,h,g,p,y,w;for(a=[],l=0,c=(r+=o="\0\0\0\0".slice(r.length%4||4)).length;c>l;l+=4)(u=(r.charCodeAt(l)<<24)+(r.charCodeAt(l+1)<<16)+(r.charCodeAt(l+2)<<8)+r.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(w=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(g=u%85))/85)%85,a.push(h+33,g+33,p+33,y+33,w+33)):a.push(122);return function(S,x){for(var P=x;P>0;P--)S.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(r){var o,a,l,c,u,h=String,g="length",p=255,y="charCodeAt",w="slice",S="replace";for(r[w](-2),r=r[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],c=0,u=(r+=o="uuuuu"[w](r[g]%5||5))[g];u>c;c+=5)a=52200625*(r[y](c)-33)+614125*(r[y](c+1)-33)+7225*(r[y](c+2)-33)+85*(r[y](c+3)-33)+(r[y](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(x,P){for(var L=P;L>0;L--)x.pop()}(l,o[g]),h.fromCharCode.apply(h,l)},s=function(r){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),o.test(r)===!1)return"";for(var a="",l=0;l<r.length;l+=2)a+=String.fromCharCode("0x"+(r[l]+r[l+1]));return a},i=function(r){for(var o=new Uint8Array(r.length),a=r.length;a--;)o[a]=r.charCodeAt(a);return r=(o=ry(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};e.processDataByFilters=function(r,o){var a=0,l=r||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=s(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Ae.API),function(e){e.loadFile=function(t,n,s){return function(i,r,o){r=r!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var h=new XMLHttpRequest,g=0,p=function(y){var w=y.length,S=[],x=String.fromCharCode;for(g=0;g<w;g+=1)S.push(x(255&y.charCodeAt(g)));return S.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return p(h.responseText)}(i,r,o)}catch{}return a}(t,n,s)},e.loadImageFile=e.loadFile}(Ae.API),function(e){function t(){return(Pe.html2canvas?Promise.resolve(Pe.html2canvas):ty(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Pe.DOMPurify?Promise.resolve(Pe.DOMPurify):ty(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var a=fn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},r=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(o,a){return o.__proto__=a||r.prototype,o},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(s(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},r.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(l(g,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var g=0;g<c.length;++g){var p=c[g],y=p.src.find(function(w){return w.format==="truetype"});y&&l.addFont(y.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},r.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},r.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},r.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(o){if(s(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in r.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},r.prototype.get=function(o,a){return this.then(function(){var l=o in r.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},r.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},r.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Ae.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},r.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},r.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},r.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return r.convert(u,this.__proto__)},r.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},r.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},r.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return r.convert(a,this)},r.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},r.prototype.error=function(o){return this.then(function(){throw new Error(o)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,Ae.getPageSize=function(o,a,l){if(fn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var p,y=0,w=0;if(g.hasOwnProperty(h))y=g[h][1]/u,w=g[h][0]/u;else try{y=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",w>y&&(p=w,w=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>w&&(p=w,w=y,y=p)}return{width:w,height:y,unit:a,k:u,orientation:o}},e.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(dy):null;var l=new r(a);return a.worker?l:l.from(o).doCallback()}}(Ae.API),Ae.API.addJS=function(e){return x3=e,this.internal.events.subscribe("postPutResources",function(){Zp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),w3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+x3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Zp!==void 0&&w3!==void 0&&this.internal.out("/Names <</JavaScript "+Zp+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),r=0;r<i.length;r++){var o=i[r],a=s.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(r=0;r<c;r++){var h=n.internal.newObject();u.push(h);var g=n.internal.getPageInfo(r+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),r=0;r<u.length;r++)n.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(s,i,r){var o={title:i,options:r,children:[]};return s==null&&(s=this.root),s.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(s){s.id=n.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},n.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},n.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<s.children.length;r++){var o=s.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),r>0&&this.line("/Prev "+this.makeRef(s.children[r-1])),r<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<s.children.length;c++)this.renderItems(s.children[c])},n.outline.line=function(s){this.ctx.val+=s+`\r
`},n.outline.makeRef=function(s){return s.id+" 0 R"},n.outline.makeString=function(s){return"("+n.internal.pdfEscape(s)+")"},n.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(s,i){for(var r=0;r<i.children.length;r++)s.count++,this.count_r(s,i.children[r]);return s.count}}])}(Ae.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,s,i,r,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var g,p=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,w={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(S+=p,t.indexOf(h.charCodeAt(S+1))!==-1){g=256*h.charCodeAt(S+5)+h.charCodeAt(S+6),w={width:256*h.charCodeAt(S+7)+h.charCodeAt(S+8),height:g,numcomponents:h.charCodeAt(S+9)};break}p=256*h.charCodeAt(S+2)+h.charCodeAt(S+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:s,alias:i}}return u}}(Ae.API);var jc,tg,_3,S3,C3,rK=function(){var e,t,n;function s(r){var o,a,l,c,u,h,g,p,y,w,S,x,P,L;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var M,F;for(F=[],M=0;M<4;++M)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),r=(h!=null?h.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(P=0;0<=w?P<w:P>w;0<=w?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(S=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,S.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,S.slice(g+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(r){var o,a;for(a=[],o=0;0<=r?o<r:o>r;0<=r?++o:--o)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(r){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function u(h,g,p,y){var w,S,x,P,L,M,F,pt,Y,W,it,J,_,A,Q,et,mt,ht,gt,tt,T,rt=Math.ceil((c.width-h)/p),kt=Math.ceil((c.height-g)/y),I=c.width==rt&&c.height==kt;for(A=o*rt,J=I?a:new Uint8Array(A*kt),M=r.length,_=0,S=0;_<kt&&l<M;){switch(r[l++]){case 0:for(P=mt=0;mt<A;P=mt+=1)J[S++]=r[l++];break;case 1:for(P=ht=0;ht<A;P=ht+=1)w=r[l++],L=P<o?0:J[S-o],J[S++]=(w+L)%256;break;case 2:for(P=gt=0;gt<A;P=gt+=1)w=r[l++],x=(P-P%o)/o,Q=_&&J[(_-1)*A+x*o+P%o],J[S++]=(Q+w)%256;break;case 3:for(P=tt=0;tt<A;P=tt+=1)w=r[l++],x=(P-P%o)/o,L=P<o?0:J[S-o],Q=_&&J[(_-1)*A+x*o+P%o],J[S++]=(w+Math.floor((L+Q)/2))%256;break;case 4:for(P=T=0;T<A;P=T+=1)w=r[l++],x=(P-P%o)/o,L=P<o?0:J[S-o],_===0?Q=et=0:(Q=J[(_-1)*A+x*o+P%o],et=x&&J[(_-1)*A+(x-1)*o+P%o]),F=L+Q-et,pt=Math.abs(F-L),W=Math.abs(F-Q),it=Math.abs(F-et),Y=pt<=W&&pt<=it?L:W<=it?Q:et,J[S++]=(w+Y)%256;break;default:throw new Error("Invalid filter algorithm: "+r[l-1])}if(!I){var O=((g+_*y)*c.width+h)*o,E=_*A;for(P=0;P<rt;P+=1){for(var R=0;R<o;R+=1)a[O++]=J[E++];O+=(p-1)*o}}_++}}return r=FG(r),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},s.prototype.decodePalette=function(){var r,o,a,l,c,u,h,g,p;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,r=0,o=h=0,g=a.length;h<g;o=h+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=u[r++])!=null?p:255;return c},s.prototype.copyToImageData=function(r,o){var a,l,c,u,h,g,p,y,w,S,x;if(l=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,a=!0),y=(c=r.data||r).length,h=w||o,u=g=0,l===1)for(;u<y;)p=w?4*o[u/4]:g,S=h[p++],c[u++]=S,c[u++]=S,c[u++]=S,c[u++]=a?h[p++]:255,g=p;else for(;u<y;)p=w?4*o[u/4]:g,c[u++]=h[p++],c[u++]=h[p++],c[u++]=h[p++],c[u++]=a?h[p++]:255,g=p},s.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var i=function(){if(Object.prototype.toString.call(Pe)==="[object Window]"){try{t=Pe.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(r){var o;if(i()===!0)return n.width=r.width,n.height=r.height,n.clearRect(0,0,r.width,r.height),n.putImageData(r,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(r){var o,a,l,c,u,h,g,p;if(this.animation){for(p=[],a=u=0,h=(g=this.animation.frames).length;u<h;a=++u)o=g[a],l=r.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=e(l));return p}},s.prototype.renderFrame=function(r,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&r.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?r.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&r.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&r.clearRect(a.xOffset,a.yOffset,a.width,a.height),r.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(r){var o,a,l,c,u,h,g=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(o=function(){var p,y;if(p=a++%c,y=l[p],g.renderFrame(r,p),c>1&&a/c<u)return g.animation._timeout=setTimeout(o,y.delay)})()},s.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},s.prototype.render=function(r){var o,a;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,o=r.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oK(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,i=e[t++],r=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var a=null,l=null;r&&(a=t,l=o,t+=3*o);var c=!0,u=[],h=0,g=null,p=0,y=null;for(this.width=n,this.height=s;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];h=e[t++]|e[t++]<<8,g=e[t++],(1&w)==0&&(g=null),p=w>>2&7,t++;break;case 254:for(;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,P=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,M=e[t++],F=M>>6&1,pt=1<<(7&M)+1,Y=a,W=l,it=!1;M>>7&&(it=!0,Y=t,W=pt,t+=3*pt);var J=t;for(t++;;){var _;if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}u.push({x:S,y:x,width:P,height:L,has_local_palette:it,palette_offset:Y,palette_size:W,data_offset:J,data_length:t-J,transparent_index:g,interlaced:!!F,delay:h,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,Q){var et=this.frameInfo(A),mt=et.width*et.height,ht=new Uint8Array(mt);k3(e,et.data_offset,ht,mt);var gt=et.palette_offset,tt=et.transparent_index;tt===null&&(tt=256);var T=et.width,rt=n-T,kt=T,I=4*(et.y*n+et.x),O=4*((et.y+et.height)*n+et.x),E=I,R=4*rt;et.interlaced===!0&&(R+=4*n*7);for(var Z=8,q=0,st=ht.length;q<st;++q){var ct=ht[q];if(kt===0&&(kt=T,(E+=R)>=O&&(R=4*rt+4*n*(Z-1),E=I+(T+rt)*(Z<<1),Z>>=1)),ct===tt)E+=4;else{var At=e[gt+3*ct],Dt=e[gt+3*ct+1],K=e[gt+3*ct+2];Q[E++]=K,Q[E++]=Dt,Q[E++]=At,Q[E++]=255}--kt}},this.decodeAndBlitFrameRGBA=function(A,Q){var et=this.frameInfo(A),mt=et.width*et.height,ht=new Uint8Array(mt);k3(e,et.data_offset,ht,mt);var gt=et.palette_offset,tt=et.transparent_index;tt===null&&(tt=256);var T=et.width,rt=n-T,kt=T,I=4*(et.y*n+et.x),O=4*((et.y+et.height)*n+et.x),E=I,R=4*rt;et.interlaced===!0&&(R+=4*n*7);for(var Z=8,q=0,st=ht.length;q<st;++q){var ct=ht[q];if(kt===0&&(kt=T,(E+=R)>=O&&(R=4*rt+4*n*(Z-1),E=I+(T+rt)*(Z<<1),Z>>=1)),ct===tt)E+=4;else{var At=e[gt+3*ct],Dt=e[gt+3*ct+1],K=e[gt+3*ct+2];Q[E++]=At,Q[E++]=Dt,Q[E++]=K,Q[E++]=255}--kt}}}function k3(e,t,n,s){for(var i=e[t++],r=1<<i,o=r+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,h=0,g=0,p=e[t++],y=new Int32Array(4096),w=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<l)break;var S=h&c;if(h>>=l,u-=l,S!==r){if(S===o)break;for(var x=S<a?S:w,P=0,L=x;L>r;)L=y[L]>>8,++P;var M=L;if(g+P+(x!==S?1:0)>s)return void vn.log("Warning, gif stream longer than expected.");n[g++]=M;var F=g+=P;for(x!==S&&(n[g++]=M),L=x;P--;)L=y[L],n[--F]=255&L,L>>=8;w!==null&&a<4096&&(y[a++]=w<<8|M,a>=c+1&&l<12&&(++l,c=c<<1|1)),w=S}else a=o+1,c=(1<<(l=i+1))-1,w=null}return g!==s&&vn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function O2(e){var t,n,s,i,r,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),g=new Array(65535),p=new Array(64),y=new Array(64),w=[],S=0,x=7,P=new Array(64),L=new Array(64),M=new Array(64),F=new Array(256),pt=new Array(2048),Y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],W=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],it=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],et=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],mt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ht(I,O){for(var E=0,R=0,Z=new Array,q=1;q<=16;q++){for(var st=1;st<=I[q];st++)Z[O[R]]=[],Z[O[R]][0]=E,Z[O[R]][1]=q,R++,E++;E*=2}return Z}function gt(I){for(var O=I[0],E=I[1]-1;E>=0;)O&1<<E&&(S|=1<<x),E--,--x<0&&(S==255?(tt(255),tt(0)):tt(S),x=7,S=0)}function tt(I){w.push(I)}function T(I){tt(I>>8&255),tt(255&I)}function rt(I,O,E,R,Z){for(var q,st=Z[0],ct=Z[240],At=function(U,C){var $,wt,It,Ft,Wt,Xt,se,Kt,ie,fe,Yt=0;for(ie=0;ie<8;++ie){$=U[Yt],wt=U[Yt+1],It=U[Yt+2],Ft=U[Yt+3],Wt=U[Yt+4],Xt=U[Yt+5],se=U[Yt+6];var Ze=$+(Kt=U[Yt+7]),Ie=$-Kt,ts=wt+se,Zt=wt-se,me=It+Xt,es=It-Xt,en=Ft+Wt,ho=Ft-Wt,Tn=Ze+en,Si=Ze-en,or=ts+me,Nn=ts-me;U[Yt]=Tn+or,U[Yt+4]=Tn-or;var Te=.707106781*(Nn+Si);U[Yt+2]=Si+Te,U[Yt+6]=Si-Te;var nn=.382683433*((Tn=ho+es)-(Nn=Zt+Ie)),fo=.5411961*Tn+nn,Rn=1.306562965*Nn+nn,Ui=.707106781*(or=es+Zt),qi=Ie+Ui,xe=Ie-Ui;U[Yt+5]=xe+fo,U[Yt+3]=xe-fo,U[Yt+1]=qi+Rn,U[Yt+7]=qi-Rn,Yt+=8}for(Yt=0,ie=0;ie<8;++ie){$=U[Yt],wt=U[Yt+8],It=U[Yt+16],Ft=U[Yt+24],Wt=U[Yt+32],Xt=U[Yt+40],se=U[Yt+48];var Ci=$+(Kt=U[Yt+56]),ns=$-Kt,As=wt+se,Fn=wt-se,Mn=It+Xt,xt=It-Xt,X=Ft+Wt,Rt=Ft-Wt,_t=Ci+X,re=Ci-X,ge=As+Mn,be=As-Mn;U[Yt]=_t+ge,U[Yt+32]=_t-ge;var Ce=.707106781*(be+re);U[Yt+16]=re+Ce,U[Yt+48]=re-Ce;var kn=.382683433*((_t=Rt+xt)-(be=Fn+ns)),Ps=.5411961*_t+kn,ki=1.306562965*be+kn,Lr=.707106781*(ge=xt+Fn),lc=ns+Lr,cc=ns-Lr;U[Yt+40]=cc+Ps,U[Yt+24]=cc-Ps,U[Yt+8]=lc+ki,U[Yt+56]=lc-ki,Yt++}for(ie=0;ie<64;++ie)fe=U[ie]*C[ie],p[ie]=fe>0?fe+.5|0:fe-.5|0;return p}(I,O),Dt=0;Dt<64;++Dt)y[Y[Dt]]=At[Dt];var K=y[0]-E;E=y[0],K==0?gt(R[0]):(gt(R[g[q=32767+K]]),gt(h[q]));for(var H=63;H>0&&y[H]==0;)H--;if(H==0)return gt(st),E;for(var dt,ut=1;ut<=H;){for(var V=ut;y[ut]==0&&ut<=H;)++ut;var Et=ut-V;if(Et>=16){dt=Et>>4;for(var Lt=1;Lt<=dt;++Lt)gt(ct);Et&=15}q=32767+y[ut],gt(Z[(Et<<4)+g[q]]),gt(h[q]),ut++}return H!=63&&gt(st),E}function kt(I){I=Math.min(Math.max(I,1),100),r!=I&&(function(O){for(var E=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],R=0;R<64;R++){var Z=o((E[R]*O+50)/100);Z=Math.min(Math.max(Z,1),255),a[Y[R]]=Z}for(var q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var ct=o((q[st]*O+50)/100);ct=Math.min(Math.max(ct,1),255),l[Y[st]]=ct}for(var At=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Dt=0,K=0;K<8;K++)for(var H=0;H<8;H++)c[Dt]=1/(a[Y[Dt]]*At[K]*At[H]*8),u[Dt]=1/(l[Y[Dt]]*At[K]*At[H]*8),Dt++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),r=I)}this.encode=function(I,O){O&&kt(O),w=new Array,S=0,x=7,T(65496),T(65504),T(16),tt(74),tt(70),tt(73),tt(70),tt(0),tt(1),tt(1),tt(0),T(1),T(1),tt(0),tt(0),function(){T(65499),T(132),tt(0);for(var wt=0;wt<64;wt++)tt(a[wt]);tt(1);for(var It=0;It<64;It++)tt(l[It])}(),function(wt,It){T(65472),T(17),tt(8),T(It),T(wt),tt(3),tt(1),tt(17),tt(0),tt(2),tt(17),tt(1),tt(3),tt(17),tt(1)}(I.width,I.height),function(){T(65476),T(418),tt(0);for(var wt=0;wt<16;wt++)tt(W[wt+1]);for(var It=0;It<=11;It++)tt(it[It]);tt(16);for(var Ft=0;Ft<16;Ft++)tt(J[Ft+1]);for(var Wt=0;Wt<=161;Wt++)tt(_[Wt]);tt(1);for(var Xt=0;Xt<16;Xt++)tt(A[Xt+1]);for(var se=0;se<=11;se++)tt(Q[se]);tt(17);for(var Kt=0;Kt<16;Kt++)tt(et[Kt+1]);for(var ie=0;ie<=161;ie++)tt(mt[ie])}(),T(65498),T(12),tt(3),tt(1),tt(0),tt(2),tt(17),tt(3),tt(17),tt(0),tt(63),tt(0);var E=0,R=0,Z=0;S=0,x=7,this.encode.displayName="_encode_";for(var q,st,ct,At,Dt,K,H,dt,ut,V=I.data,Et=I.width,Lt=I.height,U=4*Et,C=0;C<Lt;){for(q=0;q<U;){for(Dt=U*C+q,H=-1,dt=0,ut=0;ut<64;ut++)K=Dt+(dt=ut>>3)*U+(H=4*(7&ut)),C+dt>=Lt&&(K-=U*(C+1+dt-Lt)),q+H>=U&&(K-=q+H-U+4),st=V[K++],ct=V[K++],At=V[K++],P[ut]=(pt[st]+pt[ct+256>>0]+pt[At+512>>0]>>16)-128,L[ut]=(pt[st+768>>0]+pt[ct+1024>>0]+pt[At+1280>>0]>>16)-128,M[ut]=(pt[st+1280>>0]+pt[ct+1536>>0]+pt[At+1792>>0]>>16)-128;E=rt(P,c,E,t,s),R=rt(L,u,R,n,i),Z=rt(M,u,Z,n,i),q+=32}C+=8}if(x>=0){var $=[];$[1]=x+1,$[0]=(1<<x+1)-1,gt($)}return T(65497),new Uint8Array(w)},e=e||50,function(){for(var I=String.fromCharCode,O=0;O<256;O++)F[O]=I(O)}(),t=ht(W,it),n=ht(A,Q),s=ht(J,_),i=ht(et,mt),function(){for(var I=1,O=2,E=1;E<=15;E++){for(var R=I;R<O;R++)g[32767+R]=E,h[32767+R]=[],h[32767+R][1]=E,h[32767+R][0]=R;for(var Z=-(O-1);Z<=-I;Z++)g[32767+Z]=E,h[32767+Z]=[],h[32767+Z][1]=E,h[32767+Z][0]=O-1+Z;I<<=1,O<<=1}}(),function(){for(var I=0;I<256;I++)pt[I]=19595*I,pt[I+256>>0]=38470*I,pt[I+512>>0]=7471*I+32768,pt[I+768>>0]=-11059*I,pt[I+1024>>0]=-21709*I,pt[I+1280>>0]=32768*I+8421375,pt[I+1536>>0]=-27439*I,pt[I+1792>>0]=-5329*I}(),kt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function A3(e){function t(W){if(!W)throw Error("assert :P")}function n(W,it,J){for(var _=0;4>_;_++)if(W[it+_]!=J.charCodeAt(_))return!0;return!1}function s(W,it,J,_,A){for(var Q=0;Q<A;Q++)W[it+Q]=J[_+Q]}function i(W,it,J,_){for(var A=0;A<_;A++)W[it+A]=J}function r(W){return new Int32Array(W)}function o(W,it){for(var J=[],_=0;_<W;_++)J.push(new it);return J}function a(W,it){var J=[];return function _(A,Q,et){for(var mt=et[Q],ht=0;ht<mt&&(A.push(et.length>Q+1?[]:new it),!(et.length<Q+1));ht++)_(A[ht],Q+1,et)}(J,0,W),J}var l=function(){var W=this;function it(f,m){for(var b=1<<m-1>>>0;f&b;)b>>>=1;return b?(f&b-1)+b:f}function J(f,m,b,k,N){t(!(k%b));do f[m+(k-=b)]=N;while(0<k)}function _(f,m,b,k,N){if(t(2328>=N),512>=N)var B=r(512);else if((B=r(N))==null)return 0;return function(j,z,G,nt,yt,Tt){var Nt,Ct,$t=z,Mt=1<<G,bt=r(16),St=r(16);for(t(yt!=0),t(nt!=null),t(j!=null),t(0<G),Ct=0;Ct<yt;++Ct){if(15<nt[Ct])return 0;++bt[nt[Ct]]}if(bt[0]==yt)return 0;for(St[1]=0,Nt=1;15>Nt;++Nt){if(bt[Nt]>1<<Nt)return 0;St[Nt+1]=St[Nt]+bt[Nt]}for(Ct=0;Ct<yt;++Ct)Nt=nt[Ct],0<nt[Ct]&&(Tt[St[Nt]++]=Ct);if(St[15]==1)return(nt=new A).g=0,nt.value=Tt[0],J(j,$t,1,Mt,nt),Mt;var Bt,qt=-1,jt=Mt-1,le=0,Jt=1,_e=1,ee=1<<G;for(Ct=0,Nt=1,yt=2;Nt<=G;++Nt,yt<<=1){if(Jt+=_e<<=1,0>(_e-=bt[Nt]))return 0;for(;0<bt[Nt];--bt[Nt])(nt=new A).g=Nt,nt.value=Tt[Ct++],J(j,$t+le,yt,ee,nt),le=it(le,Nt)}for(Nt=G+1,yt=2;15>=Nt;++Nt,yt<<=1){if(Jt+=_e<<=1,0>(_e-=bt[Nt]))return 0;for(;0<bt[Nt];--bt[Nt]){if(nt=new A,(le&jt)!=qt){for($t+=ee,Bt=1<<(qt=Nt)-G;15>qt&&!(0>=(Bt-=bt[qt]));)++qt,Bt<<=1;Mt+=ee=1<<(Bt=qt-G),j[z+(qt=le&jt)].g=Bt+G,j[z+qt].value=$t-z-qt}nt.g=Nt-G,nt.value=Tt[Ct++],J(j,$t+(le>>G),yt,ee,nt),le=it(le,Nt)}}return Jt!=2*St[15]-1?0:Mt}(f,m,b,k,N,B)}function A(){this.value=this.g=0}function Q(){this.value=this.g=0}function et(){this.G=o(5,A),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Es,Q)}function mt(f,m,b,k){t(f!=null),t(m!=null),t(2147483648>k),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=m,f.pa=b,f.Jd=m,f.Yc=b+k,f.Zc=4<=k?b+k-4+1:b,q(f)}function ht(f,m){for(var b=0;0<m--;)b|=ct(f,128)<<m;return b}function gt(f,m){var b=ht(f,m);return st(f)?-b:b}function tt(f,m,b,k){var N,B=0;for(t(f!=null),t(m!=null),t(4294967288>k),f.Sb=k,f.Ra=0,f.u=0,f.h=0,4<k&&(k=4),N=0;N<k;++N)B+=m[b+N]<<8*N;f.Ra=B,f.bb=k,f.oa=m,f.pa=b}function T(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Cc-8>>>0,++f.bb,f.u-=8;E(f)&&(f.h=1,f.u=0)}function rt(f,m){if(t(0<=m),!f.h&&m<=Sc){var b=O(f)&_c[m];return f.u+=m,T(f),b}return f.h=1,f.u=0}function kt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function O(f){return f.Ra>>>(f.u&Cc-1)>>>0}function E(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Cc}function R(f,m){f.u=m,f.h=E(f)}function Z(f){f.u>=cd&&(t(f.u>=cd),T(f))}function q(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function st(f){return ht(f,1)}function ct(f,m){var b=f.Ca;0>f.b&&q(f);var k=f.b,N=b*m>>>8,B=(f.I>>>k>N)+0;for(B?(b-=N,f.I-=N+1<<k>>>0):b=N+1,k=b,N=0;256<=k;)N+=8,k>>=8;return k=7^N+hi[k],f.b-=k,f.Ca=(b<<k)-1,B}function At(f,m,b){f[m+0]=b>>24&255,f[m+1]=b>>16&255,f[m+2]=b>>8&255,f[m+3]=b>>0&255}function Dt(f,m){return f[m+0]<<0|f[m+1]<<8}function K(f,m){return Dt(f,m)|f[m+2]<<16}function H(f,m){return Dt(f,m)|Dt(f,m+2)<<16}function dt(f,m){var b=1<<m;return t(f!=null),t(0<m),f.X=r(b),f.X==null?0:(f.Mb=32-m,f.Xa=m,1)}function ut(f,m){t(f!=null),t(m!=null),t(f.Xa==m.Xa),s(m.X,0,f.X,0,1<<m.Xa)}function V(){this.X=[],this.Xa=this.Mb=0}function Et(f,m,b,k){t(b!=null),t(k!=null);var N=b[0],B=k[0];return N==0&&(N=(f*B+m/2)/m),B==0&&(B=(m*N+f/2)/f),0>=N||0>=B?0:(b[0]=N,k[0]=B,1)}function Lt(f,m){return f+(1<<m)-1>>>m}function U(f,m){return((4278255360&f)+(4278255360&m)>>>0&4278255360)+((16711935&f)+(16711935&m)>>>0&16711935)>>>0}function C(f,m){W[m]=function(b,k,N,B,j,z,G){var nt;for(nt=0;nt<j;++nt){var yt=W[f](z[G+nt-1],N,B+nt);z[G+nt]=U(b[k+nt],yt)}}}function $(){this.ud=this.hd=this.jd=0}function wt(f,m){return((4278124286&(f^m))>>>1)+(f&m)>>>0}function It(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Ft(f,m){return It(f+(f-m+.5>>1))}function Wt(f,m,b){return Math.abs(m-b)-Math.abs(f-b)}function Xt(f,m,b,k,N,B,j){for(k=B[j-1],b=0;b<N;++b)B[j+b]=k=U(f[m+b],k)}function se(f,m,b,k,N){var B;for(B=0;B<b;++B){var j=f[m+B],z=j>>8&255,G=16711935&(G=(G=16711935&j)+((z<<16)+z));k[N+B]=(4278255360&j)+G>>>0}}function Kt(f,m){m.jd=f>>0&255,m.hd=f>>8&255,m.ud=f>>16&255}function ie(f,m,b,k,N,B){var j;for(j=0;j<k;++j){var z=m[b+j],G=z>>>8,nt=z,yt=255&(yt=(yt=z>>>16)+((f.jd<<24>>24)*(G<<24>>24)>>>5));nt=255&(nt=(nt=nt+((f.hd<<24>>24)*(G<<24>>24)>>>5))+((f.ud<<24>>24)*(yt<<24>>24)>>>5)),N[B+j]=(4278255360&z)+(yt<<16)+nt}}function fe(f,m,b,k,N){W[m]=function(B,j,z,G,nt,yt,Tt,Nt,Ct){for(G=Tt;G<Nt;++G)for(Tt=0;Tt<Ct;++Tt)nt[yt++]=N(z[k(B[j++])])},W[f]=function(B,j,z,G,nt,yt,Tt){var Nt=8>>B.b,Ct=B.Ea,$t=B.K[0],Mt=B.w;if(8>Nt)for(B=(1<<B.b)-1,Mt=(1<<Nt)-1;j<z;++j){var bt,St=0;for(bt=0;bt<Ct;++bt)bt&B||(St=k(G[nt++])),yt[Tt++]=N($t[St&Mt]),St>>=Nt}else W["VP8LMapColor"+b](G,nt,$t,Mt,yt,Tt,j,z,Ct)}}function Yt(f,m,b,k,N){for(b=m+b;m<b;){var B=f[m++];k[N++]=B>>16&255,k[N++]=B>>8&255,k[N++]=B>>0&255}}function Ze(f,m,b,k,N){for(b=m+b;m<b;){var B=f[m++];k[N++]=B>>16&255,k[N++]=B>>8&255,k[N++]=B>>0&255,k[N++]=B>>24&255}}function Ie(f,m,b,k,N){for(b=m+b;m<b;){var B=(j=f[m++])>>16&240|j>>12&15,j=j>>0&240|j>>28&15;k[N++]=B,k[N++]=j}}function ts(f,m,b,k,N){for(b=m+b;m<b;){var B=(j=f[m++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;k[N++]=B,k[N++]=j}}function Zt(f,m,b,k,N){for(b=m+b;m<b;){var B=f[m++];k[N++]=B>>0&255,k[N++]=B>>8&255,k[N++]=B>>16&255}}function me(f,m,b,k,N,B){if(B==0)for(b=m+b;m<b;)At(k,((B=f[m++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),N+=32;else s(k,N,f,m,b)}function es(f,m){W[m][0]=W[f+"0"],W[m][1]=W[f+"1"],W[m][2]=W[f+"2"],W[m][3]=W[f+"3"],W[m][4]=W[f+"4"],W[m][5]=W[f+"5"],W[m][6]=W[f+"6"],W[m][7]=W[f+"7"],W[m][8]=W[f+"8"],W[m][9]=W[f+"9"],W[m][10]=W[f+"10"],W[m][11]=W[f+"11"],W[m][12]=W[f+"12"],W[m][13]=W[f+"13"],W[m][14]=W[f+"0"],W[m][15]=W[f+"0"]}function en(f){return f==g1||f==m1||f==cp||f==v1}function ho(){this.eb=[],this.size=this.A=this.fb=0}function Tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Si(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ho,this.f.kb=new Tn,this.sd=null}function or(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Nn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Te(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function nn(f,m){var b=f.T,k=m.ba.f.RGBA,N=k.eb,B=k.fb+f.ka*k.A,j=Xi[m.ba.S],z=f.y,G=f.O,nt=f.f,yt=f.N,Tt=f.ea,Nt=f.W,Ct=m.cc,$t=m.dc,Mt=m.Mc,bt=m.Nc,St=f.ka,Bt=f.ka+f.T,qt=f.U,jt=qt+1>>1;for(St==0?j(z,G,null,null,nt,yt,Tt,Nt,nt,yt,Tt,Nt,N,B,null,null,qt):(j(m.ec,m.fc,z,G,Ct,$t,Mt,bt,nt,yt,Tt,Nt,N,B-k.A,N,B,qt),++b);St+2<Bt;St+=2)Ct=nt,$t=yt,Mt=Tt,bt=Nt,yt+=f.Rc,Nt+=f.Rc,B+=2*k.A,j(z,(G+=2*f.fa)-f.fa,z,G,Ct,$t,Mt,bt,nt,yt,Tt,Nt,N,B-k.A,N,B,qt);return G+=f.fa,f.j+Bt<f.o?(s(m.ec,m.fc,z,G,qt),s(m.cc,m.dc,nt,yt,jt),s(m.Mc,m.Nc,Tt,Nt,jt),b--):1&Bt||j(z,G,null,null,nt,yt,Tt,Nt,nt,yt,Tt,Nt,N,B+k.A,null,null,qt),b}function fo(f,m,b){var k=f.F,N=[f.J];if(k!=null){var B=f.U,j=m.ba.S,z=j==lp||j==cp;m=m.ba.f.RGBA;var G=[0],nt=f.ka;G[0]=f.T,f.Kb&&(nt==0?--G[0]:(--nt,N[0]-=f.width),f.j+f.ka+f.T==f.o&&(G[0]=f.o-f.j-nt));var yt=m.eb;nt=m.fb+nt*m.A,f=xn(k,N[0],f.width,B,G,yt,nt+(z?0:3),m.A),t(b==G),f&&en(j)&&Ki(yt,nt,z,B,G,m.A)}return 0}function Rn(f){var m=f.ma,b=m.ba.S,k=11>b,N=b==op||b==ap||b==lp||b==p1||b==12||en(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!ad(m.Oa,f,N?11:12))return 0;if(N&&en(b)&&Ht(),f.da)alert("todo:use_scaling");else{if(k){if(m.Ib=Te,f.Kb){if(b=f.U+1>>1,m.memory=r(f.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+f.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=nn,Ht()}}else alert("todo:EmitYUV");N&&(m.Jb=fo,k&&Pt())}if(k&&!B5){for(f=0;256>f;++f)yI[f]=89858*(f-128)+dp>>up,xI[f]=-22014*(f-128)+dp,wI[f]=-45773*(f-128),bI[f]=113618*(f-128)+dp>>up;for(f=md;f<w1;++f)m=76283*(f-16)+dp>>up,_I[f-md]=Ai(m,255),SI[f-md]=Ai(m+8>>4,15);B5=1}return 1}function Ui(f){var m=f.ma,b=f.U,k=f.T;return t(!(1&f.ka)),0>=b||0>=k?0:(b=m.Ib(f,m),m.Jb!=null&&m.Jb(f,m,b),m.Dc+=b,1)}function qi(f){f.ma.memory=null}function xe(f,m,b,k){return rt(f,8)!=47?0:(m[0]=rt(f,14)+1,b[0]=rt(f,14)+1,k[0]=rt(f,1),rt(f,3)!=0?0:!f.h)}function Ci(f,m){if(4>f)return f+1;var b=f-2>>1;return(2+(1&f)<<b)+rt(m,b)+1}function ns(f,m){return 120<m?m-120:1<=(b=((b=iI[m-1])>>4)*f+(8-(15&b)))?b:1;var b}function As(f,m,b){var k=O(b),N=f[m+=255&k].g-8;return 0<N&&(R(b,b.u+8),k=O(b),m+=f[m].value,m+=k&(1<<N)-1),R(b,b.u+f[m].g),f[m].value}function Fn(f,m,b){return b.g+=f.g,b.value+=f.value<<m>>>0,t(8>=b.g),f.g}function Mn(f,m,b){var k=f.xc;return t((m=k==0?0:f.vc[f.md*(b>>k)+(m>>k)])<f.Wb),f.Ya[m]}function xt(f,m,b,k){var N=f.ab,B=f.c*m,j=f.C;m=j+m;var z=b,G=k;for(k=f.Ta,b=f.Ua;0<N--;){var nt=f.gc[N],yt=j,Tt=m,Nt=z,Ct=G,$t=(G=k,z=b,nt.Ea);switch(t(yt<Tt),t(Tt<=nt.nc),nt.hc){case 2:Zf(Nt,Ct,(Tt-yt)*$t,G,z);break;case 0:var Mt=yt,bt=Tt,St=G,Bt=z,qt=(ee=nt).Ea;Mt==0&&(h1(Nt,Ct,null,null,1,St,Bt),Xt(Nt,Ct+1,0,0,qt-1,St,Bt+1),Ct+=qt,Bt+=qt,++Mt);for(var jt=1<<ee.b,le=jt-1,Jt=Lt(qt,ee.b),_e=ee.K,ee=ee.w+(Mt>>ee.b)*Jt;Mt<bt;){var rn=_e,un=ee,tn=1;for(ud(Nt,Ct,St,Bt-qt,1,St,Bt);tn<qt;){var We=(tn&~le)+jt;We>qt&&(We=qt),(0,Jo[rn[un++]>>8&15])(Nt,Ct+ +tn,St,Bt+tn-qt,We-tn,St,Bt+tn),tn=We}Ct+=qt,Bt+=qt,++Mt&le||(ee+=Jt)}Tt!=nt.nc&&s(G,z-$t,G,z+(Tt-yt-1)*$t,$t);break;case 1:for($t=Nt,bt=Ct,qt=(Nt=nt.Ea)-(Bt=Nt&~(St=(Ct=1<<nt.b)-1)),Mt=Lt(Nt,nt.b),jt=nt.K,nt=nt.w+(yt>>nt.b)*Mt;yt<Tt;){for(le=jt,Jt=nt,_e=new $,ee=bt+Bt,rn=bt+Nt;bt<ee;)Kt(le[Jt++],_e),ol(_e,$t,bt,Ct,G,z),bt+=Ct,z+=Ct;bt<rn&&(Kt(le[Jt++],_e),ol(_e,$t,bt,qt,G,z),bt+=qt,z+=qt),++yt&St||(nt+=Mt)}break;case 3:if(Nt==G&&Ct==z&&0<nt.b){for(bt=G,Nt=$t=z+(Tt-yt)*$t-(Bt=(Tt-yt)*Lt(nt.Ea,nt.b)),Ct=G,St=z,Mt=[],Bt=(qt=Bt)-1;0<=Bt;--Bt)Mt[Bt]=Ct[St+Bt];for(Bt=qt-1;0<=Bt;--Bt)bt[Nt+Bt]=Mt[Bt];Hi(nt,yt,Tt,G,$t,G,z)}else Hi(nt,yt,Tt,Nt,Ct,G,z)}z=k,G=b}G!=b&&s(k,b,z,G,B)}function X(f,m){var b=f.V,k=f.Ba+f.c*f.C,N=m-f.C;if(t(m<=f.l.o),t(16>=N),0<N){var B=f.l,j=f.Ta,z=f.Ua,G=B.width;if(xt(f,N,b,k),N=z=[z],t((b=f.C)<(k=m)),t(B.v<B.va),k>B.o&&(k=B.o),b<B.j){var nt=B.j-b;b=B.j,N[0]+=nt*G}if(b>=k?b=0:(N[0]+=4*B.v,B.ka=b-B.j,B.U=B.va-B.v,B.T=k-b,b=1),b){if(z=z[0],11>(b=f.ca).S){var yt=b.f.RGBA,Tt=(k=b.S,N=B.U,B=B.T,nt=yt.eb,yt.A),Nt=B;for(yt=yt.fb+f.Ma*yt.A;0<Nt--;){var Ct=j,$t=z,Mt=N,bt=nt,St=yt;switch(k){case rp:fi(Ct,$t,Mt,bt,St);break;case op:si(Ct,$t,Mt,bt,St);break;case g1:si(Ct,$t,Mt,bt,St),Ki(bt,St,0,Mt,1,0);break;case I5:vo(Ct,$t,Mt,bt,St);break;case ap:me(Ct,$t,Mt,bt,St,1);break;case m1:me(Ct,$t,Mt,bt,St,1),Ki(bt,St,0,Mt,1,0);break;case lp:me(Ct,$t,Mt,bt,St,0);break;case cp:me(Ct,$t,Mt,bt,St,0),Ki(bt,St,1,Mt,1,0);break;case p1:Zo(Ct,$t,Mt,bt,St);break;case v1:Zo(Ct,$t,Mt,bt,St),wn(bt,St,Mt,1,0);break;case T5:mo(Ct,$t,Mt,bt,St);break;default:t(0)}z+=G,yt+=Tt}f.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=b.height)}}f.C=m,t(f.C<=f.i)}function Rt(f){var m;if(0<f.ua)return 0;for(m=0;m<f.Wb;++m){var b=f.Ya[m].G,k=f.Ya[m].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function _t(f,m,b,k,N,B){if(f.Z!=0){var j=f.qd,z=f.rd;for(t(sa[f.Z]!=null);m<b;++m)sa[f.Z](j,z,k,N,k,N,B),j=k,z=N,N+=B;f.qd=j,f.rd=z}}function re(f,m){var b=f.l.ma,k=b.Z==0||b.Z==1?f.l.j:f.C;if(k=f.C<k?k:f.C,t(m<=f.l.o),m>k){var N=f.l.width,B=b.ca,j=b.tb+N*k,z=f.V,G=f.Ba+f.c*k,nt=f.gc;t(f.ab==1),t(nt[0].hc==3),tp(nt[0],k,m,z,G,B,j),_t(b,k,m,B,j,N)}f.C=f.Ma=m}function ge(f,m,b,k,N,B,j){var z=f.$/k,G=f.$%k,nt=f.m,yt=f.s,Tt=b+f.$,Nt=Tt;N=b+k*N;var Ct=b+k*B,$t=280+yt.ua,Mt=f.Pb?z:16777216,bt=0<yt.ua?yt.Wa:null,St=yt.wc,Bt=Tt<Ct?Mn(yt,G,z):null;t(f.C<B),t(Ct<=N);var qt=!1;t:for(;;){for(;qt||Tt<Ct;){var jt=0;if(z>=Mt){var le=Tt-b;t((Mt=f).Pb),Mt.wd=Mt.m,Mt.xd=le,0<Mt.s.ua&&ut(Mt.s.Wa,Mt.s.vb),Mt=z+oI}if(G&St||(Bt=Mn(yt,G,z)),t(Bt!=null),Bt.Qb&&(m[Tt]=Bt.qb,qt=!0),!qt)if(Z(nt),Bt.jc){jt=nt,le=m;var Jt=Tt,_e=Bt.pd[O(jt)&Es-1];t(Bt.jc),256>_e.g?(R(jt,jt.u+_e.g),le[Jt]=_e.value,jt=0):(R(jt,jt.u+_e.g-256),t(256<=_e.value),jt=_e.value),jt==0&&(qt=!0)}else jt=As(Bt.G[0],Bt.H[0],nt);if(nt.h)break;if(qt||256>jt){if(!qt)if(Bt.nd)m[Tt]=(Bt.qb|jt<<8)>>>0;else{if(Z(nt),qt=As(Bt.G[1],Bt.H[1],nt),Z(nt),le=As(Bt.G[2],Bt.H[2],nt),Jt=As(Bt.G[3],Bt.H[3],nt),nt.h)break;m[Tt]=(Jt<<24|qt<<16|jt<<8|le)>>>0}if(qt=!1,++Tt,++G>=k&&(G=0,++z,j!=null&&z<=B&&!(z%16)&&j(f,z),bt!=null))for(;Nt<Tt;)jt=m[Nt++],bt.X[(506832829*jt&4294967295)>>>bt.Mb]=jt}else if(280>jt){if(jt=Ci(jt-256,nt),le=As(Bt.G[4],Bt.H[4],nt),Z(nt),le=ns(k,le=Ci(le,nt)),nt.h)break;if(Tt-b<le||N-Tt<jt)break t;for(Jt=0;Jt<jt;++Jt)m[Tt+Jt]=m[Tt+Jt-le];for(Tt+=jt,G+=jt;G>=k;)G-=k,++z,j!=null&&z<=B&&!(z%16)&&j(f,z);if(t(Tt<=N),G&St&&(Bt=Mn(yt,G,z)),bt!=null)for(;Nt<Tt;)jt=m[Nt++],bt.X[(506832829*jt&4294967295)>>>bt.Mb]=jt}else{if(!(jt<$t))break t;for(qt=jt-280,t(bt!=null);Nt<Tt;)jt=m[Nt++],bt.X[(506832829*jt&4294967295)>>>bt.Mb]=jt;jt=Tt,t(!(qt>>>(le=bt).Xa)),m[jt]=le.X[qt],qt=!0}qt||t(nt.h==E(nt))}if(f.Pb&&nt.h&&Tt<N)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&ut(f.s.vb,f.s.Wa);else{if(nt.h)break t;j!=null&&j(f,z>B?B:z),f.a=0,f.$=Tt-b}return 1}return f.a=3,0}function be(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var m=f.Wa;m!=null&&(m.X=null),f.vb=null,t(f!=null)}function Ce(){var f=new d1;return f==null?null:(f.a=0,f.xb=L5,es("Predictor","VP8LPredictors"),es("Predictor","VP8LPredictors_C"),es("PredictorAdd","VP8LPredictorsAdd"),es("PredictorAdd","VP8LPredictorsAdd_C"),Zf=se,ol=ie,fi=Yt,si=Ze,Zo=Ie,mo=ts,vo=Zt,W.VP8LMapColor32b=kc,W.VP8LMapColor8b=ep,f)}function kn(f,m,b,k,N){var B=1,j=[f],z=[m],G=k.m,nt=k.s,yt=null,Tt=0;t:for(;;){if(b)for(;B&&rt(G,1);){var Nt=j,Ct=z,$t=k,Mt=1,bt=$t.m,St=$t.gc[$t.ab],Bt=rt(bt,2);if($t.Oc&1<<Bt)B=0;else{switch($t.Oc|=1<<Bt,St.hc=Bt,St.Ea=Nt[0],St.nc=Ct[0],St.K=[null],++$t.ab,t(4>=$t.ab),Bt){case 0:case 1:St.b=rt(bt,3)+2,Mt=kn(Lt(St.Ea,St.b),Lt(St.nc,St.b),0,$t,St.K),St.K=St.K[0];break;case 3:var qt,jt=rt(bt,8)+1,le=16<jt?0:4<jt?1:2<jt?2:3;if(Nt[0]=Lt(St.Ea,le),St.b=le,qt=Mt=kn(jt,1,0,$t,St.K)){var Jt,_e=jt,ee=St,rn=1<<(8>>ee.b),un=r(rn);if(un==null)qt=0;else{var tn=ee.K[0],We=ee.w;for(un[0]=ee.K[0][0],Jt=1;Jt<1*_e;++Jt)un[Jt]=U(tn[We+Jt],un[Jt-1]);for(;Jt<4*rn;++Jt)un[Jt]=0;ee.K[0]=null,ee.K[0]=un,qt=1}}Mt=qt;break;case 2:break;default:t(0)}B=Mt}}if(j=j[0],z=z[0],B&&rt(G,1)&&!(B=1<=(Tt=rt(G,4))&&11>=Tt)){k.a=3;break t}var mn;if(mn=B)e:{var gn,$e,is,pi=k,rs=j,gi=z,dn=Tt,Ei=b,Ii=pi.m,ms=pi.s,Is=[null],ri=1,Qi=0,Fr=rI[dn];n:for(;;){if(Ei&&rt(Ii,1)){var vs=rt(Ii,3)+2,xo=Lt(rs,vs),dl=Lt(gi,vs),Tc=xo*dl;if(!kn(xo,dl,0,pi,Is))break n;for(Is=Is[0],ms.xc=vs,gn=0;gn<Tc;++gn){var ia=Is[gn]>>8&65535;Is[gn]=ia,ia>=ri&&(ri=ia+1)}}if(Ii.h)break n;for($e=0;5>$e;++$e){var jn=N5[$e];!$e&&0<dn&&(jn+=1<<dn),Qi<jn&&(Qi=jn)}var x1=o(ri*Fr,A),V5=ri,z5=o(V5,et);if(z5==null)var fp=null;else t(65536>=V5),fp=z5;var vd=r(Qi);if(fp==null||vd==null||x1==null){pi.a=1;break n}var pp=x1;for(gn=is=0;gn<ri;++gn){var dr=fp[gn],Nc=dr.G,Dc=dr.H,U5=0,gp=1,q5=0;for($e=0;5>$e;++$e){jn=N5[$e],Nc[$e]=pp,Dc[$e]=is,!$e&&0<dn&&(jn+=1<<dn);i:{var mp,_1=jn,vp=pi,yd=vd,AI=pp,PI=is,S1=0,ra=vp.m,EI=rt(ra,1);if(i(yd,0,0,_1),EI){var II=rt(ra,1)+1,TI=rt(ra,1),H5=rt(ra,TI==0?1:8);yd[H5]=1,II==2&&(yd[H5=rt(ra,8)]=1);var yp=1}else{var W5=r(19),G5=rt(ra,4)+4;if(19<G5){vp.a=3;var bp=0;break i}for(mp=0;mp<G5;++mp)W5[sI[mp]]=rt(ra,3);var C1=void 0,bd=void 0,K5=vp,NI=W5,wp=_1,Y5=yd,k1=0,oa=K5.m,X5=8,Q5=o(128,A);s:for(;_(Q5,0,7,NI,19);){if(rt(oa,1)){var DI=2+2*rt(oa,3);if((C1=2+rt(oa,DI))>wp)break s}else C1=wp;for(bd=0;bd<wp&&C1--;){Z(oa);var J5=Q5[0+(127&O(oa))];R(oa,oa.u+J5.g);var Lc=J5.value;if(16>Lc)Y5[bd++]=Lc,Lc!=0&&(X5=Lc);else{var LI=Lc==16,Z5=Lc-16,MI=eI[Z5],tw=rt(oa,tI[Z5])+MI;if(bd+tw>wp)break s;for(var OI=LI?X5:0;0<tw--;)Y5[bd++]=OI}}k1=1;break s}k1||(K5.a=3),yp=k1}(yp=yp&&!ra.h)&&(S1=_(AI,PI,8,yd,_1)),yp&&S1!=0?bp=S1:(vp.a=3,bp=0)}if(bp==0)break n;if(gp&&nI[$e]==1&&(gp=pp[is].g==0),U5+=pp[is].g,is+=bp,3>=$e){var wd,A1=vd[0];for(wd=1;wd<jn;++wd)vd[wd]>A1&&(A1=vd[wd]);q5+=A1}}if(dr.nd=gp,dr.Qb=0,gp&&(dr.qb=(Nc[3][Dc[3]+0].value<<24|Nc[1][Dc[1]+0].value<<16|Nc[2][Dc[2]+0].value)>>>0,U5==0&&256>Nc[0][Dc[0]+0].value&&(dr.Qb=1,dr.qb+=Nc[0][Dc[0]+0].value<<8)),dr.jc=!dr.Qb&&6>q5,dr.jc){var xp,_o=dr;for(xp=0;xp<Es;++xp){var aa=xp,la=_o.pd[aa],_p=_o.G[0][_o.H[0]+aa];256<=_p.value?(la.g=_p.g+256,la.value=_p.value):(la.g=0,la.value=0,aa>>=Fn(_p,8,la),aa>>=Fn(_o.G[1][_o.H[1]+aa],16,la),aa>>=Fn(_o.G[2][_o.H[2]+aa],0,la),Fn(_o.G[3][_o.H[3]+aa],24,la))}}}ms.vc=Is,ms.Wb=ri,ms.Ya=fp,ms.yc=x1,mn=1;break e}mn=0}if(!(B=mn)){k.a=3;break t}if(0<Tt){if(nt.ua=1<<Tt,!dt(nt.Wa,Tt)){k.a=1,B=0;break t}}else nt.ua=0;var P1=k,ew=j,RI=z,E1=P1.s,I1=E1.xc;if(P1.c=ew,P1.i=RI,E1.md=Lt(ew,I1),E1.wc=I1==0?-1:(1<<I1)-1,b){k.xb=fI;break t}if((yt=r(j*z))==null){k.a=1,B=0;break t}B=(B=ge(k,yt,0,j,z,z,null))&&!G.h;break t}return B?(N!=null?N[0]=yt:(t(yt==null),t(b)),k.$=0,b||be(nt)):be(nt),B}function Ps(f,m){var b=f.c*f.i,k=b+m+16*m;return t(f.c<=m),f.V=r(k),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+b+m,1)}function ki(f,m){var b=f.C,k=m-b,N=f.V,B=f.Ba+f.c*b;for(t(m<=f.l.o);0<k;){var j=16<k?16:k,z=f.l.ma,G=f.l.width,nt=G*j,yt=z.ca,Tt=z.tb+G*b,Nt=f.Ta,Ct=f.Ua;xt(f,j,N,B),Gn(Nt,Ct,yt,Tt,nt),_t(z,b,b+j,yt,Tt,G),k-=j,N+=j*f.c,b+=j}t(b==m),f.C=f.Ma=m}function Lr(){this.ub=this.yd=this.td=this.Rb=0}function lc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function cc(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Lf(){this.Yb=function(){var f=[];return function m(b,k,N){for(var B=N[k],j=0;j<B&&(b.push(N.length>k+1?[]:0),!(N.length<k+1));j++)m(b[j],k+1,N)}(f,0,[3,11]),f}()}function z0(){this.jb=r(3),this.Wc=a([4,8],Lf),this.Xc=a([4,17],Lf)}function U0(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function uc(){this.ld=this.La=this.dd=this.tc=0}function Mf(){this.Na=this.la=0}function q0(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hu(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function H0(){this.uc=this.M=this.Nb=0,this.wa=Array(new uc),this.Y=0,this.ya=Array(new Hu),this.aa=0,this.l=new dc}function Of(){this.y=r(16),this.f=r(8),this.ea=r(8)}function W0(){this.cb=this.a=0,this.sc="",this.m=new kt,this.Od=new Lr,this.Kc=new lc,this.ed=new U0,this.Qa=new cc,this.Ic=this.$c=this.Aa=0,this.D=new H0,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,kt),this.ia=0,this.pb=o(4,q0),this.Pa=new z0,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Of),this.Hd=0,this.rb=Array(new Mf),this.sb=0,this.wa=Array(new uc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hu),this.L=this.aa=0,this.gd=a([4,2],uc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function G0(){var f=new W0;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,gd||(gd=Bf)),f}function Hn(f,m,b){return f.a==0&&(f.a=m,f.sc=b,f.cb=0),0}function Rf(f,m,b){return 3<=b&&f[m+0]==157&&f[m+1]==1&&f[m+2]==42}function Ff(f,m){if(f==null)return 0;if(f.a=0,f.sc="OK",m==null)return Hn(f,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,k=m.w,N=m.ha;if(4>N)return Hn(f,7,"Truncated header.");var B=b[k+0]|b[k+1]<<8|b[k+2]<<16,j=f.Od;if(j.Rb=!(1&B),j.td=B>>1&7,j.yd=B>>4&1,j.ub=B>>5,3<j.td)return Hn(f,3,"Incorrect keyframe parameters.");if(!j.yd)return Hn(f,4,"Frame not displayable.");k+=3,N-=3;var z=f.Kc;if(j.Rb){if(7>N)return Hn(f,7,"cannot parse picture header");if(!Rf(b,k,N))return Hn(f,3,"Bad code word");z.c=16383&(b[k+4]<<8|b[k+3]),z.Td=b[k+4]>>6,z.i=16383&(b[k+6]<<8|b[k+5]),z.Ud=b[k+6]>>6,k+=7,N-=7,f.za=z.c+15>>4,f.Ub=z.i+15>>4,m.width=z.c,m.height=z.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((B=f.Pa).jb,0,255,B.jb.length),t((B=f.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,i(B.Zb,0,0,B.Zb.length),i(B.Lb,0,0,B.Lb)}if(j.ub>N)return Hn(f,7,"bad partition length");mt(B=f.m,b,k,j.ub),k+=j.ub,N-=j.ub,j.Rb&&(z.Ld=st(B),z.Kd=st(B)),z=f.Qa;var G,nt=f.Pa;if(t(B!=null),t(z!=null),z.Cb=st(B),z.Cb){if(z.Bb=st(B),st(B)){for(z.Fb=st(B),G=0;4>G;++G)z.Zb[G]=st(B)?gt(B,7):0;for(G=0;4>G;++G)z.Lb[G]=st(B)?gt(B,6):0}if(z.Bb)for(G=0;3>G;++G)nt.jb[G]=st(B)?ht(B,8):255}else z.Bb=0;if(B.Ka)return Hn(f,3,"cannot parse segment header");if((z=f.ed).zd=st(B),z.Tb=ht(B,6),z.wb=ht(B,3),z.Pc=st(B),z.Pc&&st(B)){for(nt=0;4>nt;++nt)st(B)&&(z.vd[nt]=gt(B,6));for(nt=0;4>nt;++nt)st(B)&&(z.od[nt]=gt(B,6))}if(f.L=z.Tb==0?0:z.zd?1:2,B.Ka)return Hn(f,3,"cannot parse filter header");var yt=N;if(N=G=k,k=G+yt,z=yt,f.Xb=(1<<ht(f.m,2))-1,yt<3*(nt=f.Xb))b=7;else{for(G+=3*nt,z-=3*nt,yt=0;yt<nt;++yt){var Tt=b[N+0]|b[N+1]<<8|b[N+2]<<16;Tt>z&&(Tt=z),mt(f.Jc[+yt],b,G,Tt),G+=Tt,z-=Tt,N+=3}mt(f.Jc[+nt],b,G,z),b=G<k?0:5}if(b!=0)return Hn(f,b,"cannot parse partitions");for(b=ht(G=f.m,7),N=st(G)?gt(G,4):0,k=st(G)?gt(G,4):0,z=st(G)?gt(G,4):0,nt=st(G)?gt(G,4):0,G=st(G)?gt(G,4):0,yt=f.Qa,Tt=0;4>Tt;++Tt){if(yt.Cb){var Nt=yt.Zb[Tt];yt.Fb||(Nt+=b)}else{if(0<Tt){f.pb[Tt]=f.pb[0];continue}Nt=b}var Ct=f.pb[Tt];Ct.Sc[0]=y1[Ai(Nt+N,127)],Ct.Sc[1]=b1[Ai(Nt+0,127)],Ct.Eb[0]=2*y1[Ai(Nt+k,127)],Ct.Eb[1]=101581*b1[Ai(Nt+z,127)]>>16,8>Ct.Eb[1]&&(Ct.Eb[1]=8),Ct.Qc[0]=y1[Ai(Nt+nt,117)],Ct.Qc[1]=b1[Ai(Nt+G,127)],Ct.lc=Nt+G}if(!j.Rb)return Hn(f,4,"Not a key frame.");for(st(B),j=f.Pa,b=0;4>b;++b){for(N=0;8>N;++N)for(k=0;3>k;++k)for(z=0;11>z;++z)nt=ct(B,dI[b][N][k][z])?ht(B,8):cI[b][N][k][z],j.Wc[b][N].Yb[k][z]=nt;for(N=0;17>N;++N)j.Xc[b][N]=j.Wc[b][hI[N]]}return f.kc=st(B),f.kc&&(f.Bd=ht(B,8)),f.cb=1}function Bf(f,m,b,k,N,B,j){var z=m[N].Yb[b];for(b=0;16>N;++N){if(!ct(f,z[b+0]))return N;for(;!ct(f,z[b+1]);)if(z=m[++N].Yb[0],b=0,N==16)return 16;var G=m[N+1].Yb;if(ct(f,z[b+2])){var nt=f,yt=0;if(ct(nt,(Nt=z)[(Tt=b)+3]))if(ct(nt,Nt[Tt+6])){for(z=0,Tt=2*(yt=ct(nt,Nt[Tt+8]))+(Nt=ct(nt,Nt[Tt+9+yt])),yt=0,Nt=aI[Tt];Nt[z];++z)yt+=yt+ct(nt,Nt[z]);yt+=3+(8<<Tt)}else ct(nt,Nt[Tt+7])?(yt=7+2*ct(nt,165),yt+=ct(nt,145)):yt=5+ct(nt,159);else yt=ct(nt,Nt[Tt+4])?3+ct(nt,Nt[Tt+5]):2;z=G[2]}else yt=1,z=G[1];G=j+lI[N],0>(nt=f).b&&q(nt);var Tt,Nt=nt.b,Ct=(Tt=nt.Ca>>1)-(nt.I>>Nt)>>31;--nt.b,nt.Ca+=Ct,nt.Ca|=1,nt.I-=(Tt+1&Ct)<<Nt,B[G]=((yt^Ct)-Ct)*k[(0<N)+0]}return 16}function Wu(f){var m=f.rb[f.sb-1];m.la=0,m.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function K0(f,m){if(f==null)return 0;if(m==null)return Hn(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Ff(f,m))return 0;if(t(f.cb),m.ac==null||m.ac(m)){m.ob&&(f.L=0);var b=hp[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=m.v-b>>4,f.zb=m.j-b>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=m.o+15+b>>4,f.Hb=m.va+15+b>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var k=f.ed;for(b=0;4>b;++b){var N;if(f.Qa.Cb){var B=f.Qa.Lb[b];f.Qa.Fb||(B+=k.Tb)}else B=k.Tb;for(N=0;1>=N;++N){var j=f.gd[b][N],z=B;if(k.Pc&&(z+=k.vd[0],N&&(z+=k.od[0])),0<(z=0>z?0:63<z?63:z)){var G=z;0<k.wb&&(G=4<k.wb?G>>2:G>>1)>9-k.wb&&(G=9-k.wb),1>G&&(G=1),j.dd=G,j.tc=2*z+G,j.ld=40<=z?2:15<=z?1:0}else j.tc=0;j.La=N}}}b=0}else Hn(f,6,"Frame setup failed"),b=f.a;if(b=b==0){if(b){f.$c=0,0<f.Aa||(f.Ic=kI);t:{b=f.Ic,k=4*(G=f.za);var nt=32*G,yt=G+1,Tt=0<f.L?G*(0<f.Aa?2:1):0,Nt=(f.Aa==2?2:1)*G;if((j=k+832+(N=3*(16*b+hp[f.L])/2*nt)+(B=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=j)b=0;else{if(j>f.Vb){if(f.Vb=0,f.Ec=r(j),f.Fc=0,f.Ec==null){b=Hn(f,1,"no memory during frame initialization.");break t}f.Vb=j}j=f.Ec,z=f.Fc,f.Ac=j,f.Bc=z,z+=k,f.Gd=o(nt,Of),f.Hd=0,f.rb=o(yt+1,Mf),f.sb=1,f.wa=Tt?o(Tt,uc):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=G),t(!0),f.oc=j,f.pc=z,z+=832,f.ya=o(Nt,Hu),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=G),f.R=16*G,f.B=8*G,G=(nt=hp[f.L])*f.R,nt=nt/2*f.B,f.sa=j,f.ta=z+G,f.qa=f.sa,f.ra=f.ta+16*b*f.R+nt,f.Ha=f.qa,f.Ia=f.ra+8*b*f.B+nt,f.$c=0,z+=N,f.mb=B?j:null,f.nb=B?z:null,t(z+B<=f.Fc+f.Vb),Wu(f),i(f.Ac,f.Bc,0,k),b=1}}if(b){if(m.ka=0,m.y=f.sa,m.O=f.ta,m.f=f.qa,m.N=f.ra,m.ea=f.Ha,m.Vd=f.Ia,m.fa=f.R,m.Rc=f.B,m.F=null,m.J=0,!sp){for(b=-255;255>=b;++b)hs[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)bo[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)pd[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Ic[255+b]=0>b?0:255<b?255:b;sp=1}Ac=Q0,yo=Y0,dd=$f,ii=X0,Wi=Vf,Wn=jf,Pc=Ju,np=il,hd=u1,al=Zu,ll=c1,ta=vc,cl=td,Ec=Xf,ul=Yf,ea=Or,fd=go,Gi=l1,ur[0]=Mr,ur[1]=J0,ur[2]=n1,ur[3]=s1,ur[4]=qf,ur[5]=gc,ur[6]=Hf,ur[7]=Yu,ur[8]=r1,ur[9]=i1,na[0]=zf,na[1]=t1,na[2]=po,na[3]=fc,na[4]=Ms,na[5]=e1,na[6]=Uf,wo[0]=Yo,wo[1]=Z0,wo[2]=o1,wo[3]=Xu,wo[4]=sl,wo[5]=a1,wo[6]=Qu,b=1}else b=0}b&&(b=function(Ct,$t){for(Ct.M=0;Ct.M<Ct.Va;++Ct.M){var Mt,bt=Ct.Jc[Ct.M&Ct.Xb],St=Ct.m,Bt=Ct;for(Mt=0;Mt<Bt.za;++Mt){var qt=St,jt=Bt,le=jt.Ac,Jt=jt.Bc+4*Mt,_e=jt.zc,ee=jt.ya[jt.aa+Mt];if(jt.Qa.Bb?ee.$b=ct(qt,jt.Pa.jb[0])?2+ct(qt,jt.Pa.jb[2]):ct(qt,jt.Pa.jb[1]):ee.$b=0,jt.kc&&(ee.Ad=ct(qt,jt.Bd)),ee.Za=!ct(qt,145)+0,ee.Za){var rn=ee.Ob,un=0;for(jt=0;4>jt;++jt){var tn,We=_e[0+jt];for(tn=0;4>tn;++tn){We=uI[le[Jt+tn]][We];for(var mn=D5[ct(qt,We[0])];0<mn;)mn=D5[2*mn+ct(qt,We[mn])];We=-mn,le[Jt+tn]=We}s(rn,un,le,Jt,4),un+=4,_e[0+jt]=We}}else We=ct(qt,156)?ct(qt,128)?1:3:ct(qt,163)?2:0,ee.Ob[0]=We,i(le,Jt,We,4),i(_e,0,We,4);ee.Dd=ct(qt,142)?ct(qt,114)?ct(qt,183)?1:3:2:0}if(Bt.m.Ka)return Hn(Ct,7,"Premature end-of-partition0 encountered.");for(;Ct.ja<Ct.za;++Ct.ja){if(Bt=bt,qt=(St=Ct).rb[St.sb-1],le=St.rb[St.sb+St.ja],Mt=St.ya[St.aa+St.ja],Jt=St.kc?Mt.Ad:0)qt.la=le.la=0,Mt.Za||(qt.Na=le.Na=0),Mt.Hc=0,Mt.Gc=0,Mt.ia=0;else{var gn,$e;if(qt=le,le=Bt,Jt=St.Pa.Xc,_e=St.ya[St.aa+St.ja],ee=St.pb[_e.$b],jt=_e.ad,rn=0,un=St.rb[St.sb-1],We=tn=0,i(jt,rn,0,384),_e.Za)var is=0,pi=Jt[3];else{mn=r(16);var rs=qt.Na+un.Na;if(rs=gd(le,Jt[1],rs,ee.Eb,0,mn,0),qt.Na=un.Na=(0<rs)+0,1<rs)Ac(mn,0,jt,rn);else{var gi=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)jt[rn+mn]=gi}is=1,pi=Jt[0]}var dn=15&qt.la,Ei=15&un.la;for(mn=0;4>mn;++mn){var Ii=1&Ei;for(gi=$e=0;4>gi;++gi)dn=dn>>1|(Ii=(rs=gd(le,pi,rs=Ii+(1&dn),ee.Sc,is,jt,rn))>is)<<7,$e=$e<<2|(3<rs?3:1<rs?2:jt[rn+0]!=0),rn+=16;dn>>=4,Ei=Ei>>1|Ii<<7,tn=(tn<<8|$e)>>>0}for(pi=dn,is=Ei>>4,gn=0;4>gn;gn+=2){for($e=0,dn=qt.la>>4+gn,Ei=un.la>>4+gn,mn=0;2>mn;++mn){for(Ii=1&Ei,gi=0;2>gi;++gi)rs=Ii+(1&dn),dn=dn>>1|(Ii=0<(rs=gd(le,Jt[2],rs,ee.Qc,0,jt,rn)))<<3,$e=$e<<2|(3<rs?3:1<rs?2:jt[rn+0]!=0),rn+=16;dn>>=2,Ei=Ei>>1|Ii<<5}We|=$e<<4*gn,pi|=dn<<4<<gn,is|=(240&Ei)<<gn}qt.la=pi,un.la=is,_e.Hc=tn,_e.Gc=We,_e.ia=43690&We?0:ee.ia,Jt=!(tn|We)}if(0<St.L&&(St.wa[St.Y+St.ja]=St.gd[Mt.$b][Mt.Za],St.wa[St.Y+St.ja].La|=!Jt),Bt.Ka)return Hn(Ct,7,"Premature end-of-file encountered.")}if(Wu(Ct),St=$t,Bt=1,Mt=(bt=Ct).D,qt=0<bt.L&&bt.M>=bt.zb&&bt.M<=bt.Va,bt.Aa==0)t:{if(Mt.M=bt.M,Mt.uc=qt,od(bt,Mt),Bt=1,Mt=($e=bt.D).Nb,qt=(We=hp[bt.L])*bt.R,le=We/2*bt.B,mn=16*Mt*bt.R,gi=8*Mt*bt.B,Jt=bt.sa,_e=bt.ta-qt+mn,ee=bt.qa,jt=bt.ra-le+gi,rn=bt.Ha,un=bt.Ia-le+gi,Ei=(dn=$e.M)==0,tn=dn>=bt.Va-1,bt.Aa==2&&od(bt,$e),$e.uc)for(Ii=(rs=bt).D.M,t(rs.D.uc),$e=rs.yb;$e<rs.Hb;++$e){is=$e,pi=Ii;var ms=(Is=(jn=rs).D).Nb;gn=jn.R;var Is=Is.wa[Is.Y+is],ri=jn.sa,Qi=jn.ta+16*ms*gn+16*is,Fr=Is.dd,vs=Is.tc;if(vs!=0)if(t(3<=vs),jn.L==1)0<is&&ea(ri,Qi,gn,vs+4),Is.La&&Gi(ri,Qi,gn,vs),0<pi&&ul(ri,Qi,gn,vs+4),Is.La&&fd(ri,Qi,gn,vs);else{var xo=jn.B,dl=jn.qa,Tc=jn.ra+8*ms*xo+8*is,ia=jn.Ha,jn=jn.Ia+8*ms*xo+8*is;ms=Is.ld,0<is&&(np(ri,Qi,gn,vs+4,Fr,ms),al(dl,Tc,ia,jn,xo,vs+4,Fr,ms)),Is.La&&(ta(ri,Qi,gn,vs,Fr,ms),Ec(dl,Tc,ia,jn,xo,vs,Fr,ms)),0<pi&&(Pc(ri,Qi,gn,vs+4,Fr,ms),hd(dl,Tc,ia,jn,xo,vs+4,Fr,ms)),Is.La&&(ll(ri,Qi,gn,vs,Fr,ms),cl(dl,Tc,ia,jn,xo,vs,Fr,ms))}}if(bt.ia&&alert("todo:DitherRow"),St.put!=null){if($e=16*dn,dn=16*(dn+1),Ei?(St.y=bt.sa,St.O=bt.ta+mn,St.f=bt.qa,St.N=bt.ra+gi,St.ea=bt.Ha,St.W=bt.Ia+gi):($e-=We,St.y=Jt,St.O=_e,St.f=ee,St.N=jt,St.ea=rn,St.W=un),tn||(dn-=We),dn>St.o&&(dn=St.o),St.F=null,St.J=null,bt.Fa!=null&&0<bt.Fa.length&&$e<dn&&(St.J=id(bt,St,$e,dn-$e),St.F=bt.mb,St.F==null&&St.F.length==0)){Bt=Hn(bt,3,"Could not decode alpha data.");break t}$e<St.j&&(We=St.j-$e,$e=St.j,t(!(1&We)),St.O+=bt.R*We,St.N+=bt.B*(We>>1),St.W+=bt.B*(We>>1),St.F!=null&&(St.J+=St.width*We)),$e<dn&&(St.O+=St.v,St.N+=St.v>>1,St.W+=St.v>>1,St.F!=null&&(St.J+=St.v),St.ka=$e-St.j,St.U=St.va-St.v,St.T=dn-$e,Bt=St.put(St))}Mt+1!=bt.Ic||tn||(s(bt.sa,bt.ta-qt,Jt,_e+16*bt.R,qt),s(bt.qa,bt.ra-le,ee,jt+8*bt.B,le),s(bt.Ha,bt.Ia-le,rn,un+8*bt.B,le))}if(!Bt)return Hn(Ct,6,"Output aborted.")}return 1}(f,m)),m.bc!=null&&m.bc(m),b&=1}return b?(f.cb=0,b):0}function ar(f,m,b,k,N){N=f[m+b+32*k]+(N>>3),f[m+b+32*k]=-256&N?0>N?0:255:N}function hc(f,m,b,k,N,B){ar(f,m,0,b,k+N),ar(f,m,1,b,k+B),ar(f,m,2,b,k-B),ar(f,m,3,b,k-N)}function di(f){return(20091*f>>16)+f}function Gu(f,m,b,k){var N,B=0,j=r(16);for(N=0;4>N;++N){var z=f[m+0]+f[m+8],G=f[m+0]-f[m+8],nt=(35468*f[m+4]>>16)-di(f[m+12]),yt=di(f[m+4])+(35468*f[m+12]>>16);j[B+0]=z+yt,j[B+1]=G+nt,j[B+2]=G-nt,j[B+3]=z-yt,B+=4,m++}for(N=B=0;4>N;++N)z=(f=j[B+0]+4)+j[B+8],G=f-j[B+8],nt=(35468*j[B+4]>>16)-di(j[B+12]),ar(b,k,0,0,z+(yt=di(j[B+4])+(35468*j[B+12]>>16))),ar(b,k,1,0,G+nt),ar(b,k,2,0,G-nt),ar(b,k,3,0,z-yt),B++,k+=32}function jf(f,m,b,k){var N=f[m+0]+4,B=35468*f[m+4]>>16,j=di(f[m+4]),z=35468*f[m+1]>>16;hc(b,k,0,N+j,f=di(f[m+1]),z),hc(b,k,1,N+B,f,z),hc(b,k,2,N-B,f,z),hc(b,k,3,N-j,f,z)}function Y0(f,m,b,k,N){Gu(f,m,b,k),N&&Gu(f,m+16,b,k+4)}function $f(f,m,b,k){yo(f,m+0,b,k,1),yo(f,m+32,b,k+128,1)}function X0(f,m,b,k){var N;for(f=f[m+0]+4,N=0;4>N;++N)for(m=0;4>m;++m)ar(b,k,m,N,f)}function Vf(f,m,b,k){f[m+0]&&ii(f,m+0,b,k),f[m+16]&&ii(f,m+16,b,k+4),f[m+32]&&ii(f,m+32,b,k+128),f[m+48]&&ii(f,m+48,b,k+128+4)}function Q0(f,m,b,k){var N,B=r(16);for(N=0;4>N;++N){var j=f[m+0+N]+f[m+12+N],z=f[m+4+N]+f[m+8+N],G=f[m+4+N]-f[m+8+N],nt=f[m+0+N]-f[m+12+N];B[0+N]=j+z,B[8+N]=j-z,B[4+N]=nt+G,B[12+N]=nt-G}for(N=0;4>N;++N)j=(f=B[0+4*N]+3)+B[3+4*N],z=B[1+4*N]+B[2+4*N],G=B[1+4*N]-B[2+4*N],nt=f-B[3+4*N],b[k+0]=j+z>>3,b[k+16]=nt+G>>3,b[k+32]=j-z>>3,b[k+48]=nt-G>>3,k+=64}function Ku(f,m,b){var k,N=m-32,B=Pi,j=255-f[N-1];for(k=0;k<b;++k){var z,G=B,nt=j+f[m-1];for(z=0;z<b;++z)f[m+z]=G[nt+f[N+z]];m+=32}}function J0(f,m){Ku(f,m,4)}function Z0(f,m){Ku(f,m,8)}function t1(f,m){Ku(f,m,16)}function po(f,m){var b;for(b=0;16>b;++b)s(f,m+32*b,f,m-32,16)}function fc(f,m){var b;for(b=16;0<b;--b)i(f,m,f[m-1],16),m+=32}function pc(f,m,b){var k;for(k=0;16>k;++k)i(m,b+32*k,f,16)}function zf(f,m){var b,k=16;for(b=0;16>b;++b)k+=f[m-1+32*b]+f[m+b-32];pc(k>>5,f,m)}function Ms(f,m){var b,k=8;for(b=0;16>b;++b)k+=f[m-1+32*b];pc(k>>4,f,m)}function e1(f,m){var b,k=8;for(b=0;16>b;++b)k+=f[m+b-32];pc(k>>4,f,m)}function Uf(f,m){pc(128,f,m)}function Le(f,m,b){return f+2*m+b+2>>2}function n1(f,m){var b,k=m-32;for(k=new Uint8Array([Le(f[k-1],f[k+0],f[k+1]),Le(f[k+0],f[k+1],f[k+2]),Le(f[k+1],f[k+2],f[k+3]),Le(f[k+2],f[k+3],f[k+4])]),b=0;4>b;++b)s(f,m+32*b,k,0,k.length)}function s1(f,m){var b=f[m-1],k=f[m-1+32],N=f[m-1+64],B=f[m-1+96];At(f,m+0,16843009*Le(f[m-1-32],b,k)),At(f,m+32,16843009*Le(b,k,N)),At(f,m+64,16843009*Le(k,N,B)),At(f,m+96,16843009*Le(N,B,B))}function Mr(f,m){var b,k=4;for(b=0;4>b;++b)k+=f[m+b-32]+f[m-1+32*b];for(k>>=3,b=0;4>b;++b)i(f,m+32*b,k,4)}function qf(f,m){var b=f[m-1+0],k=f[m-1+32],N=f[m-1+64],B=f[m-1-32],j=f[m+0-32],z=f[m+1-32],G=f[m+2-32],nt=f[m+3-32];f[m+0+96]=Le(k,N,f[m-1+96]),f[m+1+96]=f[m+0+64]=Le(b,k,N),f[m+2+96]=f[m+1+64]=f[m+0+32]=Le(B,b,k),f[m+3+96]=f[m+2+64]=f[m+1+32]=f[m+0+0]=Le(j,B,b),f[m+3+64]=f[m+2+32]=f[m+1+0]=Le(z,j,B),f[m+3+32]=f[m+2+0]=Le(G,z,j),f[m+3+0]=Le(nt,G,z)}function Hf(f,m){var b=f[m+1-32],k=f[m+2-32],N=f[m+3-32],B=f[m+4-32],j=f[m+5-32],z=f[m+6-32],G=f[m+7-32];f[m+0+0]=Le(f[m+0-32],b,k),f[m+1+0]=f[m+0+32]=Le(b,k,N),f[m+2+0]=f[m+1+32]=f[m+0+64]=Le(k,N,B),f[m+3+0]=f[m+2+32]=f[m+1+64]=f[m+0+96]=Le(N,B,j),f[m+3+32]=f[m+2+64]=f[m+1+96]=Le(B,j,z),f[m+3+64]=f[m+2+96]=Le(j,z,G),f[m+3+96]=Le(z,G,G)}function gc(f,m){var b=f[m-1+0],k=f[m-1+32],N=f[m-1+64],B=f[m-1-32],j=f[m+0-32],z=f[m+1-32],G=f[m+2-32],nt=f[m+3-32];f[m+0+0]=f[m+1+64]=B+j+1>>1,f[m+1+0]=f[m+2+64]=j+z+1>>1,f[m+2+0]=f[m+3+64]=z+G+1>>1,f[m+3+0]=G+nt+1>>1,f[m+0+96]=Le(N,k,b),f[m+0+64]=Le(k,b,B),f[m+0+32]=f[m+1+96]=Le(b,B,j),f[m+1+32]=f[m+2+96]=Le(B,j,z),f[m+2+32]=f[m+3+96]=Le(j,z,G),f[m+3+32]=Le(z,G,nt)}function Yu(f,m){var b=f[m+0-32],k=f[m+1-32],N=f[m+2-32],B=f[m+3-32],j=f[m+4-32],z=f[m+5-32],G=f[m+6-32],nt=f[m+7-32];f[m+0+0]=b+k+1>>1,f[m+1+0]=f[m+0+64]=k+N+1>>1,f[m+2+0]=f[m+1+64]=N+B+1>>1,f[m+3+0]=f[m+2+64]=B+j+1>>1,f[m+0+32]=Le(b,k,N),f[m+1+32]=f[m+0+96]=Le(k,N,B),f[m+2+32]=f[m+1+96]=Le(N,B,j),f[m+3+32]=f[m+2+96]=Le(B,j,z),f[m+3+64]=Le(j,z,G),f[m+3+96]=Le(z,G,nt)}function i1(f,m){var b=f[m-1+0],k=f[m-1+32],N=f[m-1+64],B=f[m-1+96];f[m+0+0]=b+k+1>>1,f[m+2+0]=f[m+0+32]=k+N+1>>1,f[m+2+32]=f[m+0+64]=N+B+1>>1,f[m+1+0]=Le(b,k,N),f[m+3+0]=f[m+1+32]=Le(k,N,B),f[m+3+32]=f[m+1+64]=Le(N,B,B),f[m+3+64]=f[m+2+64]=f[m+0+96]=f[m+1+96]=f[m+2+96]=f[m+3+96]=B}function r1(f,m){var b=f[m-1+0],k=f[m-1+32],N=f[m-1+64],B=f[m-1+96],j=f[m-1-32],z=f[m+0-32],G=f[m+1-32],nt=f[m+2-32];f[m+0+0]=f[m+2+32]=b+j+1>>1,f[m+0+32]=f[m+2+64]=k+b+1>>1,f[m+0+64]=f[m+2+96]=N+k+1>>1,f[m+0+96]=B+N+1>>1,f[m+3+0]=Le(z,G,nt),f[m+2+0]=Le(j,z,G),f[m+1+0]=f[m+3+32]=Le(b,j,z),f[m+1+32]=f[m+3+64]=Le(k,b,j),f[m+1+64]=f[m+3+96]=Le(N,k,b),f[m+1+96]=Le(B,N,k)}function o1(f,m){var b;for(b=0;8>b;++b)s(f,m+32*b,f,m-32,8)}function Xu(f,m){var b;for(b=0;8>b;++b)i(f,m,f[m-1],8),m+=32}function nl(f,m,b){var k;for(k=0;8>k;++k)i(m,b+32*k,f,8)}function Yo(f,m){var b,k=8;for(b=0;8>b;++b)k+=f[m+b-32]+f[m-1+32*b];nl(k>>4,f,m)}function a1(f,m){var b,k=4;for(b=0;8>b;++b)k+=f[m+b-32];nl(k>>3,f,m)}function sl(f,m){var b,k=4;for(b=0;8>b;++b)k+=f[m-1+32*b];nl(k>>3,f,m)}function Qu(f,m){nl(128,f,m)}function mc(f,m,b){var k=f[m-b],N=f[m+0],B=3*(N-k)+f1[1020+f[m-2*b]-f[m+b]],j=ip[112+(B+4>>3)];f[m-b]=Pi[255+k+ip[112+(B+3>>3)]],f[m+0]=Pi[255+N-j]}function Wf(f,m,b,k){var N=f[m+0],B=f[m+b];return Yi[255+f[m-2*b]-f[m-b]]>k||Yi[255+B-N]>k}function Gf(f,m,b,k){return 4*Yi[255+f[m-b]-f[m+0]]+Yi[255+f[m-2*b]-f[m+b]]<=k}function Kf(f,m,b,k,N){var B=f[m-3*b],j=f[m-2*b],z=f[m-b],G=f[m+0],nt=f[m+b],yt=f[m+2*b],Tt=f[m+3*b];return 4*Yi[255+z-G]+Yi[255+j-nt]>k?0:Yi[255+f[m-4*b]-B]<=N&&Yi[255+B-j]<=N&&Yi[255+j-z]<=N&&Yi[255+Tt-yt]<=N&&Yi[255+yt-nt]<=N&&Yi[255+nt-G]<=N}function Yf(f,m,b,k){var N=2*k+1;for(k=0;16>k;++k)Gf(f,m+k,b,N)&&mc(f,m+k,b)}function Or(f,m,b,k){var N=2*k+1;for(k=0;16>k;++k)Gf(f,m+k*b,1,N)&&mc(f,m+k*b,1)}function go(f,m,b,k){var N;for(N=3;0<N;--N)Yf(f,m+=4*b,b,k)}function l1(f,m,b,k){var N;for(N=3;0<N;--N)Or(f,m+=4,b,k)}function Xo(f,m,b,k,N,B,j,z){for(B=2*B+1;0<N--;){if(Kf(f,m,b,B,j))if(Wf(f,m,b,z))mc(f,m,b);else{var G=f,nt=m,yt=b,Tt=G[nt-2*yt],Nt=G[nt-yt],Ct=G[nt+0],$t=G[nt+yt],Mt=G[nt+2*yt],bt=27*(Bt=f1[1020+3*(Ct-Nt)+f1[1020+Tt-$t]])+63>>7,St=18*Bt+63>>7,Bt=9*Bt+63>>7;G[nt-3*yt]=Pi[255+G[nt-3*yt]+Bt],G[nt-2*yt]=Pi[255+Tt+St],G[nt-yt]=Pi[255+Nt+bt],G[nt+0]=Pi[255+Ct-bt],G[nt+yt]=Pi[255+$t-St],G[nt+2*yt]=Pi[255+Mt-Bt]}m+=k}}function lr(f,m,b,k,N,B,j,z){for(B=2*B+1;0<N--;){if(Kf(f,m,b,B,j))if(Wf(f,m,b,z))mc(f,m,b);else{var G=f,nt=m,yt=b,Tt=G[nt-yt],Nt=G[nt+0],Ct=G[nt+yt],$t=ip[112+((Mt=3*(Nt-Tt))+4>>3)],Mt=ip[112+(Mt+3>>3)],bt=$t+1>>1;G[nt-2*yt]=Pi[255+G[nt-2*yt]+bt],G[nt-yt]=Pi[255+Tt+Mt],G[nt+0]=Pi[255+Nt-$t],G[nt+yt]=Pi[255+Ct-bt]}m+=k}}function Ju(f,m,b,k,N,B){Xo(f,m,b,1,16,k,N,B)}function il(f,m,b,k,N,B){Xo(f,m,1,b,16,k,N,B)}function c1(f,m,b,k,N,B){var j;for(j=3;0<j;--j)lr(f,m+=4*b,b,1,16,k,N,B)}function vc(f,m,b,k,N,B){var j;for(j=3;0<j;--j)lr(f,m+=4,1,b,16,k,N,B)}function u1(f,m,b,k,N,B,j,z){Xo(f,m,N,1,8,B,j,z),Xo(b,k,N,1,8,B,j,z)}function Zu(f,m,b,k,N,B,j,z){Xo(f,m,1,N,8,B,j,z),Xo(b,k,1,N,8,B,j,z)}function td(f,m,b,k,N,B,j,z){lr(f,m+4*N,N,1,8,B,j,z),lr(b,k+4*N,N,1,8,B,j,z)}function Xf(f,m,b,k,N,B,j,z){lr(f,m+4,1,N,8,B,j,z),lr(b,k+4,1,N,8,B,j,z)}function yc(){this.ba=new Si,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Nn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ed(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Qf(){this.ua=0,this.Wa=new V,this.vb=new V,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new et,this.yc=new A}function d1(){this.xb=this.a=0,this.l=new dc,this.ca=new Si,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Qf,this.ab=0,this.gc=o(4,nd),this.Oc=0}function bc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rl(f,m,b,k,N,B,j){for(f=f==null?0:f[m+0],m=0;m<j;++m)N[B+m]=f+b[k+m]&255,f=N[B+m]}function sd(f,m,b,k,N,B,j){var z;if(f==null)rl(null,null,b,k,N,B,j);else for(z=0;z<j;++z)N[B+z]=f[m+z]+b[k+z]&255}function Qo(f,m,b,k,N,B,j){if(f==null)rl(null,null,b,k,N,B,j);else{var z,G=f[m+0],nt=G,yt=G;for(z=0;z<j;++z)nt=yt+(G=f[m+z])-nt,yt=b[k+z]+(-256&nt?0>nt?0:255:nt)&255,nt=G,N[B+z]=yt}}function id(f,m,b,k){var N=m.width,B=m.o;if(t(f!=null&&m!=null),0>b||0>=k||b+k>B)return null;if(!f.Cc){if(f.ga==null){var j;if(f.ga=new bc,(j=f.ga==null)||(j=m.width*m.o,t(f.Gb.length==0),f.Gb=r(j),f.Uc=0,f.Gb==null?j=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,j=1),j=!j),!j){j=f.ga;var z=f.Fa,G=f.P,nt=f.qc,yt=f.mb,Tt=f.nb,Nt=G+1,Ct=nt-1,$t=j.l;if(t(z!=null&&yt!=null&&m!=null),sa[0]=null,sa[1]=rl,sa[2]=sd,sa[3]=Qo,j.ca=yt,j.tb=Tt,j.c=m.width,j.i=m.height,t(0<j.c&&0<j.i),1>=nt)m=0;else if(j.$a=z[G+0]>>0&3,j.Z=z[G+0]>>2&3,j.Lc=z[G+0]>>4&3,G=z[G+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||G)m=0;else if($t.put=Ui,$t.ac=Rn,$t.bc=qi,$t.ma=j,$t.width=m.width,$t.height=m.height,$t.Da=m.Da,$t.v=m.v,$t.va=m.va,$t.j=m.j,$t.o=m.o,j.$a)t:{t(j.$a==1),m=Ce();e:for(;;){if(m==null){m=0;break t}if(t(j!=null),j.mc=m,m.c=j.c,m.i=j.i,m.l=j.l,m.l.ma=j,m.l.width=j.c,m.l.height=j.i,m.a=0,tt(m.m,z,Nt,Ct),!kn(j.c,j.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Rt(m.s)?(j.ic=1,z=m.c*m.i,m.Ta=null,m.Ua=0,m.V=r(z),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(j.ic=0,m=Ps(m,j.c)),!m))break e;m=1;break t}j.mc=null,m=0}else m=Ct>=j.c*j.i;j=!m}if(j)return null;f.ga.Lc!=1?f.Ga=0:k=B-b}t(f.ga!=null),t(b+k<=B);t:{if(m=(z=f.ga).c,B=z.l.o,z.$a==0){if(Nt=f.rc,Ct=f.Vc,$t=f.Fa,G=f.P+1+b*m,nt=f.mb,yt=f.nb+b*m,t(G<=f.P+f.qc),z.Z!=0)for(t(sa[z.Z]!=null),j=0;j<k;++j)sa[z.Z](Nt,Ct,$t,G,nt,yt,m),Nt=nt,Ct=yt,yt+=m,G+=m;else for(j=0;j<k;++j)s(nt,yt,$t,G,m),Nt=nt,Ct=yt,yt+=m,G+=m;f.rc=Nt,f.Vc=Ct}else{if(t(z.mc!=null),m=b+k,t((j=z.mc)!=null),t(m<=j.i),j.C>=m)m=1;else if(z.ic||Pt(),z.ic){z=j.V,Nt=j.Ba,Ct=j.c;var Mt=j.i,bt=($t=1,G=j.$/Ct,nt=j.$%Ct,yt=j.m,Tt=j.s,j.$),St=Ct*Mt,Bt=Ct*m,qt=Tt.wc,jt=bt<Bt?Mn(Tt,nt,G):null;t(bt<=St),t(m<=Mt),t(Rt(Tt));e:for(;;){for(;!yt.h&&bt<Bt;){if(nt&qt||(jt=Mn(Tt,nt,G)),t(jt!=null),Z(yt),256>(Mt=As(jt.G[0],jt.H[0],yt)))z[Nt+bt]=Mt,++bt,++nt>=Ct&&(nt=0,++G<=m&&!(G%16)&&re(j,G));else{if(!(280>Mt)){$t=0;break e}Mt=Ci(Mt-256,yt);var le,Jt=As(jt.G[4],jt.H[4],yt);if(Z(yt),!(bt>=(Jt=ns(Ct,Jt=Ci(Jt,yt)))&&St-bt>=Mt)){$t=0;break e}for(le=0;le<Mt;++le)z[Nt+bt+le]=z[Nt+bt+le-Jt];for(bt+=Mt,nt+=Mt;nt>=Ct;)nt-=Ct,++G<=m&&!(G%16)&&re(j,G);bt<Bt&&nt&qt&&(jt=Mn(Tt,nt,G))}t(yt.h==E(yt))}re(j,G>m?m:G);break e}!$t||yt.h&&bt<St?($t=0,j.a=yt.h?5:3):j.$=bt,m=$t}else m=ge(j,j.V,j.Ba,j.c,j.i,m,ki);if(!m){k=0;break t}}b+k>=B&&(f.Cc=1),k=1}if(!k)return null;if(f.Cc&&((k=f.ga)!=null&&(k.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+b*N}function v(f,m,b,k,N,B){for(;0<N--;){var j,z=f,G=m+(b?1:0),nt=f,yt=m+(b?0:3);for(j=0;j<k;++j){var Tt=nt[yt+4*j];Tt!=255&&(Tt*=32897,z[G+4*j+0]=z[G+4*j+0]*Tt>>23,z[G+4*j+1]=z[G+4*j+1]*Tt>>23,z[G+4*j+2]=z[G+4*j+2]*Tt>>23)}m+=B}}function D(f,m,b,k,N){for(;0<k--;){var B;for(B=0;B<b;++B){var j=f[m+2*B+0],z=15&(nt=f[m+2*B+1]),G=4369*z,nt=(240&nt|nt>>4)*G>>16;f[m+2*B+0]=(240&j|j>>4)*G>>16&240|(15&j|j<<4)*G>>16>>4&15,f[m+2*B+1]=240&nt|z}m+=N}}function ot(f,m,b,k,N,B,j,z){var G,nt,yt=255;for(nt=0;nt<N;++nt){for(G=0;G<k;++G){var Tt=f[m+G];B[j+4*G]=Tt,yt&=Tt}m+=b,j+=z}return yt!=255}function vt(f,m,b,k,N){var B;for(B=0;B<N;++B)b[k+B]=f[m+B]>>8}function Pt(){Ki=v,wn=D,xn=ot,Gn=vt}function Ot(f,m,b){W[f]=function(k,N,B,j,z,G,nt,yt,Tt,Nt,Ct,$t,Mt,bt,St,Bt,qt){var jt,le=qt-1>>1,Jt=z[G+0]|nt[yt+0]<<16,_e=Tt[Nt+0]|Ct[$t+0]<<16;t(k!=null);var ee=3*Jt+_e+131074>>2;for(m(k[N+0],255&ee,ee>>16,Mt,bt),B!=null&&(ee=3*_e+Jt+131074>>2,m(B[j+0],255&ee,ee>>16,St,Bt)),jt=1;jt<=le;++jt){var rn=z[G+jt]|nt[yt+jt]<<16,un=Tt[Nt+jt]|Ct[$t+jt]<<16,tn=Jt+rn+_e+un+524296,We=tn+2*(rn+_e)>>3;ee=We+Jt>>1,Jt=(tn=tn+2*(Jt+un)>>3)+rn>>1,m(k[N+2*jt-1],255&ee,ee>>16,Mt,bt+(2*jt-1)*b),m(k[N+2*jt-0],255&Jt,Jt>>16,Mt,bt+(2*jt-0)*b),B!=null&&(ee=tn+_e>>1,Jt=We+un>>1,m(B[j+2*jt-1],255&ee,ee>>16,St,Bt+(2*jt-1)*b),m(B[j+2*jt+0],255&Jt,Jt>>16,St,Bt+(2*jt+0)*b)),Jt=rn,_e=un}1&qt||(ee=3*Jt+_e+131074>>2,m(k[N+qt-1],255&ee,ee>>16,Mt,bt+(qt-1)*b),B!=null&&(ee=3*_e+Jt+131074>>2,m(B[j+qt-1],255&ee,ee>>16,St,Bt+(qt-1)*b)))}}function Ht(){Xi[rp]=pI,Xi[op]=M5,Xi[I5]=gI,Xi[ap]=O5,Xi[lp]=R5,Xi[p1]=F5,Xi[T5]=mI,Xi[g1]=M5,Xi[m1]=O5,Xi[cp]=R5,Xi[v1]=F5}function ae(f){return f&-16384?0>f?0:255:f>>vI}function we(f,m){return ae((19077*f>>8)+(26149*m>>8)-14234)}function Be(f,m,b){return ae((19077*f>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function Oe(f,m){return ae((19077*f>>8)+(33050*m>>8)-17685)}function Qe(f,m,b,k,N){k[N+0]=we(f,b),k[N+1]=Be(f,m,b),k[N+2]=Oe(f,m)}function On(f,m,b,k,N){k[N+0]=Oe(f,m),k[N+1]=Be(f,m,b),k[N+2]=we(f,b)}function Bn(f,m,b,k,N){var B=Be(f,m,b);m=B<<3&224|Oe(f,m)>>3,k[N+0]=248&we(f,b)|B>>5,k[N+1]=m}function ss(f,m,b,k,N){var B=240&Oe(f,m)|15;k[N+0]=240&we(f,b)|Be(f,m,b)>>4,k[N+1]=B}function Os(f,m,b,k,N){k[N+0]=255,Qe(f,m,b,k,N+1)}function gs(f,m,b,k,N){On(f,m,b,k,N),k[N+3]=255}function cr(f,m,b,k,N){Qe(f,m,b,k,N),k[N+3]=255}function Ai(f,m){return 0>f?0:f>m?m:f}function Rr(f,m,b){W[f]=function(k,N,B,j,z,G,nt,yt,Tt){for(var Nt=yt+(-2&Tt)*b;yt!=Nt;)m(k[N+0],B[j+0],z[G+0],nt,yt),m(k[N+1],B[j+0],z[G+0],nt,yt+b),N+=2,++j,++G,yt+=2*b;1&Tt&&m(k[N+0],B[j+0],z[G+0],nt,yt)}}function Jf(f,m,b){return b==0?f==0?m==0?6:5:m==0?4:0:b}function rd(f,m,b,k,N){switch(f>>>30){case 3:yo(m,b,k,N,0);break;case 2:Wn(m,b,k,N);break;case 1:ii(m,b,k,N)}}function od(f,m){var b,k,N=m.M,B=m.Nb,j=f.oc,z=f.pc+40,G=f.oc,nt=f.pc+584,yt=f.oc,Tt=f.pc+600;for(b=0;16>b;++b)j[z+32*b-1]=129;for(b=0;8>b;++b)G[nt+32*b-1]=129,yt[Tt+32*b-1]=129;for(0<N?j[z-1-32]=G[nt-1-32]=yt[Tt-1-32]=129:(i(j,z-32-1,127,21),i(G,nt-32-1,127,9),i(yt,Tt-32-1,127,9)),k=0;k<f.za;++k){var Nt=m.ya[m.aa+k];if(0<k){for(b=-1;16>b;++b)s(j,z+32*b-4,j,z+32*b+12,4);for(b=-1;8>b;++b)s(G,nt+32*b-4,G,nt+32*b+4,4),s(yt,Tt+32*b-4,yt,Tt+32*b+4,4)}var Ct=f.Gd,$t=f.Hd+k,Mt=Nt.ad,bt=Nt.Hc;if(0<N&&(s(j,z-32,Ct[$t].y,0,16),s(G,nt-32,Ct[$t].f,0,8),s(yt,Tt-32,Ct[$t].ea,0,8)),Nt.Za){var St=j,Bt=z-32+16;for(0<N&&(k>=f.za-1?i(St,Bt,Ct[$t].y[15],4):s(St,Bt,Ct[$t+1].y,0,4)),b=0;4>b;b++)St[Bt+128+b]=St[Bt+256+b]=St[Bt+384+b]=St[Bt+0+b];for(b=0;16>b;++b,bt<<=2)St=j,Bt=z+j5[b],ur[Nt.Ob[b]](St,Bt),rd(bt,Mt,16*+b,St,Bt)}else if(St=Jf(k,N,Nt.Ob[0]),na[St](j,z),bt!=0)for(b=0;16>b;++b,bt<<=2)rd(bt,Mt,16*+b,j,z+j5[b]);for(b=Nt.Gc,St=Jf(k,N,Nt.Dd),wo[St](G,nt),wo[St](yt,Tt),bt=Mt,St=G,Bt=nt,255&(Nt=b>>0)&&(170&Nt?dd(bt,256,St,Bt):Wi(bt,256,St,Bt)),Nt=yt,bt=Tt,255&(b>>=8)&&(170&b?dd(Mt,320,Nt,bt):Wi(Mt,320,Nt,bt)),N<f.Ub-1&&(s(Ct[$t].y,0,j,z+480,16),s(Ct[$t].f,0,G,nt+224,8),s(Ct[$t].ea,0,yt,Tt+224,8)),b=8*B*f.B,Ct=f.sa,$t=f.ta+16*k+16*B*f.R,Mt=f.qa,Nt=f.ra+8*k+b,bt=f.Ha,St=f.Ia+8*k+b,b=0;16>b;++b)s(Ct,$t+b*f.R,j,z+32*b,16);for(b=0;8>b;++b)s(Mt,Nt+b*f.B,G,nt+32*b,8),s(bt,St+b*f.B,yt,Tt+32*b,8)}}function wc(f,m,b,k,N,B,j,z,G){var nt=[0],yt=[0],Tt=0,Nt=G!=null?G.kd:0,Ct=G??new ed;if(f==null||12>b)return 7;Ct.data=f,Ct.w=m,Ct.ha=b,m=[m],b=[b],Ct.gb=[Ct.gb];t:{var $t=m,Mt=b,bt=Ct.gb;if(t(f!=null),t(Mt!=null),t(bt!=null),bt[0]=0,12<=Mt[0]&&!n(f,$t[0],"RIFF")){if(n(f,$t[0]+8,"WEBP")){bt=3;break t}var St=H(f,$t[0]+4);if(12>St||4294967286<St){bt=3;break t}if(Nt&&St>Mt[0]-8){bt=7;break t}bt[0]=St,$t[0]+=12,Mt[0]-=12}bt=0}if(bt!=0)return bt;for(St=0<Ct.gb[0],b=b[0];;){t:{var Bt=f;Mt=m,bt=b;var qt=nt,jt=yt,le=$t=[0];if((ee=Tt=[Tt])[0]=0,8>bt[0])bt=7;else{if(!n(Bt,Mt[0],"VP8X")){if(H(Bt,Mt[0]+4)!=10){bt=3;break t}if(18>bt[0]){bt=7;break t}var Jt=H(Bt,Mt[0]+8),_e=1+K(Bt,Mt[0]+12);if(2147483648<=_e*(Bt=1+K(Bt,Mt[0]+15))){bt=3;break t}le!=null&&(le[0]=Jt),qt!=null&&(qt[0]=_e),jt!=null&&(jt[0]=Bt),Mt[0]+=18,bt[0]-=18,ee[0]=1}bt=0}}if(Tt=Tt[0],$t=$t[0],bt!=0)return bt;if(Mt=!!(2&$t),!St&&Tt)return 3;if(B!=null&&(B[0]=!!(16&$t)),j!=null&&(j[0]=Mt),z!=null&&(z[0]=0),j=nt[0],$t=yt[0],Tt&&Mt&&G==null){bt=0;break}if(4>b){bt=7;break}if(St&&Tt||!St&&!Tt&&!n(f,m[0],"ALPH")){b=[b],Ct.na=[Ct.na],Ct.P=[Ct.P],Ct.Sa=[Ct.Sa];t:{Jt=f,bt=m,St=b;var ee=Ct.gb;qt=Ct.na,jt=Ct.P,le=Ct.Sa,_e=22,t(Jt!=null),t(St!=null),Bt=bt[0];var rn=St[0];for(t(qt!=null),t(le!=null),qt[0]=null,jt[0]=null,le[0]=0;;){if(bt[0]=Bt,St[0]=rn,8>rn){bt=7;break t}var un=H(Jt,Bt+4);if(4294967286<un){bt=3;break t}var tn=8+un+1&-2;if(_e+=tn,0<ee&&_e>ee){bt=3;break t}if(!n(Jt,Bt,"VP8 ")||!n(Jt,Bt,"VP8L")){bt=0;break t}if(rn[0]<tn){bt=7;break t}n(Jt,Bt,"ALPH")||(qt[0]=Jt,jt[0]=Bt+8,le[0]=un),Bt+=tn,rn-=tn}}if(b=b[0],Ct.na=Ct.na[0],Ct.P=Ct.P[0],Ct.Sa=Ct.Sa[0],bt!=0)break}b=[b],Ct.Ja=[Ct.Ja],Ct.xa=[Ct.xa];t:if(ee=f,bt=m,St=b,qt=Ct.gb[0],jt=Ct.Ja,le=Ct.xa,Jt=bt[0],Bt=!n(ee,Jt,"VP8 "),_e=!n(ee,Jt,"VP8L"),t(ee!=null),t(St!=null),t(jt!=null),t(le!=null),8>St[0])bt=7;else{if(Bt||_e){if(ee=H(ee,Jt+4),12<=qt&&ee>qt-12){bt=3;break t}if(Nt&&ee>St[0]-8){bt=7;break t}jt[0]=ee,bt[0]+=8,St[0]-=8,le[0]=_e}else le[0]=5<=St[0]&&ee[Jt+0]==47&&!(ee[Jt+4]>>5),jt[0]=St[0];bt=0}if(b=b[0],Ct.Ja=Ct.Ja[0],Ct.xa=Ct.xa[0],m=m[0],bt!=0)break;if(4294967286<Ct.Ja)return 3;if(z==null||Mt||(z[0]=Ct.xa?2:1),j=[j],$t=[$t],Ct.xa){if(5>b){bt=7;break}z=j,Nt=$t,Mt=B,f==null||5>b?f=0:5<=b&&f[m+0]==47&&!(f[m+4]>>5)?(St=[0],ee=[0],qt=[0],tt(jt=new I,f,m,b),xe(jt,St,ee,qt)?(z!=null&&(z[0]=St[0]),Nt!=null&&(Nt[0]=ee[0]),Mt!=null&&(Mt[0]=qt[0]),f=1):f=0):f=0}else{if(10>b){bt=7;break}z=$t,f==null||10>b||!Rf(f,m+3,b-3)?f=0:(Nt=f[m+0]|f[m+1]<<8|f[m+2]<<16,Mt=16383&(f[m+7]<<8|f[m+6]),f=16383&(f[m+9]<<8|f[m+8]),1&Nt||3<(Nt>>1&7)||!(Nt>>4&1)||Nt>>5>=Ct.Ja||!Mt||!f?f=0:(j&&(j[0]=Mt),z&&(z[0]=f),f=1))}if(!f||(j=j[0],$t=$t[0],Tt&&(nt[0]!=j||yt[0]!=$t)))return 3;G!=null&&(G[0]=Ct,G.offset=m-G.w,t(4294967286>m-G.w),t(G.offset==G.ha-b));break}return bt==0||bt==7&&Tt&&G==null?(B!=null&&(B[0]|=Ct.na!=null&&0<Ct.na.length),k!=null&&(k[0]=j),N!=null&&(N[0]=$t),0):bt}function ad(f,m,b){var k=m.width,N=m.height,B=0,j=0,z=k,G=N;if(m.Da=f!=null&&0<f.Da,m.Da&&(z=f.cd,G=f.bd,B=f.v,j=f.j,11>b||(B&=-2,j&=-2),0>B||0>j||0>=z||0>=G||B+z>k||j+G>N))return 0;if(m.v=B,m.j=j,m.va=B+z,m.o=j+G,m.U=z,m.T=G,m.da=f!=null&&0<f.da,m.da){if(!Et(z,G,b=[f.ib],B=[f.hb]))return 0;m.ib=b[0],m.hb=B[0]}return m.ob=f!=null&&f.ob,m.Kb=f==null||!f.Sd,m.da&&(m.ob=m.ib<3*k/4&&m.hb<3*N/4,m.Kb=0),1}function ld(f){if(f==null)return 2;if(11>f.S){var m=f.f.RGBA;m.fb+=(f.height-1)*m.A,m.A=-m.A}else m=f.f.kb,f=f.height,m.O+=(f-1)*m.fa,m.fa=-m.fa,m.N+=(f-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(f-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(f-1)*m.lb,m.lb=-m.lb);return 0}function xc(f,m,b,k){if(k==null||0>=f||0>=m)return 2;if(b!=null){if(b.Da){var N=b.cd,B=b.bd,j=-2&b.v,z=-2&b.j;if(0>j||0>z||0>=N||0>=B||j+N>f||z+B>m)return 2;f=N,m=B}if(b.da){if(!Et(f,m,N=[b.ib],B=[b.hb]))return 2;f=N[0],m=B[0]}}k.width=f,k.height=m;t:{var G=k.width,nt=k.height;if(f=k.S,0>=G||0>=nt||!(f>=rp&&13>f))f=2;else{if(0>=k.Rd&&k.sd==null){j=B=N=m=0;var yt=(z=G*$5[f])*nt;if(11>f||(B=(nt+1)/2*(m=(G+1)/2),f==12&&(j=(N=G)*nt)),(nt=r(yt+2*B+j))==null){f=1;break t}k.sd=nt,11>f?((G=k.f.RGBA).eb=nt,G.fb=0,G.A=z,G.size=yt):((G=k.f.kb).y=nt,G.O=0,G.fa=z,G.Fd=yt,G.f=nt,G.N=0+yt,G.Ab=m,G.Cd=B,G.ea=nt,G.W=0+yt+B,G.Db=m,G.Ed=B,f==12&&(G.F=nt,G.J=0+yt+2*B),G.Tc=j,G.lb=N)}if(m=1,N=k.S,B=k.width,j=k.height,N>=rp&&13>N)if(11>N)f=k.f.RGBA,m&=(z=Math.abs(f.A))*(j-1)+B<=f.size,m&=z>=B*$5[N],m&=f.eb!=null;else{f=k.f.kb,z=(B+1)/2,yt=(j+1)/2,G=Math.abs(f.fa),nt=Math.abs(f.Ab);var Tt=Math.abs(f.Db),Nt=Math.abs(f.lb),Ct=Nt*(j-1)+B;m&=G*(j-1)+B<=f.Fd,m&=nt*(yt-1)+z<=f.Cd,m=(m&=Tt*(yt-1)+z<=f.Ed)&G>=B&nt>=z&Tt>=z,m&=f.y!=null,m&=f.f!=null,m&=f.ea!=null,N==12&&(m&=Nt>=B,m&=Ct<=f.Tc,m&=f.F!=null)}else m=0;f=m?0:2}}return f!=0||b!=null&&b.fd&&(f=ld(k)),f}var Es=64,_c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Sc=24,Cc=32,cd=8,hi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];C("Predictor0","PredictorAdd0"),W.Predictor0=function(){return 4278190080},W.Predictor1=function(f){return f},W.Predictor2=function(f,m,b){return m[b+0]},W.Predictor3=function(f,m,b){return m[b+1]},W.Predictor4=function(f,m,b){return m[b-1]},W.Predictor5=function(f,m,b){return wt(wt(f,m[b+1]),m[b+0])},W.Predictor6=function(f,m,b){return wt(f,m[b-1])},W.Predictor7=function(f,m,b){return wt(f,m[b+0])},W.Predictor8=function(f,m,b){return wt(m[b-1],m[b+0])},W.Predictor9=function(f,m,b){return wt(m[b+0],m[b+1])},W.Predictor10=function(f,m,b){return wt(wt(f,m[b-1]),wt(m[b+0],m[b+1]))},W.Predictor11=function(f,m,b){var k=m[b+0];return 0>=Wt(k>>24&255,f>>24&255,(m=m[b-1])>>24&255)+Wt(k>>16&255,f>>16&255,m>>16&255)+Wt(k>>8&255,f>>8&255,m>>8&255)+Wt(255&k,255&f,255&m)?k:f},W.Predictor12=function(f,m,b){var k=m[b+0];return(It((f>>24&255)+(k>>24&255)-((m=m[b-1])>>24&255))<<24|It((f>>16&255)+(k>>16&255)-(m>>16&255))<<16|It((f>>8&255)+(k>>8&255)-(m>>8&255))<<8|It((255&f)+(255&k)-(255&m)))>>>0},W.Predictor13=function(f,m,b){var k=m[b-1];return(Ft((f=wt(f,m[b+0]))>>24&255,k>>24&255)<<24|Ft(f>>16&255,k>>16&255)<<16|Ft(f>>8&255,k>>8&255)<<8|Ft(f>>0&255,k>>0&255))>>>0};var h1=W.PredictorAdd0;W.PredictorAdd1=Xt,C("Predictor2","PredictorAdd2"),C("Predictor3","PredictorAdd3"),C("Predictor4","PredictorAdd4"),C("Predictor5","PredictorAdd5"),C("Predictor6","PredictorAdd6"),C("Predictor7","PredictorAdd7"),C("Predictor8","PredictorAdd8"),C("Predictor9","PredictorAdd9"),C("Predictor10","PredictorAdd10"),C("Predictor11","PredictorAdd11"),C("Predictor12","PredictorAdd12"),C("Predictor13","PredictorAdd13");var ud=W.PredictorAdd2;fe("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Zf,Hi=W.ColorIndexInverseTransform,kc=W.MapARGB,tp=W.VP8LColorIndexInverseTransformAlpha,ep=W.MapAlpha,Jo=W.VP8LPredictorsAdd=[];Jo.length=16,(W.VP8LPredictors=[]).length=16,(W.VP8LPredictorsAdd_C=[]).length=16,(W.VP8LPredictors_C=[]).length=16;var ol,fi,si,Zo,mo,vo,Ac,yo,Wn,dd,ii,Wi,Pc,np,hd,al,ll,ta,cl,Ec,ul,ea,fd,Gi,Ki,wn,xn,Gn,hs=r(511),bo=r(2041),pd=r(225),Ic=r(767),sp=0,f1=bo,ip=pd,Pi=Ic,Yi=hs,rp=0,op=1,I5=2,ap=3,lp=4,p1=5,T5=6,g1=7,m1=8,cp=9,v1=10,tI=[2,3,7],eI=[3,3,11],N5=[280,256,256,256,40],nI=[0,1,1,1,0],sI=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],iI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],oI=8,y1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],b1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gd=null,aI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],lI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],D5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],uI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],na=[],ur=[],wo=[],fI=1,L5=2,sa=[],Xi=[];Ot("UpsampleRgbLinePair",Qe,3),Ot("UpsampleBgrLinePair",On,3),Ot("UpsampleRgbaLinePair",cr,4),Ot("UpsampleBgraLinePair",gs,4),Ot("UpsampleArgbLinePair",Os,4),Ot("UpsampleRgba4444LinePair",ss,2),Ot("UpsampleRgb565LinePair",Bn,2);var pI=W.UpsampleRgbLinePair,gI=W.UpsampleBgrLinePair,M5=W.UpsampleRgbaLinePair,O5=W.UpsampleBgraLinePair,R5=W.UpsampleArgbLinePair,F5=W.UpsampleRgba4444LinePair,mI=W.UpsampleRgb565LinePair,up=16,dp=1<<up-1,md=-227,w1=482,vI=6,B5=0,yI=r(256),bI=r(256),wI=r(256),xI=r(256),_I=r(w1-md),SI=r(w1-md);Rr("YuvToRgbRow",Qe,3),Rr("YuvToBgrRow",On,3),Rr("YuvToRgbaRow",cr,4),Rr("YuvToBgraRow",gs,4),Rr("YuvToArgbRow",Os,4),Rr("YuvToRgba4444Row",ss,2),Rr("YuvToRgb565Row",Bn,2);var j5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hp=[0,2,8],CI=[8,7,6,4,4,2,2,2,1,1,1,1],kI=1;this.WebPDecodeRGBA=function(f,m,b,k,N){var B=op,j=new yc,z=new Si;j.ba=z,z.S=B,z.width=[z.width],z.height=[z.height];var G=z.width,nt=z.height,yt=new or;if(yt==null||f==null)var Tt=2;else t(yt!=null),Tt=wc(f,m,b,yt.width,yt.height,yt.Pd,yt.Qd,yt.format,null);if(Tt!=0?G=0:(G!=null&&(G[0]=yt.width[0]),nt!=null&&(nt[0]=yt.height[0]),G=1),G){z.width=z.width[0],z.height=z.height[0],k!=null&&(k[0]=z.width),N!=null&&(N[0]=z.height);t:{if(k=new dc,(N=new ed).data=f,N.w=m,N.ha=b,N.kd=1,m=[0],t(N!=null),((f=wc(N.data,N.w,N.ha,null,null,null,m,null,N))==0||f==7)&&m[0]&&(f=4),(m=f)==0){if(t(j!=null),k.data=N.data,k.w=N.w+N.offset,k.ha=N.ha-N.offset,k.put=Ui,k.ac=Rn,k.bc=qi,k.ma=j,N.xa){if((f=Ce())==null){j=1;break t}if(function(Nt,Ct){var $t=[0],Mt=[0],bt=[0];e:for(;;){if(Nt==null)return 0;if(Ct==null)return Nt.a=2,0;if(Nt.l=Ct,Nt.a=0,tt(Nt.m,Ct.data,Ct.w,Ct.ha),!xe(Nt.m,$t,Mt,bt)){Nt.a=3;break e}if(Nt.xb=L5,Ct.width=$t[0],Ct.height=Mt[0],!kn($t[0],Mt[0],1,Nt,null))break e;return 1}return t(Nt.a!=0),0}(f,k)){if(k=(m=xc(k.width,k.height,j.Oa,j.ba))==0){e:{k=f;n:for(;;){if(k==null){k=0;break e}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((b=k.l)!=null),t((N=b.ma)!=null),k.xb!=0){if(k.ca=N.ba,k.tb=N.tb,t(k.ca!=null),!ad(N.Oa,b,ap)){k.a=2;break n}if(!Ps(k,b.width)||b.da)break n;if((b.da||en(k.ca.S))&&Pt(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&Pt()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!dt(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!ge(k,k.V,k.Ba,k.c,k.i,b.o,X))break n;N.Dc=k.Ma,k=1;break e}t(k.a!=0),k=0}k=!k}k&&(m=f.a)}else m=f.a}else{if((f=new G0)==null){j=1;break t}if(f.Fa=N.na,f.P=N.P,f.qc=N.Sa,Ff(f,k)){if((m=xc(k.width,k.height,j.Oa,j.ba))==0){if(f.Aa=0,b=j.Oa,t((N=f)!=null),b!=null){if(0<(G=0>(G=b.Md)?0:100<G?255:255*G/100)){for(nt=yt=0;4>nt;++nt)12>(Tt=N.pb[nt]).lc&&(Tt.ia=G*CI[0>Tt.lc?0:Tt.lc]>>3),yt|=Tt.ia;yt&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=b.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}K0(f,k)||(m=f.a)}}else m=f.a}m==0&&j.Oa!=null&&j.Oa.fd&&(m=ld(j.ba))}j=m}B=j!=0?null:11>B?z.f.RGBA.eb:z.f.kb.y}else B=null;return B};var $5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(W,it){for(var J="",_=0;_<4;_++)J+=String.fromCharCode(W[it++]);return J}function u(W,it){return(W[it+0]<<0|W[it+1]<<8|W[it+2]<<16)>>>0}function h(W,it){return(W[it+0]<<0|W[it+1]<<8|W[it+2]<<16|W[it+3]<<24)>>>0}new l;var g=[0],p=[0],y=[],w=new l,S=e,x=function(W,it){var J={},_=0,A=!1,Q=0,et=0;if(J.frames=[],!function(O,E,R,Z){for(var q=0;q<Z;q++)if(O[E+q]!=R.charCodeAt(q))return!0;return!1}(W,it,"RIFF",4)){for(h(W,it+=4),it+=8;it<W.length;){var mt=c(W,it),ht=h(W,it+=4);it+=4;var gt=ht+(1&ht);switch(mt){case"VP8 ":case"VP8L":J.frames[_]===void 0&&(J.frames[_]={}),(rt=J.frames[_]).src_off=A?et:it-8,rt.src_size=Q+ht+8,_++,A&&(A=!1,Q=0,et=0);break;case"VP8X":(rt=J.header={}).feature_flags=W[it];var tt=it+4;rt.canvas_width=1+u(W,tt),tt+=3,rt.canvas_height=1+u(W,tt),tt+=3;break;case"ALPH":A=!0,Q=gt+8,et=it-8;break;case"ANIM":(rt=J.header).bgcolor=h(W,it),tt=it+4,rt.loop_count=(kt=W)[(I=tt)+0]<<0|kt[I+1]<<8,tt+=2;break;case"ANMF":var T,rt;(rt=J.frames[_]={}).offset_x=2*u(W,it),it+=3,rt.offset_y=2*u(W,it),it+=3,rt.width=1+u(W,it),it+=3,rt.height=1+u(W,it),it+=3,rt.duration=u(W,it),it+=3,T=W[it++],rt.dispose=1&T,rt.blend=T>>1&1}mt!="ANMF"&&(it+=gt)}var kt,I;return J}}(S,0);x.response=S,x.rgbaoutput=!0,x.dataurl=!1;var P=x.header?x.header:null,L=x.frames?x.frames:null;if(P){P.loop_counter=P.loop_count,g=[P.canvas_height],p=[P.canvas_width];for(var M=0;M<L.length&&L[M].blend!=0;M++);}var F=L[0],pt=w.WebPDecodeRGBA(S,F.src_off,F.src_size,p,g);F.rgba=pt,F.imgwidth=p[0],F.imgheight=g[0];for(var Y=0;Y<p[0]*g[0]*4;Y++)y[Y]=pt[Y];return this.width=p,this.height=g,this.data=y,this}(function(e){var t=function(){return typeof ry=="function"},n=function(g,p,y,w){var S=4,x=o;switch(w){case e.image_compression.FAST:S=1,x=r;break;case e.image_compression.MEDIUM:S=6,x=a;break;case e.image_compression.SLOW:S=9,x=l}g=s(g,p,y,x);var P=ry(g,{level:S});return e.__addimage__.arrayBufferToBinaryString(P)},s=function(g,p,y,w){for(var S,x,P,L=g.length/p,M=new Uint8Array(g.length+L),F=u(),pt=0;pt<L;pt+=1){if(P=pt*p,S=g.subarray(P,P+p),w)M.set(w(S,y,x),P+pt);else{for(var Y,W=F.length,it=[];Y<W;Y+=1)it[Y]=F[Y](S,y,x);var J=h(it.concat());M.set(it[J],P+pt)}x=S}return M},i=function(g){var p=Array.apply([],g);return p.unshift(0),p},r=function(g,p){var y,w=[],S=g.length;w[0]=1;for(var x=0;x<S;x+=1)y=g[x-p]||0,w[x+1]=g[x]-y+256&255;return w},o=function(g,p,y){var w,S=[],x=g.length;S[0]=2;for(var P=0;P<x;P+=1)w=y&&y[P]||0,S[P+1]=g[P]-w+256&255;return S},a=function(g,p,y){var w,S,x=[],P=g.length;x[0]=3;for(var L=0;L<P;L+=1)w=g[L-p]||0,S=y&&y[L]||0,x[L+1]=g[L]+256-(w+S>>>1)&255;return x},l=function(g,p,y){var w,S,x,P,L=[],M=g.length;L[0]=4;for(var F=0;F<M;F+=1)w=g[F-p]||0,S=y&&y[F]||0,x=y&&y[F-p]||0,P=c(w,S,x),L[F+1]=g[F]-P+256&255;return L},c=function(g,p,y){if(g===p&&p===y)return g;var w=Math.abs(p-y),S=Math.abs(g-y),x=Math.abs(g+p-y-y);return w<=S&&w<=x?g:S<=x?p:y},u=function(){return[i,r,o,a,l]},h=function(g){var p=g.map(function(y){return y.reduce(function(w,S){return w+Math.abs(S)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(g,p,y,w){var S,x,P,L,M,F,pt,Y,W,it,J,_,A,Q,et,mt=this.decode.FLATE_DECODE,ht="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(P=new rK(g)).imgData,x=P.bits,S=P.colorSpace,M=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){W=(Y=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,J=new Uint8Array(W*P.colors),it=new Uint8Array(W);var gt,tt=P.pixelBitlength-P.bits;for(Q=0,et=0;Q<W;Q++){for(A=Y[Q],gt=0;gt<tt;)J[et++]=A>>>gt&255,gt+=P.bits;it[Q]=A>>>gt&255}}if(P.bits===16){W=(Y=new Uint32Array(P.decodePixels().buffer)).length,J=new Uint8Array(W*(32/P.pixelBitlength)*P.colors),it=new Uint8Array(W*(32/P.pixelBitlength)),_=P.colors>1,Q=0,et=0;for(var T=0;Q<W;)A=Y[Q++],J[et++]=A>>>0&255,_&&(J[et++]=A>>>16&255,A=Y[Q++],J[et++]=A>>>0&255),it[T++]=A>>>16&255;x=8}w!==e.image_compression.NONE&&t()?(g=n(J,P.width*P.colors,P.colors,w),pt=n(it,P.width,1,w)):(g=J,pt=it,mt=void 0)}if(P.colorType===3&&(S=this.color_spaces.INDEXED,F=P.palette,P.transparency.indexed)){var rt=P.transparency.indexed,kt=0;for(Q=0,W=rt.length;Q<W;++Q)kt+=rt[Q];if((kt/=255)===W-1&&rt.indexOf(0)!==-1)L=[rt.indexOf(0)];else if(kt!==W){for(Y=P.decodePixels(),it=new Uint8Array(Y.length),Q=0,W=Y.length;Q<W;Q++)it[Q]=rt[Y[Q]];pt=n(it,P.width,1)}}var I=function(O){var E;switch(O){case e.image_compression.FAST:E=11;break;case e.image_compression.MEDIUM:E=13;break;case e.image_compression.SLOW:E=14;break;default:E=12}return E}(w);return mt===this.decode.FLATE_DECODE&&(ht="/Predictor "+I+" "),ht+="/Colors "+M+" /BitsPerComponent "+x+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(pt&&this.__addimage__.isArrayBuffer(pt)||this.__addimage__.isArrayBufferView(pt))&&(pt=this.__addimage__.arrayBufferToBinaryString(pt)),{alias:y,data:g,index:p,filter:mt,decodeParameters:ht,transparency:L,palette:F,sMask:pt,predictor:I,width:P.width,height:P.height,bitsPerComponent:x,colorSpace:S}}}})(Ae.API),function(e){e.processGIF89A=function(t,n,s,i){var r=new oK(t),o=r.width,a=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new O2(100).encode(c,100);return e.processJPEG.call(this,u,n,s,i)},e.processGIF87A=e.processGIF89A}(Ae.API),fr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:s,blue:n,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){vn.log("bit decode error:"+n)}},fr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var r=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[r>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},fr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var r=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*i*4,a=r>>4,l=15&r,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},fr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),r=n*this.width*4+4*s;if(i<this.palette.length){var o=this.palette[i];this.data[r]=o.red,this.data[r+1]=o.green,this.data[r+2]=o.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}e!==0&&(this.pos+=4-e)}},fr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(r&t)/t*255|0,a=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,u=s*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=e}},fr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/t*255|0,u=i*this.width*4+4*r;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=e}},fr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=r,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},fr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=r,this.data[a+1]=i,this.data[a+2]=s,this.data[a+3]=o}},fr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,s,i){var r=new fr(t,!1),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new O2(100).encode(l,100);return e.processJPEG.call(this,c,n,s,i)}}(Ae.API),A3.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,s,i){var r=new A3(t),o=r.width,a=r.height,l={data:r.getData(),width:o,height:a},c=new O2(100).encode(l,100);return e.processJPEG.call(this,c,n,s,i)}}(Ae.API),Ae.API.processRGBA=function(e,t,n){for(var s=e.data,i=s.length,r=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=s[c],h=s[c+1],g=s[c+2],p=s[c+3];r[a++]=u,r[a++]=h,r[a++]=g,o[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ae.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jc=Ae.API,tg=jc.getCharWidthsArray=function(e,t){var n,s,i=(t=t||{}).font||this.internal.getFont(),r=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=t.doKerning!==!1,g=0,p=e.length,y=0,w=a[0]||l,S=[];for(n=0;n<p;n++)s=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/r)||0)/1e3):(g=h&&fn(c[s])==="object"&&!isNaN(parseInt(c[s][y],10))?c[s][y]/u:0,S.push((a[s]||w)/l+g)),y=s;return S},_3=jc.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return jc.processArabic&&(e=jc.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,n,i)/n:tg.apply(this,arguments).reduce(function(r,o){return r+o},0)},S3=function(e,t,n,s){for(var i=[],r=0,o=e.length,a=0;r!==o&&a+t[r]<n;)a+=t[r],r++;i.push(e.slice(0,r));var l=r;for(a=0;r!==o;)a+t[r]>s&&(i.push(e.slice(l,r)),a=0,l=r),a+=t[r],r++;return l!==r&&i.push(e.slice(l,r)),i},C3=function(e,t,n){n||(n={});var s,i,r,o,a,l,c,u=[],h=[u],g=n.textIndent||0,p=0,y=0,w=e.split(" "),S=tg.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),P=[];w.map(function(M){(M=M.split(/\s*\n/)).length>1?P=P.concat(M.map(function(F,pt){return(pt&&F.length?`
`:"")+F})):P.push(M[0])}),w=P,l=_3.apply(this,[x,n])}for(r=0,o=w.length;r<o;r++){var L=0;if(s=w[r],l&&s[0]==`
`&&(s=s.substr(1),L=1),g+p+(y=(i=tg.apply(this,[s,n])).reduce(function(M,F){return M+F},0))>t||L){if(y>t){for(a=S3.apply(this,[s,i,t-(g+p),t]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);y=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(M,F){return M+F},0)}else u=[s];h.push(u),g=y+l,p=S}else u.push(s),g+=p+y,p=S}return c=l?function(M,F){return(F?x:"")+M.join(" ")}:function(M){return M.join(" ")},h.map(c)},jc.splitTextToSize=function(e,t,n){var s,i=(n=n||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;r.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,r.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=s.length;a<l;a++)c=c.concat(C3.apply(this,[s[a],o,r]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},s={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],s["0123456789abcdef"[i]]=t[i];var r=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var g,p,y,w,S=["{"];for(var x in h){if(g=h[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=r(x).slice(2)).slice(0,-1)+s[p.slice(-1)]),typeof g=="number")g<0?(y=r(g).slice(3),w="-"):(y=r(g).slice(2),w=""),y=w+y.slice(0,-1)+s[y.slice(-1)];else{if(fn(g)!=="object")throw new Error("Don't know what to do with value type "+fn(g)+".");y=o(g)}S.push(p+y)}return S.push("}"),S.join("")},a=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,y,w,S={},x=1,P=S,L=[],M="",F="",pt=h.length-1,Y=1;Y<pt;Y+=1)(w=h[Y])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(w):w=="{"?(L.push([P,y]),P={},y=void 0):w=="}"?((p=L.pop())[0][p[1]]=P,y=void 0,P=p[0]):w=="-"?x=-1:y===void 0?n.hasOwnProperty(w)?(M+=n[w],y=parseInt(M,16)*x,x=1,M=""):M+=w:n.hasOwnProperty(w)?(F+=n[w],P[y]=parseInt(F,16)*x,x=1,y=void 0,F=""):F+=w;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var g=h.font,p=u.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var y=c.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])}(Ae.API),function(e){var t=function(n){for(var s=n.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=n.charCodeAt(r);return i};e.API.events.push(["addFont",function(n){var s=void 0,i=n.font,r=n.instance;if(!i.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=r.existsFileInVFS(i.postScriptName)===!1?r.loadFile(i.postScriptName):r.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(fh(a)),o.metadata=e.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,s)}}])}(Ae),function(e){function t(){return(Pe.canvg?Promise.resolve(Pe.canvg):ty(()=>import("./index.es-BgEsYkxg.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ae.API.addSvgAsImage=function(n,s,i,r,o,a,l,c){if(isNaN(s)||isNaN(i))throw vn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw vn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(y){return y.fromString(h,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(g)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),s,i,r,o,l,c)})}}(),Ae.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(t,n);return this},Ae.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var s,i,r,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function g(y,w){var S,x=!1;for(S=0;S<y.length;S+=1)y[S]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=a.length;for(h=0;h<p;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(fn(e)==="object"){for(i in e)if(r=e[i],g(a,i)&&r!==void 0){if(n[i].type==="boolean"&&typeof r=="boolean")n[i].value=r;else if(n[i].type==="name"&&g(n[i].valueSet,r))n[i].value=r;else if(n[i].type==="integer"&&Number.isInteger(r))n[i].value=r;else if(n[i].type==="array"){for(c=0;c<r.length;c+=1)if(s=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(u=0;u<r[c].length;u+=1)typeof r[c][u]!="number"&&(s=!1);s===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,w=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?w.push("/"+y+" /"+n[y].value):w.push("/"+y+" "+n[y].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+r+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ae.API),function(e){var t=e.API,n=t.pdfEscape16=function(r,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,g=r.length;h<g;++h){if(a=o.metadata.characterToGlyph(r.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=r.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},s=function(r){var o,a,l,c,u,h,g;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,g=(a=Object.keys(r).sort(function(p,y){return p-y})).length;h<g;h++)o=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[o]!==void 0&&r[o]!==null&&typeof r[o].toString=="function"&&(c=("0000"+r[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,g=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",y=0;y<g.length;y++)p+=String.fromCharCode(g[y]);var w=c();u({data:p,addLength1:!0,objectId:w}),l("endobj");var S=c();u({data:s(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Wc(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var P=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Wc(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+e.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+Wc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+P+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]),t.events.push(["putFont",function(r){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,g="",p=0;p<h.length;p++)g+=String.fromCharCode(h[p]);var y=c();u({data:g,addLength1:!0,objectId:y}),l("endobj");var w=c();u({data:s(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var S=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Wc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Wc(a.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(r)}]);var i=function(r){var o,a=r.text||"",l=r.x,c=r.y,u=r.options||{},h=r.mutex||{},g=h.pdfEscape,p=h.activeFontKey,y=h.fonts,w=p,S="",x=0,P="",L=y[w].encoding;if(y[w].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:h};for(P=a,w=p,Array.isArray(a)&&(P=a[0]),x=0;x<P.length;x+=1)y[w].metadata.hasOwnProperty("cmap")&&(o=y[w].metadata.cmap.unicode.codeMap[P[x].charCodeAt(0)]),o||P[x].charCodeAt(0)<256&&y[w].metadata.hasOwnProperty("Unicode")?S+=P[x]:S+="";var M="";return parseInt(w.slice(1))<14||L==="WinAnsiEncoding"?M=g(S,w).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(M=n(S,y[w])),h.isHex=!0,{text:M,x:l,y:c,options:u,mutex:h}};t.events.push(["postProcessText",function(r){var o=r.text||"",a=[],l={text:o,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);r.text=a}else r.text=i(Object.assign({},l,{text:o})).text}])}(Ae),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,s){return t.call(this),this.internal.vFS[n]=s,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ae.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var i,r,o,a,l,c,u,h=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,L=0;this.__bidiEngine__={};var M=function(_){var A=_.charCodeAt(),Q=A>>8,et=w[Q];return et!==void 0?h[256*et+(255&A)]:Q===252||Q===253?"AL":x.test(Q)?"L":Q===8?"R":"N"},F=function(_){for(var A,Q=0;Q<_.length;Q++){if((A=M(_.charAt(Q)))==="L")return!1;if(A==="R")return!0}return!1},pt=function(_,A,Q,et){var mt,ht,gt,tt,T=A[et];switch(T){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(T="AN");break;case"AL":P=!0,T="R";break;case"WS":T="N";break;case"CS":et<1||et+1>=A.length||(mt=Q[et-1])!=="EN"&&mt!=="AN"||(ht=A[et+1])!=="EN"&&ht!=="AN"?T="N":P&&(ht="AN"),T=ht===mt?ht:"N";break;case"ES":T=(mt=et>0?Q[et-1]:"B")==="EN"&&et+1<A.length&&A[et+1]==="EN"?"EN":"N";break;case"ET":if(et>0&&Q[et-1]==="EN"){T="EN";break}if(P){T="N";break}for(gt=et+1,tt=A.length;gt<tt&&A[gt]==="ET";)gt++;T=gt<tt&&A[gt]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(tt=A.length,gt=et+1;gt<tt&&A[gt]==="NSM";)gt++;if(gt<tt){var rt=_[et],kt=rt>=1425&&rt<=2303||rt===64286;if(mt=A[gt],kt&&(mt==="R"||mt==="AL")){T="R";break}}}T=et<1||(mt=A[et-1])==="B"?"N":Q[et-1];break;case"B":P=!1,i=!0,T=L;break;case"S":r=!0,T="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":T="N"}return T},Y=function(_,A,Q){var et=_.split("");return Q&&W(et,Q,{hiLevel:L}),et.reverse(),A&&A.reverse(),et.join("")},W=function(_,A,Q){var et,mt,ht,gt,tt,T=-1,rt=_.length,kt=0,I=[],O=L?p:g,E=[];for(P=!1,i=!1,r=!1,mt=0;mt<rt;mt++)E[mt]=M(_[mt]);for(ht=0;ht<rt;ht++){if(tt=kt,I[ht]=pt(_,E,I,ht),et=240&(kt=O[tt][y[I[ht]]]),kt&=15,A[ht]=gt=O[kt][5],et>0)if(et===16){for(mt=T;mt<ht;mt++)A[mt]=1;T=-1}else T=-1;if(O[kt][6])T===-1&&(T=ht);else if(T>-1){for(mt=T;mt<ht;mt++)A[mt]=gt;T=-1}E[ht]==="B"&&(A[ht]=0),Q.hiLevel|=gt}r&&function(R,Z,q){for(var st=0;st<q;st++)if(R[st]==="S"){Z[st]=L;for(var ct=st-1;ct>=0&&R[ct]==="WS";ct--)Z[ct]=L}}(E,A,rt)},it=function(_,A,Q,et,mt){if(!(mt.hiLevel<_)){if(_===1&&L===1&&!i)return A.reverse(),void(Q&&Q.reverse());for(var ht,gt,tt,T,rt=A.length,kt=0;kt<rt;){if(et[kt]>=_){for(tt=kt+1;tt<rt&&et[tt]>=_;)tt++;for(T=kt,gt=tt-1;T<gt;T++,gt--)ht=A[T],A[T]=A[gt],A[gt]=ht,Q&&(ht=Q[T],Q[T]=Q[gt],Q[gt]=ht);kt=tt}kt++}}},J=function(_,A,Q){var et=_.split(""),mt={hiLevel:L};return Q||(Q=[]),W(et,Q,mt),function(ht,gt,tt){if(tt.hiLevel!==0&&u)for(var T,rt=0;rt<ht.length;rt++)gt[rt]===1&&(T=S.indexOf(ht[rt]))>=0&&(ht[rt]=S[T+1])}(et,Q,mt),it(2,et,A,Q,mt),it(1,et,A,Q,mt),et.join("")};return this.__bidiEngine__.doBidiReorder=function(_,A,Q){if(function(mt,ht){if(ht)for(var gt=0;gt<mt.length;gt++)ht[gt]=gt;a===void 0&&(a=F(mt)),c===void 0&&(c=F(mt))}(_,A),o||!l||c)if(o&&l&&a^c)L=a?1:0,_=Y(_,A,Q);else if(!o&&l&&c)L=a?1:0,_=J(_,A,Q),_=Y(_,A);else if(!o||a||l||c){if(o&&!l&&a^c)_=Y(_,A),a?(L=0,_=J(_,A,Q)):(L=1,_=J(_,A,Q),_=Y(_,A));else if(o&&a&&!l&&c)L=1,_=J(_,A,Q),_=Y(_,A);else if(!o&&!l&&a^c){var et=u;a?(L=1,_=J(_,A,Q),L=0,u=!1,_=J(_,A,Q),u=et):(L=0,_=J(_,A,Q),_=Y(_,A),L=1,u=!1,_=J(_,A,Q),u=et,_=Y(_,A))}}else L=0,_=J(_,A,Q);else L=a?1:0,_=J(_,A,Q);return _},this.__bidiEngine__.setOptions=function(_){_&&(o=_.isInputVisual,l=_.isOutputVisual,a=_.isInputRtl,c=_.isOutputRtl,u=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var i=s.text;s.x,s.y;var r=s.options||{};s.mutex,r.lang;var o=[];if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,n.setOptions(r),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);s.text=o}else s.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Ae),Ae.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Wa(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new xK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new aK(this.contents),this.head=new cK(this),this.name=new pK(this),this.cmap=new wE(this),this.toUnicode={},this.hhea=new uK(this),this.maxp=new gK(this),this.hmtx=new mK(this),this.post=new hK(this),this.os2=new dK(this),this.loca=new wK(this),this.glyf=new vK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,s,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,s){var i,r,o,a;for(o=0,r=0,a=(t=""+t).length;0<=a?r<a:r>a;r=0<=a?++r:--r)i=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var s;return n==null&&(n=!1),s=n?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Dr,Wa=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,s;for(s=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)s[n]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var n,s,i;for(i=[],n=0,s=t.length;0<=s?n<s:n>s;n=0<=s?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,s,i,r,o,a,l;return t=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*s+4294967296*i+16777216*r+65536*o+256*a+l},e.prototype.writeLongLong=function(t){var n,s;return n=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,s;for(n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push(this.readByte());return n},e.prototype.write=function(t){var n,s,i,r;for(r=[],s=0,i=t.length;s<i;s++)n=t[s],r.push(this.writeByte(n));return r},e}(),aK=function(){var e;function t(n){var s,i,r;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:i>r;i=0<=r?++i:--i)s={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(n){var s,i,r,o,a,l,c,u,h,g,p,y,w;for(w in p=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),o=Math.floor(h/l),u=16*p-h,(i=new Wa).writeInt(this.scalarType),i.writeShort(p),i.writeShort(h),i.writeShort(o),i.writeShort(u),r=16*p,c=i.pos+r,a=null,y=[],n)for(g=n[w],i.writeString(w),i.writeInt(e(g)),i.writeInt(c),i.writeInt(g.length),y=y.concat(g),w==="head"&&(a=c),c+=g.length;c%4;)y.push(0),c++;return i.write(y),s=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(s),i.data},e=function(n){var s,i,r,o;for(n=xE.call(n);n.length%4;)n.push(0);for(r=new Wa(n),i=0,s=0,o=n.length;s<o;s=s+=4)i+=r.readUInt32();return 4294967295&i},t}(),lK={}.hasOwnProperty,uo=function(e,t){for(var n in t)lK.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Dr=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var cK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var s;return(s=new Wa).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(n),s.writeShort(this.glyphDataFormat),s.data},t}(),P3=function(){function e(t,n){var s,i,r,o,a,l,c,u,h,g,p,y,w,S,x,P,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),g=p/2,t.pos+=6,r=function(){var M,F;for(F=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)F.push(t.readUInt16());return F}(),t.pos+=2,w=function(){var M,F;for(F=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)F.push(t.readUInt16());return F}(),c=function(){var M,F;for(F=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)F.push(t.readUInt16());return F}(),u=function(){var M,F;for(F=[],l=M=0;0<=g?M<g:M>g;l=0<=g?++M:--M)F.push(t.readUInt16());return F}(),i=(this.length-t.pos+this.offset)/2,a=function(){var M,F;for(F=[],l=M=0;0<=i?M<i:M>i;l=0<=i?++M:--M)F.push(t.readUInt16());return F}(),l=x=0,L=r.length;x<L;l=++x)for(S=r[l],s=P=y=w[l];y<=S?P<=S:P>=S;s=y<=S?++P:--P)u[l]===0?o=s+c[l]:(o=a[u[l]/2+(s-y)-(g-l)]||0)!==0&&(o+=c[l]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,n){var s,i,r,o,a,l,c,u,h,g,p,y,w,S,x,P,L,M,F,pt,Y,W,it,J,_,A,Q,et,mt,ht,gt,tt,T,rt,kt,I,O,E,R,Z,q,st,ct,At,Dt,K;switch(et=new Wa,o=Object.keys(t).sort(function(H,dt){return H-dt}),n){case"macroman":for(w=0,S=function(){var H=[];for(y=0;y<256;++y)H.push(0);return H}(),P={0:0},r={},mt=0,T=o.length;mt<T;mt++)P[ct=t[i=o[mt]]]==null&&(P[ct]=++w),r[i]={old:t[i],new:P[t[i]]},S[i]=P[t[i]];return et.writeUInt16(1),et.writeUInt16(0),et.writeUInt32(12),et.writeUInt16(0),et.writeUInt16(262),et.writeUInt16(0),et.write(S),{charMap:r,subtable:et.data,maxGlyphID:w+1};case"unicode":for(A=[],h=[],L=0,P={},s={},x=c=null,ht=0,rt=o.length;ht<rt;ht++)P[F=t[i=o[ht]]]==null&&(P[F]=++L),s[i]={old:F,new:P[F]},a=P[F]-i,x!=null&&a===c||(x&&h.push(x),A.push(i),c=a),x=i;for(x&&h.push(x),h.push(65535),A.push(65535),J=2*(it=A.length),W=2*Math.pow(Math.log(it)/Math.LN2,2),g=Math.log(W/2)/Math.LN2,Y=2*it-W,l=[],pt=[],p=[],y=gt=0,kt=A.length;gt<kt;y=++gt){if(_=A[y],u=h[y],_===65535){l.push(0),pt.push(0);break}if(_-(Q=s[_].new)>=32768)for(l.push(0),pt.push(2*(p.length+it-y)),i=tt=_;_<=u?tt<=u:tt>=u;i=_<=u?++tt:--tt)p.push(s[i].new);else l.push(Q-_),pt.push(0)}for(et.writeUInt16(3),et.writeUInt16(1),et.writeUInt32(12),et.writeUInt16(4),et.writeUInt16(16+8*it+2*p.length),et.writeUInt16(0),et.writeUInt16(J),et.writeUInt16(W),et.writeUInt16(g),et.writeUInt16(Y),q=0,I=h.length;q<I;q++)i=h[q],et.writeUInt16(i);for(et.writeUInt16(0),st=0,O=A.length;st<O;st++)i=A[st],et.writeUInt16(i);for(At=0,E=l.length;At<E;At++)a=l[At],et.writeUInt16(a);for(Dt=0,R=pt.length;Dt<R;Dt++)M=pt[Dt],et.writeUInt16(M);for(K=0,Z=p.length;K<Z;K++)w=p[K],et.writeUInt16(w);return{charMap:s,subtable:et.data,maxGlyphID:L+1}}},e}(),wE=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="cmap",t.prototype.parse=function(n){var s,i,r;for(n.pos=this.offset,this.version=n.readUInt16(),r=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s=new P3(n,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(n,s){var i,r;return s==null&&(s="macroman"),i=P3.encode(n,s),(r=new Wa).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},t}(),uK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),dK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var s,i;for(i=[],s=0;s<10;++s)i.push(n.readByte());return i}(),this.charRange=function(){var s,i;for(i=[],s=0;s<4;++s)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var s,i;for(i=[],s=0;s<2;s=++s)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),hK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="post",t.prototype.parse=function(n){var s,i,r;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],r=[];n.pos<this.offset+this.length;)s=n.readByte(),r.push(this.names.push(n.readString(s)));return r;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},t}(),fK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="name",t.prototype.parse=function(n){var s,i,r,o,a,l,c,u,h,g,p;for(n.pos=this.offset,n.readShort(),s=n.readShort(),l=n.readShort(),i=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=h=0,g=i.length;h<g;o=++h)r=i[o],n.pos=r.offset,u=n.readString(r.length),a=new fK(u,r),c[p=r.nameID]==null&&(c[p]=[]),c[r.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),gK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),mK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="hmtx",t.prototype.parse=function(n){var s,i,r,o,a,l,c;for(n.pos=this.offset,this.metrics=[],s=0,l=this.file.hhea.numberOfMetrics;0<=l?s<l:s>l;s=0<=l?++s:--s)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],s=u=0;0<=r?u<r:u>r;s=0<=r?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,g,p;for(p=[],u=0,h=(g=this.metrics).length;u<h;u++)o=g[u],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],c=[],s=a=0;0<=r?a<r:a>r;s=0<=r?++a:--a)c.push(this.widths.push(i));return c},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),xE=[].slice,vK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var s,i,r,o,a,l,c,u,h,g;return n in this.cache?this.cache[n]:(o=this.file.loca,s=this.file.contents,i=o.indexOf(n),(r=o.lengthOf(n))===0?this.cache[n]=null:(s.pos=this.offset+i,a=(l=new Wa(s.read(r))).readShort(),u=l.readShort(),g=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new bK(l,u,g,c,h):new yK(l,a,u,g,c,h),this.cache[n]))},t.prototype.encode=function(n,s,i){var r,o,a,l,c;for(a=[],o=[],l=0,c=s.length;l<c;l++)r=n[s[l]],o.push(a.length),r&&(a=a.concat(r.encode(i)));return o.push(a.length),{table:a,offsets:o}},t}(),yK=function(){function e(t,n,s,i,r,o){this.raw=t,this.numberOfContours=n,this.xMin=s,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),bK=function(){function e(t,n,s,i,r){var o,a;for(this.raw=t,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,s;for(n=new Wa(xE.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),wK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return uo(t,Dr),t.prototype.tag="loca",t.prototype.parse=function(n){var s,i;return n.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var r,o;for(o=[],i=0,r=this.length;i<r;i+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,s){for(var i=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<i.length;++a)if(i[a]=r,o<s.length&&s[o]==a){++o,i[a]=r;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(r+=c)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},t}(),xK=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,s,i,r;for(n in i=this.font.cmap.tables[0].codeMap,t={},r=this.subset)s=r[n],t[n]=i[s];return t},e.prototype.glyphsFor=function(t){var n,s,i,r,o,a,l;for(i={},o=0,a=t.length;o<a;o++)i[r=t[o]]=this.font.glyf.glyphFor(r);for(r in n=[],i)(s=i[r])!=null&&s.compound&&n.push.apply(n,s.glyphIDs);if(n.length>0)for(r in l=this.glyphsFor(n))s=l[r],i[r]=s;return i},e.prototype.encode=function(t,n){var s,i,r,o,a,l,c,u,h,g,p,y,w,S,x;for(i in s=wE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},x=s.charMap)p[(l=x[i]).old]=l.new;for(y in g=s.maxGlyphID,o)y in p||(p[y]=g++);return u=function(P){var L,M;for(L in M={},P)M[P[L]]=L;return M}(p),h=Object.keys(u).sort(function(P,L){return P-L}),w=function(){var P,L,M;for(M=[],P=0,L=h.length;P<L;P++)a=h[P],M.push(u[a]);return M}(),r=this.font.glyf.encode(o,w,p),c=this.font.loca.encode(r.offsets,w),S={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();Ae.API.PDFObject=function(){var e;function t(){}return e=function(n,s){return(Array(s+1).join("0")+n).slice(-s)},t.convert=function(n){var s,i,r,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)s=n[a],c.push(t.convert(s));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in r=["<<"],n)o=n[i],r.push("/"+i+" "+t.convert(o));return r.push(">>"),r.join(`
`)}return""+n},t}();function _E(e,t,n,s,i){s=s||{};var r=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():r,c=a*l,u=/\r\n|\r|\n/g,h="",g=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(h=typeof e=="string"?e.split(u):e,g=h.length||1),n+=a*(2-r),s.valign==="middle"?n-=g/2*c:s.valign==="bottom"&&(n-=g*c),s.halign==="center"||s.halign==="right"){var p=a;if(s.halign==="center"&&(p*=.5),h&&g>=1){for(var y=0;y<h.length;y++)i.text(h[y],t-i.getStringUnitWidth(h[y])*p,n),n+=c;return i}t-=i.getStringUnitWidth(e)*p}return s.halign==="justify"?i.text(e,t,n,{maxWidth:s.maxWidth||100,align:"justify"}):i.text(e,t,n),i}var E3={},vu=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:E3=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var s,i,r;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(t.font&&(l=t.font),t.fontStyle){a=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),a=c[0])}if(this.jsPDFDocument.setFont(l,a),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(s=this.jsPDFDocument).setFillColor.apply(s,u),u=e.unifyColor(t.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=e.unifyColor(t.lineColor),u&&(r=this.jsPDFDocument).setDrawColor.apply(r,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,s){return this.jsPDFDocument.splitTextToSize(t,n,s)},e.prototype.rect=function(t,n,s,i,r){return this.jsPDFDocument.rect(t,n,s,i,r)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return E3||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),hy=function(e,t){return hy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},hy(e,t)};function SE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var CE=function(e){SE(t,e);function t(n){var s=e.call(this)||this;return s._element=n,s}return t}(Array);function _K(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function SK(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function bm(e,t,n){n.applyStyles(t,!0);var s=Array.isArray(e)?e:[e],i=s.map(function(r){return n.getTextWidth(r)}).reduce(function(r,o){return Math.max(r,o)},0);return i}function kE(e,t,n,s){var i=t.settings.tableLineWidth,r=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:r});var o=AE(i,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),s.y-n.y,o)}function AE(e,t){var n=e>0,s=t||t===0;return n&&s?"DF":n?"S":s?"F":null}function j0(e,t){var n,s,i,r;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(s=e.top)!==null&&s!==void 0?s:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(r=e.bottom)!==null&&r!==void 0?r:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function PE(e,t){var n=j0(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function CK(e,t,n,s,i){var r={},o=1.3333333333333333,a=R2(t,function(L){return i.getComputedStyle(L).backgroundColor});a!=null&&(r.fillColor=a);var l=R2(t,function(L){return i.getComputedStyle(L).color});l!=null&&(r.textColor=l);var c=AK(s,n);c&&(r.cellPadding=c);var u="borderTopColor",h=o*n,g=s.borderTopWidth;if(s.borderBottomWidth===g&&s.borderRightWidth===g&&s.borderLeftWidth===g){var p=(parseFloat(g)||0)/h;p&&(r.lineWidth=p)}else r.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/h,right:(parseFloat(s.borderRightWidth)||0)/h,bottom:(parseFloat(s.borderBottomWidth)||0)/h,left:(parseFloat(s.borderLeftWidth)||0)/h},r.lineWidth.top||(r.lineWidth.right?u="borderRightColor":r.lineWidth.bottom?u="borderBottomColor":r.lineWidth.left&&(u="borderLeftColor"));var y=R2(t,function(L){return i.getComputedStyle(L)[u]});y!=null&&(r.lineColor=y);var w=["left","right","center","justify"];w.indexOf(s.textAlign)!==-1&&(r.halign=s.textAlign),w=["middle","bottom","top"],w.indexOf(s.verticalAlign)!==-1&&(r.valign=s.verticalAlign);var S=parseInt(s.fontSize||"");isNaN(S)||(r.fontSize=S/o);var x=kK(s);x&&(r.fontStyle=x);var P=(s.fontFamily||"").toLowerCase();return e.indexOf(P)!==-1&&(r.font=P),r}function kK(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function R2(e,t){var n=EE(e,t);if(!n)return null;var s=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var i=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],r=parseInt(s[4]);return r===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function EE(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:EE(e.parentElement,t):n}function AK(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],s=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,r=n.map(function(a){return parseInt(a||"0")/s}),o=j0(r,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function IE(e,t,n,s,i){var r,o;s===void 0&&(s=!1),i===void 0&&(i=!1);var a;typeof t=="string"?a=n.document.querySelector(t):a=t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],h=[],g=[];if(!a)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:g};for(var p=0;p<a.rows.length;p++){var y=a.rows[p],w=(o=(r=y==null?void 0:y.parentElement)===null||r===void 0?void 0:r.tagName)===null||o===void 0?void 0:o.toLowerCase(),S=PK(l,c,n,y,s,i);S&&(w==="thead"?u.push(S):w==="tfoot"?g.push(S):h.push(S))}return{head:u,body:h,foot:g}}function PK(e,t,n,s,i,r){for(var o=new CE(s),a=0;a<s.cells.length;a++){var l=s.cells[a],c=n.getComputedStyle(l);if(i||c.display!=="none"){var u=void 0;r&&(u=CK(e,l,t,c,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:EK(l)})}}var h=n.getComputedStyle(s);if(o.length>0&&(i||h.display!=="none"))return o}function EK(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function IK(e,t,n){for(var s=0,i=[e,t,n];s<i.length;s++){var r=i[s];r&&typeof r!="object"&&console.error("The options parameter should be of type object, is: "+typeof r),r.startY&&typeof r.startY!="number"&&(console.error("Invalid value for startY option",r.startY),delete r.startY)}}function jo(e,t,n,s,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])}return r}function TK(e,t){var n=new vu(e),s=n.getDocumentOptions(),i=n.getGlobalOptions();IK(i,s,t);var r=jo({},i,s,t),o;typeof window<"u"&&(o=window);var a=NK(i,s,t),l=DK(i,s,t),c=LK(n,r),u=OK(n,r,o);return{id:t.tableId,content:u,hooks:l,styles:a,settings:c}}function NK(e,t,n){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=e[l],u=t[l],h=n[l];s.columnStyles=jo({},c,u,h)}else{var g=[e,t,n],p=g.map(function(y){return y[l]||{}});s[l]=jo({},p[0],p[1],p[2])}},r=0,o=Object.keys(s);r<o.length;r++){var a=o[r];i(a)}return s}function DK(e,t,n){for(var s=[e,t,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,o=s;r<o.length;r++){var a=o[r];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function LK(e,t){var n,s,i,r,o,a,l,c,u,h,g,p,y=j0(t.margin,40/e.scaleFactor()),w=(n=MK(e,t.startY))!==null&&n!==void 0?n:y.top,S;t.showFoot===!0?S="everyPage":t.showFoot===!1?S="never":S=(s=t.showFoot)!==null&&s!==void 0?s:"everyPage";var x;t.showHead===!0?x="everyPage":t.showHead===!1?x="never":x=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var P=(r=t.useCss)!==null&&r!==void 0?r:!1,L=t.theme||(P?"plain":"striped"),M=!!t.horizontalPageBreak,F=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=t.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:P,theme:L,startY:w,margin:y,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:x,showFoot:S,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:M,horizontalPageBreakRepeat:F,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function MK(e,t){var n=e.getLastAutoTable(),s=e.scaleFactor(),i=e.pageNumber(),r=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;r=o===i}return typeof t=="number"?t:(t==null||t===!1)&&r&&(n==null?void 0:n.finalY)!=null?n.finalY+20/s:null}function OK(e,t,n){var s=t.head||[],i=t.body||[],r=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var a=IE(e,t.html,n,o,t.useCss)||{};s=a.head||s,i=a.body||s,r=a.foot||s}else console.error("Cannot parse html in non browser environment")}var l=t.columns||RK(s,i,r);return{columns:l,head:s,body:i,foot:r}}function RK(e,t,n){var s=e[0]||t[0]||n[0]||[],i=[];return Object.keys(s).filter(function(r){return r!=="_element"}).forEach(function(r){var o=1,a;Array.isArray(s)?a=s[parseInt(r)]:a=s[r],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var c=void 0;Array.isArray(s)?c=i.length:c=r+(l>0?"_".concat(l):"");var u={dataKey:c};i.push(u)}}),i}var fy=function(){function e(t,n,s){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=s,this.doc=t.getDocument()}return e}(),FK=function(e){SE(t,e);function t(n,s,i,r,o,a){var l=e.call(this,n,s,a)||this;return l.cell=i,l.row=r,l.column=o,l.section=r.section,l}return t}(fy),BK=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,s){return n+s.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,s){return n+s.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,s,i,r,o){for(var a=0,l=n;a<l.length;a++){var c=l[a],u=new FK(t,this,s,i,r,o),h=c(u)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var s=0,i=this.hooks.didDrawPage;s<i.length;s++){var r=i[s];r(new fy(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var s=0,i=this.hooks.willDrawPage;s<i.length;s++){var r=i[s];r(new fy(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,r){return i+r.wrappedWidth},0);return n}else{var s=this.settings.margin;return t-s.left-s.right}},e}(),TE=function(){function e(t,n,s,i,r){r===void 0&&(r=!1),this.height=0,this.raw=t,t instanceof CE&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=s,this.cells=i,this.spansMultiplePages=r}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(s,i){var r;return Math.max(s,((r=n.cells[i.index])===null||r===void 0?void 0:r.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(s){var i=n.cells[s.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var s=this;return t.reduce(function(i,r){var o=s.cells[r.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),c=l+a;return c>i?c:i},0)},e}(),NE=function(){function e(t,n,s){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=s,this.raw=t;var r=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,r=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=r!=null?""+r:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");s=this.x+i/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var s=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*n,r=s*i+this.padding("vertical");return Math.max(r,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=j0(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),jK=function(){function e(t,n,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=s}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,s=0,i=t.allRows();s<i.length;s++){var r=i[s],o=r.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},e}();function $K(e,t){VK(e,t);var n=[],s=0;t.columns.forEach(function(r){var o=r.getMaxCustomCellWidth(t);o?r.width=o:(r.width=r.wrappedWidth,n.push(r)),s+=r.width});var i=t.getWidth(e.pageSize().width)-s;i&&(i=py(n,i,function(r){return Math.max(r.minReadableWidth,r.minWidth)})),i&&(i=py(n,i,function(r){return r.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),UK(t),qK(t,e),zK(t)}function VK(e,t){var n=e.scaleFactor(),s=t.settings.horizontalPageBreak,i=PE(e,t);t.allRows().forEach(function(r){for(var o=0,a=t.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,r,l,null);var h=c.padding("horizontal");c.contentWidth=bm(c.text,c.styles,e)+h;var g=bm(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=g+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||s===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var p=10/n;c.minWidth=c.styles.minCellWidth||p,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(r){for(var o=0,a=t.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function py(e,t,n){for(var s=t,i=e.reduce(function(p,y){return p+y.wrappedWidth},0),r=0;r<e.length;r++){var o=e[r],a=o.wrappedWidth/i,l=s*a,c=o.width+l,u=n(o),h=c<u?u:c;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(p){return t<0?p.width>n(p):!0});g.length&&(t=py(g,t,n))}return t}function zK(e){for(var t={},n=1,s=e.allRows(),i=0;i<s.length;i++)for(var r=s[i],o=0,a=e.columns;o<a.length;o++){var l=a[o],c=t[l.index];if(n>1)n--,delete r.cells[l.index];else if(c)c.cell.height+=r.height,n=c.cell.colSpan,delete r.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=r.cells[l.index];if(!u)continue;if(u.height=r.height,u.rowSpan>1){var h=s.length-i,g=u.rowSpan>h?h:u.rowSpan;t[l.index]={cell:u,left:g,row:r}}}}}function UK(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var s=t[n],i=null,r=0,o=0,a=0;a<e.columns.length;a++){var l=e.columns[a];if(o-=1,o>1&&e.columns[a+1])r+=l.width,delete s.cells[l.index];else if(i){var c=i;delete s.cells[l.index],i=null,c.width=l.width+r}else{var c=s.cells[l.index];if(!c)continue;if(o=c.colSpan,r=0,c.colSpan>1){i=c,r+=l.width;continue}c.width=l.width+r}}}function qK(e,t){for(var n={count:0,height:0},s=0,i=e.allRows();s<i.length;s++){for(var r=i[s],o=0,a=e.columns;o<a.length;o++){var l=a[o],c=r.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=I3(c.text,u,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=I3(c.text,u,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var h=c.styles.overflow(c.text,u);typeof h=="string"?c.text=[h]:c.text=h}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<g*c.rowSpan?n={height:g,count:c.rowSpan}:n&&n.count>0&&n.height>g&&(g=n.height),g>r.height&&(r.height=g)}}n.count--}}function I3(e,t,n,s,i){return e.map(function(r){return HK(r,t,n,s,i)})}function HK(e,t,n,s,i){var r=1e4*s.scaleFactor();if(t=Math.ceil(t*r)/r,t>=bm(e,n,s))return e;for(;t<bm(e+i,n,s)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function WK(e,t){var n=new vu(e),s=GK(t,n.scaleFactor()),i=new BK(t,s);return $K(n,i),n.applyStyles(n.userStyles),i}function GK(e,t){var n=e.content,s=YK(n.columns);if(n.head.length===0){var i=T3(s,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=T3(s,"foot");i&&n.foot.push(i)}var r=e.settings.theme,o=e.styles;return{columns:s,head:F2("head",n.head,s,o,r,t),body:F2("body",n.body,s,o,r,t),foot:F2("foot",n.foot,s,o,r,t)}}function F2(e,t,n,s,i,r){var o={},a=t.map(function(l,c){for(var u=0,h={},g=0,p=0,y=0,w=n;y<w.length;y++){var S=w[y];if(o[S.index]==null||o[S.index].left===0)if(p===0){var x=void 0;Array.isArray(l)?x=l[S.index-g-u]:x=l[S.dataKey];var P={};typeof x=="object"&&!Array.isArray(x)&&(P=(x==null?void 0:x.styles)||{});var L=XK(e,S,c,i,s,r,P),M=new NE(x,L,e);h[S.dataKey]=M,h[S.index]=M,p=M.colSpan-1,o[S.index]={left:M.rowSpan-1,times:p}}else p--,g++;else o[S.index].left--,p=o[S.index].times,u++}return new TE(l,c,e,h)});return a}function T3(e,t){var n={};return e.forEach(function(s){if(s.raw!=null){var i=KK(t,s.raw);i!=null&&(n[s.dataKey]=i)}}),Object.keys(n).length>0?n:null}function KK(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function YK(e){return e.map(function(t,n){var s,i;return typeof t=="object"?i=(s=t.dataKey)!==null&&s!==void 0?s:n:i=n,new jK(i,t,n)})}function XK(e,t,n,s,i,r,o){var a=SK(s),l;e==="head"?l=i.headStyles:e==="body"?l=i.bodyStyles:e==="foot"&&(l=i.footStyles);var c=jo({},a.table,a[e],i.styles,l),u=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},h=e==="body"?u:{},g=e==="body"&&n%2===0?jo({},a.alternateRow,i.alternateRowStyles):{},p=_K(r),y=jo({},p,c,g,h);return jo(y,o)}function QK(e,t,n){var s;n===void 0&&(n={});var i=PE(e,t),r=new Map,o=[],a=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(g){var p=t.columns.find(function(y){return y.dataKey===g||y.index===g});p&&!r.has(p.index)&&(r.set(p.index,!0),o.push(p.index),a.push(t.columns[p.index]),i-=p.wrappedWidth)});for(var c=!0,u=(s=n==null?void 0:n.start)!==null&&s!==void 0?s:0;u<t.columns.length;){if(r.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(c||i>=h)c=!1,o.push(u),a.push(t.columns[u]),i-=h;else break;u++}return{colIndexes:o,columns:a,lastIndex:u-1}}function JK(e,t){for(var n=[],s=0;s<t.columns.length;s++){var i=QK(e,t,{start:s});i.columns.length&&(n.push(i),s=i.lastIndex)}return n}function ZK(e,t){var n=t.settings,s=n.startY,i=n.margin,r={x:i.left,y:s},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),a=s+i.bottom+o;if(n.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(g,p){return g+p.height},0);a+=c}var u=new vu(e);(n.pageBreak==="always"||n.startY!=null&&a>u.pageSize().height)&&(LE(u),r.y=i.top),t.callWillDrawPageHooks(u,r);var h=jo({},r);t.startPageNumber=u.pageNumber(),n.horizontalPageBreak?tY(u,t,h,r):(u.applyStyles(u.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(g){return Wo(u,t,g,r,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(g,p){var y=p===t.body.length-1;wm(u,t,g,y,h,r,t.columns)}),u.applyStyles(u.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(g){return Wo(u,t,g,r,t.columns)})),kE(u,t,h,r),t.callEndPageHooks(u,r),t.finalY=r.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function tY(e,t,n,s){var i=JK(e,t),r=t.settings;if(r.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,u){e.applyStyles(e.userStyles),u>0?ph(e,t,n,s,c.columns,!0):N3(e,t,s,c.columns),eY(e,t,n,s,c.columns),B2(e,t,s,c.columns)});else for(var o=-1,a=i[0],l=function(){var c=o;if(a){e.applyStyles(e.userStyles);var u=a.columns;o>=0?ph(e,t,n,s,u,!0):N3(e,t,s,u),c=D3(e,t,o+1,s,u),B2(e,t,s,u)}var h=c-o;i.slice(1).forEach(function(g){e.applyStyles(e.userStyles),ph(e,t,n,s,g.columns,!0),D3(e,t,o+1,s,g.columns,h),B2(e,t,s,g.columns)}),o=c};o<t.body.length-1;)l()}function N3(e,t,n,s){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(r){return Wo(e,t,r,n,s)})}function eY(e,t,n,s,i){e.applyStyles(e.userStyles),t.body.forEach(function(r,o){var a=o===t.body.length-1;wm(e,t,r,a,n,s,i)})}function D3(e,t,n,s,i,r){e.applyStyles(e.userStyles),r=r??t.body.length;var o=Math.min(n+r,t.body.length),a=-1;return t.body.slice(n,o).forEach(function(l,c){var u=n+c===t.body.length-1,h=DE(e,t,u,s);l.canEntireRowFit(h,i)&&(Wo(e,t,l,s,i),a=n+c)}),a}function B2(e,t,n,s){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(r){return Wo(e,t,r,n,s)})}function nY(e,t,n){var s=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),r=Math.floor((t-i)/s);return Math.max(0,r)}function sY(e,t,n,s){var i={};e.spansMultiplePages=!0,e.height=0;for(var r=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],c=e.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new NE(c.raw,c.styles,c.section);u=jo(u,c),u.text=[];var h=nY(c,t,s);c.text.length>h&&(u.text=c.text.splice(h,c.text.length));var g=s.scaleFactor(),p=s.getLineHeightFactor();c.contentHeight=c.getContentHeight(g,p),c.contentHeight>=t&&(c.contentHeight=t,u.styles.minCellHeight-=t),c.contentHeight>e.height&&(e.height=c.contentHeight),u.contentHeight=u.getContentHeight(g,p),u.contentHeight>r&&(r=u.contentHeight),i[l.index]=u}}var y=new TE(e.raw,-1,e.section,i,!0);y.height=r;for(var w=0,S=n.columns;w<S.length;w++){var l=S[w],u=y.cells[l.index];u&&(u.height=y.height);var c=e.cells[l.index];c&&(c.height=e.height)}return y}function iY(e,t,n,s){var i=e.pageSize().height,r=s.settings.margin,o=r.top+r.bottom,a=i-o;t.section==="body"&&(a-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var l=t.getMinimumRowHeight(s.columns,e),c=l<n;if(l>a)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=t.hasRowSpan(s.columns),h=t.getMaxCellHeight(s.columns)>a;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||s.settings.rowPageBreak==="avoid")}function wm(e,t,n,s,i,r,o){var a=DE(e,t,s,r);if(n.canEntireRowFit(a,o))Wo(e,t,n,r,o);else if(iY(e,n,a,t)){var l=sY(n,a,t,e);Wo(e,t,n,r,o),ph(e,t,i,r,o),wm(e,t,l,s,i,r,o)}else ph(e,t,i,r,o),wm(e,t,n,s,i,r,o)}function Wo(e,t,n,s,i){s.x=t.settings.margin.left;for(var r=0,o=i;r<o.length;r++){var a=o[r],l=n.cells[a.index];if(!l){s.x+=a.width;continue}e.applyStyles(l.styles),l.x=s.x,l.y=s.y;var c=t.callCellHooks(e,t.hooks.willDrawCell,l,n,a,s);if(c===!1){s.x+=a.width;continue}rY(e,l,s);var u=l.getTextPos();_E(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,n,a,s),s.x+=a.width}s.y+=n.height}function rY(e,t,n){var s=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof s.lineWidth=="number"){var i=AE(s.lineWidth,s.fillColor);i&&e.rect(t.x,n.y,t.width,t.height,i)}else typeof s.lineWidth=="object"&&(s.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),oY(e,t,n,s.lineWidth))}function oY(e,t,n,s){var i,r,o,a;s.top&&(i=n.x,r=n.y,o=n.x+t.width,a=n.y,s.right&&(o+=.5*s.right),s.left&&(i-=.5*s.left),l(s.top,i,r,o,a)),s.bottom&&(i=n.x,r=n.y+t.height,o=n.x+t.width,a=n.y+t.height,s.right&&(o+=.5*s.right),s.left&&(i-=.5*s.left),l(s.bottom,i,r,o,a)),s.left&&(i=n.x,r=n.y,o=n.x,a=n.y+t.height,s.top&&(r-=.5*s.top),s.bottom&&(a+=.5*s.bottom),l(s.left,i,r,o,a)),s.right&&(i=n.x+t.width,r=n.y,o=n.x+t.width,a=n.y+t.height,s.top&&(r-=.5*s.top),s.bottom&&(a+=.5*s.bottom),l(s.right,i,r,o,a));function l(c,u,h,g,p){e.getDocument().setLineWidth(c),e.getDocument().line(u,h,g,p,"S")}}function DE(e,t,n,s){var i=t.settings.margin.bottom,r=t.settings.showFoot;return(r==="everyPage"||r==="lastPage"&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-s.y-i}function ph(e,t,n,s,i,r){i===void 0&&(i=[]),r===void 0&&(r=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!r&&t.foot.forEach(function(a){return Wo(e,t,a,s,i)}),t.callEndPageHooks(e,s);var o=t.settings.margin;kE(e,t,n,s),LE(e),t.pageNumber++,s.x=o.left,s.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,s),t.settings.showHead==="everyPage"&&(t.head.forEach(function(a){return Wo(e,t,a,s,i)}),e.applyStyles(e.userStyles))}function LE(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function aY(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=t[0],i=TK(this,s),r=WK(this,i);return ZK(this,r),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,s,i){_E(t,n,s,i,this)},e.API.autoTableSetDefaults=function(t){return vu.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){vu.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var s;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new vu(this),r=IE(i,t,window,n,!1),o=r.head,a=r.body,l=((s=o[0])===null||s===void 0?void 0:s.map(function(c){return c.content}))||[];return{columns:l,rows:a,data:a}}}var j2;try{if(typeof window<"u"&&window){var L3=window,M3=L3.jsPDF||((j2=L3.jspdf)===null||j2===void 0?void 0:j2.jsPDF);M3&&aY(M3)}}catch(e){console.error("Could not apply autoTable plugin",e)}const lY={class:"max-w-7xl mx-auto px-2 sm:px-4 md:px-6 text-gray-200"},cY={key:0,class:"mb-8"},uY={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},dY={class:"glass-card border-l-4 border-sky-500 transition-all duration-300 hover:shadow-md hover:shadow-sky-500/10"},hY={class:"text-3xl font-bold text-gray-200"},fY={class:"glass-card border-l-4 border-sky-500 transition-all duration-300 hover:shadow-md hover:shadow-sky-500/10"},pY={class:"text-3xl font-bold text-gray-200"},gY={key:1,class:"mb-8"},mY={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},vY={class:"font-bold text-lg text-gray-100 mb-1"},yY={class:"text-sm text-gray-400"},bY={class:"font-medium text-gray-200"},wY={class:"text-sm text-gray-400"},xY={class:"font-medium text-gray-200"},_Y={key:2,class:"mb-8"},SY={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},CY={class:"font-bold text-lg text-gray-100 mb-1"},kY={class:"text-sm text-gray-400"},AY={class:"font-medium text-gray-200"},PY={class:"text-sm text-gray-400"},EY={class:"font-medium text-gray-200"},IY={class:"glass-container rounded-xl shadow-xl border border-gray-700/30 mb-10 overflow-hidden"},TY={class:"bg-gray-900/60 border-b border-emerald-500/15 px-6 py-4"},NY={class:"text-lg font-semibold text-emerald-400"},DY={key:0,class:"md:col-span-3 mb-6"},LY={class:"bg-yellow-900/30 border-l-4 border-amber-500 p-4 rounded"},MY={class:"flex"},OY={class:"ml-3"},RY={class:"text-amber-300 font-medium"},FY={class:"font-bold text-amber-200"},BY={class:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-5"},jY={class:"md:col-span-3 form-section"},$Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},VY={class:"relative"},zY={class:"relative"},UY={class:"relative"},qY={class:"relative"},HY={class:"relative"},WY=["value"],GY={class:"relative"},KY=["value"],YY={class:"relative"},XY={class:"relative md:col-span-3"},QY={class:"md:col-span-3 form-section mt-2"},JY={class:"bg-gray-700/20 rounded-lg p-4 border border-cyan-500/10"},ZY={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start"},tX={class:"relative"},eX={class:"relative"},nX={key:0,class:"error-message"},sX=["disabled"],iX={class:"relative md:col-start-2"},rX={key:0,class:"error-message"},oX=["disabled"],aX={class:"md:col-span-3 form-section mt-2"},lX={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},cX={class:"relative"},uX={class:"relative"},dX={class:"relative"},hX=["disabled"],fX={class:"relative"},pX={class:"md:col-span-3 mt-6 pt-4 border-t border-gray-700/50"},gX={class:"flex flex-col sm:flex-row gap-3"},mX=["disabled"],vX={class:"z-10 relative flex items-center justify-center"},yX={key:0,class:"w-5 h-5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},bX={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},wX={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},xX={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_X={key:0,class:"md:col-span-3 alert-danger mt-4"},SX={class:"flex"},CX={class:"ml-3"},kX={class:"mt-2 list-disc list-inside text-sm text-red-400"},AX={key:0},PX={key:1},EX={key:2},IX={key:3},TX={key:4},NX={key:5},DX={key:6},LX={key:7},MX={key:8},OX={key:9},RX={class:"glass-container rounded-xl shadow-lg border border-gray-700/30 p-4 mb-6"},FX={class:"flex flex-col md:flex-row items-center justify-between gap-4"},BX={class:"w-full md:w-auto flex flex-col sm:flex-row flex-wrap items-center gap-3"},jX={class:"relative flex-grow min-w-[180px] sm:min-w-[200px]"},$X={class:"relative flex-grow min-w-[180px] sm:min-w-[200px]"},VX=["value"],zX={class:"relative flex-grow min-w-[180px] sm:min-w-[200px]"},UX=["value"],qX={class:"flex justify-between items-center mb-3"},HX={class:"text-sm text-gray-400"},WX={class:"font-medium text-gray-200"},GX={key:0},KX=["disabled"],YX={key:0,class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},XX={key:1,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-emerald-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},QX={class:"glass-container rounded-xl shadow-lg border border-gray-700/30 overflow-hidden mb-10 relative"},JX={key:0,class:"loading-overlay"},ZX={class:"overflow-x-auto"},tQ={class:"min-w-full divide-y divide-gray-700"},eQ={class:"divide-y divide-gray-700/50"},nQ={class:"td-table"},sQ={class:"font-medium text-gray-100 hover:text-emerald-300 transition-colors"},iQ={class:"td-table"},rQ={class:"badge-gray"},oQ={class:"td-table hidden sm:table-cell"},aQ={class:"td-table"},lQ={class:"td-table hidden md:table-cell"},cQ={class:"td-table hidden lg:table-cell"},uQ={class:"td-table hidden lg:table-cell"},dQ={class:"td-table hidden lg:table-cell"},hQ={class:"td-table hidden md:table-cell"},fQ={class:"td-table hidden md:table-cell text-center"},pQ=["title"],gQ={class:"td-table hidden md:table-cell text-center"},mQ=["title"],vQ={key:1},yQ={class:"td-table"},bQ={class:"flex space-x-1"},wQ=["onClick"],xQ=["onClick"],_Q=["onClick"],SQ={key:0},CQ={colspan:12,class:"px-4 py-8 text-center"},kQ={class:"flex flex-col items-center justify-center space-y-3"},AQ={class:"text-gray-600 text-sm"},PQ={key:0},EQ={class:"modal-backdrop"},IQ={class:"modal-content max-w-md"},TQ={class:"p-6"},NQ={class:"flex gap-2 mb-4"},DQ={class:"modal-list-container"},LQ={class:"divide-y divide-gray-700"},MQ={class:"text-gray-200"},OQ=["onClick"],RQ={key:0,class:"py-8 text-center text-gray-500"},FQ={key:0},BQ={class:"modal-backdrop"},jQ={class:"modal-content max-w-md"},$Q={class:"modal-header"},VQ={class:"p-6"},zQ={class:"text-gray-300"},UQ={class:"text-gray-100"},qQ={class:"modal-footer gap-3"},HQ={key:0,class:"modal-backdrop"},WQ={class:"modal-header"},GQ={class:"modal-title"},KQ={class:"p-6"},YQ={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},XQ={class:"detail-card border-emerald-500"},QQ={class:"detail-dl"},JQ={class:"col-span-2 whitespace-pre-wrap detail-description"},ZQ={class:"detail-card border-cyan-500"},tJ={class:"detail-dl"},eJ={class:"detail-card border-purple-500 md:col-span-2"},nJ={class:"detail-dl md:grid-cols-4"},sJ={class:"font-semibold"},iJ={class:"modal-footer justify-between"},rJ={key:0,class:"modal-backdrop"},oJ={class:"modal-content max-w-5xl max-h-[90vh]"},aJ={class:"modal-header"},lJ={class:"modal-title"},cJ={class:"p-4 md:p-6 overflow-y-auto"},uJ={key:0},dJ={class:"grid grid-cols-7 gap-1.5"},hJ={key:0,class:"day-visits"},fJ=["title","onClick"],pJ={class:"truncate"},gJ={key:0,class:"visit-more"},mJ={key:1,class:"text-center text-gray-500 py-10"},vJ={class:"modal-footer"},yJ={__name:"Tiendas",setup(e){const t=Gt([]),n=Gt([]),s=Gt(""),i=Gt(""),r=Gt(""),o=Gt(""),a=Gt([]),l=Gt(!1),c=Gt(null),u=Gt(!1),h=Gt(!1),g=Gt(!1),p=Gt(!1),y=Gt(!1),w=Gt(!1),S=Gt([]),x=Gt(""),P=Gt(["Mant. Preventivo","Venta de plantas","Jardinizacion","Reparacion de sistema riego","Proyecto nuevo"]),L=Gt(["Ilduara","Gladys Lopez","Alan Garcia","Byron Rivas","Andrea Mendival","Helen","Ingrid Fuentes"].sort((U,C)=>U.localeCompare(C))),M={nombre:"",marca:"",tecnico:"",ods:"",categoria:"",consultor:"",descripcion:"",mesServicio:"",numVisitas:1,fechaPrimeraVisita:"",estadoPrimeraVisita:"Programada",fechaSegundaVisita:"",estadoSegundaVisita:"Programada",costo:null,tipoPago:"Contado",diasCredito:0,estadoProceso:"Pendiente",fechaCreacion:null},F=Gt({...M}),pt={"McDonald's":"amber","Pizza Hut":"red",Kentucky:"red",Starbucks:"green","Dunkin Donuts":"pink","Edificio Naguchi":"gray",Pandas:"gray",DEFAULT:"emerald"},Y=U=>{const C=(U==null?void 0:U.trim())||"DEFAULT",$=Object.keys(pt).find(wt=>wt!=="DEFAULT"&&C.toLowerCase().includes(wt.toLowerCase()));return pt[$]||pt.DEFAULT},W=de(()=>{const U={};return t.value.forEach(C=>{const $=(C.marca||"Sin Marca/Cliente").trim(),wt=Number(C.costo)||0;U[$]||(U[$]={nombre:$,conteo:0,ingresos:0}),U[$].conteo++,U[$].ingresos+=wt}),Object.values(U).sort((C,$)=>C.nombre.localeCompare($.nombre))}),it=de(()=>{const U={};return t.value.forEach(C=>{const $=(C.consultor||"No asignado").trim(),wt=Number(C.costo)||0;U[$]||(U[$]={nombre:$,conteo:0,ingresos:0}),U[$].conteo++,U[$].ingresos+=wt}),Object.values(U).sort((C,$)=>C.nombre.localeCompare($.nombre))}),J=de(()=>{const U=t.value.length,C=t.value.reduce(($,wt)=>$+(Number(wt.costo)||0),0);return{totalTiendas:U,costoTotalGeneral:C}}),_=de(()=>{let U=t.value;if(i.value){const C=i.value.toLowerCase().trim();C&&(U=U.filter($=>Object.values($).some(wt=>String(wt).toLowerCase().includes(C))))}return r.value&&(U=U.filter(C=>C.mesServicio===r.value)),o.value&&(U=U.filter(C=>C.consultor===o.value)),U.sort((C,$)=>{const wt=C.fechaCreacion instanceof he?C.fechaCreacion.toMillis():0;return($.fechaCreacion instanceof he?$.fechaCreacion.toMillis():0)-wt}),U}),A=de(()=>!(!F.value.nombre||!F.value.marca||!F.value.categoria||!F.value.consultor||!F.value.mesServicio||F.value.costo===null||F.value.costo<=0||!F.value.tipoPago||!F.value.estadoProceso||F.value.fechaPrimeraVisita&&!Q()||F.value.numVisitas==2&&F.value.fechaSegundaVisita&&!et())),Q=()=>{if(!F.value.fechaPrimeraVisita)return!0;try{const C=new Date(F.value.fechaPrimeraVisita+"T00:00:00").getDate();return C>=1&&C<=15}catch{return!1}},et=()=>{if(!F.value.fechaSegundaVisita)return!0;try{const C=new Date(F.value.fechaSegundaVisita+"T00:00:00").getDate();return C>15&&C<=31}catch{return!1}},mt=(U,C=!1)=>{if(!U)return"";try{let $;if(U instanceof he)$=U.toDate();else if(U instanceof Date&&!isNaN(U.getTime()))$=U;else if(typeof U=="string"&&U.includes("-"))$=new Date(U+"T00:00:00Z");else return"Fecha inválida";if(isNaN($.getTime()))return"Fecha inválida";const wt=C?{day:"2-digit",month:"2-digit",year:"numeric",timeZone:"UTC"}:{day:"2-digit",month:"2-digit",timeZone:"UTC"};return $.toLocaleDateString("es-GT",wt)}catch{return"Fecha inválida"}},ht=U=>{if(!U||!U.includes("-"))return"";try{const[C,$]=U.split("-"),wt=new Date(Number(C),Number($)-1,1);if(isNaN(wt.getTime()))return U;let It=wt.toLocaleDateString("es-GT",{month:"long",year:"numeric"});return It.charAt(0).toUpperCase()+It.slice(1)}catch{return U}},gt=async()=>{y.value=!0,t.value=[];try{const U=await xs(Kn(qe,"tiendas")),C=[];U.forEach($=>{C.push({id:$.id,...$.data()})}),t.value=C,tt()}catch(U){console.error("Error cargando tiendas:",U)}finally{y.value=!1}},tt=()=>{const U=new Set;t.value.forEach(C=>{C.mesServicio&&U.add(C.mesServicio)}),a.value=Array.from(U).sort().reverse()},T=async()=>{y.value=!0;try{const U=bs(qe,"configuracion","marcas"),C=await RB(U);C.exists()&&C.data().lista?n.value=C.data().lista:n.value=["McDonald's","Pizza Hut","Kentucky","Starbucks","Dunkin Donuts","Edificio Naguchi","Pandas","Cliente Varios","Proyecto Interno"],n.value.sort(($,wt)=>$.localeCompare(wt))}catch(U){console.error("Error cargando marcas:",U)}finally{y.value=!1}},rt=async()=>{if(p.value=!0,!!A.value){y.value=!0;try{const U={...F.value,fechaCreacion:Dl()};delete U.id,Object.keys(U).forEach(wt=>{U[wt]===""&&(U[wt]=null)}),U.fechaPrimeraVisita||(U.estadoPrimeraVisita=null),U.fechaSegundaVisita||(U.estadoSegundaVisita=null),U.numVisitas!=2&&(U.fechaSegundaVisita=null,U.estadoSegundaVisita=null),U.tipoPago!=="Crédito"&&(U.diasCredito=0);const C=await Nl(Kn(qe,"tiendas"),U),$={tienda:U.nombre,tecnico:U.tecnico,consultor:U.consultor,fecha:U.mesServicio+"-01",numVisitas:U.numVisitas,fechaPrimeraVisita:U.fechaPrimeraVisita,estadoPrimeraVisita:U.estadoPrimeraVisita,fechaSegundaVisita:U.fechaSegundaVisita,estadoSegundaVisita:U.estadoSegundaVisita,fechaCreacion:Dl(),tiendaId:C.id};await Nl(Kn(qe,"mantenimientos"),$),await gt(),F.value={...M},p.value=!1}catch(U){console.error("Error guardando tienda:",U)}finally{y.value=!1}}},kt=U=>{c.value={...U},F.value={id:U.id,nombre:U.nombre||M.nombre,marca:U.marca||M.marca,tecnico:U.tecnico||M.tecnico,ods:U.ods||M.ods,categoria:U.categoria||M.categoria,consultor:U.consultor||M.consultor,descripcion:U.descripcion||M.descripcion,mesServicio:U.mesServicio||M.mesServicio,numVisitas:U.numVisitas??M.numVisitas,fechaPrimeraVisita:U.fechaPrimeraVisita||M.fechaPrimeraVisita,estadoPrimeraVisita:U.estadoPrimeraVisita||M.estadoPrimeraVisita,fechaSegundaVisita:U.fechaSegundaVisita||M.fechaSegundaVisita,estadoSegundaVisita:U.estadoSegundaVisita||M.estadoSegundaVisita,costo:U.costo??M.costo,tipoPago:U.tipoPago||M.tipoPago,diasCredito:U.diasCredito??M.diasCredito,estadoProceso:U.estadoProceso||M.estadoProceso,fechaCreacion:U.fechaCreacion},l.value=!0,g.value=!1,p.value=!1,window.scrollTo({top:0,behavior:"smooth"})},I=U=>{c.value={...U},g.value=!0},O=U=>{g.value=!1,kt(U)},E=async()=>{if(p.value=!0,!A.value||!F.value.id)return;y.value=!0;const U=F.value.id;try{const C={...F.value};delete C.id,delete C.fechaCreacion,Object.keys(C).forEach(It=>{C[It]===""&&(C[It]=null)}),C.fechaPrimeraVisita||(C.estadoPrimeraVisita=null),C.fechaSegundaVisita||(C.estadoSegundaVisita=null),C.numVisitas!=2&&(C.fechaSegundaVisita=null,C.estadoSegundaVisita=null),C.tipoPago!=="Crédito"&&(C.diasCredito=0),await Aa(bs(qe,"tiendas",U),C);const $=Gs(Kn(qe,"mantenimientos"),Li("tiendaId","==",U)),wt=await xs($);for(const It of wt.docs)await Aa(bs(qe,"mantenimientos",It.id),{tienda:C.nombre,tecnico:C.tecnico,consultor:C.consultor,numVisitas:C.numVisitas,fechaPrimeraVisita:C.fechaPrimeraVisita,estadoPrimeraVisita:C.estadoPrimeraVisita,fechaSegundaVisita:C.fechaSegundaVisita,estadoSegundaVisita:C.estadoSegundaVisita});await gt(),R()}catch(C){console.error("Error actualizando tienda:",C)}finally{y.value=!1}},R=()=>{l.value=!1,c.value=null,F.value={...M},p.value=!1},Z=U=>{c.value=U,h.value=!0},q=async()=>{var $;if(!(($=c.value)!=null&&$.id))return;y.value=!0,h.value=!1;const U=c.value.id,C=c.value.nombre;try{const wt=Gs(Kn(qe,"mantenimientos"),Li("tiendaId","==",U)),It=await xs(wt),Ft=[];It.forEach(Wt=>{Ft.push(Tl(bs(qe,"mantenimientos",Wt.id)))}),await Promise.all(Ft),await Tl(bs(qe,"tiendas",U)),await gt()}catch(wt){console.error(`Error eliminando tienda ${C}:`,wt)}finally{y.value=!1,c.value=null}},st=()=>{u.value=!0},ct=async()=>{u.value=!1,y.value=!0;try{const U=[...n.value].sort((C,$)=>C.localeCompare($));await FB(bs(qe,"configuracion","marcas"),{lista:U},{merge:!0}),n.value=U}catch(U){console.error("Error guardando marcas:",U)}finally{y.value=!1}},At=()=>{const U=s.value.trim();if(!U)return;n.value.some($=>$.toLowerCase()===U.toLowerCase())||(n.value.push(U),n.value.sort(($,wt)=>$.localeCompare(wt)),s.value="")},Dt=U=>{n.value.splice(U,1)},K=()=>{if(!y.value){if(_.value.length===0){alert("No hay tiendas para exportar según los filtros actuales.");return}y.value=!0;try{const U=new Ae,C=210,$=297,wt=15;U.setFontSize(18),U.setTextColor(40,40,40),U.text("Reporte de Tiendas",wt,wt+5),U.setFontSize(10),U.setTextColor(100,100,100);const It=`Generado el: ${new Date().toLocaleDateString("es-GT",{day:"2-digit",month:"2-digit",year:"numeric"})} ${new Date().toLocaleTimeString("es-GT")}`;U.text(It,wt,wt+12);let Ft=wt+25;U.setFontSize(12),U.setTextColor(40,40,40),U.text("Resumen de Datos Exportados (Filtros Aplicados):",wt,Ft),Ft+=7,U.setFontSize(10),U.text(`- Total de Tiendas: ${_.value.length}`,wt+5,Ft),Ft+=5;const Wt=_.value.reduce((Kt,ie)=>Kt+(Number(ie.costo)||0),0);U.text(`- Costo Total: Q${Wt.toFixed(2)}`,wt+5,Ft),Ft+=10;const Xt=["Nombre","Marca","Consultor","ODS","Mes Serv.","Costo (Q)","Tipo Pago","Estado Proc."],se=[];_.value.forEach(Kt=>{const ie=[Kt.nombre||"-",Kt.marca||"-",Kt.consultor||"-",Kt.ods||"-",Kt.mesServicio?ht(Kt.mesServicio):"-",(Number(Kt.costo)||0).toFixed(2),Kt.tipoPago||"-",Kt.estadoProceso||"-"];se.push(ie)}),typeof U.autoTable=="function"?U.autoTable({head:[Xt],body:se,startY:Ft,theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:7,cellPadding:1.5,overflow:"linebreak"},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:25},2:{cellWidth:25},3:{cellWidth:15},4:{cellWidth:22},5:{cellWidth:18,halign:"right"},6:{cellWidth:18},7:{cellWidth:"auto"}},didDrawPage:function(Kt){const ie=U.internal.getNumberOfPages();U.setFontSize(8),U.setTextColor(150,150,150),U.text(`Página ${Kt.pageNumber} de ${ie}`,Kt.settings.margin.left,$-10)}}):(console.error("Error: pdfDoc.autoTable is not a function. jspdf-autotable might not be loaded correctly."),alert("Error al generar la tabla del PDF. La función autoTable no está disponible.")),U.save(`reporte_tiendas_${new Date().toISOString().slice(0,10)}.pdf`)}catch(U){console.error("Error generando PDF:",U),alert("Error al generar el PDF. Revisa la consola para más detalles.")}finally{y.value=!1}}},H=()=>{const U=r.value;if(U)dt(U);else{const C=new Date,$=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`;dt($)}w.value=!0},dt=U=>{if(!U||!/^\d{4}-\d{2}$/.test(U)){S.value=[],x.value="Mes inválido";return}try{const[C,$]=U.split("-").map(Number),wt=$-1,It=new Date(C,wt,1);x.value=It.toLocaleDateString("es-GT",{month:"long",year:"numeric"}).replace(/^\w/,Zt=>Zt.toUpperCase());const Ft=new Date(C,wt,1),Xt=new Date(C,wt+1,0).getDate(),se=Ft.getDay(),Kt=[],ie=new Date,fe=`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}-${String(ie.getDate()).padStart(2,"0")}`,Yt=se,Ze=new Date(C,wt,0).getDate();for(let Zt=Yt-1;Zt>=0;Zt--)Kt.push({numero:Ze-Zt,esPlaceholder:!0,visitas:[]});const Ie={};t.value.forEach(Zt=>{if(Zt.mesServicio===U){if(Zt.fechaPrimeraVisita){const me=Zt.fechaPrimeraVisita;Ie[me]||(Ie[me]=[]),Ie[me].push({nombre:Zt.nombre,tipo:"primera",estado:Zt.estadoPrimeraVisita||"Programada",tiendaId:Zt.id})}if(Zt.numVisitas==2&&Zt.fechaSegundaVisita){const me=Zt.fechaSegundaVisita;Ie[me]||(Ie[me]=[]),Ie[me].push({nombre:Zt.nombre,tipo:"segunda",estado:Zt.estadoSegundaVisita||"Programada",tiendaId:Zt.id})}}});for(let Zt=1;Zt<=Xt;Zt++){const me=`${C}-${String($).padStart(2,"0")}-${String(Zt).padStart(2,"0")}`;Kt.push({numero:Zt,esPlaceholder:!1,esHoy:me===fe,fechaCompleta:me,visitas:Ie[me]||[]})}const ts=(7-Kt.length%7)%7;for(let Zt=1;Zt<=ts;Zt++)Kt.push({numero:Zt,esPlaceholder:!0,visitas:[]});for(;Kt.length<35;){const Zt=Kt.filter(me=>me.esPlaceholder&&me.numero>0).length+1;Kt.push({numero:Zt,esPlaceholder:!0,visitas:[]})}if(Kt.length===35&&(se>4&&Xt>29||se>5&&Xt>28))for(let Zt=1;Zt<=7;Zt++){const me=Kt.filter(es=>es.esPlaceholder&&es.numero>0).length+1;Kt.push({numero:me,esPlaceholder:!0,visitas:[]})}S.value=Kt}catch(C){console.error("Error generando calendario:",C),S.value=[],x.value="Error"}},ut=U=>{const C=t.value.find($=>$.id===U);C?(w.value=!1,I(C)):console.warn("Tienda no encontrada:",U)},V=U=>{switch(U){case"En proceso de ODS":return"text-yellow-400";case"En COVA":return"text-cyan-400";case"Facturado":return"text-green-400";case"Pagado":return"text-emerald-400";case"Pendiente":default:return"text-gray-400"}},Et=(U,C=!1)=>{const $=C?"badge ":"status-dot ";switch(U){case"Realizada":return $+(C?"text-emerald-400":"bg-emerald-500");case"Cancelada":return $+(C?"text-red-400":"bg-red-500");case"Programada":default:return $+(C?"text-cyan-400":"bg-cyan-500")}},Lt=(U,C)=>{switch(U){case"Realizada":return C==="primera"?"bg-cyan-400/80 hover:bg-cyan-300/80":"bg-teal-400/80 hover:bg-teal-300/80";case"Cancelada":return"bg-red-500/80 hover:bg-red-400/80";case"Programada":default:return C==="primera"?"bg-cyan-600/80 hover:bg-cyan-500/80":"bg-teal-600/80 hover:bg-teal-500/80"}};return co(async()=>{console.log("Tiendas (con Resumen Consultor, PDF Export y Resumen General) montado."),await T(),await gt()}),(U,C)=>(at(),ft("div",lY,[C[140]||(C[140]=d("div",{class:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 backdrop-blur-sm border border-emerald-500/20 rounded-lg shadow-lg shadow-emerald-500/10 mb-8 py-4 px-6 transform transition-all duration-300 hover:shadow-xl hover:shadow-emerald-500/20"},[d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-300 glow-emerald mb-2 text-center"},"Registro de Tiendas"),d("p",{class:"text-emerald-100/70 text-center text-sm md:text-base"},"Gestiona y controla tus tiendas y servicios")],-1)),t.value.length>0?(at(),ft("div",cY,[C[35]||(C[35]=d("h3",{class:"text-xl font-semibold text-sky-300 mb-4"},"Resumen General",-1)),d("div",uY,[d("div",dY,[C[33]||(C[33]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Total de Tiendas Registradas",-1)),d("p",hY,lt(J.value.totalTiendas),1)]),d("div",fY,[C[34]||(C[34]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Costo Total General",-1)),d("p",pY,"Q"+lt((J.value.costoTotalGeneral||0).toFixed(2)),1)])])])):Ut("",!0),W.value.length>0?(at(),ft("div",gY,[C[38]||(C[38]=d("h3",{class:"text-xl font-semibold text-emerald-300 mb-4"},"Resumen por Marca",-1)),d("div",mY,[(at(!0),ft(ye,null,Ke(W.value,($,wt)=>(at(),ft("div",{key:wt,class:ve(["glass-card border-l-4 transition-all duration-300 hover:shadow-md",[`border-${Y($.nombre)}-500`,`hover:shadow-${Y($.nombre)}-500/10`]])},[d("h4",vY,lt($.nombre),1),d("p",yY,[C[36]||(C[36]=Vt("Tiendas: ")),d("span",bY,lt($.conteo),1)]),d("p",wY,[C[37]||(C[37]=Vt("Ingresos Totales: ")),d("span",xY,"Q"+lt(($.ingresos||0).toFixed(2)),1)])],2))),128))])])):Ut("",!0),it.value.length>0?(at(),ft("div",_Y,[C[41]||(C[41]=d("h3",{class:"text-xl font-semibold text-cyan-300 mb-4"},"Resumen por Consultor",-1)),d("div",SY,[(at(!0),ft(ye,null,Ke(it.value,($,wt)=>(at(),ft("div",{key:wt,class:"glass-card border-l-4 border-cyan-500 transition-all duration-300 hover:shadow-md hover:shadow-cyan-500/10"},[d("h4",CY,lt($.nombre),1),d("p",kY,[C[39]||(C[39]=Vt("Tiendas Asignadas: ")),d("span",AY,lt($.conteo),1)]),d("p",PY,[C[40]||(C[40]=Vt("Ingresos Totales: ")),d("span",EY,"Q"+lt(($.ingresos||0).toFixed(2)),1)])]))),128))])])):Ut("",!0),d("div",IY,[d("div",TY,[d("h3",NY,lt(l.value?"Editar Tienda":"Nueva Tienda"),1)]),d("form",{onSubmit:C[18]||(C[18]=gr($=>l.value?E():rt(),["prevent"])),class:"p-6"},[l.value?(at(),ft("div",DY,[d("div",LY,[d("div",MY,[C[43]||(C[43]=d("div",{class:"flex-shrink-0"},[d("svg",{class:"h-5 w-5 text-amber-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C[44]||(C[44]=Vt()),d("div",OY,[d("p",RY,[C[42]||(C[42]=Vt("Estás editando la tienda ")),d("span",FY,lt(c.value.nombre),1)])])])])])):Ut("",!0),d("div",BY,[d("div",jY,[C[63]||(C[63]=d("h4",{class:"form-section-title"},[d("svg",{class:"w-5 h-5 mr-2 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),Vt(" Información de la Tienda ")],-1)),d("div",$Y,[d("div",VY,[C[45]||(C[45]=d("label",{class:"label-form"},"Nombre de la tienda",-1)),C[46]||(C[46]=Vt()),oe(d("input",{"onUpdate:modelValue":C[0]||(C[0]=$=>F.value.nombre=$),type:"text",placeholder:"Nombre de tienda",class:"input-primary",required:""},null,512),[[ke,F.value.nombre]])]),d("div",zY,[C[49]||(C[49]=d("label",{class:"label-form"},"Marca",-1)),C[50]||(C[50]=Vt()),oe(d("select",{"onUpdate:modelValue":C[1]||(C[1]=$=>F.value.marca=$),class:"input-primary select-input",required:""},[C[47]||(C[47]=d("option",{disabled:"",value:"",class:"text-gray-500 option-dark"},"Seleccionar Marca",-1)),C[48]||(C[48]=Vt()),(at(!0),ft(ye,null,Ke(n.value,($,wt)=>(at(),ft("option",{key:wt,class:"option-dark"},lt($),1))),128))],512),[[Vn,F.value.marca]])]),d("div",UY,[C[51]||(C[51]=d("label",{class:"label-form"},"Técnico",-1)),C[52]||(C[52]=Vt()),oe(d("input",{"onUpdate:modelValue":C[2]||(C[2]=$=>F.value.tecnico=$),type:"text",placeholder:"Técnico",class:"input-primary"},null,512),[[ke,F.value.tecnico]])]),d("div",qY,[C[53]||(C[53]=d("label",{class:"label-form"},"No. ODS",-1)),C[54]||(C[54]=Vt()),oe(d("input",{"onUpdate:modelValue":C[3]||(C[3]=$=>F.value.ods=$),type:"text",placeholder:"No. ODS",class:"input-primary"},null,512),[[ke,F.value.ods]])]),d("div",HY,[C[56]||(C[56]=d("label",{class:"label-form"},"Categoría",-1)),oe(d("select",{"onUpdate:modelValue":C[4]||(C[4]=$=>F.value.categoria=$),class:"input-primary select-input",required:""},[C[55]||(C[55]=d("option",{disabled:"",value:"",class:"text-gray-500 option-dark"},"-- Selecciona una categoría --",-1)),(at(!0),ft(ye,null,Ke(P.value,($,wt)=>(at(),ft("option",{key:wt,value:$,class:"option-dark"},lt($),9,WY))),128))],512),[[Vn,F.value.categoria]])]),d("div",GY,[C[58]||(C[58]=d("label",{class:"label-form"},"Consultor",-1)),oe(d("select",{"onUpdate:modelValue":C[5]||(C[5]=$=>F.value.consultor=$),class:"input-primary select-input",required:""},[C[57]||(C[57]=d("option",{disabled:"",value:"",class:"text-gray-500 option-dark"},"-- Selecciona un consultor --",-1)),(at(!0),ft(ye,null,Ke(L.value,($,wt)=>(at(),ft("option",{key:wt,value:$,class:"option-dark"},lt($),9,KY))),128))],512),[[Vn,F.value.consultor]])]),d("div",YY,[C[59]||(C[59]=d("label",{class:"label-form"},"Mes de Servicio",-1)),C[60]||(C[60]=Vt()),oe(d("input",{"onUpdate:modelValue":C[6]||(C[6]=$=>F.value.mesServicio=$),type:"month",class:"input-primary month-input",required:""},null,512),[[ke,F.value.mesServicio]])]),d("div",XY,[C[61]||(C[61]=d("label",{class:"label-form"},"Descripción del Servicio",-1)),C[62]||(C[62]=Vt()),oe(d("textarea",{"onUpdate:modelValue":C[7]||(C[7]=$=>F.value.descripcion=$),placeholder:"Detalles del servicio a realizar...",class:"input-primary",rows:"2"},null,512),[[ke,F.value.descripcion]])])])]),d("div",QY,[C[72]||(C[72]=d("h4",{class:"form-section-title"},[d("svg",{class:"w-5 h-5 mr-2 text-cyan-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),Vt(" Programación y Estado de Visitas ")],-1)),d("div",JY,[d("div",ZY,[d("div",tX,[C[65]||(C[65]=d("label",{class:"label-form"},"Número de visitas",-1)),oe(d("select",{"onUpdate:modelValue":C[8]||(C[8]=$=>F.value.numVisitas=$),class:"input-primary select-input",required:""},C[64]||(C[64]=[d("option",{value:1,class:"option-dark"},"1 visita",-1),d("option",{value:2,class:"option-dark"},"2 visitas",-1)]),512),[[Vn,F.value.numVisitas,void 0,{number:!0}]])]),d("div",eX,[C[66]||(C[66]=d("label",{class:"label-form"},"Primera visita",-1)),oe(d("input",{"onUpdate:modelValue":C[9]||(C[9]=$=>F.value.fechaPrimeraVisita=$),type:"date",class:ve(["input-primary date-input",{"border-red-500 !bg-red-900/20 focus:!ring-red-500":!Q()&&F.value.fechaPrimeraVisita}])},null,2),[[ke,F.value.fechaPrimeraVisita]]),!Q()&&F.value.fechaPrimeraVisita?(at(),ft("span",nX,"1ros 15 días")):Ut("",!0)]),d("div",{class:ve(["relative",{"opacity-50":!F.value.fechaPrimeraVisita}])},[C[68]||(C[68]=d("label",{class:"label-form"},"Estado Visita 1",-1)),oe(d("select",{"onUpdate:modelValue":C[10]||(C[10]=$=>F.value.estadoPrimeraVisita=$),class:"input-primary select-input",disabled:!F.value.fechaPrimeraVisita},C[67]||(C[67]=[d("option",{value:"Programada",class:"option-dark"},"Programada",-1),d("option",{value:"Realizada",class:"option-dark"},"Realizada",-1),d("option",{value:"Cancelada",class:"option-dark"},"Cancelada",-1)]),8,sX),[[Vn,F.value.estadoPrimeraVisita]])],2),F.value.numVisitas==2?(at(),ft(ye,{key:0},[d("div",iX,[C[69]||(C[69]=d("label",{class:"label-form"},"Segunda visita",-1)),oe(d("input",{"onUpdate:modelValue":C[11]||(C[11]=$=>F.value.fechaSegundaVisita=$),type:"date",class:ve(["input-primary date-input",{"border-red-500 !bg-red-900/20 focus:!ring-red-500":!et()&&F.value.fechaSegundaVisita}])},null,2),[[ke,F.value.fechaSegundaVisita]]),!et()&&F.value.fechaSegundaVisita?(at(),ft("span",rX,"Después del día 15")):Ut("",!0)]),d("div",{class:ve(["relative",{"opacity-50":!F.value.fechaSegundaVisita}])},[C[71]||(C[71]=d("label",{class:"label-form"},"Estado Visita 2",-1)),oe(d("select",{"onUpdate:modelValue":C[12]||(C[12]=$=>F.value.estadoSegundaVisita=$),class:"input-primary select-input",disabled:!F.value.fechaSegundaVisita},C[70]||(C[70]=[d("option",{value:"Programada",class:"option-dark"},"Programada",-1),d("option",{value:"Realizada",class:"option-dark"},"Realizada",-1),d("option",{value:"Cancelada",class:"option-dark"},"Cancelada",-1)]),8,oX),[[Vn,F.value.estadoSegundaVisita]])],2)],64)):Ut("",!0)])])]),d("div",aX,[C[82]||(C[82]=d("h4",{class:"form-section-title"},[d("svg",{class:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),Vt(" Proceso Administrativo ")],-1)),d("div",lX,[d("div",cX,[C[73]||(C[73]=d("label",{class:"label-form"},"Costo (Q)",-1)),C[74]||(C[74]=Vt()),oe(d("input",{"onUpdate:modelValue":C[13]||(C[13]=$=>F.value.costo=$),type:"number",placeholder:"0.00",step:"0.01",class:"input-primary",required:""},null,512),[[ke,F.value.costo,void 0,{number:!0}]])]),d("div",uX,[C[76]||(C[76]=d("label",{class:"label-form"},"Tipo de pago",-1)),C[77]||(C[77]=Vt()),oe(d("select",{"onUpdate:modelValue":C[14]||(C[14]=$=>F.value.tipoPago=$),class:"input-primary select-input",required:""},C[75]||(C[75]=[d("option",{value:"Contado",class:"option-dark"},"Contado",-1),Vt(),d("option",{value:"Crédito",class:"option-dark"},"Crédito",-1)]),512),[[Vn,F.value.tipoPago]])]),d("div",dX,[C[78]||(C[78]=d("label",{class:"label-form"},"Días de crédito",-1)),C[79]||(C[79]=Vt()),oe(d("input",{"onUpdate:modelValue":C[15]||(C[15]=$=>F.value.diasCredito=$),type:"number",placeholder:"0",class:"input-primary",disabled:F.value.tipoPago!=="Crédito"},null,8,hX),[[ke,F.value.diasCredito,void 0,{number:!0}]])]),d("div",fX,[C[81]||(C[81]=d("label",{class:"label-form"},"Estado del Proceso",-1)),oe(d("select",{"onUpdate:modelValue":C[16]||(C[16]=$=>F.value.estadoProceso=$),class:"input-primary select-input",required:""},C[80]||(C[80]=[$a('<option value="Pendiente" class="option-dark" data-v-ebb5bc7c>Pendiente</option><option value="En proceso de ODS" class="option-dark" data-v-ebb5bc7c>En proceso de ODS</option><option value="En COVA" class="option-dark" data-v-ebb5bc7c>En COVA</option><option value="Facturado" class="option-dark" data-v-ebb5bc7c>Facturado</option><option value="Pagado" class="option-dark" data-v-ebb5bc7c>Pagado</option>',5)]),512),[[Vn,F.value.estadoProceso]])])])]),d("div",pX,[d("div",gX,[d("button",{type:"submit",class:"btn-primary flex-1 tech-btn relative overflow-hidden",disabled:!A.value||y.value},[d("span",vX,[y.value?Ut("",!0):(at(),ft("svg",yX,[l.value?(at(),ft("path",bX)):(at(),ft("path",wX))])),y.value?(at(),ft("svg",xX,C[83]||(C[83]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ut("",!0),Vt(" "+lt(y.value?"Guardando...":l.value?"Actualizar Tienda":"Guardar Tienda"),1)]),C[84]||(C[84]=d("span",{class:"tech-btn-bg absolute inset-0 bg-gradient-to-r from-emerald-600/0 to-emerald-400/0 opacity-0 transition-opacity duration-300"},null,-1))],8,mX),l.value?(at(),ft("button",{key:0,onClick:C[17]||(C[17]=gr($=>R(),["prevent"])),type:"button",class:"btn-secondary flex-1"},C[85]||(C[85]=[d("svg",{class:"w-5 h-5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Vt(" Cancelar ")]))):Ut("",!0)])]),!A.value&&p.value?(at(),ft("div",_X,[d("div",SX,[C[87]||(C[87]=d("div",{class:"flex-shrink-0"},[d("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),d("div",CX,[C[86]||(C[86]=d("h3",{class:"font-medium text-red-300"},"Por favor corrige los siguientes errores:",-1)),d("ul",kX,[F.value.nombre?Ut("",!0):(at(),ft("li",AX,"Nombre requerido")),F.value.marca?Ut("",!0):(at(),ft("li",PX,"Marca requerida")),F.value.categoria?Ut("",!0):(at(),ft("li",EX,"Categoría requerida")),F.value.consultor?Ut("",!0):(at(),ft("li",IX,"Consultor requerido")),!F.value.costo||F.value.costo<=0?(at(),ft("li",TX,"Costo requerido y debe ser mayor a 0")):Ut("",!0),F.value.fechaPrimeraVisita&&!Q()?(at(),ft("li",NX,"Fecha 1ra visita inválida (primeros 15 días)")):Ut("",!0),F.value.fechaSegundaVisita&&!et()?(at(),ft("li",DX,"Fecha 2da visita inválida (después del día 15)")):Ut("",!0),F.value.mesServicio?Ut("",!0):(at(),ft("li",LX,"Mes servicio requerido")),F.value.tipoPago?Ut("",!0):(at(),ft("li",MX,"Tipo de pago requerido")),F.value.estadoProceso?Ut("",!0):(at(),ft("li",OX,"Estado del proceso requerido"))])])])])):Ut("",!0)])],32)]),d("div",RX,[d("div",FX,[d("div",BX,[d("div",jX,[C[89]||(C[89]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),oe(d("input",{"onUpdate:modelValue":C[19]||(C[19]=$=>i.value=$),type:"text",placeholder:"Buscar tienda...",class:"input-primary pl-10 pr-10 w-full"},null,512),[[ke,i.value]]),i.value?(at(),ft("button",{key:0,onClick:C[20]||(C[20]=$=>i.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},C[88]||(C[88]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)]),d("div",$X,[C[92]||(C[92]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),oe(d("select",{"onUpdate:modelValue":C[21]||(C[21]=$=>r.value=$),class:"input-primary select-input pl-10 pr-8 w-full"},[C[90]||(C[90]=d("option",{value:"",class:"option-dark text-gray-500"},"Todos los meses",-1)),(at(!0),ft(ye,null,Ke(a.value,($,wt)=>(at(),ft("option",{key:wt,value:$,class:"option-dark"},lt(ht($)),9,VX))),128))],512),[[Vn,r.value]]),r.value?(at(),ft("button",{key:0,onClick:C[22]||(C[22]=$=>r.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},C[91]||(C[91]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)]),d("div",zX,[C[95]||(C[95]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"})])],-1)),oe(d("select",{"onUpdate:modelValue":C[23]||(C[23]=$=>o.value=$),class:"input-primary select-input pl-10 pr-8 w-full"},[C[93]||(C[93]=d("option",{value:"",class:"option-dark text-gray-500"},"Todos los consultores",-1)),(at(!0),ft(ye,null,Ke(L.value,($,wt)=>(at(),ft("option",{key:wt,value:$,class:"option-dark"},lt($),9,UX))),128))],512),[[Vn,o.value]]),o.value?(at(),ft("button",{key:0,onClick:C[24]||(C[24]=$=>o.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},C[94]||(C[94]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)]),d("button",{onClick:H,title:"Ver calendario de visitas del mes seleccionado",class:"btn-secondary px-3 py-2 flex-shrink-0"},C[96]||(C[96]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),d("span",{class:"ml-1 hidden sm:inline"},"Calendario",-1)]))]),d("div",{class:"w-full md:w-auto md:flex md:justify-center mt-3 md:mt-0"},[d("button",{onClick:st,class:"btn-secondary w-full md:w-auto"},C[97]||(C[97]=[d("svg",{class:"w-5 h-5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),Vt(" Administrar Marcas ")]))])])]),d("div",qX,[d("div",HX,[d("span",WX,lt(_.value.length),1),Vt(" "+lt(_.value.length===1?"tienda encontrada":"tiendas encontradas")+" ",1),i.value||r.value||o.value?(at(),ft("span",GX,lt(i.value?` con búsqueda "${i.value}"`:"")+" "+lt(i.value&&(r.value||o.value)?" y":"")+" "+lt(r.value?` en ${ht(r.value)}`:"")+" "+lt(r.value&&o.value&&i.value?", ":r.value&&o.value?" y":"")+" "+lt(o.value?` por consultor "${o.value}"`:""),1)):Ut("",!0)]),d("button",{onClick:K,class:"btn-link",disabled:y.value||_.value.length===0},[y.value?Ut("",!0):(at(),ft("svg",YX,C[98]||(C[98]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))),y.value?(at(),ft("svg",XX,C[99]||(C[99]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ut("",!0),Vt(" "+lt(y.value?"Exportando...":"Exportar a PDF"),1)],8,KX)]),d("div",QX,[y.value&&!u.value&&!h.value&&!g.value&&!w.value?(at(),ft("div",JX,C[100]||(C[100]=[d("svg",{class:"animate-spin h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("span",{class:"ml-2 text-gray-200"},"Cargando datos...",-1)]))):Ut("",!0),d("div",ZX,[d("table",tQ,[C[106]||(C[106]=d("thead",{class:"bg-gray-900/70 backdrop-blur-sm"},[d("tr",null,[d("th",{class:"th-table"},"Tienda"),d("th",{class:"th-table"},"Marca"),d("th",{class:"th-table hidden sm:table-cell"},"Consultor"),d("th",{class:"th-table"},"ODS"),d("th",{class:"th-table hidden md:table-cell"},"Mes Servicio"),d("th",{class:"th-table hidden lg:table-cell"},"Costo"),d("th",{class:"th-table hidden lg:table-cell"},"Tipo Pago"),d("th",{class:"th-table hidden lg:table-cell"},"Días Cred."),d("th",{class:"th-table hidden md:table-cell"},"Estado Proc."),d("th",{class:"th-table hidden md:table-cell"},"Est. V1"),d("th",{class:"th-table hidden md:table-cell"},"Est. V2"),d("th",{class:"th-table"},"Acciones")])],-1)),d("tbody",eQ,[(at(!0),ft(ye,null,Ke(_.value,($,wt)=>(at(),ft("tr",{key:$.id||wt,class:"hover:bg-gray-700/40 transition-colors duration-150"},[d("td",nQ,[d("div",sQ,lt($.nombre),1)]),d("td",iQ,[d("span",rQ,lt($.marca),1)]),d("td",oQ,lt($.consultor||"-"),1),d("td",aQ,lt($.ods||"-"),1),d("td",lQ,lt(ht($.mesServicio)),1),d("td",cQ," Q"+lt(($.costo||0).toFixed(2)),1),d("td",uQ,[d("span",{class:ve(["badge",{"text-emerald-400":$.tipoPago==="Contado","text-cyan-400":$.tipoPago==="Crédito"}])},lt($.tipoPago),3)]),d("td",dQ,lt($.tipoPago==="Crédito"?$.diasCredito||0:"-"),1),d("td",hQ,[d("span",{class:ve(["badge",V($.estadoProceso)])},lt($.estadoProceso),3)]),d("td",fQ,[d("span",{class:ve([Et($.estadoPrimeraVisita),"status-dot"]),title:$.estadoPrimeraVisita||"N/A"},null,10,pQ)]),d("td",gQ,[$.numVisitas==2?(at(),ft("span",{key:0,class:ve([Et($.estadoSegundaVisita),"status-dot"]),title:$.estadoSegundaVisita||"N/A"},null,10,mQ)):(at(),ft("span",vQ,"-"))]),d("td",yQ,[d("div",bQ,[d("button",{onClick:It=>kt($),class:"btn-icon text-amber-400 hover:text-amber-300"},C[101]||(C[101]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("title",null,"Editar"),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,wQ),d("button",{onClick:It=>Z($),class:"btn-icon text-red-500 hover:text-red-400"},C[102]||(C[102]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("title",null,"Eliminar"),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,xQ),d("button",{onClick:It=>I($),class:"btn-icon text-cyan-400 hover:text-cyan-300"},C[103]||(C[103]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("title",null,"Ver Detalles"),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,_Q)])])]))),128)),_.value.length===0&&!y.value?(at(),ft("tr",SQ,[d("td",CQ,[d("div",kQ,[C[104]||(C[104]=d("svg",{class:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),C[105]||(C[105]=d("p",{class:"text-gray-500 text-lg"},"No se encontraron tiendas",-1)),d("p",AQ,lt(i.value||r.value||o.value?"Prueba con otros criterios de búsqueda o filtro":"Aún no has añadido ninguna tienda"),1)])])])):Ut("",!0)])])])]),ze(wi,{name:"modal-fade"},{default:an(()=>[u.value?(at(),ft("div",PQ,[d("div",EQ,[d("div",IQ,[d("div",{class:"modal-header"},[C[107]||(C[107]=d("h3",{class:"modal-title"},"Administrar Marcas",-1)),d("button",{onClick:ct,class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",TQ,[C[111]||(C[111]=d("p",{class:"text-sm text-gray-400 mb-4"},"Añade o elimina marcas.",-1)),d("div",NQ,[oe(d("input",{"onUpdate:modelValue":C[25]||(C[25]=$=>s.value=$),onKeyup:a8(At,["enter"]),type:"text",placeholder:"Nueva marca",class:"input-primary flex-1"},null,544),[[ke,s.value]]),d("button",{onClick:At,class:"btn-primary tech-btn relative overflow-hidden"},C[108]||(C[108]=[d("span",{class:"z-10 relative"},"Agregar",-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)]))]),d("div",DQ,[d("ul",LQ,[(at(!0),ft(ye,null,Ke(n.value,($,wt)=>(at(),ft("li",{key:wt,class:"modal-list-item"},[d("span",MQ,lt($),1),d("button",{onClick:It=>Dt(wt),class:"btn-icon text-gray-500 hover:text-red-500 hover:bg-gray-700/50",title:"Eliminar marca"},C[109]||(C[109]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,OQ)]))),128)),n.value.length===0?(at(),ft("li",RQ,C[110]||(C[110]=[d("svg",{class:"w-10 h-10 mx-auto text-gray-600 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),Vt("No hay marcas definidas")]))):Ut("",!0)])])]),d("div",{class:"modal-footer"},[d("button",{onClick:ct,class:"btn-primary tech-btn relative overflow-hidden"},C[112]||(C[112]=[d("span",{class:"z-10 relative"},"Guardar Cambios y Cerrar",-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)]))])])])])):Ut("",!0)]),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>{var $;return[h.value?(at(),ft("div",FQ,[d("div",BQ,[d("div",jQ,[d("div",$Q,[C[113]||(C[113]=d("h3",{class:"modal-title"},"Confirmar eliminación",-1)),d("button",{onClick:C[26]||(C[26]=wt=>h.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",VQ,[C[116]||(C[116]=d("div",{class:"alert-danger mb-4"},[d("div",{class:"flex"},[d("div",{class:"flex-shrink-0"},[d("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),d("div",{class:"ml-3"},[d("p",{class:"text-sm font-medium text-red-300"},"¡Acción irreversible! Se eliminarán también los mantenimientos asociados.")])])],-1)),d("p",zQ,[C[114]||(C[114]=Vt("¿Estás seguro que deseas eliminar la tienda ")),d("strong",UQ,lt((($=c.value)==null?void 0:$.nombre)||"seleccionada"),1),C[115]||(C[115]=Vt("?"))])]),d("div",qQ,[d("button",{onClick:C[27]||(C[27]=wt=>h.value=!1),class:"btn-secondary"},"Cancelar"),d("button",{onClick:q,class:"btn-danger"},"Sí, eliminar permanentemente")])])])])):Ut("",!0)]}),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>{var $,wt;return[g.value?(at(),ft("div",HQ,[d("div",{class:ve(["modal-content max-w-4xl max-h-[90vh] overflow-y-auto",[`border-t-8 border-${Y(($=c.value)==null?void 0:$.marca)}-500`]])},[d("div",WQ,[d("h3",GQ,lt(((wt=c.value)==null?void 0:wt.nombre)||"Detalles"),1),d("button",{onClick:C[28]||(C[28]=It=>g.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",KQ,[d("div",YQ,[d("div",XQ,[C[125]||(C[125]=d("h4",{class:"detail-card-title text-emerald-400"},[d("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),Vt("Información básica")],-1)),d("dl",QQ,[C[117]||(C[117]=d("dt",null,"Marca:",-1)),d("dd",null,lt(c.value.marca||"-"),1),C[118]||(C[118]=d("dt",null,"Consultor:",-1)),d("dd",null,lt(c.value.consultor||"-"),1),C[119]||(C[119]=d("dt",null,"Técnico:",-1)),d("dd",null,lt(c.value.tecnico||"-"),1),C[120]||(C[120]=d("dt",null,"ODS:",-1)),d("dd",null,lt(c.value.ods||"-"),1),C[121]||(C[121]=d("dt",null,"Categoría:",-1)),d("dd",null,lt(c.value.categoria||"-"),1),C[122]||(C[122]=d("dt",null,"Mes Servicio:",-1)),d("dd",null,lt(ht(c.value.mesServicio)||"-"),1),C[123]||(C[123]=d("dt",{class:"col-span-2"},"Descripción:",-1)),d("dd",JQ,lt(c.value.descripcion||"-"),1),C[124]||(C[124]=d("dt",null,"Creado:",-1)),d("dd",null,lt(c.value.fechaCreacion?mt(c.value.fechaCreacion,!0):"-"),1)])]),d("div",ZQ,[C[131]||(C[131]=d("h4",{class:"detail-card-title text-cyan-400"},[d("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),Vt("Visitas programadas")],-1)),d("dl",tJ,[C[128]||(C[128]=d("dt",null,"Visitas:",-1)),d("dd",null,lt(c.value.numVisitas||1),1),C[129]||(C[129]=d("dt",null,"1ra Visita:",-1)),d("dd",null,lt(c.value.fechaPrimeraVisita?mt(c.value.fechaPrimeraVisita):"N/P"),1),C[130]||(C[130]=d("dt",null,"Estado V1:",-1)),d("dd",null,[d("span",{class:ve(["badge",Et(c.value.estadoPrimeraVisita,!0)])},lt(c.value.estadoPrimeraVisita||"N/A"),3)]),c.value.numVisitas==2?(at(),ft(ye,{key:0},[C[126]||(C[126]=d("dt",null,"2da Visita:",-1)),d("dd",null,lt(c.value.fechaSegundaVisita?mt(c.value.fechaSegundaVisita):"N/P"),1),C[127]||(C[127]=d("dt",null,"Estado V2:",-1)),d("dd",null,[d("span",{class:ve(["badge",Et(c.value.estadoSegundaVisita,!0)])},lt(c.value.estadoSegundaVisita||"N/A"),3)])],64)):Ut("",!0)])]),d("div",eJ,[C[136]||(C[136]=d("h4",{class:"detail-card-title text-purple-400"},[d("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),Vt("Proceso Administrativo")],-1)),d("dl",nJ,[C[132]||(C[132]=d("dt",null,"Costo:",-1)),d("dd",sJ,"Q"+lt((c.value.costo||0).toFixed(2)),1),C[133]||(C[133]=d("dt",null,"Tipo Pago:",-1)),d("dd",null,[d("span",{class:ve(["badge",{"text-emerald-400":c.value.tipoPago==="Contado","text-cyan-400":c.value.tipoPago==="Crédito"}])},lt(c.value.tipoPago||"-"),3)]),C[134]||(C[134]=d("dt",null,"Días Créd.:",-1)),d("dd",null,lt(c.value.tipoPago==="Crédito"?c.value.diasCredito||0:"-"),1),C[135]||(C[135]=d("dt",null,"Estado Proc.:",-1)),d("dd",null,[d("span",{class:ve(["badge",V(c.value.estadoProceso)])},lt(c.value.estadoProceso||"-"),3)])])])]),d("div",iJ,[d("button",{onClick:C[29]||(C[29]=It=>O(c.value)),class:"btn-warning"},C[137]||(C[137]=[d("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Vt(" Editar Tienda ")])),d("button",{onClick:C[30]||(C[30]=It=>g.value=!1),class:"btn-secondary"},"Cerrar")])])],2)])):Ut("",!0)]}),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>[w.value?(at(),ft("div",rJ,[d("div",oJ,[d("div",aJ,[d("h3",lJ,"Calendario de Visitas - "+lt(x.value),1),d("button",{onClick:C[31]||(C[31]=$=>w.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",cJ,[S.value.length>0?(at(),ft("div",uJ,[C[138]||(C[138]=d("div",{class:"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-semibold text-gray-400 uppercase tracking-wider"},[d("div",null,"Dom"),Vt(),d("div",null,"Lun"),Vt(),d("div",null,"Mar"),Vt(),d("div",null,"Mié"),Vt(),d("div",null,"Jue"),Vt(),d("div",null,"Vie"),Vt(),d("div",null,"Sáb")],-1)),d("div",dJ,[(at(!0),ft(ye,null,Ke(S.value,($,wt)=>(at(),ft("div",{key:wt,class:ve(["calendar-day",{placeholder:$.esPlaceholder,today:$.esHoy&&!$.esPlaceholder}])},[d("span",{class:ve(["day-number",{"text-emerald-300 font-bold":$.esHoy}])},lt($.numero),3),!$.esPlaceholder&&$.visitas&&$.visitas.length>0?(at(),ft("div",hJ,[(at(!0),ft(ye,null,Ke($.visitas.slice(0,3),(It,Ft)=>(at(),ft("div",{key:Ft,class:ve(["visit-entry",Lt(It.estado,It.tipo)]),title:`${It.nombre} (${It.tipo==="primera"?"1ra":"2da"} - ${It.estado})`,onClick:Wt=>ut(It.tiendaId)},[d("span",pJ,lt(It.nombre),1)],10,fJ))),128)),$.visitas.length>3?(at(),ft("div",gJ," + "+lt($.visitas.length-3)+" más ",1)):Ut("",!0)])):Ut("",!0)],2))),128))]),C[139]||(C[139]=d("div",{class:"calendar-legend"},[d("span",null,[d("span",{class:"legend-dot bg-cyan-600"}),Vt("1ra Prog.")]),d("span",null,[d("span",{class:"legend-dot bg-cyan-400"}),Vt("1ra Realiz.")]),d("span",null,[d("span",{class:"legend-dot bg-teal-600"}),Vt("2da Prog.")]),d("span",null,[d("span",{class:"legend-dot bg-teal-400"}),Vt("2da Realiz.")]),d("span",null,[d("span",{class:"legend-dot bg-red-500"}),Vt("Cancelada")]),d("span",null,[d("span",{class:"legend-dot today-dot"}),Vt("Hoy")])],-1))])):(at(),ft("div",mJ," Selecciona un mes con tiendas registradas para ver el calendario. "))]),d("div",vJ,[d("button",{onClick:C[32]||(C[32]=$=>w.value=!1),class:"btn-secondary"},"Cerrar")])])])):Ut("",!0)]),_:1})]))}},bJ=ic(yJ,[["__scopeId","data-v-ebb5bc7c"]]),wJ={class:"max-w-7xl mx-auto px-2 sm:px-4 md:px-6 text-gray-200"},xJ={key:0,class:"mb-8"},_J={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},SJ={class:"glass-card border-l-4 border-green-500 hover:shadow-green-500/10"},CJ={class:"text-2xl font-medium text-green-400"},kJ={class:"text-sm text-gray-400"},AJ={class:"glass-card border-l-4 border-yellow-500 hover:shadow-yellow-500/10"},PJ={class:"text-2xl font-medium text-yellow-400"},EJ={class:"text-sm text-gray-400"},IJ={class:"glass-card border-l-4 border-red-500 hover:shadow-red-500/10"},TJ={class:"text-2xl font-medium text-red-400"},NJ={class:"text-sm text-gray-400"},DJ={class:"glass-card border-l-4 border-blue-500 hover:shadow-blue-500/10"},LJ={class:"text-2xl font-medium text-blue-400"},MJ={class:"text-sm text-gray-400"},OJ={class:"glass-container rounded-xl shadow-lg border border-gray-700/30 p-4 mb-6"},RJ={class:"flex flex-col md:flex-row items-center justify-between gap-4"},FJ={class:"w-full md:w-auto flex flex-col sm:flex-row flex-wrap items-center gap-3"},BJ={class:"relative flex-grow min-w-[200px]"},jJ={class:"relative flex-grow min-w-[200px]"},$J={class:"relative flex-grow min-w-[200px]"},VJ=["value"],zJ={class:"glass-container rounded-xl shadow-lg border border-gray-700/30 overflow-hidden mb-10 relative"},UJ={key:0,class:"loading-overlay"},qJ={class:"overflow-x-auto"},HJ={class:"min-w-full divide-y divide-gray-700"},WJ={class:"divide-y divide-gray-700/50"},GJ={class:"td-table"},KJ={class:"font-medium text-gray-100 hover:text-cyan-300 transition-colors"},YJ={key:0,class:"text-xs text-gray-500"},XJ={class:"td-table hidden md:table-cell"},QJ={class:"td-table font-semibold"},JJ={class:"td-table hidden lg:table-cell"},ZJ={key:0,class:"text-xs text-gray-500 ml-1"},tZ={class:"td-table hidden md:table-cell"},eZ={key:0},nZ={key:1},sZ={key:2},iZ={key:3},rZ={class:"td-table"},oZ={class:"td-table"},aZ=["onClick"],lZ=["onClick"],cZ={key:0},uZ={colspan:"9",class:"px-4 py-8 text-center"},dZ={class:"flex flex-col items-center justify-center space-y-3"},hZ={class:"text-gray-600 text-sm"},fZ={key:0},pZ={class:"modal-backdrop"},gZ={class:"modal-content max-w-md"},mZ={class:"modal-header"},vZ={class:"p-6"},yZ={class:"text-gray-300"},bZ={class:"text-gray-100"},wZ={class:"text-gray-100"},xZ={class:"modal-footer gap-3"},_Z={key:0},SZ={class:"modal-backdrop"},CZ={class:"modal-header"},kZ={class:"modal-title"},AZ={class:"p-6 text-sm"},PZ={key:0,class:"space-y-3"},EZ={key:1,class:"text-gray-500"},IZ={class:"modal-footer"},TZ={__name:"Cobros",setup(e){const t=Gt([]),n=Gt([]),s=Gt(!0),i=Gt(""),r=Gt(""),o=Gt(""),a=Gt(!1),l=Gt(null),c=Gt(!1),u=Gt(null),h={"McDonald's":"amber","Pizza Hut":"red",Kentucky:"red",Starbucks:"green","Dunkin Donuts":"pink","Edificio Naguchi":"gray",Pandas:"gray",DEFAULT:"emerald"},g=J=>{const _=(J==null?void 0:J.trim())||"DEFAULT",A=Object.keys(h).find(Q=>Q!=="DEFAULT"&&_.toLowerCase().includes(Q.toLowerCase()));return h[A]||h.DEFAULT},p=async()=>{s.value=!0,t.value=[];try{const J=await xs(Kn(qe,"tiendas")),_=[];J.forEach(A=>{_.push({id:A.id,...A.data()})}),t.value=_,y()}catch(J){console.error("Error cargando tiendas originales:",J)}finally{s.value=!1}},y=()=>{const J=new Date;J.setHours(0,0,0,0);const _=t.value.filter(A=>A.costo&&A.costo>0&&A.mesServicio).map(A=>{const[Q,et]=A.mesServicio.split("-").map(Number),mt=new Date(Q,et-1,1);mt.setHours(0,0,0,0);let ht=new Date(mt);A.tipoPago==="Crédito"&&A.diasCredito>0?ht.setDate(mt.getDate()+A.diasCredito):ht=new Date(Q,et,0),ht.setHours(0,0,0,0);let gt="Proyectado";const tt=ht.getTime()-J.getTime(),T=Math.ceil(tt/(1e3*3600*24));return A.estadoProceso==="Pagado"?gt="Pagado":mt>J&&J.getFullYear()===mt.getFullYear()&&J.getMonth()===mt.getMonth()?mt.getFullYear()>J.getFullYear()||mt.getFullYear()===J.getFullYear()&&mt.getMonth()>J.getMonth()?gt="Proyectado":T>=0?gt="Pendiente de Pago":gt="Vencido":T<0?gt="Vencido":gt="Pendiente de Pago",A.estadoProceso&&A.estadoProceso!=="Pagado"&&A.estadoProceso!=="Pendiente"&&gt==="Proyectado"&&(T<0?gt="Vencido":gt="Pendiente de Pago"),{tiendaId:A.id,nombreTienda:A.nombre,marca:A.marca,ods:A.ods,mesServicio:A.mesServicio,costo:A.costo,tipoPago:A.tipoPago,diasCredito:A.diasCredito||0,fechaFacturacion:mt,fechaVencimiento:ht,estadoCobro:gt,estadoProcesoOriginal:A.estadoProceso,diasParaVencer:gt!=="Pagado"?T:null}});n.value=_},w=de(()=>{let J=n.value;if(i.value){const _=i.value.toLowerCase().trim();_&&(J=J.filter(A=>A.nombreTienda.toLowerCase().includes(_)||A.ods&&A.ods.toLowerCase().includes(_)))}return r.value&&(J=J.filter(_=>_.estadoCobro===r.value)),o.value&&(J=J.filter(_=>_.mesServicio===o.value)),J.sort((_,A)=>{const Q={Vencido:1,"Pendiente de Pago":2,Proyectado:3,Pagado:4};if(Q[_.estadoCobro]!==Q[A.estadoCobro])return Q[_.estadoCobro]-Q[A.estadoCobro];const et=_.fechaVencimiento.getTime(),mt=A.fechaVencimiento.getTime();return _.estadoCobro==="Vencido"||_.estadoCobro==="Pendiente de Pago"?et-mt:mt-et}),J}),S=de(()=>{const J=new Set;return t.value.forEach(_=>{_.mesServicio&&J.add(_.mesServicio)}),Array.from(J).sort((_,A)=>A.localeCompare(_))}),x=de(()=>{const J={totalPagado:0,cantidadPagados:0,totalPendiente:0,cantidadPendientes:0,totalVencido:0,cantidadVencidos:0,totalProyectado:0,cantidadProyectados:0},_=new Date,A=new Date(_.getFullYear(),_.getMonth()+1,1),Q=new Date(_.getFullYear(),_.getMonth()+2,0);return n.value.forEach(et=>{switch(et.estadoCobro){case"Pagado":J.totalPagado+=et.costo,J.cantidadPagados++;break;case"Pendiente de Pago":J.totalPendiente+=et.costo,J.cantidadPendientes++;break;case"Vencido":J.totalVencido+=et.costo,J.cantidadVencidos++;break;case"Proyectado":const[mt,ht]=et.mesServicio.split("-").map(Number),gt=new Date(mt,ht-1,1);gt>=A&&gt<=Q&&(J.totalProyectado+=et.costo,J.cantidadProyectados++);break}}),J}),P=J=>{l.value=J,a.value=!0},L=async()=>{if(l.value){s.value=!0;try{const J=bs(qe,"tiendas",l.value.tiendaId);await Aa(J,{estadoProceso:"Pagado"});const _=n.value.findIndex(A=>A.tiendaId===l.value.tiendaId&&A.mesServicio===l.value.mesServicio);_!==-1&&(n.value[_].estadoCobro="Pagado",n.value[_].estadoProcesoOriginal="Pagado",n.value[_].diasParaVencer=null)}catch(J){console.error("Error al marcar como pagado:",J)}finally{a.value=!1,l.value=null,s.value=!1}}},M=J=>{const _=t.value.find(A=>A.id===J);_?(u.value=_,c.value=!0):console.warn("No se encontró la tienda para detalles con ID:",J)},F=(J,_=!0)=>{if(!J)return"N/A";try{let A;if(J instanceof he)A=J.toDate();else if(J instanceof Date&&!isNaN(J.getTime()))A=J;else if(typeof J=="string"&&J.includes("-"))A=new Date(J+"T00:00:00");else return"Fecha inválida";if(isNaN(A.getTime()))return"Fecha inválida";const Q={day:"2-digit",month:"2-digit"};return _&&(Q.year="numeric"),A.toLocaleDateString("es-GT",Q)}catch{return"Fecha inválida"}},pt=J=>{if(!J||!J.includes("-"))return J||"N/A";try{const[_,A]=J.split("-"),Q=new Date(Number(_),Number(A)-1,1);if(isNaN(Q.getTime()))return J;let et=Q.toLocaleDateString("es-GT",{month:"long",year:"numeric"});return et.charAt(0).toUpperCase()+et.slice(1)}catch{return J}},Y=J=>{switch(J){case"En proceso de ODS":return"text-yellow-400";case"En COVA":return"text-cyan-400";case"Facturado":return"text-blue-400";case"Pagado":return"text-green-400";case"Pendiente":default:return"text-gray-400"}},W=J=>{switch(J){case"Pagado":return"bg-green-500/20 text-green-400 border border-green-500/30";case"Vencido":return"bg-red-500/20 text-red-400 border border-red-500/30";case"Pendiente de Pago":return"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30";case"Proyectado":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";default:return"bg-gray-500/20 text-gray-400 border border-gray-500/30"}},it=(J,_)=>_==="Pagado"||_==="Proyectado"?"text-gray-400":J<0?"text-red-400 font-semibold":J<=7?"text-yellow-400":"text-gray-300";return co(async()=>{await p()}),(J,_)=>(at(),ft("div",wJ,[_[43]||(_[43]=d("div",{class:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 backdrop-blur-sm border border-cyan-500/20 rounded-lg shadow-lg shadow-cyan-500/10 mb-8 py-4 px-6 transform transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/20"},[d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-cyan-300 glow-cyan mb-2 text-center"},"Gestión de Cobros"),d("p",{class:"text-cyan-100/70 text-center text-sm md:text-base"},"Visualiza y administra los cobros de tus tiendas y servicios")],-1)),s.value?Ut("",!0):(at(),ft("div",xJ,[_[14]||(_[14]=d("h3",{class:"text-xl font-semibold text-cyan-300 mb-4"},"Resumen General de Cobros",-1)),d("div",_J,[d("div",SJ,[_[10]||(_[10]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Total Pagado",-1)),d("p",CJ,"Q"+lt((x.value.totalPagado||0).toFixed(2)),1),d("p",kJ,lt(x.value.cantidadPagados)+" cobros",1)]),d("div",AJ,[_[11]||(_[11]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Total Pendiente",-1)),d("p",PJ,"Q"+lt((x.value.totalPendiente||0).toFixed(2)),1),d("p",EJ,lt(x.value.cantidadPendientes)+" cobros",1)]),d("div",IJ,[_[12]||(_[12]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Total Vencido",-1)),d("p",TJ,"Q"+lt((x.value.totalVencido||0).toFixed(2)),1),d("p",NJ,lt(x.value.cantidadVencidos)+" cobros",1)]),d("div",DJ,[_[13]||(_[13]=d("h4",{class:"font-bold text-lg text-gray-100 mb-1"},"Cobros Proyectados (Próx. Mes)",-1)),d("p",LJ,"Q"+lt((x.value.totalProyectado||0).toFixed(2)),1),d("p",MJ,lt(x.value.cantidadProyectados)+" cobros",1)])])])),d("div",OJ,[d("div",RJ,[d("div",FJ,[d("div",BJ,[_[16]||(_[16]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),oe(d("input",{"onUpdate:modelValue":_[0]||(_[0]=A=>i.value=A),type:"text",placeholder:"Buscar por tienda, ODS...",class:"input-primary pl-10 pr-10 w-full"},null,512),[[ke,i.value]]),i.value?(at(),ft("button",{key:0,onClick:_[1]||(_[1]=A=>i.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},_[15]||(_[15]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)]),d("div",jJ,[_[19]||(_[19]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),oe(d("select",{"onUpdate:modelValue":_[2]||(_[2]=A=>r.value=A),class:"input-primary select-input pl-10 pr-8 w-full"},_[17]||(_[17]=[$a('<option value="" class="option-dark text-gray-500" data-v-8ca94e1d>Todos los Estados</option><option value="Pendiente de Pago" class="option-dark" data-v-8ca94e1d>Pendiente de Pago</option><option value="Vencido" class="option-dark" data-v-8ca94e1d>Vencido</option><option value="Pagado" class="option-dark" data-v-8ca94e1d>Pagado</option><option value="Proyectado" class="option-dark" data-v-8ca94e1d>Proyectado</option>',5)]),512),[[Vn,r.value]]),r.value?(at(),ft("button",{key:0,onClick:_[3]||(_[3]=A=>r.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},_[18]||(_[18]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)]),d("div",$J,[_[22]||(_[22]=d("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[d("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),oe(d("select",{"onUpdate:modelValue":_[4]||(_[4]=A=>o.value=A),class:"input-primary select-input pl-10 pr-8 w-full"},[_[20]||(_[20]=d("option",{value:"",class:"option-dark text-gray-500"},"Todos los meses",-1)),(at(!0),ft(ye,null,Ke(S.value,(A,Q)=>(at(),ft("option",{key:Q,value:A,class:"option-dark"},lt(pt(A)),9,VJ))),128))],512),[[Vn,o.value]]),o.value?(at(),ft("button",{key:0,onClick:_[5]||(_[5]=A=>o.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300"},_[21]||(_[21]=[d("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):Ut("",!0)])])])]),d("div",zJ,[s.value?(at(),ft("div",UJ,_[23]||(_[23]=[d("svg",{class:"animate-spin h-8 w-8 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("span",{class:"ml-2 text-gray-200"},"Cargando Cobros...",-1)]))):Ut("",!0),d("div",qJ,[d("table",HJ,[_[28]||(_[28]=d("thead",{class:"bg-gray-900/70 backdrop-blur-sm"},[d("tr",null,[d("th",{class:"th-table"},"Tienda"),d("th",{class:"th-table hidden md:table-cell"},"Mes Servicio"),d("th",{class:"th-table"},"Monto (Q)"),d("th",{class:"th-table hidden lg:table-cell"},"Tipo Pago"),d("th",{class:"th-table hidden md:table-cell"},"Fecha Facturación"),d("th",{class:"th-table"},"Fecha Vencimiento"),d("th",{class:"th-table hidden lg:table-cell"},"Días Rest./Venc."),d("th",{class:"th-table"},"Estado Cobro"),d("th",{class:"th-table"},"Acciones")])],-1)),d("tbody",WJ,[(at(!0),ft(ye,null,Ke(w.value,A=>(at(),ft("tr",{key:A.tiendaId+"-"+A.mesServicio,class:"hover:bg-gray-700/40 transition-colors duration-150"},[d("td",GJ,[d("div",KJ,lt(A.nombreTienda),1),A.ods?(at(),ft("div",YJ,"ODS: "+lt(A.ods),1)):Ut("",!0)]),d("td",XJ,lt(pt(A.mesServicio)),1),d("td",QJ,"Q"+lt((A.costo||0).toFixed(2)),1),d("td",JJ,[d("span",{class:ve(["badge",{"text-emerald-400":A.tipoPago==="Contado","text-cyan-400":A.tipoPago==="Crédito"}])},lt(A.tipoPago),3),A.tipoPago==="Crédito"?(at(),ft("span",ZJ,"("+lt(A.diasCredito)+" días)",1)):Ut("",!0)]),d("td",tZ,lt(F(A.fechaFacturacion,!1)),1),d("td",{class:ve(["td-table font-medium",it(A.diasParaVencer,A.estadoCobro)])},lt(F(A.fechaVencimiento,!1)),3),d("td",{class:ve(["td-table hidden lg:table-cell",it(A.diasParaVencer,A.estadoCobro)])},[A.estadoCobro==="Pagado"?(at(),ft("span",eZ,"-")):A.diasParaVencer===0?(at(),ft("span",nZ,"Vence Hoy")):A.diasParaVencer>0?(at(),ft("span",sZ,lt(A.diasParaVencer)+" días restantes",1)):(at(),ft("span",iZ,lt(Math.abs(A.diasParaVencer))+" días vencido",1))],2),d("td",rZ,[d("span",{class:ve(["badge",W(A.estadoCobro)])},lt(A.estadoCobro),3)]),d("td",oZ,[A.estadoCobro!=="Pagado"&&A.estadoCobro!=="Proyectado"?(at(),ft("button",{key:0,onClick:Q=>P(A),class:"btn-icon text-green-400 hover:text-green-300",title:"Marcar como Pagado"},_[24]||(_[24]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,aZ)):Ut("",!0),d("button",{onClick:Q=>M(A.tiendaId),class:"btn-icon text-cyan-400 hover:text-cyan-300 ml-1",title:"Ver Detalles de Tienda"},_[25]||(_[25]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("title",null,"Ver Detalles"),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,lZ)])]))),128)),w.value.length===0&&!s.value?(at(),ft("tr",cZ,[d("td",uZ,[d("div",dZ,[_[26]||(_[26]=d("svg",{class:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),_[27]||(_[27]=d("p",{class:"text-gray-500 text-lg"},"No se encontraron cobros",-1)),d("p",hZ,lt(i.value||r.value||o.value?"Prueba con otros criterios de búsqueda o filtro":"No hay tiendas con cobros generados o proyectados"),1)])])])):Ut("",!0)])])])]),ze(wi,{name:"modal-fade"},{default:an(()=>{var A,Q;return[a.value?(at(),ft("div",fZ,[d("div",pZ,[d("div",gZ,[d("div",mZ,[_[29]||(_[29]=d("h3",{class:"modal-title text-green-400"},"Confirmar Pago",-1)),d("button",{onClick:_[6]||(_[6]=et=>a.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",vZ,[d("p",yZ,[_[30]||(_[30]=Vt("¿Estás seguro que deseas marcar el cobro de ")),d("strong",bZ,lt((A=l.value)==null?void 0:A.nombreTienda),1),_[31]||(_[31]=Vt(" por ")),d("strong",wZ,"Q"+lt((((Q=l.value)==null?void 0:Q.costo)||0).toFixed(2)),1),_[32]||(_[32]=Vt(" como ")),_[33]||(_[33]=d("strong",{class:"text-green-400"},"PAGADO",-1)),_[34]||(_[34]=Vt("?"))]),_[35]||(_[35]=d("p",{class:"text-sm text-gray-500 mt-2"},'Esta acción actualizará el estado del proceso de la tienda a "Pagado".',-1))]),d("div",xZ,[d("button",{onClick:_[7]||(_[7]=et=>a.value=!1),class:"btn-secondary"},"Cancelar"),d("button",{onClick:L,class:"btn-primary bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:ring-green-500"},"Sí, Marcar como Pagado")])])])])):Ut("",!0)]}),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>{var A,Q;return[c.value?(at(),ft("div",_Z,[d("div",SZ,[d("div",{class:ve(["modal-content max-w-2xl",[`border-t-8 border-${g((A=u.value)==null?void 0:A.marca)}-500`]])},[d("div",CZ,[d("h3",kZ,lt(((Q=u.value)==null?void 0:Q.nombre)||"Detalles de Tienda"),1),d("button",{onClick:_[8]||(_[8]=et=>c.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",AZ,[u.value?(at(),ft("div",PZ,[d("p",null,[_[36]||(_[36]=d("strong",{class:"text-gray-400 w-28 inline-block"},"Marca:",-1)),Vt(" "+lt(u.value.marca),1)]),d("p",null,[_[37]||(_[37]=d("strong",{class:"text-gray-400 w-28 inline-block"},"ODS:",-1)),Vt(" "+lt(u.value.ods||"-"),1)]),d("p",null,[_[38]||(_[38]=d("strong",{class:"text-gray-400 w-28 inline-block"},"Mes Servicio:",-1)),Vt(" "+lt(pt(u.value.mesServicio)),1)]),d("p",null,[_[39]||(_[39]=d("strong",{class:"text-gray-400 w-28 inline-block"},"Costo:",-1)),Vt(" Q"+lt((u.value.costo||0).toFixed(2)),1)]),d("p",null,[_[40]||(_[40]=d("strong",{class:"text-gray-400 w-28 inline-block"},"Tipo Pago:",-1)),Vt(" "+lt(u.value.tipoPago),1)]),d("p",null,[_[41]||(_[41]=d("strong",{class:"text-gray-400 w-28 inline-block"},"Estado Proceso:",-1)),_[42]||(_[42]=Vt()),d("span",{class:ve(["badge",Y(u.value.estadoProceso)])},lt(u.value.estadoProceso),3)])])):(at(),ft("div",EZ,"No se pudieron cargar los detalles."))]),d("div",IZ,[d("button",{onClick:_[9]||(_[9]=et=>c.value=!1),class:"btn-secondary"},"Cerrar")])],2)])])):Ut("",!0)]}),_:1})]))}},NZ=ic(TZ,[["__scopeId","data-v-8ca94e1d"]]),ME={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},DZ={ariaLabel:{type:String},ariaDescribedby:{type:String}},LZ={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ME,...DZ},MZ=ZS[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function $c(e){return rf(e)?Ge(e):e}function OZ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return rf(t)?new Proxy(e,{}):e}function RZ(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function OE(e,t){e.labels=t}function RE(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function FZ(e,t){const n={labels:[],datasets:[]};return OE(n,e.labels),RE(n,e.datasets,t),n}const BZ=Ir({props:LZ,setup(e,t){let{expose:n,slots:s}=t;const i=Gt(null),r=of(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:c,data:u,options:h,plugins:g,datasetIdKey:p}=e,y=FZ(u,p),w=OZ(y,u);r.value=new oc(i.value,{type:c,data:w,options:{...h},plugins:g})},a=()=>{const c=Ge(r.value);c&&(e.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},e.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(e.updateMode)};return co(o),Lm(a),$i([()=>e.options,()=>e.data],(c,u)=>{let[h,g]=c,[p,y]=u;const w=Ge(r.value);if(!w)return;let S=!1;if(h){const x=$c(h),P=$c(p);x&&x!==P&&(RZ(w,x),S=!0)}if(g){const x=$c(g.labels),P=$c(y.labels),L=$c(g.datasets),M=$c(y.datasets);x!==P&&(OE(w.config.data,x),S=!0),L&&L!==M&&(RE(w.config.data,L,e.datasetIdKey),S=!0)}S&&lf(()=>{l(w)})},{deep:!0}),()=>bu("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[bu("p",{},[s.default?s.default():""])])}});function A5(e,t){return oc.register(t),Ir({props:ME,setup(n,s){let{expose:i}=s;const r=of(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>bu(BZ,MZ({ref:o},{type:e,...n}))}})}const yu=A5("bar",uh),gy=A5("doughnut",Ia),xm=A5("line",dh),jZ={class:"relative z-20 px-4 py-8 max-w-7xl mx-auto text-gray-200"},$Z={class:"glass-container rounded-2xl shadow-lg p-5 mb-8 animate-[fade-in_0.6s_ease-out]"},VZ={class:"flex flex-col md:flex-row justify-start items-center gap-4"},zZ=["value"],UZ=["value"],qZ={key:0,class:"text-center py-20"},HZ={key:1,class:"text-center py-10 bg-red-900/30 p-6 rounded-lg shadow-lg"},WZ={class:"text-red-400"},GZ={class:"mb-12"},KZ={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},YZ={class:"summary-card border-emerald-500 animate-[fade-in_0.6s_ease-out]"},XZ={class:"summary-amount text-emerald-400"},QZ={class:"summary-comparison"},JZ={class:"summary-card border-red-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.05s"}},ZZ={class:"summary-amount text-red-400"},ttt={class:"summary-comparison"},ett={class:"summary-card border-blue-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},ntt={class:"summary-comparison"},stt={class:"summary-card border-purple-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.15s"}},itt={class:"mb-12"},rtt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ott={class:"summary-card border-cyan-500"},att={class:"summary-amount text-cyan-400"},ltt={class:"summary-comparison"},ctt={class:"summary-card border-pink-500"},utt={class:"summary-amount text-pink-400"},dtt={class:"summary-comparison"},htt={class:"summary-card border-yellow-500"},ftt={class:"summary-amount text-yellow-400"},ptt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},gtt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]"},mtt={class:"chart-wrapper"},vtt={key:0,class:"loading-placeholder"},ytt={key:2,class:"no-data-placeholder"},btt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},wtt={class:"chart-wrapper"},xtt={key:0,class:"loading-placeholder"},_tt={key:2,class:"no-data-placeholder"},Stt={class:"mb-12"},Ctt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6"},ktt={class:"summary-card border-lime-500"},Att={class:"summary-amount text-lime-400"},Ptt={class:"summary-comparison"},Ett={class:"summary-card border-green-500"},Itt={class:"summary-amount text-green-400"},Ttt={class:"summary-comparison"},Ntt={class:"summary-card border-teal-500"},Dtt={class:"summary-amount text-teal-400"},Ltt={class:"summary-comparison"},Mtt={class:"summary-card border-cyan-500"},Ott={class:"summary-amount text-cyan-400"},Rtt={class:"summary-comparison"},Ftt={class:"summary-card border-blue-500"},Btt={class:"summary-amount text-blue-400"},jtt={class:"summary-comparison"},$tt={key:0,class:"mt-6 glass-container rounded-lg p-4 animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.2s"}},Vtt={class:"max-h-60 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50"},ztt={class:"text-xs space-y-1.5"},Utt={class:"text-slate-200"},qtt={class:"text-yellow-300 ml-1"},Htt={class:"text-slate-400 leading-tight"},Wtt={class:"mb-12"},Gtt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ktt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]"},Ytt={class:"chart-title"},Xtt={class:"chart-wrapper"},Qtt={key:0,class:"loading-placeholder"},Jtt={key:2,class:"no-data-placeholder"},Ztt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},tet={class:"chart-wrapper"},eet={key:0,class:"loading-placeholder"},net={key:2,class:"no-data-placeholder"},set={class:"mt-6 summary-card border-orange-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.2s"}},iet={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2 text-center md:text-left"},ret={class:"text-xl font-semibold text-yellow-400"},oet={class:"text-xl font-semibold text-emerald-400"},aet={class:"text-xl font-semibold text-red-400"},cet={__name:"Estadisticas",setup(e){oc.register(x5,_5,b5,Ml,Xh,Qh,hu,du,Yr,y5);const t=Gt(!0),n=Gt(null),s=Gt([]),i=Gt([]),r=Gt([]),o=Gt(""),a=Gt(new Date().getFullYear()),l=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],c=l.map((O,E)=>({name:O,value:String(E+1).padStart(2,"0")})),u=Array.from({length:5},(O,E)=>new Date().getFullYear()-E),h={greenBright:"#39FF14",cyanBright:"#00FFFF",pinkBright:"#FF00FF",blueElectric:"#007FFF",purpleElectric:"#7F00FF",orangeNeon:"#FFAC1C",yellowNeon:"#FFF01F",defaultGray:"#9CA3AF",tealBright:"#00F5D4",limeBright:"#AEFF00"},g={Servicios:h.blueElectric,Comida:h.orangeNeon,Transporte:h.yellowNeon,Oficina:h.purpleElectric,Salarios:h.tealBright,Marketing:h.pinkBright,"Pago Préstamos":h.defaultGray,"Mantenimiento Preventivo":h.greenBright,"Venta de plantas":h.limeBright,Jardinizacion:h.tealBright,"Reparacion de sistema riego":h.cyanBright,"Proyecto nuevo":h.blueElectric,DEFAULT:h.defaultGray},p=Object.keys(h).filter(O=>O!=="defaultGray"),y=O=>{const E=Number(O);return isNaN(E)?"Q 0.00":`Q ${E.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2})}`},w=O=>{if(!O||!O.includes("-"))return O||"N/A";try{const[E,R]=O.split("-"),Z=new Date(Number(E),Number(R)-1,1);if(isNaN(Z.getTime()))return O;let q=Z.toLocaleDateString("es-GT",{month:"long",year:"numeric"});return q.charAt(0).toUpperCase()+q.slice(1)}catch{return O}},S=(O,E=!0)=>{if(!O)return"N/A";let R;if(O instanceof he)R=O.toDate();else if(typeof O=="string")O.match(/^\d{4}-\d{2}-\d{2}$/)?R=new Date(O+"T00:00:00Z"):R=new Date(O);else if(O instanceof Date)R=O;else return"Fecha Inválida";if(isNaN(R.getTime()))return"Fecha Inválida";const Z=String(R.getUTCDate()).padStart(2,"0"),q=String(R.getUTCMonth()+1).padStart(2,"0"),st=R.getUTCFullYear();return E?`${Z}/${q}/${st}`:`${Z}/${q}`},x=(O,E)=>{const R=parseInt(O),Z=E?parseInt(E)-1:-1;let q,st;return Z>=0?(q=new Date(Date.UTC(R,Z,1,0,0,0,0)),st=new Date(Date.UTC(R,Z+1,0,23,59,59,999))):(q=new Date(Date.UTC(R,0,1,0,0,0,0)),st=new Date(Date.UTC(R,11,31,23,59,59,999))),{startDate:he.fromDate(q),endDate:he.fromDate(st)}},P=(O,E,R,Z="fecha",q=!1)=>O.filter(st=>{let ct,At;if(q&&st.mesServicio){if(!st.mesServicio.match(/^\d{4}-\d{2}$/))return!1;const[Dt,K]=st.mesServicio.split("-").map(Number);return ct=he.fromDate(new Date(Date.UTC(Dt,K-1,1))),At=he.fromDate(new Date(Date.UTC(Dt,K,0,23,59,59,999))),ct<=R&&At>=E}else if(st[Z]){const Dt=st[Z];return ct=Dt instanceof he?Dt:he.fromDate(new Date(Dt)),!ct||isNaN(ct.toDate().getTime())?!1:ct>=E&&ct<=R}else return!1}),L=async()=>{t.value=!0,n.value=null;try{const O=Gs(Kn(qe,"tiendas"),Ra("mesServicio","asc")),E=Gs(Kn(qe,"gastos"),Ra("fecha","asc")),R=Gs(Kn(qe,"movimientosExtras"),Ra("fecha","asc")),[Z,q,st]=await Promise.all([xs(O),xs(E),xs(R)]);s.value=Z.docs.map(ct=>({id:ct.id,...ct.data()})),i.value=q.docs.map(ct=>({id:ct.id,...ct.data()})),r.value=st.docs.map(ct=>({id:ct.id,...ct.data()}))}catch(O){console.error("Error cargando datos globales:",O),n.value="No se pudieron cargar los datos para las estadísticas. Por favor, intente de nuevo.",s.value=[],i.value=[],r.value=[]}finally{t.value=!1}},M=de(()=>{if(t.value||!s.value.length)return[];const{startDate:O,endDate:E}=x(a.value,o.value);return P(s.value,O,E,"mesServicio",!0)}),F=de(()=>{if(t.value||!i.value.length)return[];const{startDate:O,endDate:E}=x(a.value,o.value);return P(i.value,O,E,"fecha")}),pt=de(()=>{if(t.value||!r.value.length)return[];const{startDate:O,endDate:E}=x(a.value,o.value);return P(r.value,O,E,"fecha")}),Y=de(()=>{const O=M.value.filter(H=>H.estadoProceso==="Pagado").reduce((H,dt)=>H+(Number(dt.costo)||0),0),E=M.value.filter(H=>H.estadoProceso==="Pagado").length,R=F.value.reduce((H,dt)=>H+(Number(dt.monto)||0),0),Z=F.value.length,q=O-R,st=O===0?0:q/O*100,ct=pt.value.filter(H=>H.tipo==="capital"||H.tipo==="capital_inicial").reduce((H,dt)=>H+(Number(dt.monto)||0),0),At=pt.value.filter(H=>H.tipo==="prestamo_recibido").reduce((H,dt)=>H+(Number(dt.monto)||0),0),Dt=pt.value.filter(H=>H.tipo==="pago_prestamo").reduce((H,dt)=>H+(Number(dt.monto)||0),0),K=ct+At-Dt;return{ingresosOperacionalesPagados:O,serviciosPagados:E,gastosOperativos:R,numeroGastos:Z,beneficioNetoOperacional:q,margenNetoOperacional:st,flujoFinanciamientoNeto:K}}),W=de(()=>{const O=M.value.filter(At=>At.estadoProceso!=="Cancelado"),E=O.filter(At=>At.estadoProceso==="Pagado"),R=O.filter(At=>At.estadoProceso!=="Pagado"&&At.estadoProceso!=="Cancelado"),Z=E.reduce((At,Dt)=>At+(Number(Dt.costo)||0),0),q=E.length>0?Z/E.length:0,st=E.length+R.length,ct=st>0?E.length/st*100:0;return{totalServiciosActivos:O.length,serviciosPagados:E.length,serviciosPendientesDePago:R.length,ingresoPromedioPorServicioPagado:q,tasaDeCobro:ct}}),it=de(()=>{const O=r.value.filter(R=>R.tipo==="prestamo_recibido").reduce((R,Z)=>R+(Number(Z.monto)||0),0),E=r.value.filter(R=>R.tipo==="pago_prestamo").reduce((R,Z)=>R+(Number(Z.monto)||0),0);return{totalPrestamosRecibidosHist:O,totalPagosPrestamosHist:E,saldoPendientePrestamosHist:O-E}}),J=de(()=>{const O={serviciosAnalizados:0,serviciosCon2VisitasEsperadas:0,cumplenV1EnQ1:0,realizadasV1EnQ1:0,cumplenV2EnQ2:0,realizadasV2EnQ2:0,serviciosCompletosYATiempo:0,totalServiciosDosVisitasRealizadasCompletas:0,sumaDiferenciaDias:0,contadorDiferenciaDiasValidas:0,promedioDiasEntreVisitas:0,porcentajeCumplimientoV1:0,porcentajeCumplimientoV2:0,porcentajeCumplimientoTotal:0,listaIncumplimientos:[],totalV1ConFecha:0,totalV2ConFecha:0};if(t.value)return O;const E={...O};return M.value.forEach(R=>{if(!R.mesServicio||!R.nombre)return;E.serviciosAnalizados++;let Z=R.numVisitas===2;Z&&E.serviciosCon2VisitasEsperadas++;const[q,st]=R.mesServicio.split("-").map(Number);let ct=!1,At=!1,Dt=!1,K=!1,H=null,dt=null;if(R.fechaPrimeraVisita){E.totalV1ConFecha++;try{if(H=R.fechaPrimeraVisita instanceof he?R.fechaPrimeraVisita.toDate():new Date(R.fechaPrimeraVisita+"T00:00:00Z"),isNaN(H.getTime()))E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V1 Fecha Inválida",detalle:`FechaV1: ${R.fechaPrimeraVisita}, Est: ${R.estadoPrimeraVisita||"N/A"}`});else{const ut=H.getUTCDate(),V=H.getUTCMonth()+1;H.getUTCFullYear()===q&&V===st&&ut>=1&&ut<=15?(ct=!0,E.cumplenV1EnQ1++,R.estadoPrimeraVisita==="Realizada"&&(At=!0,E.realizadasV1EnQ1++)):E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V1 Fuera Q1",detalle:`Prog: ${S(H)}, Esp: Q1 ${w(R.mesServicio)}, Est: ${R.estadoPrimeraVisita||"N/A"}`})}}catch(ut){E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V1 Error Fecha",detalle:`Error: ${ut.message}, Est: ${R.estadoPrimeraVisita||"N/A"}`})}}else R.estadoPrimeraVisita==="Realizada"&&E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V1 Realizada Sin Fecha",detalle:`Est: ${R.estadoPrimeraVisita}`});if(Z){if(R.fechaSegundaVisita){E.totalV2ConFecha++;try{if(dt=R.fechaSegundaVisita instanceof he?R.fechaSegundaVisita.toDate():new Date(R.fechaSegundaVisita+"T00:00:00Z"),isNaN(dt.getTime()))E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V2 Fecha Inválida",detalle:`FechaV2: ${R.fechaSegundaVisita}, Est: ${R.estadoSegundaVisita||"N/A"}`});else{const ut=dt.getUTCDate(),V=dt.getUTCMonth()+1;dt.getUTCFullYear()===q&&V===st&&ut>15&&ut<=31?(Dt=!0,E.cumplenV2EnQ2++,R.estadoSegundaVisita==="Realizada"&&(K=!0,E.realizadasV2EnQ2++)):E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V2 Fuera Q2",detalle:`Prog: ${S(dt)}, Esp: Q2 ${w(R.mesServicio)}, Est: ${R.estadoSegundaVisita||"N/A"}`})}}catch(ut){E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V2 Error Fecha",detalle:`Error: ${ut.message}, Est: ${R.estadoSegundaVisita||"N/A"}`})}}else R.estadoSegundaVisita==="Realizada"&&E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V2 Realizada Sin Fecha",detalle:`Est: ${R.estadoSegundaVisita}`});if(R.estadoPrimeraVisita==="Realizada"&&R.estadoSegundaVisita==="Realizada"&&(E.totalServiciosDosVisitasRealizadasCompletas++,H&&dt&&!isNaN(H.getTime())&&!isNaN(dt.getTime())))if(dt>=H){const ut=dt.getTime()-H.getTime();E.sumaDiferenciaDias+=Math.ceil(ut/(1e3*60*60*24)),E.contadorDiferenciaDiasValidas++}else E.listaIncumplimientos.push({tiendaId:R.id,nombre:R.nombre,tipo:"V2 Antes que V1",detalle:`V1: ${S(H)}, V2: ${S(dt)}`});At&&K&&E.serviciosCompletosYATiempo++}else At&&E.serviciosCompletosYATiempo++}),E.promedioDiasEntreVisitas=E.contadorDiferenciaDiasValidas>0?E.sumaDiferenciaDias/E.contadorDiferenciaDiasValidas:0,E.porcentajeCumplimientoV1=E.totalV1ConFecha>0?E.realizadasV1EnQ1/E.totalV1ConFecha*100:0,E.porcentajeCumplimientoV2=E.totalV2ConFecha>0?E.realizadasV2EnQ2/E.totalV2ConFecha*100:0,E.porcentajeCumplimientoTotal=E.serviciosAnalizados>0?E.serviciosCompletosYATiempo/E.serviciosAnalizados*100:0,E}),_=de(()=>{if(t.value)return{labels:[],datasets:[]};const O={};M.value.filter(Z=>Z.estadoProceso==="Pagado"&&Z.marca).forEach(Z=>{const q=Z.marca.trim()||"Sin Marca";O[q]=(O[q]||0)+(Number(Z.costo)||0)});const E=Object.keys(O).sort((Z,q)=>O[q]-O[Z]),R=E.map(Z=>O[Z]);return E.length===0?{labels:[],datasets:[]}:{labels:E,datasets:[{label:"Ingresos Pagados",data:R,backgroundColor:E.map((Z,q)=>h[p[q%p.length]]||h.defaultGray),borderRadius:4}]}}),A=de(()=>{if(t.value)return{labels:[],datasets:[]};const O={};M.value.filter(Z=>Z.estadoProceso==="Pagado"&&Z.categoria).forEach(Z=>{const q=Z.categoria.trim()||"Sin Categoría";O[q]=(O[q]||0)+(Number(Z.costo)||0)});const E=Object.keys(O).sort((Z,q)=>O[q]-O[Z]),R=E.map(Z=>O[Z]);return E.length===0?{labels:[],datasets:[]}:{labels:E,datasets:[{data:R,backgroundColor:E.map((Z,q)=>g[Z]||h[p[(q+2)%p.length]]||h.defaultGray),borderColor:"#1F2937",borderWidth:2,hoverOffset:8}]}}),Q=of(yu),et=de(()=>{var O;return o.value===""?`Flujo Efectivo Operacional Anual ${a.value}`:`Flujo Efectivo Operacional ${((O=c.find(E=>E.value===o.value))==null?void 0:O.name)||""} ${a.value}`}),mt=de(()=>{var O;if(t.value)return{labels:[],datasets:[]};if(o.value===""){Q.value=xm;const E=l,R={ingresos:Array(12).fill(0),gastos:Array(12).fill(0),beneficio:Array(12).fill(0)};s.value.forEach(q=>{if(q.mesServicio&&q.mesServicio.startsWith(a.value.toString())&&q.estadoProceso==="Pagado"){const st=parseInt(q.mesServicio.split("-")[1])-1;st>=0&&st<12&&(R.ingresos[st]+=Number(q.costo)||0)}}),i.value.forEach(q=>{if(q.fecha){const st=q.fecha instanceof he?q.fecha.toDate():new Date(q.fecha);if(!isNaN(st.getTime())&&st.getUTCFullYear()===parseInt(a.value)){const ct=st.getUTCMonth();ct>=0&&ct<12&&(R.gastos[ct]+=Number(q.monto)||0)}}});for(let q=0;q<12;q++)R.beneficio[q]=R.ingresos[q]-R.gastos[q];return R.ingresos.some(q=>q>0)||R.gastos.some(q=>q>0)||R.beneficio.some(q=>q!==0)?{labels:E,datasets:[{label:"Ingresos Op. (Pagados)",data:R.ingresos,borderColor:h.greenBright,backgroundColor:`${h.greenBright}20`,tension:.3,fill:"origin"},{label:"Gastos Op.",data:R.gastos,borderColor:h.pinkBright,backgroundColor:`${h.pinkBright}20`,tension:.3,fill:"origin"},{label:"Beneficio Neto Op.",data:R.beneficio,borderColor:h.blueElectric,backgroundColor:`${h.blueElectric}20`,tension:.3,fill:"origin"}]}:{labels:[],datasets:[]}}else return Q.value=yu,Y.value.ingresosOperacionalesPagados===0&&Y.value.gastosOperativos===0&&Y.value.beneficioNetoOperacional===0?{labels:[],datasets:[]}:{labels:[((O=c.find(E=>E.value===o.value))==null?void 0:O.name)||"Mes"],datasets:[{label:"Ingresos Op. (Pagados)",data:[Y.value.ingresosOperacionalesPagados],backgroundColor:h.greenBright,borderRadius:4},{label:"Gastos Op.",data:[Y.value.gastosOperativos],backgroundColor:h.pinkBright,borderRadius:4},{label:"Beneficio Neto Op.",data:[Y.value.beneficioNetoOperacional],backgroundColor:h.blueElectric,borderRadius:4}]}}),ht=de(()=>{if(t.value)return{labels:[],datasets:[]};const O={};F.value.forEach(Z=>{const q=Z.categoria||"Sin Categoría";O[q]=(O[q]||0)+(Number(Z.monto)||0)});const E=Object.keys(O).sort((Z,q)=>O[q]-O[Z]),R=E.map(Z=>O[Z]);return E.length===0?{labels:[],datasets:[]}:{labels:E,datasets:[{data:R,backgroundColor:E.map(Z=>g[Z]||h.defaultGray),borderColor:"#1F2937",borderWidth:2,hoverOffset:8}]}}),gt=(O="Monto (GTQ)")=>({responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#9CA3AF",font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:O,color:"#9CA3AF"},ticks:{callback:E=>y(E),color:"#9CA3AF",font:{size:10}},grid:{color:"rgba(107, 114, 128, 0.2)"}}},plugins:{title:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"#E5E7EB",bodyColor:"#D1D5DB",borderColor:"rgba(100, 116, 139, 0.5)",borderWidth:1,padding:10,callbacks:{label:E=>`${E.dataset.label||""}: ${y(E.parsed.y||E.parsed.x||E.parsed)}`}},legend:{position:"bottom",labels:{color:"#9CA3AF",boxWidth:12,padding:15,font:{size:11}}}},animation:{duration:600,easing:"easeOutCubic"}}),tt=(O="bar",E="Monto (GTQ)")=>({...gt(E),scales:{x:{...gt(E).scales.x,stacked:O==="bar"},y:{...gt(E).scales.y,stacked:O==="bar"}},plugins:{...gt().plugins,filler:{propagate:O==="line"}},elements:{point:{radius:O==="line"?2:0,hoverRadius:O==="line"?4:0}}}),T=(O="Categoría",E=!1,R="Monto (GTQ)",Z=!1)=>({...gt(Z?O:R),indexAxis:Z?"y":"x",scales:{x:{...gt(R).scales.x,stacked:E,title:{display:!Z,text:Z?R:O}},y:{...gt(R).scales.y,stacked:E,title:{display:Z,text:R},grid:{drawOnChartArea:!Z}}}}),rt=(O="Distribución")=>({responsive:!0,maintainAspectRatio:!1,animation:{animateRotate:!0,animateScale:!0,duration:600},plugins:{title:{display:!1,text:O,color:"#E5E7EB",font:{size:16}},tooltip:{...gt().plugins.tooltip,callbacks:{label:E=>`${E.label||""}: ${y(E.parsed)}`,afterLabel:E=>{const R=E.dataset.data.reduce((Z,q)=>Z+q,0);return R===0?"(0%)":`(${(E.parsed/R*100).toFixed(1)}%)`}}},legend:{...gt().plugins.legend,position:"right"}}}),kt=()=>{},I=()=>{o.value="",a.value=new Date().getFullYear()};return co(async()=>{await L()}),$i([o,a],()=>{}),(O,E)=>{var R,Z,q;return at(),ft(ye,null,[E[34]||(E[34]=d("div",{class:"absolute top-0 left-0 w-full h-[250px] -z-10 overflow-hidden pointer-events-none"},[d("div",{class:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500 rounded-full filter blur-3xl opacity-[0.07]","aria-hidden":"true"}),d("div",{class:"absolute top-[100px] right-1/4 w-96 h-96 bg-purple-500 rounded-full filter blur-3xl opacity-[0.07]","aria-hidden":"true"})],-1)),d("div",jZ,[E[33]||(E[33]=d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 glow-multi text-center mb-8 animate-[fade-in-down_0.6s_ease-out]"}," Panel de Estadísticas Globales ",-1)),d("div",$Z,[d("div",VZ,[E[4]||(E[4]=d("h3",{class:"text-lg font-semibold text-slate-300 mr-4 flex-shrink-0"},"Filtrar Periodo:",-1)),oe(d("select",{"onUpdate:modelValue":E[0]||(E[0]=st=>o.value=st),onChange:kt,class:"input-primary select-input w-full sm:w-48"},[E[2]||(E[2]=d("option",{value:"",class:"option-dark text-gray-500"},"Todo el Año",-1)),(at(!0),ft(ye,null,Ke(Hs(c),st=>(at(),ft("option",{key:st.value,value:st.value,class:"option-dark"},lt(st.name),9,zZ))),128))],544),[[Vn,o.value]]),oe(d("select",{"onUpdate:modelValue":E[1]||(E[1]=st=>a.value=st),onChange:kt,class:"input-primary select-input w-full sm:w-32"},[(at(!0),ft(ye,null,Ke(Hs(u),st=>(at(),ft("option",{key:st,value:st,class:"option-dark"},lt(st),9,UZ))),128))],544),[[Vn,a.value]]),d("button",{onClick:I,class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0 group md:ml-auto mt-3 md:mt-0 w-full md:w-auto"},E[3]||(E[3]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m15.356 2H15m0 0l-3-3m3 3l3-3M4.582 12H9m11 0h-2m2 0l-3 3m3-3l3 3"})]),Vt(" Resetear Filtros ")],-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)]))])]),t.value?(at(),ft("div",qZ,E[5]||(E[5]=[d("svg",{class:"animate-spin h-10 w-10 text-purple-400 mx-auto mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("p",{class:"text-slate-400 text-lg"},"Cargando estadísticas globales...",-1)]))):Ut("",!0),!t.value&&n.value?(at(),ft("div",HZ,[E[6]||(E[6]=d("h4",{class:"text-xl text-red-300 font-semibold mb-2"},"Error al Cargar Datos",-1)),d("p",WZ,lt(n.value),1),d("button",{onClick:L,class:"btn-primary mt-4 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 focus:ring-red-500"}," Reintentar Carga ")])):Ut("",!0),!t.value&&!n.value?(at(),ft(ye,{key:2},[d("section",GZ,[E[12]||(E[12]=d("h3",{class:"text-xl font-semibold text-slate-200 mb-6 border-b-2 border-blue-500/30 pb-2"},"Visión General del Periodo",-1)),d("div",KZ,[d("div",YZ,[E[7]||(E[7]=d("h4",{class:"summary-title"},"Ingresos Op. (Pagados)",-1)),d("p",XZ,lt(y(Y.value.ingresosOperacionalesPagados)),1),d("p",QZ,lt(Y.value.serviciosPagados)+" servicios",1)]),d("div",JZ,[E[8]||(E[8]=d("h4",{class:"summary-title"},"Gastos Op. Totales",-1)),d("p",ZZ,lt(y(Y.value.gastosOperativos)),1),d("p",ttt,lt(Y.value.numeroGastos)+" transacciones",1)]),d("div",ett,[E[9]||(E[9]=d("h4",{class:"summary-title"},"Beneficio Neto Op.",-1)),d("p",{class:ve(["summary-amount",Y.value.beneficioNetoOperacional>=0?"text-blue-400":"text-red-400"])},lt(y(Y.value.beneficioNetoOperacional)),3),d("p",ntt,"Margen Op: "+lt(Y.value.margenNetoOperacional.toFixed(1))+"%",1)]),d("div",stt,[E[10]||(E[10]=d("h4",{class:"summary-title"},"Flujo Efectivo (Financiamiento)",-1)),d("p",{class:ve(["summary-amount",Y.value.flujoFinanciamientoNeto>=0?"text-purple-400":"text-orange-400"])},lt(y(Y.value.flujoFinanciamientoNeto)),3),E[11]||(E[11]=d("p",{class:"summary-comparison text-xs"},"Capital + Préstamos - Pagos Prést.",-1))])])]),d("section",itt,[E[19]||(E[19]=d("h3",{class:"text-xl font-semibold text-slate-200 mb-6 border-b-2 border-purple-500/30 pb-2"},"Rendimiento de Tiendas y Servicios",-1)),d("div",rtt,[d("div",ott,[E[13]||(E[13]=d("h4",{class:"summary-title"},"Total Servicios (Periodo Activo)",-1)),d("p",att,lt(W.value.totalServiciosActivos),1),d("p",ltt,lt(W.value.serviciosPagados)+" Pagados / "+lt(W.value.serviciosPendientesDePago)+" Pendientes",1)]),d("div",ctt,[E[14]||(E[14]=d("h4",{class:"summary-title"},"Ingreso Promedio / Servicio (Pagado)",-1)),d("p",utt,lt(y(W.value.ingresoPromedioPorServicioPagado)),1),d("p",dtt,"Basado en "+lt(W.value.serviciosPagados)+" servicios",1)]),d("div",htt,[E[15]||(E[15]=d("h4",{class:"summary-title"},"Tasa de Cobro (Periodo)",-1)),d("p",ftt,lt(W.value.tasaDeCobro.toFixed(1))+"%",1),E[16]||(E[16]=d("p",{class:"summary-comparison text-xs"},"Pagados vs. (Pagados + Pendientes)",-1))])]),d("div",ptt,[d("div",gtt,[E[17]||(E[17]=d("h4",{class:"chart-title"},"Ingresos (Pagados) por Marca de Tienda",-1)),d("div",mtt,[t.value?(at(),ft("div",vtt,"Cargando...")):_.value.datasets.length>0&&((R=_.value.datasets[0])!=null&&R.data.some(st=>st>0))?(at(),cs(Hs(yu),{key:1,data:_.value,options:T("Marca",!1,"Ingresos (Q)",!0)},null,8,["data","options"])):(at(),ft("div",ytt,"No hay datos de ingresos por marca para el periodo."))])]),d("div",btt,[E[18]||(E[18]=d("h4",{class:"chart-title"},"Ingresos (Pagados) por Categoría de Servicio",-1)),d("div",wtt,[t.value?(at(),ft("div",xtt,"Cargando...")):A.value.datasets.length>0&&((Z=A.value.datasets[0])!=null&&Z.data.some(st=>st>0))?(at(),cs(Hs(gy),{key:1,data:A.value,options:rt("Categoría Servicio")},null,8,["data","options"])):(at(),ft("div",_tt,"No hay datos de ingresos por categoría para el periodo."))])])])]),d("section",Stt,[E[26]||(E[26]=d("h3",{class:"text-xl font-semibold text-slate-200 mb-6 border-b-2 border-lime-500/30 pb-2"},[Vt(" Cumplimiento de Servicios Programados "),d("span",{class:"text-sm text-slate-400"},"(Periodo Seleccionado)")],-1)),d("div",Ctt,[d("div",ktt,[E[20]||(E[20]=d("h4",{class:"summary-title"},"Servicios Analizados",-1)),d("p",Att,lt(J.value.serviciosAnalizados),1),d("p",Ptt,lt(J.value.serviciosCon2VisitasEsperadas)+" con 2 visitas",1)]),d("div",Ett,[E[21]||(E[21]=d("h4",{class:"summary-title"},"V1 Realizada en Q1",-1)),d("p",Itt,lt(J.value.porcentajeCumplimientoV1.toFixed(1))+"%",1),d("p",Ttt,lt(J.value.realizadasV1EnQ1)+" de "+lt(J.value.totalV1ConFecha)+" prog.",1)]),d("div",Ntt,[E[22]||(E[22]=d("h4",{class:"summary-title"},"V2 Realizada en Q2",-1)),d("p",Dtt,lt(J.value.porcentajeCumplimientoV2.toFixed(1))+"%",1),d("p",Ltt,lt(J.value.realizadasV2EnQ2)+" de "+lt(J.value.totalV2ConFecha)+" prog.",1)]),d("div",Mtt,[E[23]||(E[23]=d("h4",{class:"summary-title"},"Servicios Completos y a Tiempo",-1)),d("p",Ott,lt(J.value.porcentajeCumplimientoTotal.toFixed(1))+"%",1),d("p",Rtt,lt(J.value.serviciosCompletosYATiempo)+" servicios",1)]),d("div",Ftt,[E[24]||(E[24]=d("h4",{class:"summary-title"},"Prom. Días entre Visitas",-1)),d("p",Btt,lt(J.value.promedioDiasEntreVisitas.toFixed(1)),1),d("p",jtt,lt(J.value.contadorDiferenciaDiasValidas)+" serv. (2V Realizadas)",1)])]),J.value.listaIncumplimientos.length>0?(at(),ft("div",$tt,[E[25]||(E[25]=d("h4",{class:"text-md font-semibold text-yellow-400 mb-3 flex items-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),Vt(" Tiendas con Desviaciones en Programación de Visitas (Periodo): ")],-1)),d("div",Vtt,[d("ul",ztt,[(at(!0),ft(ye,null,Ke(J.value.listaIncumplimientos,st=>(at(),ft("li",{key:st.tiendaId+st.tipo+Math.random(),class:"p-2 bg-slate-700/60 rounded-md border-l-2 border-yellow-600 hover:bg-slate-600/60 transition-colors"},[d("strong",Utt,lt(st.nombre),1),d("span",qtt,"["+lt(st.tipo)+"]:",1),d("p",Htt,lt(st.detalle),1)]))),128))])])])):Ut("",!0)]),d("section",Wtt,[E[32]||(E[32]=d("h3",{class:"text-xl font-semibold text-slate-200 mb-6 border-b-2 border-teal-500/30 pb-2"},"Análisis Financiero Adicional",-1)),d("div",Gtt,[d("div",Ktt,[d("h4",Ytt,lt(et.value),1),d("div",Xtt,[t.value?(at(),ft("div",Qtt,"Cargando...")):mt.value.datasets.length>0&&mt.value.datasets.some(st=>st.data.some(ct=>ct!==0&&ct!==null))?(at(),cs(Ou(Q.value),{data:mt.value,options:tt(Q.value===Hs(xm)?"line":"bar","Monto (GTQ)"),key:o.value+a.value+"flujo"},null,8,["data","options"])):(at(),ft("div",Jtt,"No hay datos suficientes para el flujo de efectivo."))])]),d("div",Ztt,[E[27]||(E[27]=d("h4",{class:"chart-title"},"Distribución de Gastos Operativos",-1)),d("div",tet,[t.value?(at(),ft("div",eet,"Cargando...")):ht.value.datasets.length>0&&((q=ht.value.datasets[0])!=null&&q.data.some(st=>st>0))?(at(),cs(Hs(gy),{key:1,data:ht.value,options:rt("Categoría Gasto")},null,8,["data","options"])):(at(),ft("div",net,"No hay gastos para graficar en el periodo."))])])]),d("div",set,[E[31]||(E[31]=d("h4",{class:"summary-title text-orange-300"},"Estado de Deuda (Préstamos) - Histórico Acumulado",-1)),d("div",iet,[d("div",null,[E[28]||(E[28]=d("p",{class:"text-sm text-slate-400"},"Total Recibido:",-1)),d("p",ret,lt(y(it.value.totalPrestamosRecibidosHist)),1)]),d("div",null,[E[29]||(E[29]=d("p",{class:"text-sm text-slate-400"},"Total Pagado:",-1)),d("p",oet,lt(y(it.value.totalPagosPrestamosHist)),1)]),d("div",null,[E[30]||(E[30]=d("p",{class:"text-sm text-slate-400"},"Saldo Pendiente:",-1)),d("p",aet,lt(y(it.value.saldoPendientePrestamosHist)),1)])])])])],64)):Ut("",!0)])],64)}}},uet=ic(cet,[["__scopeId","data-v-9c74a66b"]]),det={class:"relative z-20 px-4 py-8 max-w-7xl mx-auto text-gray-200"},het={class:"glass-container rounded-2xl shadow-lg p-5 mb-8 animate-[fade-in_0.6s_ease-out]"},fet={class:"flex flex-col md:flex-row justify-between items-center gap-4"},pet={class:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto"},get=["value"],met=["value"],vet={class:"flex flex-wrap justify-end gap-3 w-full md:w-auto"},yet={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8"},bet={class:"summary-card border-emerald-500 animate-[fade-in_0.6s_ease-out]"},wet={class:"flex justify-between items-start"},xet={class:"summary-amount text-emerald-400"},_et={key:0,class:"summary-comparison"},Cet={class:"summary-card border-cyan-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.05s"}},ket={class:"flex justify-between items-start"},Aet={class:"summary-amount text-cyan-400"},Pet={key:0,class:"summary-comparison"},Eet={class:"summary-card border-red-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},Iet={class:"flex justify-between items-start"},Tet={class:"summary-amount text-red-400"},Net={key:0,class:"summary-comparison"},Det={class:"summary-card border-purple-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.15s"}},Let={class:"flex justify-between items-start"},Met={class:"summary-amount text-purple-400"},Oet={class:"summary-card border-yellow-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.2s"}},Ret={class:"flex justify-between items-start"},Fet={class:"summary-amount text-yellow-400"},Bet={class:"summary-card border-green-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.3s"}},jet={class:"flex justify-between items-start"},$et={class:"summary-amount text-green-400"},Vet={class:"summary-comparison text-slate-400 text-xs mt-auto pt-2"},zet={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8"},Uet={class:"summary-card border-blue-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.3s"}},qet={class:"flex justify-between items-start"},Het={key:0,class:"summary-comparison"},Wet={class:"summary-card border-purple-500 animate-[fade-in_0.6s_ease-out]",style:{"animation-delay":"0.35s"}},Get={class:"flex justify-between items-start"},Ket={class:"mt-3 w-full bg-gray-700 rounded-full h-2.5"},Yet={key:0,class:"text-xs text-red-500 mt-1"},Xet={key:1,class:"text-xs text-yellow-500 mt-1"},Qet={key:2,class:"text-xs text-blue-500 mt-1"},Jet={key:3,class:"text-xs text-emerald-500 mt-1"},Zet={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},tnt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]"},ent={class:"chart-title"},nnt={class:"chart-wrapper"},snt={key:0,class:"loading-placeholder"},int={key:2,class:"no-data-placeholder"},rnt={class:"chart-container animate-[fade-in-up_0.6s_ease-out]",style:{"animation-delay":"0.1s"}},ont={class:"chart-wrapper"},ant={key:0,class:"loading-placeholder"},lnt={key:2,class:"no-data-placeholder"},cnt={class:"glass-container rounded-2xl shadow-lg p-5 mb-8 animate-[fade-in_0.6s_ease-out]"},unt={class:"mb-6"},dnt={key:0,class:"text-slate-500 text-sm italic"},hnt={key:1,class:"space-y-3"},fnt=["onClick"],pnt={class:"flex justify-between items-center"},gnt={class:"text-slate-200 font-medium"},mnt={class:"text-sm text-slate-400"},vnt={class:"flex items-center"},ynt={class:"text-red-400 font-semibold mr-4 flex-shrink-0"},bnt={key:0,class:"mt-3 space-y-2 pl-4 border-l border-slate-600"},wnt={class:"text-slate-300"},xnt={class:"flex items-center"},_nt={class:"text-red-300 font-semibold mr-4 flex-shrink-0"},Snt=["onClick"],Cnt=["onClick"],knt={class:"mb-6"},Ant={key:0,class:"text-slate-500 text-sm italic"},Pnt={key:1,class:"space-y-3"},Ent={class:"text-slate-200 font-medium"},Int={class:"text-sm text-slate-400"},Tnt={class:"flex items-center"},Nnt={class:"font-semibold mr-4 flex-shrink-0 text-emerald-400"},Dnt=["onClick"],Lnt=["onClick"],Mnt={key:0,class:"text-slate-500 text-sm italic"},Ont={key:1,class:"space-y-3"},Rnt={class:"text-slate-200 font-medium"},Fnt={class:"text-sm text-slate-400"},Bnt={class:"flex items-center"},jnt={class:"font-semibold mr-4 flex-shrink-0 text-emerald-400"},$nt=["onClick"],Vnt=["onClick"],znt={key:0,class:"text-slate-500 text-sm italic"},Unt={key:1,class:"space-y-3"},qnt={class:"text-slate-200 font-medium"},Hnt={class:"text-sm text-slate-400"},Wnt={class:"flex items-center"},Gnt={class:"font-semibold mr-4 flex-shrink-0 text-red-400"},Knt=["onClick"],Ynt=["onClick"],Xnt={key:0,class:"modal-overlay"},Qnt={class:"modal-container"},Jnt={class:"modal-title"},Znt={key:0,class:"bg-red-900/30 text-red-300 text-sm p-3 rounded-md mb-4"},tst={key:1,class:"bg-emerald-900/30 text-emerald-300 text-sm p-3 rounded-md mb-4"},est={class:"mb-4"},nst={class:"mb-4"},sst={class:"mb-4"},ist={id:"category-suggestions"},rst=["value"],ost={class:"mb-6"},ast={class:"flex justify-end gap-3"},lst=["disabled"],cst={key:0,class:"modal-overlay"},ust={class:"modal-container"},dst={class:"modal-title"},hst={key:0,class:"bg-red-900/30 text-red-300 text-sm p-3 rounded-md mb-4"},fst={key:1,class:"bg-emerald-900/30 text-emerald-300 text-sm p-3 rounded-md mb-4"},pst={class:"mb-4"},gst={class:"mb-4"},mst={class:"mb-4"},vst={class:"mb-6"},yst={class:"flex justify-end gap-3"},bst=["disabled"],wst={key:0,class:"modal-overlay"},xst={class:"modal-container"},_st={class:"modal-title"},Sst={key:0,class:"bg-red-900/30 text-red-300 text-sm p-3 rounded-md mb-4"},Cst={key:1,class:"bg-emerald-900/30 text-emerald-300 text-sm p-3 rounded-md mb-4"},kst={class:"mb-4"},Ast={class:"mb-4"},Pst={class:"mb-4"},Est={class:"mb-6"},Ist={class:"flex justify-end gap-3"},Tst=["disabled"],Nst={key:0,class:"modal-overlay"},Dst={class:"modal-container"},Lst={class:"modal-title"},Mst={key:0,class:"bg-red-900/30 text-red-300 text-sm p-3 rounded-md mb-4"},Ost={key:1,class:"bg-emerald-900/30 text-emerald-300 text-sm p-3 rounded-md mb-4"},Rst={class:"mb-4"},Fst={class:"mb-4"},Bst=["value"],jst={class:"mb-4"},$st={class:"mb-6"},Vst={class:"flex justify-end gap-3"},zst=["disabled"],eg="tu_contraseña_segura_aqui",Ust={__name:"ExpensesTracker",setup(e){oc.register(x5,_5,b5,Ml,Xh,Qh,hu,du,Yr,y5);const t=Gt([]);Gt([]);const n=Gt([]),s=Gt([]),i=Gt(!0),r=Gt(null),o=Gt(null),a=Gt(null),l=Gt(""),c=Gt(new Date().getFullYear()),u=Gt({ingresosOperacionalesPagados:null,ingresosOperacionalesProyectados:null,gastos:null,gananciaNetaOperacional:null}),h=Gt(!1),g=Gt(!1),p=Gt(!1),y=Gt(!1),w=Gt(!1),S=Gt(null),x=Gt({fecha:new Date().toISOString().substr(0,10),descripcion:"",categoria:"",monto:""}),P=Gt(!1),L=Gt(null),M=Gt({fecha:new Date().toISOString().substr(0,10),monto:"",descripcion:"",tipo:""}),F=Gt(!1),pt=Gt(null),Y=Gt({fecha:new Date().toISOString().substr(0,10),monto:"",entidad:"",descripcion:""}),W=Gt(!1),it=Gt(null),J=Gt({fecha:new Date().toISOString().substr(0,10),prestamoId:"",monto:"",descripcion:""}),_=sf({}),A=Gt([]),Q=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],et=Q.map((xt,X)=>({name:xt,value:String(X+1).padStart(2,"0")})),mt=Array.from({length:5},(xt,X)=>new Date().getFullYear()-X),ht={greenBright:"#39FF14",cyanBright:"#00FFFF",pinkBright:"#FF00FF",blueElectric:"#007FFF",purpleElectric:"#7F00FF",orangeNeon:"#FFAC1C",yellowNeon:"#FFF01F",defaultGray:"#9CA3AF"},gt={Servicios:ht.blueElectric,Comida:ht.orangeNeon,Transporte:ht.yellowNeon,Oficina:ht.purpleElectric,Salarios:"#2DD4BF",Marketing:ht.pinkBright,"Pago Préstamos":ht.defaultGray,DEFAULT:ht.defaultGray},tt=Object.keys(gt).filter(xt=>xt!=="DEFAULT"),T=xt=>{let X=0;for(let Rt=0;Rt<xt.length;Rt++){const _t=xt.charCodeAt(Rt);X=(X<<5)-X+_t,X|=0}return X},rt=(xt,X=1)=>{const Rt=(xt||"DEFAULT").trim();let _t=gt[Rt]||gt.DEFAULT;if(!gt[Rt]&&Rt!=="DEFAULT"){const re=Math.abs(T(Rt))%tt.length;_t=gt[tt[re]]||ht.defaultGray}if(X<1&&X>=0){(typeof _t!="string"||!_t.startsWith("#"))&&(console.warn(`Invalid base color for ${xt}: ${_t}. Using default gray.`),_t="#808080");const ge=(be=>{const Ce=parseInt(be.slice(1),16),kn=Ce>>16&255,Ps=Ce>>8&255,ki=Ce&255;return{r:kn,g:Ps,b:ki}})(_t);return`rgba(${ge.r}, ${ge.g}, ${ge.b}, ${X})`}return _t},kt=xt=>{const X=Number(xt);return isNaN(X)?"Q 0.00":`Q ${X.toLocaleString("es-GT",{minimumFractionDigits:2,maximumFractionDigits:2})}`},I=(xt,X=!0)=>{if(!xt)return"N/A";let Rt;if(xt instanceof he)Rt=xt.toDate();else if(typeof xt=="string")try{if(xt.match(/^\d{4}-\d{2}-\d{2}$/)){const[be,Ce,kn]=xt.split("-").map(Number);Rt=new Date(be,Ce-1,kn)}else Rt=new Date(xt);if(isNaN(Rt.getTime()))throw new Error("Invalid string date parse")}catch(be){return console.error("Error parsing date:",xt,be),"Fecha inválida"}else if(xt instanceof Date)Rt=xt;else try{if(Rt=new Date(xt),isNaN(Rt.getTime()))throw new Error("Invalid number date parse")}catch(be){return console.error("Error parsing date (number):",xt,be),"Fecha inválida"}if(isNaN(Rt.getTime()))return"Fecha inválida";const _t=String(Rt.getDate()).padStart(2,"0"),re=String(Rt.getMonth()+1).padStart(2,"0"),ge=Rt.getFullYear();return X?`${_t}/${re}/${ge}`:`${_t}/${re}`},O=(xt,X)=>{const Rt=parseInt(xt),_t=X?parseInt(X)-1:-1;let re,ge;return _t>=0?(re=new Date(Rt,_t,1),ge=new Date(Rt,_t+1,0,23,59,59,999)):(re=new Date(Rt,0,1),ge=new Date(Rt,11,31,23,59,59,999)),{startDate:he.fromDate(re),endDate:he.fromDate(ge)}},E=()=>{const xt=parseInt(c.value),X=l.value?parseInt(l.value)-1:-1;if(X>=0){let Rt=xt,_t=X-1;return _t<0&&(_t=11,Rt-=1),O(Rt,(_t+1).toString().padStart(2,"0"))}else return O(xt-1,"")},R=(xt,X,Rt="fecha",_t=null,re=!1)=>xt.filter(be=>{if(_t&&!_t(be))return!1;if(re&&be.mesServicio){const[Ce,kn]=be.mesServicio.split("-").map(Number),Ps=new Date(Ce,kn,0,23,59,59,999);return he.fromDate(Ps)<=X}else{if(!be[Rt])return!1;const Ce=be[Rt]instanceof he?be[Rt]:be[Rt]?he.fromDate(new Date(be[Rt])):null;return!Ce||isNaN(Ce.toDate().getTime())?(console.warn("Skipping item with invalid date:",be),!1):Ce<=X}}).reduce((be,Ce)=>be+(Number(Ce.monto)||0),0),Z=(xt,X,Rt,_t="fecha",re=!1)=>xt.filter(ge=>{if(re&&ge.mesServicio){const[be,Ce]=ge.mesServicio.split("-").map(Number),kn=new Date(be,Ce-1,1),Ps=he.fromDate(kn),ki=new Date(be,Ce,0,23,59,59,999),Lr=he.fromDate(ki);return Ps<=Rt&&Lr>=X}else{if(!ge[_t])return!1;const be=ge[_t]instanceof he?ge[_t]:ge[_t]?he.fromDate(new Date(ge[_t])):null;return!be||isNaN(be.toDate().getTime())?(console.warn("Skipping item with invalid date:",ge),!1):be>=X&&be<=Rt}}),q=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(t.value,xt,X)}),st=de(()=>{const xt={};q.value.forEach(Rt=>{const _t=`${Rt.descripcion||"Sin Descripción"}_${Rt.categoria||"Sin Categoría"}`;xt[_t]||(xt[_t]={description:Rt.descripcion||"Sin Descripción",category:Rt.categoria||"Sin Categoría",total:0,items:[]},_[_t]===void 0&&(_[_t]=!1)),xt[_t].total+=Number(Rt.monto)||0,xt[_t].items.push(Rt)});const X=new Set(t.value.map(Rt=>`${Rt.descripcion||"Sin Descripción"}_${Rt.categoria||"Sin Categoría"}`));for(const Rt in _)X.has(Rt)||delete _[Rt];return Object.values(xt).sort((Rt,_t)=>Rt.description<_t.description?-1:Rt.description>_t.description?1:Rt.category<_t.category?-1:Rt.category>_t.category?1:0)}),ct=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(n.value.filter(Rt=>Rt.estadoProceso==="Pagado"),xt,X,"mesServicio",!0)}),At=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(n.value.filter(Rt=>Rt.estadoProceso!=="Pagado"&&Rt.estadoProceso!=="Cancelado"),xt,X,"mesServicio",!0)}),Dt=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(s.value.filter(Rt=>Rt.tipo==="capital"||Rt.tipo==="capital_inicial"),xt,X)}),K=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(s.value.filter(Rt=>Rt.tipo==="prestamo_recibido"),xt,X)}),H=de(()=>{const{startDate:xt,endDate:X}=O(c.value,l.value);return Z(s.value.filter(Rt=>Rt.tipo==="pago_prestamo"),xt,X)}),dt=de(()=>ct.value.reduce((xt,X)=>xt+(Number(X.costo)||0),0)),ut=de(()=>ct.value.reduce((xt,X)=>xt+(Number(X.costo)||0),0)+At.value.reduce((xt,X)=>xt+(Number(X.costo)||0),0)),V=de(()=>q.value.reduce((xt,X)=>xt+(Number(X.monto)||0),0)),Et=de(()=>Dt.value.reduce((xt,X)=>xt+(Number(X.monto)||0),0)),Lt=de(()=>K.value.reduce((xt,X)=>xt+(Number(X.monto)||0),0)),U=de(()=>{const{endDate:xt}=O(c.value,l.value),X=R(s.value,xt,"fecha",_t=>_t.tipo==="capital"||_t.tipo==="capital_inicial"),Rt=R(t.value,xt,"fecha");return X-Rt});de(()=>dt.value+Et.value+Lt.value);const C=de(()=>dt.value-V.value),$=de(()=>dt.value===0?0:C.value/dt.value*100),wt=(xt,X)=>{if(X==null)return 0;if(X===0)return xt>0?1/0:xt<0?-1/0:0;const Rt=(xt-X)/Math.abs(X)*100;return isFinite(Rt)?parseFloat(Rt.toFixed(1)):Rt},It=de(()=>wt(dt.value,u.value.ingresosOperacionalesPagados)),Ft=de(()=>wt(ut.value,u.value.ingresosOperacionalesProyectados)),Wt=de(()=>wt(V.value,u.value.gastos)),Xt=de(()=>wt(C.value,u.value.gananciaNetaOperacional)),se=de(()=>l.value===""?"line":"bar"),Kt=of(yu),ie=de(()=>{var xt;return l.value===""?`Evolución Anual ${c.value}`:`Resumen ${((xt=et.find(X=>X.value===l.value))==null?void 0:xt.name)||""} ${c.value}`}),fe=de(()=>{var xt;if(i.value)return{labels:[],datasets:[]};if(se.value==="line"){const X=Q,Rt={ingresosOperacionalesPagados:Array(12).fill(0),ingresosOperacionalesProyectados:Array(12).fill(0),gastos:Array(12).fill(0)};n.value.forEach(re=>{if(!re.mesServicio||!re.mesServicio.startsWith(c.value.toString()))return;const[ge,be]=re.mesServicio.split("-").map(Number),Ce=be-1;if(ge===parseInt(c.value)&&Ce>=0&&Ce<12){const kn=Number(re.costo)||0;re.estadoProceso==="Pagado"&&(Rt.ingresosOperacionalesPagados[Ce]+=kn),re.estadoProceso!=="Cancelado"&&(Rt.ingresosOperacionalesProyectados[Ce]+=kn)}}),t.value.forEach(re=>{if(!re.fecha)return;const ge=re.fecha instanceof he?re.fecha.toDate():new Date(re.fecha);if(!isNaN(ge.getTime())&&ge.getFullYear()===parseInt(c.value)){const be=ge.getMonth();be>=0&&be<12&&(Rt.gastos[be]+=Number(re.monto)||0)}});const _t=(re,ge)=>{const be=re.chart,{ctx:Ce,chartArea:kn}=be;if(!kn)return null;const Ps=Ce.createLinearGradient(0,kn.bottom,0,kn.top),ki=rt(ge,.2),Lr=rt(ge,.8);return Ps.addColorStop(0,ki),Ps.addColorStop(1,Lr),Ps};return{labels:X,datasets:[{label:"Ingresos Op. (Pagados)",data:Rt.ingresosOperacionalesPagados,borderColor:ht.greenBright,backgroundColor:re=>_t(re,ht.greenBright),fill:!0,tension:.4,pointRadius:3,pointBackgroundColor:ht.greenBright},{label:"Ingresos Op. (Proyectados)",data:Rt.ingresosOperacionalesProyectados,borderColor:ht.cyanBright,backgroundColor:re=>_t(re,ht.cyanBright),fill:!0,tension:.4,pointRadius:3,pointBackgroundColor:ht.cyanBright,borderDash:[5,5],pointStyle:"circle"},{label:"Gastos Op.",data:Rt.gastos,borderColor:ht.pinkBright,backgroundColor:re=>_t(re,ht.pinkBright),fill:!0,tension:.4,pointRadius:3,pointBackgroundColor:ht.pinkBright}]}}else return{labels:[l.value?((xt=et.find(X=>X.value===l.value))==null?void 0:xt.name)||"Mes":c.value],datasets:[{label:"Ingresos Op. (Pagados)",backgroundColor:rt(ht.greenBright,.8),borderColor:ht.greenBright,borderWidth:1,data:[dt.value],borderRadius:4,stack:"incomeStack"},{label:"Capital Inyectado (Periodo)",backgroundColor:rt(ht.purpleElectric,.8),borderColor:ht.purpleElectric,borderWidth:1,data:[Et.value],borderRadius:4,stack:"incomeStack"},{label:"Préstamos Recibidos (Periodo)",backgroundColor:rt(ht.yellowNeon,.8),borderColor:ht.yellowNeon,borderWidth:1,data:[Lt.value],borderRadius:4,stack:"incomeStack"},{label:"Ingresos Op. (Proyectados - No Pagados)",backgroundColor:rt(ht.cyanBright,.8),borderColor:ht.cyanBright,borderWidth:1,data:[At.value.reduce((X,Rt)=>X+(Number(Rt.costo)||0),0)],borderRadius:4,stack:"incomeStack"},{label:"Gastos Op. (Periodo)",backgroundColor:ht.pinkBright,borderColor:ht.pinkBright,borderWidth:1,data:[V.value],borderRadius:4,stack:"expenseStack"}]}}),Yt=de(()=>{const xt=se.value==="line";return{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!xt,grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#9CA3AF"}},y:{stacked:!xt,beginAtZero:!0,title:{display:!0,text:"Monto (GTQ)",color:"#9CA3AF"},ticks:{callback:X=>kt(X),color:"#9CA3AF"},grid:{color:"rgba(107, 114, 128, 0.2)"}}},plugins:{title:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.85)",titleColor:"#E5E7EB",bodyColor:"#D1D5DB",borderColor:"rgba(52, 211, 153, 0.5)",borderWidth:1,padding:10,callbacks:{label:X=>`${X.dataset.label||""}: ${kt(X.parsed.y)}`}},legend:{position:"bottom",labels:{color:"#9CA3AF",usePointStyle:xt,pointStyle:xt?"circle":"rectRounded"}},filler:{propagate:!0}},interaction:{mode:"index",intersect:!1},elements:{point:{radius:xt?3:0,hoverRadius:xt?5:0},bar:{}},animation:{duration:800,easing:"easeOutQuart"}}}),Ze=de(()=>{const xt={};if(q.value.forEach(re=>{const ge=re.categoria||"Sin Categoría";xt[ge]=(xt[ge]||0)+(Number(re.monto)||0)}),Object.keys(xt).length===0)return{labels:[],datasets:[]};const X=Object.keys(xt),Rt=Object.values(xt),_t=X.map(re=>rt(re));return{labels:X,datasets:[{label:"Gastos por Categoría",data:Rt,backgroundColor:_t,hoverOffset:8,borderColor:"#1F2937",borderWidth:2}]}}),Ie=Gt({responsive:!0,maintainAspectRatio:!1,animation:{animateRotate:!0,animateScale:!0},plugins:{title:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.85)",titleColor:"#E5E7EB",bodyColor:"#D1D5DB",borderColor:"rgba(52, 211, 153, 0.5)",borderWidth:1,padding:10,callbacks:{label:xt=>`${xt.label||""}: ${kt(xt.parsed)}`,afterLabel:xt=>{const X=xt.dataset.data.reduce((_t,re)=>_t+re,0),Rt=X===0?0:xt.parsed/X*100;return`(${parseFloat(Rt.toFixed(1))}%)`}}},legend:{position:"right",labels:{color:"#9CA3AF",boxWidth:12,padding:15}}}}),ts=()=>{x.value={fecha:new Date().toISOString().substr(0,10),descripcion:"",categoria:"",monto:""},w.value=!1,S.value=null,a.value=null,o.value=null},Zt=()=>{M.value={fecha:new Date().toISOString().substr(0,10),monto:"",descripcion:"",tipo:""},P.value=!1,L.value=null,a.value=null,o.value=null},me=()=>{Y.value={fecha:new Date().toISOString().substr(0,10),monto:"",entidad:"",descripcion:""},F.value=!1,pt.value=null,a.value=null,o.value=null},es=()=>{J.value={fecha:new Date().toISOString().substr(0,10),prestamoId:"",monto:"",descripcion:""},W.value=!1,it.value=null,a.value=null,o.value=null},en=xt=>{const X=`${xt.description||"Sin Descripción"}_${xt.category||"Sin Categoría"}`;_[X]=!_[X]},ho=xt=>{w.value=!0,S.value=xt.id,x.value={fecha:xt.fecha instanceof he?xt.fecha.toDate().toISOString().substr(0,10):xt.fecha?new Date(xt.fecha).toISOString().substr(0,10):new Date().toISOString().substr(0,10),descripcion:xt.descripcion||"",categoria:xt.categoria||"",monto:xt.monto!==void 0?Number(xt.monto):""},h.value=!0,a.value=null,o.value=null},Tn=xt=>{P.value=!0,L.value=xt.id,M.value={fecha:xt.fecha instanceof he?xt.fecha.toDate().toISOString().substr(0,10):xt.fecha?new Date(xt.fecha).toISOString().substr(0,10):new Date().toISOString().substr(0,10),monto:xt.monto!==void 0?Number(xt.monto):"",descripcion:xt.descripcion||"",tipo:xt.tipo||""},g.value=!0,a.value=null,o.value=null},Si=xt=>{F.value=!0,pt.value=xt.id,Y.value={fecha:xt.fecha instanceof he?xt.fecha.toDate().toISOString().substr(0,10):xt.fecha?new Date(xt.fecha).toISOString().substr(0,10):new Date().toISOString().substr(0,10),monto:xt.monto!==void 0?Number(xt.monto):"",entidad:xt.entidad||"",descripcion:xt.descripcion||""},p.value=!0,a.value=null,o.value=null},or=xt=>{W.value=!0,it.value=xt.id,J.value={fecha:xt.fecha instanceof he?xt.fecha.toDate().toISOString().substr(0,10):xt.fecha?new Date(xt.fecha).toISOString().substr(0,10):new Date().toISOString().substr(0,10),prestamoId:xt.prestamoId||"",monto:xt.monto!==void 0?Number(xt.monto):"",descripcion:xt.descripcion||""},y.value=!0,a.value=null,o.value=null},Nn=async()=>{if(!x.value.descripcion||!x.value.monto||!x.value.categoria){a.value="Por favor, complete todos los campos obligatorios (Descripción, Monto, Categoría).";return}const xt=Number(x.value.monto);if(isNaN(xt)||xt<0){a.value="El monto debe ser un número positivo.";return}i.value=!0,a.value=null,o.value=null;try{const X={descripcion:x.value.descripcion.trim(),categoria:x.value.categoria.trim(),monto:xt,fecha:he.fromDate(new Date(x.value.fecha))};if(w.value&&S.value){const Rt=bs(qe,"gastos",S.value);await Aa(Rt,X),o.value="Gasto actualizado con éxito!"}else X.createdAt=Dl(),await Nl(Kn(qe,"gastos"),X),o.value="Gasto registrado con éxito!";h.value=!1,ts(),await ns()}catch(X){console.error("Error saving/updating expense:",X),a.value=`Error al guardar/actualizar el gasto: ${X.message}`}finally{i.value=!1}},Te=async()=>{if(!M.value.monto||!M.value.tipo){a.value="Por favor, ingrese el monto y seleccione el tipo de movimiento de capital.";return}const xt=Number(M.value.monto);if(isNaN(xt)||xt<=0){a.value="El monto debe ser un número positivo mayor a cero.";return}i.value=!0,a.value=null,o.value=null;try{const X={tipo:M.value.tipo,monto:xt,descripcion:M.value.descripcion?M.value.descripcion.trim():"",fecha:he.fromDate(new Date(M.value.fecha))};if(P.value&&L.value){const Rt=bs(qe,"movimientosExtras",L.value);await Aa(Rt,X),o.value="Movimiento de capital actualizado con éxito!"}else X.createdAt=Dl(),await Nl(Kn(qe,"movimientosExtras"),X),o.value="Movimiento de capital registrado con éxito!";g.value=!1,Zt(),await ns()}catch(X){console.error("Error saving/updating capital:",X),a.value=`Error al guardar/actualizar el capital: ${X.message}`}finally{i.value=!1}},nn=async()=>{if(!Y.value.monto||!Y.value.entidad){a.value="Por favor, ingrese el monto y la entidad del préstamo.";return}const xt=Number(Y.value.monto);if(isNaN(xt)||xt<=0){a.value="El monto debe ser un número positivo mayor a cero.";return}i.value=!0,a.value=null,o.value=null;try{const X={tipo:"prestamo_recibido",entidad:Y.value.entidad.trim(),monto:xt,fecha:he.fromDate(new Date(Y.value.fecha)),descripcion:Y.value.descripcion?Y.value.descripcion.trim():""};if(F.value&&pt.value){const Rt=bs(qe,"movimientosExtras",pt.id);await Aa(Rt,X),o.value="Préstamo actualizado con éxito!"}else X.createdAt=Dl(),await Nl(Kn(qe,"movimientosExtras"),X),o.value="Préstamo registrado con éxito!";p.value=!1,me(),await ns()}catch(X){console.error("Error saving/updating loan:",X),a.value=`Error al guardar/actualizar el préstamo: ${X.message}`}finally{i.value=!1}},fo=async()=>{if(!J.value.fecha||!J.value.prestamoId||!J.value.monto){a.value="Por favor, complete todos los campos obligatorios.";return}const xt=Number(J.value.monto);if(isNaN(xt)||xt<=0){a.value="El monto del pago debe ser un número positivo mayor a cero.";return}i.value=!0,a.value=null,o.value=null;try{const X=Fn.value.find(_t=>_t.id===J.value.prestamoId);if(!X){a.value="El préstamo seleccionado no es válido.";return}const Rt={tipo:"pago_prestamo",prestamoId:J.value.prestamoId,entidadPrestamo:X.entidad,monto:xt,fecha:he.fromDate(new Date(J.value.fecha)),descripcion:J.value.descripcion?J.value.descripcion.trim():"",createdAt:Dl()};if(W.value&&it.value){const _t=bs(qe,"movimientosExtras",it.value);await Aa(_t,Rt),o.value="Pago de préstamo actualizado con éxito!"}else await Nl(Kn(qe,"movimientosExtras"),Rt),o.value="Pago de préstamo registrado con éxito!";y.value=!1,es(),await ns()}catch(X){console.error("Error saving loan payment:",X),a.value=`Error al guardar el pago del préstamo: ${X.message}`}finally{i.value=!1}},Rn=()=>(a.value=null,o.value=null,prompt("Ingrese la contraseña para eliminar:")),Ui=async xt=>{if(!confirm("¿Está seguro de que desea eliminar este gasto? Esta acción no se puede deshacer.")){o.value="Eliminación de gasto cancelada.";return}const Rt=Rn();if(Rt===null){o.value="Eliminación de gasto cancelada.";return}if(Rt!==eg){a.value="Contraseña incorrecta. No se pudo eliminar el gasto.";return}i.value=!0,a.value=null,o.value=null;try{await Tl(bs(qe,"gastos",xt)),o.value="Gasto eliminado con éxito.",await ns()}catch(_t){console.error("Error deleting expense:",_t),a.value=`Error al eliminar el gasto: ${_t.message}`}finally{i.value=!1}},qi=async xt=>{if(!confirm("¿Está seguro de que desea eliminar este movimiento de capital? Esta acción no se puede deshacer.")){o.value="Eliminación de capital cancelada.";return}const Rt=Rn();if(Rt===null){o.value="Eliminación de capital cancelada.";return}if(Rt!==eg){a.value="Contraseña incorrecta. No se pudo eliminar el capital.";return}i.value=!0,a.value=null,o.value=null;try{await Tl(bs(qe,"movimientosExtras",xt)),o.value="Movimiento de capital eliminado con éxito.",await ns()}catch(_t){console.error("Error deleting capital:",_t),a.value=`Error al eliminar el capital: ${_t.message}`}finally{i.value=!1}},xe=async xt=>{if(!confirm("¿Está seguro de que desea eliminar este préstamo? Esta acción no se puede deshacer.")){o.value="Eliminación de préstamo cancelada.";return}const Rt=Rn();if(Rt===null){o.value="Eliminación de préstamo cancelada.";return}if(Rt!==eg){a.value="Contraseña incorrecta. No se pudo eliminar el préstamo.";return}i.value=!0,a.value=null,o.value=null;try{await Tl(bs(qe,"movimientosExtras",xt)),o.value="Préstamo eliminado con éxito.",await ns()}catch(_t){console.error("Error deleting loan:",_t),a.value=`Error al eliminar el préstamo: ${_t.message}`}finally{i.value=!1}},Ci=async xt=>{if(!confirm("¿Está seguro de que desea eliminar este pago de préstamo? Esta acción no se puede deshacer.")){o.value="Eliminación de pago de préstamo cancelada.";return}const Rt=Rn();if(Rt===null){o.value="Eliminación de pago de préstamo cancelada.";return}if(Rt!==eg){a.value="Contraseña incorrecta. No se pudo eliminar el pago de préstamo.";return}i.value=!0,a.value=null,o.value=null;try{await Tl(bs(qe,"movimientosExtras",xt)),o.value="Pago de préstamo eliminado con éxito.",await ns()}catch(_t){console.error("Error deleting loan payment:",_t),a.value=`Error al eliminar el pago del préstamo: ${_t.message}`}finally{i.value=!1}},ns=async()=>{i.value=!0,r.value=null;try{const xt=Gs(Kn(qe,"gastos"),Ra("fecha","asc")),X=Gs(Kn(qe,"tiendas"),Ra("mesServicio","asc")),Rt=Gs(Kn(qe,"movimientosExtras"),Ra("fecha","asc")),[_t,re,ge]=await Promise.all([xs(xt),xs(X),xs(Rt)]);t.value=_t.docs.map(Ce=>({id:Ce.id,...Ce.data()})),n.value=re.docs.map(Ce=>({id:Ce.id,...Ce.data()})),s.value=ge.docs.map(Ce=>({id:Ce.id,...Ce.data()}));const be=new Set;t.value.forEach(Ce=>{Ce.categoria&&typeof Ce.categoria=="string"&&Ce.categoria.trim()!==""&&be.add(Ce.categoria.trim())}),A.value=Array.from(be).sort(),await As()}catch(xt){console.error("Error loading data from Firebase:",xt),r.value="No se pudieron cargar los datos. Intente de nuevo.",t.value=[],n.value=[],s.value=[],A.value=[],u.value={ingresosOperacionalesPagados:null,ingresosOperacionalesProyectados:null,gastos:null,gananciaNetaOperacional:null}}finally{i.value=!1}},As=async()=>{const{startDate:xt,endDate:X}=E(),Rt=Z(t.value,xt,X).reduce((ge,be)=>ge+(Number(be.monto)||0),0),_t=Z(n.value.filter(ge=>ge.estadoProceso==="Pagado"),xt,X,"mesServicio",!0).reduce((ge,be)=>ge+(Number(be.costo)||0),0),re=Z(n.value.filter(ge=>ge.estadoProceso!=="Cancelado"),xt,X,"mesServicio",!0).reduce((ge,be)=>ge+(Number(be.costo)||0),0);u.value={ingresosOperacionalesPagados:_t,ingresosOperacionalesProyectados:re,gastos:Rt,gananciaNetaOperacional:_t-Rt}},Fn=de(()=>K.value);co(async()=>{await ns(),Kt.value=se.value==="line"?xm:yu}),$i([l,c],async()=>{i.value||await As()}),$i(se,xt=>{Kt.value=xt==="line"?xm:yu},{immediate:!0});let Mn=null;return $i([a,o],xt=>{(xt[0]||xt[1])&&(clearTimeout(Mn),Mn=setTimeout(()=>{a.value=null,o.value=null},5e3))}),(xt,X)=>{var Rt;return at(),ft(ye,null,[X[92]||(X[92]=d("div",{class:"absolute top-0 left-0 w-full h-[250px] -z-10 overflow-hidden pointer-events-none"},[d("div",{class:"absolute top-0 left-0 w-96 h-96 bg-emerald-500 rounded-full filter blur-3xl opacity-[0.08]","aria-hidden":"true"}),d("div",{class:"absolute top-[80px] right-0 w-96 h-96 bg-cyan-500 rounded-full filter blur-3xl opacity-[0.08]","aria-hidden":"true"}),d("div",{class:"absolute top-[180px] left-1/3 w-96 h-96 bg-purple-500 rounded-full filter blur-3xl opacity-[0.08]","aria-hidden":"true"})],-1)),d("div",det,[X[91]||(X[91]=d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-300 glow-emerald text-center mb-8 animate-[fade-in-down_0.6s_ease-out]"}," Control de Gastos y Análisis Financiero ",-1)),d("div",het,[d("div",fet,[d("div",pet,[oe(d("select",{"onUpdate:modelValue":X[0]||(X[0]=_t=>l.value=_t),onChange:X[1]||(X[1]=(..._t)=>xt.filterByDate&&xt.filterByDate(..._t)),class:"input-primary select-input w-full sm:w-48"},[X[28]||(X[28]=d("option",{value:"",class:"option-dark text-gray-500"},"Todo el Año",-1)),(at(!0),ft(ye,null,Ke(Hs(et),_t=>(at(),ft("option",{key:_t.value,value:_t.value,class:"option-dark"},lt(_t.name),9,get))),128))],544),[[Vn,l.value]]),oe(d("select",{"onUpdate:modelValue":X[2]||(X[2]=_t=>c.value=_t),onChange:X[3]||(X[3]=(..._t)=>xt.filterByDate&&xt.filterByDate(..._t)),class:"input-primary select-input w-full sm:w-32"},[(at(!0),ft(ye,null,Ke(Hs(mt),_t=>(at(),ft("option",{key:_t,value:_t,class:"option-dark"},lt(_t),9,met))),128))],544),[[Vn,c.value]])]),d("div",vet,[d("button",{onClick:X[4]||(X[4]=_t=>{g.value=!0,Zt()}),class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0 group"},X[29]||(X[29]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),Vt(" Capital ")],-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)])),d("button",{onClick:X[5]||(X[5]=_t=>{p.value=!0,me()}),class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0 group"},X[30]||(X[30]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),Vt(" Préstamo ")],-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)])),d("button",{onClick:X[6]||(X[6]=_t=>{y.value=!0,es()}),class:"btn-secondary tech-btn relative overflow-hidden flex-shrink-0 group"},X[31]||(X[31]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m15.356 2H15m0 0l-3-3m3 3l3-3M4.582 12H9m11 0h-2m2 0l-3 3m3-3l3 3"})]),Vt(" Pago Préstamo ")],-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)])),d("button",{onClick:X[7]||(X[7]=_t=>{h.value=!0,ts()}),class:"btn-primary flex-shrink-0 tech-btn relative overflow-hidden group"},X[32]||(X[32]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),Vt(" Registrar Gasto ")],-1),d("span",{class:"tech-btn-bg absolute inset-0"},null,-1)]))])])]),d("div",yet,[d("div",bet,[d("div",wet,[d("div",null,[X[33]||(X[33]=d("h3",{class:"summary-title"},"Ingresos Op. (Pagados)",-1)),d("p",xet,lt(kt(dt.value)),1)]),X[34]||(X[34]=d("div",{class:"summary-icon-bg bg-emerald-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),l.value!==""&&u.value.ingresosOperacionalesPagados!==null?(at(),ft("p",_et,[d("span",{class:ve([It.value>=0?"text-emerald-400":"text-red-400","font-medium"])},lt(It.value===1/0||It.value===-1/0?"Cambio Grande":(It.value>=0?"+":"")+It.value)+"% ",3),X[35]||(X[35]=Vt(" vs mes anterior "))])):Ut("",!0)]),d("div",Cet,[d("div",ket,[d("div",null,[X[36]||(X[36]=d("h3",{class:"summary-title"},"Ingresos Op. Proyectados",-1)),d("p",Aet,lt(kt(ut.value)),1)]),X[37]||(X[37]=d("div",{class:"summary-icon-bg bg-cyan-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2M3 10h18M7 15h1m4 0h1m5-11l-3-3m0 0l-3 3m3-3v12"})])],-1))]),l.value!==""&&u.value.ingresosOperacionalesProyectados!==null?(at(),ft("p",Pet,[d("span",{class:ve([Ft.value>=0?"text-emerald-400":"text-red-400","font-medium"])},lt(Ft.value===1/0||Ft.value===-1/0?"Cambio Grande":(Ft.value>=0?"+":"")+Ft.value)+"% ",3),X[38]||(X[38]=Vt(" vs mes anterior "))])):Ut("",!0)]),d("div",Eet,[d("div",Iet,[d("div",null,[X[39]||(X[39]=d("h3",{class:"summary-title"},"Gastos Op. (Periodo)",-1)),X[40]||(X[40]=Vt()),d("p",Tet,lt(kt(V.value)),1)]),X[41]||(X[41]=d("div",{class:"summary-icon-bg bg-red-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1))]),l.value!==""&&u.value.gastos!==null?(at(),ft("p",Net,[d("span",{class:ve([Wt.value<=0?"text-emerald-400":"text-red-400","font-medium"])},lt(Wt.value===1/0||Wt.value===-1/0?"Cambio Grande":(Wt.value>=0?"+":"")+Wt.value)+"% ",3),X[42]||(X[42]=Vt(" vs mes anterior "))])):Ut("",!0)]),d("div",Det,[d("div",Let,[d("div",null,[X[43]||(X[43]=d("h3",{class:"summary-title"},"Capital Inyectado (Periodo)",-1)),X[44]||(X[44]=Vt()),d("p",Met,lt(kt(Et.value)),1)]),X[45]||(X[45]=d("div",{class:"summary-icon-bg bg-purple-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5a2 2 0 10-2 2h2zm-2 20h4m-4 0h-2M4 12H2m10 8V6m0 14H8m4-14v14m0 0h8m0-14H12M4 6h16"})])],-1))]),X[46]||(X[46]=d("p",{class:"summary-comparison"}," ",-1))]),d("div",Oet,[d("div",Ret,[d("div",null,[X[47]||(X[47]=d("h3",{class:"summary-title"},"Préstamos Recibidos (Periodo)",-1)),X[48]||(X[48]=Vt()),d("p",Fet,lt(kt(Lt.value)),1)]),X[49]||(X[49]=d("div",{class:"summary-icon-bg bg-yellow-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),X[50]||(X[50]=d("p",{class:"summary-comparison"}," ",-1))]),d("div",Bet,[d("div",jet,[d("div",null,[X[51]||(X[51]=d("h3",{class:"summary-title"},"Saldo Capital Trabajo",-1)),d("p",$et,lt(kt(U.value)),1)]),X[52]||(X[52]=d("div",{class:"summary-icon-bg bg-green-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 7h6m-3 3v6m-2-3H8m3 0h2m6 0H9a2 2 0 01-2-2V5a2 2 0 012-2h6a2 2 0 012 2v7a2 2 0 01-2 2z"})])],-1))]),d("p",Vet," Saldo acumulado hasta "+lt(I(O(c.value,l.value).endDate.toDate(),!0)),1)])]),d("div",zet,[d("div",Uet,[d("div",qet,[d("div",null,[X[53]||(X[53]=d("h3",{class:"summary-title"},"Ganancia Neta Op.",-1)),d("p",{class:ve(["summary-amount",C.value>=0?"text-blue-400":"text-red-400"])},lt(kt(C.value)),3)]),X[54]||(X[54]=d("div",{class:"summary-icon-bg bg-blue-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))]),l.value!==""&&u.value.gananciaNetaOperacional!==null?(at(),ft("p",Het,[d("span",{class:ve([Xt.value>=0?"text-emerald-400":"text-red-400","font-medium"])},lt(Xt.value===1/0||Xt.value===-1/0?"Cambio Grande":(Xt.value>=0?"+":"")+Xt.value)+"% ",3),X[55]||(X[55]=Vt(" vs mes anterior "))])):Ut("",!0)]),d("div",Wet,[d("div",Get,[d("div",null,[X[56]||(X[56]=d("h3",{class:"summary-title"},"Margen Op.",-1)),d("p",{class:ve(["summary-amount",$.value>=25?"text-purple-400":$.value>=0?"text-yellow-400":"text-red-400"])},lt($.value.toFixed(1))+"% ",3)]),X[57]||(X[57]=d("div",{class:"summary-icon-bg bg-purple-900/30"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))]),d("div",Ket,[d("div",{class:ve(["h-2.5 rounded-full transition-all duration-500 ease-out",$.value>=40?"bg-emerald-500":$.value>=20?"bg-blue-500":$.value>=0?"bg-purple-500":"bg-red-500"]),style:Wr({width:`${Math.min(Math.max(0,$.value),100)}%`})},null,6)]),$.value<0?(at(),ft("p",Yet,"Pérdida operativa en el periodo.")):$.value>0&&$.value<20?(at(),ft("p",Xet,"Margen operativo bajo, revisar costos.")):$.value>=20&&$.value<40?(at(),ft("p",Qet,"Margen operativo sólido.")):$.value>=40?(at(),ft("p",Jet,"Excelente margen operativo.")):Ut("",!0)])]),d("div",Zet,[d("div",tnt,[d("h3",ent,lt(ie.value),1),d("div",nnt,[i.value?(at(),ft("div",snt,"Cargando gráfico...")):fe.value.datasets.length>0&&fe.value.labels.length>0&&fe.value.datasets.some(_t=>_t.data.some(re=>(re||0)>0))?(at(),cs(Ou(Kt.value),{data:fe.value,options:Yt.value,key:se.value},null,8,["data","options"])):(at(),ft("div",int,"No hay datos suficientes para el gráfico."))])]),d("div",rnt,[X[58]||(X[58]=d("h3",{class:"chart-title"},"Distribución de Gastos por Categoría",-1)),d("div",ont,[i.value?(at(),ft("div",ant,"Cargando gráfico...")):Ze.value.datasets.length>0&&((Rt=Ze.value.datasets[0])!=null&&Rt.data.some(_t=>(_t||0)>0))?(at(),cs(Hs(gy),{key:1,data:Ze.value,options:Ie.value},null,8,["data","options"])):(at(),ft("div",lnt,"No hay gastos para graficar."))])])]),d("div",cnt,[X[72]||(X[72]=d("h3",{class:"text-xl font-semibold text-slate-200 mb-4"},"Detalle de Movimientos del Periodo",-1)),d("div",unt,[X[62]||(X[62]=d("h4",{class:"text-lg font-medium text-slate-300 mb-3 border-b border-slate-700 pb-2"},"Gastos Operativos",-1)),st.value.length===0?(at(),ft("div",dnt,"No hay gastos registrados en este periodo.")):(at(),ft("ul",hnt,[(at(!0),ft(ye,null,Ke(st.value,_t=>(at(),ft("li",{key:_t.description+_t.category,class:ve(["bg-slate-700/50 p-3 rounded-md cursor-pointer transition-colors duration-150",{"bg-slate-600/60":_[_t.description+"_"+_t.category]}]),onClick:re=>en(_t)},[d("div",pnt,[d("div",null,[d("p",gnt,lt(_t.description),1),d("p",mnt,"Categoría: "+lt(_t.category||"Sin Categoría")+" ("+lt(_t.items.length)+" item"+lt(_t.items.length!==1?"s":"")+")",1)]),d("div",vnt,[d("p",ynt,lt(kt(_t.total)),1),(at(),ft("svg",{xmlns:"http://www.w3.org/2000/svg",class:ve(["h-5 w-5 text-slate-400 transform transition-transform duration-200",{"rotate-180":_[_t.description+"_"+_t.category]}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},X[59]||(X[59]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),_[_t.description+"_"+_t.category]?(at(),ft("ul",bnt,[(at(!0),ft(ye,null,Ke(_t.items,re=>(at(),ft("li",{key:re.id,class:"bg-slate-800/60 p-2 rounded-md flex justify-between items-center text-sm border border-slate-700/50"},[d("div",null,[d("p",wnt,lt(I(re.fecha,!0)),1)]),d("div",xnt,[d("p",_nt,lt(kt(re.monto)),1),d("button",{onClick:gr(ge=>ho(re),["stop"]),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150 ml-2",title:"Editar Gasto"},X[60]||(X[60]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})],-1)]),8,Snt),d("button",{onClick:gr(ge=>Ui(re.id),["stop"]),class:"text-red-400 hover:text-red-300 ml-2 transition-colors duration-150",title:"Eliminar Gasto"},X[61]||(X[61]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m14 0H5m2 0V5a2 2 0 012-2h6a2 2 0 012 2v2m-4 0v7m-4-7v7"})],-1)]),8,Cnt)])]))),128))])):Ut("",!0)],10,fnt))),128))]))]),d("div",knt,[X[65]||(X[65]=d("h4",{class:"text-lg font-medium text-slate-300 mb-3 border-b border-slate-700 pb-2"},"Movimientos de Capital",-1)),Dt.value.length===0?(at(),ft("div",Ant,"No hay movimientos de capital registrados en este periodo.")):(at(),ft("ul",Pnt,[(at(!0),ft(ye,null,Ke(Dt.value,_t=>(at(),ft("li",{key:_t.id,class:"bg-slate-700/50 p-3 rounded-md flex justify-between items-center"},[d("div",null,[d("p",Ent,lt(_t.tipo==="capital_inicial"?"Capital Inicial":"Aporte de Capital Adicional"),1),d("p",Int,lt(I(_t.fecha,!1))+" | "+lt(_t.descripcion||"Sin descripción"),1)]),d("div",Tnt,[d("p",Nnt,lt(kt(_t.monto)),1),d("button",{onClick:re=>Tn(_t),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150 ml-2",title:"Editar Capital"},X[63]||(X[63]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})],-1)]),8,Dnt),d("button",{onClick:re=>qi(_t.id),class:"text-red-400 hover:text-red-300 ml-2 transition-colors duration-150",title:"Eliminar Capital"},X[64]||(X[64]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m14 0H5m2 0V5a2 2 0 012-2h6a2 2 0 012 2v2m-4 0v7m-4-7v7"})],-1)]),8,Lnt)])]))),128))]))]),d("div",null,[X[68]||(X[68]=d("h4",{class:"text-lg font-medium text-slate-300 mb-3 border-b border-slate-700 pb-2"},"Préstamos Recibidos",-1)),K.value.length===0?(at(),ft("div",Mnt,"No hay préstamos recibidos registrados en este periodo.")):(at(),ft("ul",Ont,[(at(!0),ft(ye,null,Ke(K.value,_t=>(at(),ft("li",{key:_t.id,class:"bg-slate-700/50 p-3 rounded-md flex justify-between items-center"},[d("div",null,[d("p",Rnt,"Préstamo de "+lt(_t.entidad),1),d("p",Fnt,lt(I(_t.fecha,!1))+" | "+lt(_t.descripcion||"Sin descripción"),1)]),d("div",Bnt,[d("p",jnt,lt(kt(_t.monto)),1),d("button",{onClick:re=>Si(_t),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150 ml-2",title:"Editar Préstamo"},X[66]||(X[66]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})],-1)]),8,$nt),d("button",{onClick:re=>xe(_t.id),class:"text-red-400 hover:text-red-300 ml-2 transition-colors duration-150",title:"Eliminar Préstamo"},X[67]||(X[67]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m14 0H5m2 0V5a2 2 0 012-2h6a2 2 0 012 2v2m-4 0v7m-4-7v7"})],-1)]),8,Vnt)])]))),128))]))]),d("div",null,[X[71]||(X[71]=d("h4",{class:"text-lg font-medium text-slate-300 mb-3 border-b border-slate-700 pb-2"},"Pagos de Préstamos",-1)),H.value.length===0?(at(),ft("div",znt,"No hay pagos de préstamos registrados en este periodo.")):(at(),ft("ul",Unt,[(at(!0),ft(ye,null,Ke(H.value,_t=>(at(),ft("li",{key:_t.id,class:"bg-slate-700/50 p-3 rounded-md flex justify-between items-center"},[d("div",null,[d("p",qnt,"Pago a "+lt(_t.entidadPrestamo),1),d("p",Hnt,lt(I(_t.fecha,!1))+" | "+lt(_t.descripcion||"Sin descripción"),1)]),d("div",Wnt,[d("p",Gnt,lt(kt(_t.monto)),1),d("button",{onClick:re=>or(_t),class:"text-blue-400 hover:text-blue-300 transition-colors duration-150 ml-2",title:"Editar Pago de Préstamo"},X[69]||(X[69]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})],-1)]),8,Knt),d("button",{onClick:re=>Ci(_t.id),class:"text-red-400 hover:text-red-300 ml-2 transition-colors duration-150",title:"Eliminar Pago de Préstamo"},X[70]||(X[70]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m14 0H5m2 0V5a2 2 0 012-2h6a2 2 0 012 2v2m-4 0v7m-4-7v7"})],-1)]),8,Ynt)])]))),128))]))])]),ze(wi,{name:"modal"},{default:an(()=>[h.value?(at(),ft("div",Xnt,[d("div",Qnt,[d("h3",Jnt,lt(w.value?"Editar Gasto":"Registrar Nuevo Gasto"),1),a.value?(at(),ft("div",Znt,lt(a.value),1)):Ut("",!0),o.value?(at(),ft("div",tst,lt(o.value),1)):Ut("",!0),d("form",{onSubmit:gr(Nn,["prevent"])},[d("div",est,[X[73]||(X[73]=d("label",{for:"gasto-fecha",class:"block text-sm font-medium text-gray-400 mb-1"},"Fecha",-1)),oe(d("input",{type:"date",id:"gasto-fecha","onUpdate:modelValue":X[8]||(X[8]=_t=>x.value.fecha=_t),required:"",class:"input-primary"},null,512),[[ke,x.value.fecha]])]),d("div",nst,[X[74]||(X[74]=d("label",{for:"gasto-descripcion",class:"block text-sm font-medium text-gray-400 mb-1"},"Descripción",-1)),oe(d("input",{type:"text",id:"gasto-descripcion","onUpdate:modelValue":X[9]||(X[9]=_t=>x.value.descripcion=_t),required:"",class:"input-primary",placeholder:"Ej: Compra de suministros"},null,512),[[ke,x.value.descripcion]])]),d("div",sst,[X[75]||(X[75]=d("label",{for:"gasto-categoria",class:"block text-sm font-medium text-gray-400 mb-1"},"Categoría",-1)),oe(d("input",{type:"text",id:"gasto-categoria","onUpdate:modelValue":X[10]||(X[10]=_t=>x.value.categoria=_t),required:"",class:"input-primary",placeholder:"Ej: Oficina, Transporte",list:"category-suggestions"},null,512),[[ke,x.value.categoria]]),d("datalist",ist,[(at(!0),ft(ye,null,Ke(A.value,_t=>(at(),ft("option",{key:_t,value:_t},null,8,rst))),128))])]),d("div",ost,[X[76]||(X[76]=d("label",{for:"gasto-monto",class:"block text-sm font-medium text-gray-400 mb-1"},"Monto (GTQ)",-1)),oe(d("input",{type:"number",id:"gasto-monto","onUpdate:modelValue":X[11]||(X[11]=_t=>x.value.monto=_t),required:"",min:"0",step:"0.01",class:"input-primary",placeholder:"Ej: 150.00"},null,512),[[ke,x.value.monto]])]),d("div",ast,[d("button",{type:"button",onClick:X[12]||(X[12]=_t=>{h.value=!1,ts()}),class:"btn-secondary"},"Cancelar"),d("button",{type:"submit",class:"btn-primary",disabled:i.value},lt(w.value?"Actualizar Gasto":"Guardar Gasto"),9,lst)])],32)])])):Ut("",!0)]),_:1}),ze(wi,{name:"modal"},{default:an(()=>[g.value?(at(),ft("div",cst,[d("div",ust,[d("h3",dst,lt(P.value?"Editar Movimiento de Capital":"Registrar Movimiento de Capital"),1),a.value?(at(),ft("div",hst,lt(a.value),1)):Ut("",!0),o.value?(at(),ft("div",fst,lt(o.value),1)):Ut("",!0),d("form",{onSubmit:gr(Te,["prevent"])},[d("div",pst,[X[77]||(X[77]=d("label",{for:"capital-fecha",class:"block text-sm font-medium text-gray-400 mb-1"},"Fecha",-1)),oe(d("input",{type:"date",id:"capital-fecha","onUpdate:modelValue":X[13]||(X[13]=_t=>M.value.fecha=_t),required:"",class:"input-primary"},null,512),[[ke,M.value.fecha]])]),d("div",gst,[X[79]||(X[79]=d("label",{for:"capital-tipo",class:"block text-sm font-medium text-gray-400 mb-1"},"Tipo de Movimiento",-1)),oe(d("select",{id:"capital-tipo","onUpdate:modelValue":X[14]||(X[14]=_t=>M.value.tipo=_t),required:"",class:"input-primary select-input"},X[78]||(X[78]=[d("option",{value:""},"Seleccione un tipo",-1),d("option",{value:"capital_inicial"},"Capital Inicial",-1),d("option",{value:"capital"},"Aporte Adicional",-1)]),512),[[Vn,M.value.tipo]])]),d("div",mst,[X[80]||(X[80]=d("label",{for:"capital-monto",class:"block text-sm font-medium text-gray-400 mb-1"},"Monto (GTQ)",-1)),oe(d("input",{type:"number",id:"capital-monto","onUpdate:modelValue":X[15]||(X[15]=_t=>M.value.monto=_t),required:"",min:"0",step:"0.01",class:"input-primary",placeholder:"Ej: 5000.00"},null,512),[[ke,M.value.monto]])]),d("div",vst,[X[81]||(X[81]=d("label",{for:"capital-descripcion",class:"block text-sm font-medium text-gray-400 mb-1"},"Descripción (Opcional)",-1)),oe(d("textarea",{id:"capital-descripcion","onUpdate:modelValue":X[16]||(X[16]=_t=>M.value.descripcion=_t),class:"input-primary",placeholder:"Ej: Capital inicial aportado"},null,512),[[ke,M.value.descripcion]])]),d("div",yst,[d("button",{type:"button",onClick:X[17]||(X[17]=_t=>{g.value=!1,Zt()}),class:"btn-secondary"},"Cancelar"),d("button",{type:"submit",class:"btn-primary",disabled:i.value},lt(P.value?"Actualizar Movimiento":"Guardar Movimiento"),9,bst)])],32)])])):Ut("",!0)]),_:1}),ze(wi,{name:"modal"},{default:an(()=>[p.value?(at(),ft("div",wst,[d("div",xst,[d("h3",_st,lt(F.value?"Editar Préstamo":"Registrar Préstamo Recibido"),1),a.value?(at(),ft("div",Sst,lt(a.value),1)):Ut("",!0),o.value?(at(),ft("div",Cst,lt(o.value),1)):Ut("",!0),d("form",{onSubmit:gr(nn,["prevent"])},[d("div",kst,[X[82]||(X[82]=d("label",{for:"prestamo-fecha",class:"block text-sm font-medium text-gray-400 mb-1"},"Fecha",-1)),oe(d("input",{type:"date",id:"prestamo-fecha","onUpdate:modelValue":X[18]||(X[18]=_t=>Y.value.fecha=_t),required:"",class:"input-primary"},null,512),[[ke,Y.value.fecha]])]),d("div",Ast,[X[83]||(X[83]=d("label",{for:"prestamo-entidad",class:"block text-sm font-medium text-gray-400 mb-1"},"Entidad",-1)),oe(d("input",{type:"text",id:"prestamo-entidad","onUpdate:modelValue":X[19]||(X[19]=_t=>Y.value.entidad=_t),required:"",class:"input-primary",placeholder:"Ej: Banco, Proveedor"},null,512),[[ke,Y.value.entidad]])]),d("div",Pst,[X[84]||(X[84]=d("label",{for:"prestamo-monto",class:"block text-sm font-medium text-gray-400 mb-1"},"Monto (GTQ)",-1)),oe(d("input",{type:"number",id:"prestamo-monto","onUpdate:modelValue":X[20]||(X[20]=_t=>Y.value.monto=_t),required:"",min:"0",step:"0.01",class:"input-primary",placeholder:"Ej: 10000.00"},null,512),[[ke,Y.value.monto]])]),d("div",Est,[X[85]||(X[85]=d("label",{for:"prestamo-descripcion",class:"block text-sm font-medium text-gray-400 mb-1"},"Descripción (Opcional)",-1)),oe(d("textarea",{id:"prestamo-descripcion","onUpdate:modelValue":X[21]||(X[21]=_t=>Y.value.descripcion=_t),class:"input-primary",placeholder:"Ej: Préstamo para capital de trabajo"},null,512),[[ke,Y.value.descripcion]])]),d("div",Ist,[d("button",{type:"button",onClick:X[22]||(X[22]=_t=>{p.value=!1,me()}),class:"btn-secondary"},"Cancelar"),d("button",{type:"submit",class:"btn-primary",disabled:i.value},lt(F.value?"Actualizar Préstamo":"Guardar Préstamo"),9,Tst)])],32)])])):Ut("",!0)]),_:1}),ze(wi,{name:"modal"},{default:an(()=>[y.value?(at(),ft("div",Nst,[d("div",Dst,[d("h3",Lst,lt(W.value?"Editar Pago de Préstamo":"Registrar Pago de Préstamo"),1),a.value?(at(),ft("div",Mst,lt(a.value),1)):Ut("",!0),o.value?(at(),ft("div",Ost,lt(o.value),1)):Ut("",!0),d("form",{onSubmit:gr(fo,["prevent"])},[d("div",Rst,[X[86]||(X[86]=d("label",{for:"pago-fecha",class:"block text-sm font-medium text-gray-400 mb-1"},"Fecha de Pago",-1)),oe(d("input",{type:"date",id:"pago-fecha","onUpdate:modelValue":X[23]||(X[23]=_t=>J.value.fecha=_t),required:"",class:"input-primary"},null,512),[[ke,J.value.fecha]])]),d("div",Fst,[X[88]||(X[88]=d("label",{for:"pago-prestamo-id",class:"block text-sm font-medium text-gray-400 mb-1"},"Préstamo",-1)),oe(d("select",{id:"pago-prestamo-id","onUpdate:modelValue":X[24]||(X[24]=_t=>J.value.prestamoId=_t),required:"",class:"input-primary select-input"},[X[87]||(X[87]=d("option",{value:"",disabled:""},"Seleccione un préstamo",-1)),(at(!0),ft(ye,null,Ke(Fn.value,_t=>(at(),ft("option",{key:_t.id,value:_t.id},lt(I(_t.fecha,!1))+" - "+lt(_t.entidad)+" ("+lt(kt(_t.monto))+") ",9,Bst))),128))],512),[[Vn,J.value.prestamoId]])]),d("div",jst,[X[89]||(X[89]=d("label",{for:"pago-monto",class:"block text-sm font-medium text-gray-400 mb-1"},"Monto Pagado (GTQ)",-1)),oe(d("input",{type:"number",id:"pago-monto","onUpdate:modelValue":X[25]||(X[25]=_t=>J.value.monto=_t),required:"",min:"0",step:"0.01",class:"input-primary",placeholder:"Ej: 1000.00"},null,512),[[ke,J.value.monto]])]),d("div",$st,[X[90]||(X[90]=d("label",{for:"pago-descripcion",class:"block text-sm font-medium text-gray-400 mb-1"},"Descripción (Opcional)",-1)),oe(d("textarea",{id:"pago-descripcion","onUpdate:modelValue":X[26]||(X[26]=_t=>J.value.descripcion=_t),class:"input-primary",placeholder:"Ej: Pago mensual del préstamo"},null,512),[[ke,J.value.descripcion]])]),d("div",Vst,[d("button",{type:"button",onClick:X[27]||(X[27]=_t=>{y.value=!1,es()}),class:"btn-secondary"},"Cancelar"),d("button",{type:"submit",class:"btn-primary",disabled:i.value},lt(W.value?"Actualizar Pago":"Guardar Pago"),9,zst)])],32)])])):Ut("",!0)]),_:1})])],64)}}},qst=ic(Ust,[["__scopeId","data-v-bd5ecfb1"]]),Hst={class:"max-w-7xl mx-auto px-2 sm:px-4 md:px-6 text-gray-200"},Wst={class:"glass-container-emerald rounded-xl shadow-lg border border-gray-700/30 p-4 mb-6"},Gst={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kst={class:"glass-container-emerald rounded-xl shadow-lg border border-gray-700/30 overflow-hidden mb-10 relative"},Yst={key:0,class:"loading-overlay"},Xst={class:"overflow-x-auto"},Qst={class:"min-w-full divide-y divide-gray-700"},Jst={class:"divide-y divide-gray-700/50"},Zst={class:"td-table font-mono text-emerald-400"},tit={class:"td-table"},eit={class:"td-table"},nit={class:"font-medium text-gray-100"},sit={key:0,class:"text-xs text-gray-500"},iit={class:"td-table hidden md:table-cell"},rit={class:"td-table font-semibold"},oit={class:"td-table"},ait={class:"td-table"},lit={class:"flex space-x-1"},cit=["onClick"],uit=["onClick"],dit=["onClick"],hit={key:0},fit={colspan:"7",class:"px-4 py-8 text-center"},pit={class:"flex flex-col items-center justify-center space-y-3"},git={class:"text-gray-600 text-sm"},mit={key:0,class:"modal-backdrop"},vit={class:"modal-content-emerald max-w-4xl max-h-[95vh]"},yit={class:"modal-header-emerald"},bit={class:"modal-title text-emerald-300"},wit={class:"pb-4 border-b border-gray-700/50"},xit={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_it={class:"md:col-span-2"},Sit=["src"],Cit={class:"grid grid-cols-1 md:grid-cols-3 gap-4 pb-4 border-b border-gray-700/50"},kit={class:"md:col-span-1"},Ait={class:"md:col-span-2"},Pit={class:"md:col-span-3"},Eit={class:"space-y-3"},Iit={class:"col-span-12 md:col-span-6"},Tit=["for"],Nit=["id","onUpdate:modelValue"],Dit={class:"col-span-4 md:col-span-2"},Lit=["for"],Mit=["id","onUpdate:modelValue","onInput"],Oit={class:"col-span-4 md:col-span-2"},Rit=["for"],Fit=["id","onUpdate:modelValue","onInput"],Bit={class:"col-span-4 md:col-span-2"},jit=["value"],$it={class:"col-span-12 flex justify-end md:col-span-1 md:justify-start"},Vit=["onClick"],zit={class:"pt-4 border-t border-gray-700/50"},Uit={class:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-gray-700/50"},qit={class:"md:col-span-2 space-y-4"},Hit={class:"space-y-3 p-4 bg-gray-900/30 rounded-lg border border-gray-600/50"},Wit={class:"flex justify-between items-center"},Git={class:"text-gray-100 font-semibold text-lg"},Kit={class:"flex justify-between items-center"},Yit={for:"cot-impuestos",class:"text-gray-400 font-medium"},Xit={class:"flex justify-between items-center pt-2 border-t border-gray-600"},Qit={class:"text-emerald-400 font-bold text-xl"},Jit={class:"mt-2"},Zit={class:"modal-footer-emerald mt-2"},trt=["disabled"],ert={class:"z-10 relative flex items-center justify-center"},nrt={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},srt={key:0,class:"modal-backdrop"},irt={class:"modal-content-emerald max-w-4xl max-h-[90vh]"},rrt={class:"modal-header-emerald no-print"},ort={class:"modal-title text-emerald-300"},art={key:0,class:"overflow-y-auto max-h-[calc(90vh-140px)] scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50 print-area-wrapper",id:"areaImprimirCotizacion"},lrt={class:"new-quote-container"},crt={class:"new-quote-header"},urt={key:0},drt={class:"new-quote-info-section"},hrt={class:"new-quote-company-info"},frt={key:0},prt={key:1},grt={key:2},mrt={key:3,class:"slogan"},vrt={class:"new-quote-client-info"},yrt={key:0},brt={class:"date"},wrt={class:"date"},xrt={class:"date"},_rt={class:"new-quote-content"},Srt={class:"new-quote-module"},Crt={class:"new-quote-module-content"},krt={class:"new-quote-table"},Art={class:"text-center"},Prt={class:"text-right"},Ert={class:"text-right"},Irt={class:"new-quote-summary-and-conditions-grid"},Trt={class:"new-quote-conditions-area"},Nrt={key:0,class:"new-quote-module"},Drt={class:"new-quote-module-content"},Lrt={class:"new-quote-service-list"},Mrt={key:1,class:"new-quote-module"},Ort={class:"new-quote-module-content"},Rrt={class:"new-quote-conditions-flex"},Frt={class:"new-quote-condition-item"},Brt={class:"new-quote-terms-text"},jrt={key:0,class:"new-quote-additional-notes"},$rt={class:"new-quote-summary-area"},Vrt={class:"new-quote-module"},zrt={class:"new-quote-module-content"},Urt={class:"new-quote-summary-table"},qrt={class:"text-right"},Hrt={class:"text-right"},Wrt={class:"new-quote-total-row"},Grt={class:"text-right"},Krt={class:"new-quote-total-section"},Yrt={class:"new-quote-total-amount"},Xrt={class:"new-quote-signature-section"},Qrt={class:"new-quote-signature-line"},Jrt={class:"new-quote-signature-line"},Zrt={class:"modal-footer-emerald no-print"},tot={key:0},eot={class:"modal-backdrop"},not={class:"modal-content-emerald max-w-md"},sot={class:"modal-header-emerald"},iot={class:"p-6"},rot={class:"text-gray-300"},oot={class:"text-gray-100"},aot={class:"text-gray-100"},lot={class:"modal-footer-emerald gap-3"},cot={__name:"GestionCotizaciones",setup(e){const t=Gt([]),n=Gt(g()),s=Gt(!1),i=Gt(null),r=Gt(null),o=Gt(!0),a=Gt(!1),l=Gt(!1),c=Gt(!1),u=Gt(!1),h=Gt({cliente:"",estado:"",mesCreacion:""});function g(){const tt=new Date,T=`${tt.getFullYear()}-${String(tt.getMonth()+1).padStart(2,"0")}-${String(tt.getDate()).padStart(2,"0")}`,rt=new Date(tt);rt.setDate(tt.getDate()+15);const kt=`${rt.getFullYear()}-${String(rt.getMonth()+1).padStart(2,"0")}-${String(rt.getDate()).padStart(2,"0")}`;return{id:null,numeroCotizacion:"",fechaCreacion:T,fechaVencimiento:kt,clienteNombre:"",clienteContacto:null,lineItems:[{descripcion:"",cantidad:1,precioUnitario:0,totalItem:0}],subtotal:0,porcentajeImpuestos:12,impuestos:0,totalGeneral:0,terminosCondiciones:`Validez de la oferta: 15 días.
Forma de pago: 50% anticipo, 50% contra entrega.
Tiempo de entrega: 5 días hábiles después de confirmado el anticipo.
Garantía: 1 mes por plantas en buen estado.
Mantenimiento: 1 mes sin costo adicional.`,notasAdicionales:null,estado:"Borrador",empresaNombre:"Soluciones Integrales GN",empresaDireccion:"Ciudad de Guatemala",empresaContacto:"Tel: 3512-5327",empresaNit:"120039877",empresaSlogan:"Especialistas en jardinización comercial",empresaLogoUrlEstatica:"",pdfTitulo:"COTIZACIÓN - JARDINIZACIÓN",proyectoNombre:"Proyecto Integral de Paisajismo",servicioIncluye:`Suministro de todas las plantas y materiales descritos
Preparación del terreno
Plantación y distribución según diseño
Limpieza final del área de trabajo
Visitas semanales de mantenimiento durante el primer mes
Reemplazo de plantas que presenten problemas durante el período de garantía`}}const p=(tt,T)=>{if(!tt||!T)return"N/A";let rt=tt instanceof he?tt.toDate():new Date(tt),kt=T instanceof he?T.toDate():new Date(T);if(isNaN(rt.getTime())||isNaN(kt.getTime()))return"N/A";const I=Math.abs(kt.getTime()-rt.getTime());return Math.ceil(I/(1e3*60*60*24))},y=(tt,T=!1)=>{if(!tt)return"N/A";let rt;if(tt instanceof he)rt=tt.toDate();else if(typeof tt=="string")tt.match(/^\d{4}-\d{2}-\d{2}$/)?rt=new Date(tt+"T00:00:00Z"):rt=new Date(tt);else if(tt instanceof Date)rt=tt;else return"Fecha Inválida";if(isNaN(rt.getTime()))return"Fecha Inválida";const kt={day:"2-digit",month:"long",year:"numeric",timeZone:"UTC"};return T&&(kt.hour="2-digit",kt.minute="2-digit"),rt.toLocaleDateString("es-GT",kt)},w=async()=>{const tt=new Date,T=tt.getUTCFullYear(),rt=String(tt.getUTCMonth()+1).padStart(2,"0"),kt=`COT-${T}-${rt}-`,I=he.fromDate(new Date(Date.UTC(T,tt.getUTCMonth(),1))),O=he.fromDate(new Date(Date.UTC(T,tt.getUTCMonth()+1,0,23,59,59,999))),E=Gs(Kn(qe,"cotizaciones"),Li("fechaCreacion",">=",I),Li("fechaCreacion","<=",O));try{const Z=(await jB(E)).data().count+1;return`${kt}${String(Z).padStart(3,"0")}`}catch(R){return console.error("Error generando número de cotización:",R),`${kt}${String(Math.floor(Math.random()*900)+100).padStart(3,"0")}`}},S=()=>{n.value.lineItems.push({descripcion:"",cantidad:1,precioUnitario:0,totalItem:0})},x=tt=>{n.value.lineItems.splice(tt,1),gt()},P=tt=>{const T=n.value.lineItems[tt];T.totalItem=parseFloat(((Number(T.cantidad)||0)*(Number(T.precioUnitario)||0)).toFixed(2))},L=de(()=>parseFloat(n.value.lineItems.reduce((tt,T)=>tt+(T.totalItem||0),0).toFixed(2))),M=de(()=>parseFloat(((L.value||0)+(n.value.impuestos||0)).toFixed(2)));$i([()=>n.value.porcentajeImpuestos,L],([tt,T],[rt,kt])=>{if(tt!==rt||T!==kt){const I=Number(tt)||0;n.value.impuestos=parseFloat((T*I/100).toFixed(2))}},{immediate:!0});const F=()=>{const tt=L.value,T=Number(n.value.impuestos)||0;tt>0?n.value.porcentajeImpuestos=parseFloat((T/tt*100).toFixed(2)):(T>0,n.value.porcentajeImpuestos=0)},pt=async()=>{o.value=!0;try{const tt=Gs(Kn(qe,"cotizaciones"),Ra("fechaCreacion","desc")),T=await xs(tt);t.value=T.docs.map(rt=>({id:rt.id,...rt.data()}))}catch(tt){console.error("Error cargando cotizaciones: ",tt),alert("Error al cargar las cotizaciones. Por favor, intente de nuevo.")}finally{o.value=!1}},Y=async()=>{s.value=!1,n.value=g();try{n.value.numeroCotizacion=await w()}catch(tt){console.error("Fallo al generar número de cotización inicial:",tt)}l.value=!0},W=tt=>{s.value=!0;const T=JSON.parse(JSON.stringify(tt)),rt=I=>{if(!I){const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}-${String(E.getDate()).padStart(2,"0")}`}if(I&&I.seconds)return new he(I.seconds,I.nanoseconds).toDate().toISOString().split("T")[0];if(typeof I=="string"&&I.match(/^\d{4}-\d{2}-\d{2}/))return I.split("T")[0];console.warn("Formato de fecha no reconocido para input:",I);const O=new Date;return`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}-${String(O.getDate()).padStart(2,"0")}`},kt=g();n.value={...kt,...T,id:tt.id,fechaCreacion:rt(T.fechaCreacion),fechaVencimiento:rt(T.fechaVencimiento),clienteContacto:T.clienteContacto||null,notasAdicionales:T.notasAdicionales||null,empresaSlogan:T.empresaSlogan||kt.empresaSlogan,empresaLogoUrlEstatica:T.empresaLogoUrlEstatica||kt.empresaLogoUrlEstatica,pdfTitulo:T.pdfTitulo||kt.pdfTitulo,proyectoNombre:T.proyectoNombre||kt.proyectoNombre,servicioIncluye:T.servicioIncluye||kt.servicioIncluye,porcentajeImpuestos:Number(T.porcentajeImpuestos)||kt.porcentajeImpuestos,impuestos:Number(T.impuestos)||0,subtotal:Number(T.subtotal)||0,totalGeneral:Number(T.totalGeneral)||0},n.value.lineItems=(T.lineItems||[]).map(I=>({descripcion:String(I.descripcion||""),cantidad:Number(I.cantidad)||1,precioUnitario:Number(I.precioUnitario)||0,totalItem:Number(I.totalItem)||0})),n.value.lineItems.length===0&&(n.value.lineItems=[g().lineItems[0]]),gt(),l.value=!0},it=async()=>{var tt;if(!n.value.clienteNombre||!n.value.fechaCreacion||!n.value.fechaVencimiento||n.value.lineItems.some(T=>!T.descripcion||!(Number(T.cantidad)>0)||!(Number(T.precioUnitario)>=0))){alert("Por favor, complete todos los campos obligatorios.");return}a.value=!0;try{gt(),n.value.subtotal=L.value;const T=Number(n.value.porcentajeImpuestos)||0;n.value.impuestos=parseFloat((n.value.subtotal*T/100).toFixed(2));const rt=n.value.lineItems.map(I=>({descripcion:String(I.descripcion||""),cantidad:Number(I.cantidad)||0,precioUnitario:Number(I.precioUnitario)||0,totalItem:Number(I.totalItem)||0})),kt={numeroCotizacion:n.value.numeroCotizacion||await w(),fechaCreacion:he.fromDate(new Date(n.value.fechaCreacion+"T00:00:00Z")),fechaVencimiento:he.fromDate(new Date(n.value.fechaVencimiento+"T00:00:00Z")),clienteNombre:String(n.value.clienteNombre||""),clienteContacto:n.value.clienteContacto||null,lineItems:rt,subtotal:Number(n.value.subtotal)||0,porcentajeImpuestos:Number(n.value.porcentajeImpuestos)||0,impuestos:Number(n.value.impuestos)||0,totalGeneral:Number(M.value)||0,terminosCondiciones:String(n.value.terminosCondiciones||""),notasAdicionales:n.value.notasAdicionales||null,estado:String(n.value.estado||"Borrador"),empresaNombre:String(n.value.empresaNombre||""),empresaDireccion:n.value.empresaDireccion||null,empresaContacto:n.value.empresaContacto||null,empresaNit:n.value.empresaNit||null,empresaSlogan:n.value.empresaSlogan||null,empresaLogoUrlEstatica:n.value.empresaLogoUrlEstatica||null,pdfTitulo:n.value.pdfTitulo||"COTIZACIÓN",proyectoNombre:n.value.proyectoNombre||"Servicios Profesionales",servicioIncluye:n.value.servicioIncluye||null};if(s.value&&((tt=n.value)!=null&&tt.id)){const I=bs(qe,"cotizaciones",n.value.id);await Aa(I,kt),alert("Cotización actualizada con éxito.")}else kt.timestampCreacionServer=Dl(),await Nl(Kn(qe,"cotizaciones"),kt),alert("Cotización guardada con éxito.");J(),await pt()}catch(T){console.error("Error guardando cotización: ",T),alert("Error al guardar la cotización: "+T.message)}finally{a.value=!1}},J=()=>{l.value=!1,s.value=!1,n.value=g()},_=tt=>{r.value=tt,u.value=!0},A=async()=>{var tt;if((tt=r.value)!=null&&tt.id)try{await Tl(bs(qe,"cotizaciones",r.value.id)),await pt(),alert("Cotización eliminada con éxito.")}catch(T){console.error("Error eliminando cotización:",T),alert("Error al eliminar la cotización.")}finally{u.value=!1,r.value=null}},Q=tt=>{const T=g();i.value={...T,...JSON.parse(JSON.stringify(tt)),fechaCreacion:tt.fechaCreacion,fechaVencimiento:tt.fechaVencimiento,lineItems:(tt.lineItems||[]).map(rt=>({...T.lineItems[0],...rt}))},c.value=!0},et=()=>{var I;const tt=document.getElementById("areaImprimirCotizacion");if(!tt){alert("No se pudo encontrar el área de impresión.");return}const T=tt.cloneNode(!0),rt=document.createElement("iframe");rt.style.display="none",document.body.appendChild(rt);const kt=rt.contentWindow.document;kt.open(),kt.write(`
    <html>
      <head>
        <title>Cotización ${((I=i.value)==null?void 0:I.numeroCotizacion)||""}</title>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
        <style>
          body {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            line-height: 1.5; 
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #fff !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
            font-size: 10pt; 
          }
          .new-quote-container { width: 100%; margin: 0 auto; background: white !important; font-family: 'Roboto', sans-serif !important; }
          .new-quote-header {
            text-align: center;
            background-color: #0d5a3a !important; 
            color: white !important;
            padding: 12px 15px; 
            border-bottom: 4px solid #0a4029 !important; 
          }
          .new-quote-header h1 { 
            margin: 0 0 4px 0;
            font-size: 12pt !important; 
            letter-spacing: 0.5px;
            font-weight: 700; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-header p { 
            margin: 4px 0 0;
            font-size: 10pt !important; 
            font-weight: 400;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-info-section {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px; 
            background-color: #f0f8f4 !important;
            border-bottom: 1px solid #ddd !important;
            font-size: 9pt; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-company-info, .new-quote-client-info { flex: 1; padding: 4px; }
          .new-quote-company-info h3, .new-quote-client-info h3 { 
            color: #0d5a3a !important;
            border-bottom: 1.5px solid #0d5a3a !important; 
            padding-bottom: 2px;
            margin-top: 0;
            margin-bottom: 6px;
            font-size: 10pt !important; 
            font-weight: 700; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-company-info p, .new-quote-client-info p { margin: 2px 0; font-size:9pt; font-weight: 400; font-family: 'Roboto', sans-serif !important; }
          .new-quote-client-info .date { font-style: italic; font-size: 8pt; font-family: 'Roboto', sans-serif !important; }
          .new-quote-company-info .slogan { font-style: italic; font-size: 8pt; color: #555 !important; font-family: 'Roboto', sans-serif !important;}
          .new-quote-content { padding: 15px; font-family: 'Roboto', sans-serif !important; }
          .new-quote-module {
            margin-bottom: 15px; 
            border: 1px solid #ddd !important;
            border-radius: 4px; 
            overflow: hidden;
          }
          .new-quote-module-header { 
            background-color: #0d5a3a !important;
            color: white !important;
            padding: 6px 12px; 
            font-size: 12pt !important; 
            font-weight: 700; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-module-content { padding: 10px; background-color: white !important; font-size: 10pt; font-weight: 400; font-family: 'Roboto', sans-serif !important; }
          .new-quote-table {
            width: 100%; border-collapse: collapse;
            margin-bottom: 8px; font-size: 9pt; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-table th, .new-quote-table td {
            padding: 6px 8px; 
            text-align: left;
            border-bottom: 1px solid #ddd !important;
            font-weight: 400;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-table th {
            background-color: #f0f8f4 !important;
            color: #0d5a3a !important;
            font-weight: 500; 
            font-size:9pt;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-table td.text-right { text-align: right !important; }
          .new-quote-table td.text-center { text-align: center !important; }
          .new-quote-table .empty-row td { height: 1.3em; border-bottom: 1px solid #eee !important; }
          .new-quote-summary-and-conditions-grid {
            display: grid;
            grid-template-columns: 3fr 2fr; 
            gap: 12px; margin-top: 8px;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-summary-table { width: 100%; font-size: 9pt; font-family: 'Roboto', sans-serif !important;}
          .new-quote-summary-table td { padding: 4px 0; border-bottom: none; font-weight: 400; font-family: 'Roboto', sans-serif !important;}
          .new-quote-summary-table td:last-child { text-align: right; }
          .new-quote-total-row td {
            font-weight: 500 !important; 
            background-color: #f0f8f4 !important;
            color: #333 !important; border-top: 1px solid #ccc !important;
            padding-top: 5px; padding-bottom: 5px;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-total-row td:first-child { color: #0d5a3a !important; }
          .new-quote-total-section {
            text-align: right; padding: 8px 0 0 0;
            border-top: 1px solid #ddd !important; margin-top: 8px;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-total-section span { font-family: 'Roboto', sans-serif !important; }
          .new-quote-total-section span:first-child { margin-right: 6px; font-size: 10pt; font-weight: 500; }
          .new-quote-total-amount { 
            font-size: 11pt !important; 
            font-weight: 700 !important; 
            color: #0d5a3a !important;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-conditions-flex { display: flex; flex-wrap: wrap; gap: 8px; font-family: 'Roboto', sans-serif !important;}
          .new-quote-condition-item {
            flex: 1 1 180px; padding: 8px;
            background-color: #f0f8f4 !important;
            border-left: 3px solid #0d5a3a !important; 
            border-radius: 0 3px 3px 0; font-size: 8pt; 
            font-weight: 400;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-condition-item h4 { 
            margin-top: 0; margin-bottom: 4px;
            color: #0d5a3a !important; font-size: 9pt !important; font-weight: 500; 
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-condition-item p { margin: 1px 0; font-family: 'Roboto', sans-serif !important;}
          .new-quote-terms-text { white-space: pre-wrap; font-size: 9pt; line-height: 1.4; padding: 4px; background-color: #f9f9f9 !important; border: 1px solid #eee !important; border-radius: 2px; font-weight: 400; font-family: 'Roboto', sans-serif !important;}
          .new-quote-additional-notes { margin-top: 10px; font-size: 9pt; color: #555 !important; font-weight: 400; font-family: 'Roboto', sans-serif !important;}
          .new-quote-footer {
            text-align: center; padding: 12px 15px; 
            background-color: #0d5a3a !important; color: white !important;
            font-size: 9pt; margin-top: 15px; 
            border-top: 4px solid #0a4029 !important; 
            font-weight: 400;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-footer p { margin: 2px 0; font-family: 'Roboto', sans-serif !important;}
          .new-quote-footer strong { font-weight: 500; font-family: 'Roboto', sans-serif !important;} 
          .new-quote-signature-section {
            display: flex; justify-content: space-between;
            margin-top: 20mm; 
            padding: 0 8mm; font-size: 9pt;
            page-break-inside: avoid;
            font-weight: 400;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-signature-line {
            border-top: 1px solid #333 !important; width: 40%;
            padding-top: 6px; text-align: center; margin-top: 15px;
            font-family: 'Roboto', sans-serif !important;
          }
          .new-quote-service-list { list-style-type: none; padding-left: 0; font-size: 9pt; font-weight: 400; font-family: 'Roboto', sans-serif !important;}
          .new-quote-service-list li { padding: 5px 0; border-bottom: 1px dashed #ddd !important; font-family: 'Roboto', sans-serif !important;}
          .new-quote-service-list li:last-child { border-bottom: none; }
          .new-quote-service-list li:before {
            content: "✓"; color: #0d5a3a !important;
            margin-right: 8px; font-weight: bold; 
          }
          .new-quote-highlight {
            background-color: #e6fff7 !important; color: #0d5a3a !important;
            font-weight: 500 !important; 
            padding: 1px 3px; border-radius: 2px; font-size: 9pt;
            font-family: 'Roboto', sans-serif !important;
          }
          .text-right { text-align: right !important; }
          .text-center { text-align: center !important; }
          .no-print { display: none !important; }
          
          @page {
            margin: 8mm; 
            size: letter;
          }
        </style>
      </head>
      <body>
      </body>
    </html>
  `),kt.body.appendChild(T),kt.close(),rt.contentWindow.focus(),rt.contentWindow.print()},mt=de(()=>t.value.filter(tt=>{const T=h.value.cliente.toLowerCase(),rt=!h.value.cliente||tt.clienteNombre&&tt.clienteNombre.toLowerCase().includes(T),kt=!h.value.estado||tt.estado===h.value.estado;let I=!0;if(h.value.mesCreacion&&tt.fechaCreacion){let O;tt.fechaCreacion instanceof he?O=tt.fechaCreacion.toDate():typeof tt.fechaCreacion=="string"?O=new Date(tt.fechaCreacion.includes("T")?tt.fechaCreacion:tt.fechaCreacion+"T00:00:00Z"):tt.fechaCreacion instanceof Date?O=tt.fechaCreacion:I=!1,I&&!isNaN(O.getTime())?I=`${O.getUTCFullYear()}-${String(O.getUTCMonth()+1).padStart(2,"0")}`===h.value.mesCreacion:I=!1}return rt&&kt&&I})),ht=tt=>{switch(tt){case"Borrador":return"bg-gray-500/20 text-gray-300 border border-gray-500/30";case"Enviada":return"bg-blue-500/20 text-blue-300 border border-blue-500/30";case"Aceptada":return"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30";case"Rechazada":return"bg-red-500/20 text-red-300 border border-red-500/30";case"Facturada":return"bg-purple-500/20 text-purple-300 border border-purple-500/30";default:return"bg-gray-700 text-gray-400"}};co(async()=>{await pt()}),$i(()=>n.value.lineItems,()=>{gt()},{deep:!0});const gt=()=>{const tt=n.value.lineItems.reduce((T,rt)=>T+(Number(rt.totalItem)||0),0);n.value.subtotal=parseFloat(tt.toFixed(2))};return $i(s,tt=>{tt&&n.value.lineItems.length>0&&gt()}),(tt,T)=>(at(),ft("div",Hst,[T[92]||(T[92]=d("div",{class:"bg-gradient-to-r from-gray-900/80 via-gray-800/80 to-gray-900/80 backdrop-blur-sm border border-emerald-500/20 rounded-lg shadow-lg shadow-emerald-500/10 mb-8 py-4 px-6 transform transition-all duration-300 hover:shadow-xl hover:shadow-emerald-500/20"},[d("h2",{class:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-emerald-300 glow-emerald mb-2 text-center"},"Gestión de Cotizaciones"),d("p",{class:"text-emerald-100/70 text-center text-sm md:text-base"},"Crea, administra y da seguimiento a tus propuestas comerciales")],-1)),d("div",{class:"mb-6 text-right"},[d("button",{onClick:Y,class:"btn-primary-emerald tech-btn relative overflow-hidden group"},T[25]||(T[25]=[d("span",{class:"z-10 relative flex items-center justify-center"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),Vt(" Nueva Cotización ")],-1),d("span",{class:"tech-btn-bg-emerald absolute inset-0"},null,-1)]))]),d("div",Wst,[d("div",Gst,[d("div",null,[T[26]||(T[26]=d("label",{for:"filtroCliente",class:"label-form text-xs"},"Buscar por Cliente:",-1)),oe(d("input",{type:"text",id:"filtroCliente","onUpdate:modelValue":T[0]||(T[0]=rt=>h.value.cliente=rt),placeholder:"Nombre del cliente...",class:"input-primary-emerald input-sm"},null,512),[[ke,h.value.cliente]])]),d("div",null,[T[28]||(T[28]=d("label",{for:"filtroEstado",class:"label-form text-xs"},"Filtrar por Estado:",-1)),oe(d("select",{id:"filtroEstado","onUpdate:modelValue":T[1]||(T[1]=rt=>h.value.estado=rt),class:"input-primary-emerald select-input input-sm"},T[27]||(T[27]=[$a('<option value="" class="option-dark" data-v-c45450f3>Todos los Estados</option><option value="Borrador" class="option-dark" data-v-c45450f3>Borrador</option><option value="Enviada" class="option-dark" data-v-c45450f3>Enviada</option><option value="Aceptada" class="option-dark" data-v-c45450f3>Aceptada</option><option value="Rechazada" class="option-dark" data-v-c45450f3>Rechazada</option><option value="Facturada" class="option-dark" data-v-c45450f3>Facturada</option>',6)]),512),[[Vn,h.value.estado]])]),d("div",null,[T[29]||(T[29]=d("label",{for:"filtroFecha",class:"label-form text-xs"},"Filtrar por Mes de Creación:",-1)),oe(d("input",{type:"month",id:"filtroFecha","onUpdate:modelValue":T[2]||(T[2]=rt=>h.value.mesCreacion=rt),class:"input-primary-emerald month-input input-sm"},null,512),[[ke,h.value.mesCreacion]])])])]),d("div",Kst,[o.value?(at(),ft("div",Yst,T[30]||(T[30]=[d("svg",{class:"animate-spin h-8 w-8 text-emerald-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),d("span",{class:"ml-2 text-gray-200"},"Cargando Cotizaciones...",-1)]))):Ut("",!0),d("div",Xst,[d("table",Qst,[T[36]||(T[36]=d("thead",{class:"bg-gray-900/70 backdrop-blur-sm"},[d("tr",null,[d("th",{class:"th-table"},"# Cotización"),d("th",{class:"th-table"},"Fecha Creación"),d("th",{class:"th-table"},"Cliente"),d("th",{class:"th-table hidden md:table-cell"},"Validez Hasta"),d("th",{class:"th-table"},"Total (Q)"),d("th",{class:"th-table"},"Estado"),d("th",{class:"th-table"},"Acciones")])],-1)),d("tbody",Jst,[(at(!0),ft(ye,null,Ke(mt.value,rt=>(at(),ft("tr",{key:rt.id,class:"hover:bg-gray-700/40 transition-colors duration-150"},[d("td",Zst,lt(rt.numeroCotizacion),1),d("td",tit,lt(y(rt.fechaCreacion)),1),d("td",eit,[d("div",nit,lt(rt.clienteNombre),1),rt.clienteContacto?(at(),ft("div",sit,lt(rt.clienteContacto),1)):Ut("",!0)]),d("td",iit,lt(y(rt.fechaVencimiento)),1),d("td",rit,"Q"+lt((rt.totalGeneral||0).toFixed(2)),1),d("td",oit,[d("span",{class:ve(["badge",ht(rt.estado)])},lt(rt.estado),3)]),d("td",ait,[d("div",lit,[d("button",{onClick:kt=>Q(rt),class:"btn-icon text-emerald-400 hover:text-emerald-300",title:"Ver Detalles"},T[31]||(T[31]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),d("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)]),8,cit),d("button",{onClick:kt=>W(rt),class:"btn-icon text-amber-400 hover:text-amber-300",title:"Editar"},T[32]||(T[32]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,uit),d("button",{onClick:kt=>_(rt),class:"btn-icon text-red-500 hover:text-red-400",title:"Eliminar"},T[33]||(T[33]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,dit)])])]))),128)),mt.value.length===0&&!o.value?(at(),ft("tr",hit,[d("td",fit,[d("div",pit,[T[34]||(T[34]=d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),T[35]||(T[35]=d("p",{class:"text-gray-500 text-lg"},"No se encontraron cotizaciones",-1)),d("p",git,lt(h.value.cliente||h.value.estado||h.value.mesCreacion?"Prueba con otros criterios de búsqueda o filtro":"Aún no has creado ninguna cotización"),1)])])])):Ut("",!0)])])])]),ze(wi,{name:"modal-fade"},{default:an(()=>[l.value?(at(),ft("div",mit,[d("div",vit,[d("div",yit,[d("h3",bit,lt(s.value?"Editar Cotización":"Crear Nueva Cotización"),1),d("button",{onClick:J,class:"modal-close-btn",title:"Cerrar"},"×")]),d("form",{onSubmit:gr(it,["prevent"]),class:"overflow-y-auto p-6 space-y-6 max-h-[calc(95vh-140px)] scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-700/50"},[d("div",wit,[T[44]||(T[44]=d("h4",{class:"text-md font-semibold text-gray-300 mb-3"},"Datos de la Empresa",-1)),d("div",xit,[d("div",null,[T[37]||(T[37]=d("label",{for:"cot-empresaNombre",class:"label-form"},"Nombre Empresa",-1)),oe(d("input",{type:"text",id:"cot-empresaNombre","onUpdate:modelValue":T[3]||(T[3]=rt=>n.value.empresaNombre=rt),class:"input-primary-emerald input-sm",placeholder:"Nombre de tu empresa"},null,512),[[ke,n.value.empresaNombre]])]),d("div",null,[T[38]||(T[38]=d("label",{for:"cot-empresaNit",class:"label-form"},"NIT Empresa",-1)),oe(d("input",{type:"text",id:"cot-empresaNit","onUpdate:modelValue":T[4]||(T[4]=rt=>n.value.empresaNit=rt),class:"input-primary-emerald input-sm",placeholder:"NIT de tu empresa"},null,512),[[ke,n.value.empresaNit]])]),d("div",_it,[T[39]||(T[39]=d("label",{for:"cot-empresaDireccion",class:"label-form"},"Dirección Empresa",-1)),oe(d("input",{type:"text",id:"cot-empresaDireccion","onUpdate:modelValue":T[5]||(T[5]=rt=>n.value.empresaDireccion=rt),class:"input-primary-emerald input-sm",placeholder:"Dirección de tu empresa"},null,512),[[ke,n.value.empresaDireccion]])]),d("div",null,[T[40]||(T[40]=d("label",{for:"cot-empresaContacto",class:"label-form"},"Contacto Empresa",-1)),oe(d("input",{type:"text",id:"cot-empresaContacto","onUpdate:modelValue":T[6]||(T[6]=rt=>n.value.empresaContacto=rt),class:"input-primary-emerald input-sm",placeholder:"Teléfono, Email de tu empresa"},null,512),[[ke,n.value.empresaContacto]])]),d("div",null,[T[41]||(T[41]=d("label",{for:"cot-empresaSlogan",class:"label-form"},"Eslogan Empresa (Opcional)",-1)),oe(d("input",{type:"text",id:"cot-empresaSlogan","onUpdate:modelValue":T[7]||(T[7]=rt=>n.value.empresaSlogan=rt),class:"input-primary-emerald input-sm",placeholder:"Tu eslogan aquí"},null,512),[[ke,n.value.empresaSlogan]])]),d("div",null,[T[42]||(T[42]=d("label",{for:"cot-empresaLogoUrlEstatica",class:"label-form"},"URL Logo Estático (Opcional, ya no se muestra en PDF)",-1)),oe(d("input",{type:"url",id:"cot-empresaLogoUrlEstatica","onUpdate:modelValue":T[8]||(T[8]=rt=>n.value.empresaLogoUrlEstatica=rt),class:"input-primary-emerald input-sm",placeholder:"https://ejemplo.com/logo.png"},null,512),[[ke,n.value.empresaLogoUrlEstatica]]),n.value.empresaLogoUrlEstatica?(at(),ft("img",{key:0,src:n.value.empresaLogoUrlEstatica,alt:"Preview Logo",class:"mt-2 h-12 w-auto border border-gray-600 rounded"},null,8,Sit)):Ut("",!0)]),d("div",null,[T[43]||(T[43]=d("label",{for:"cot-pdfTitulo",class:"label-form"},"Título Principal PDF (ej. COTIZACIÓN - JARDINIZACIÓN)",-1)),oe(d("input",{type:"text",id:"cot-pdfTitulo","onUpdate:modelValue":T[9]||(T[9]=rt=>n.value.pdfTitulo=rt),class:"input-primary-emerald input-sm",placeholder:"COTIZACIÓN - SERVICIOS"},null,512),[[ke,n.value.pdfTitulo]])])])]),d("div",Cit,[d("div",null,[T[45]||(T[45]=d("label",{for:"cot-clienteNombre",class:"label-form"},[Vt("Nombre del Cliente "),d("span",{class:"text-red-500"},"*")],-1)),oe(d("input",{type:"text",id:"cot-clienteNombre","onUpdate:modelValue":T[10]||(T[10]=rt=>n.value.clienteNombre=rt),class:"input-primary-emerald",required:"",placeholder:"Ej: Constructora XYZ"},null,512),[[ke,n.value.clienteNombre]])]),d("div",null,[T[46]||(T[46]=d("label",{for:"cot-fechaCreacion",class:"label-form"},[Vt("Fecha Creación "),d("span",{class:"text-red-500"},"*")],-1)),oe(d("input",{type:"date",id:"cot-fechaCreacion","onUpdate:modelValue":T[11]||(T[11]=rt=>n.value.fechaCreacion=rt),class:"input-primary-emerald date-input",required:""},null,512),[[ke,n.value.fechaCreacion]])]),d("div",null,[T[47]||(T[47]=d("label",{for:"cot-fechaVencimiento",class:"label-form"},[Vt("Validez Hasta "),d("span",{class:"text-red-500"},"*")],-1)),oe(d("input",{type:"date",id:"cot-fechaVencimiento","onUpdate:modelValue":T[12]||(T[12]=rt=>n.value.fechaVencimiento=rt),class:"input-primary-emerald date-input",required:""},null,512),[[ke,n.value.fechaVencimiento]])]),d("div",kit,[T[48]||(T[48]=d("label",{for:"cot-clienteContacto",class:"label-form"},"Contacto (Opcional)",-1)),oe(d("input",{type:"text",id:"cot-clienteContacto","onUpdate:modelValue":T[13]||(T[13]=rt=>n.value.clienteContacto=rt),class:"input-primary-emerald",placeholder:"Ej: Ing. Juan Pérez, Tel: 555-1234"},null,512),[[ke,n.value.clienteContacto]])]),d("div",Ait,[T[49]||(T[49]=d("label",{for:"cot-numero",class:"label-form"},"Número Cotización (Autogenerado si se deja vacío)",-1)),oe(d("input",{type:"text",id:"cot-numero","onUpdate:modelValue":T[14]||(T[14]=rt=>n.value.numeroCotizacion=rt),class:"input-primary-emerald font-mono",placeholder:"Ej: COT-2025-001"},null,512),[[ke,n.value.numeroCotizacion]])]),d("div",Pit,[T[50]||(T[50]=d("label",{for:"cot-proyectoNombre",class:"label-form"},"Nombre del Proyecto/Referencia",-1)),oe(d("input",{type:"text",id:"cot-proyectoNombre","onUpdate:modelValue":T[15]||(T[15]=rt=>n.value.proyectoNombre=rt),class:"input-primary-emerald",placeholder:"Ej: Jardinería Residencia XYZ"},null,512),[[ke,n.value.proyectoNombre]])])]),d("div",Eit,[T[57]||(T[57]=d("h4",{class:"text-md font-semibold text-gray-300"},"Líneas de la Cotización:",-1)),(at(!0),ft(ye,null,Ke(n.value.lineItems,(rt,kt)=>(at(),ft("div",{key:kt,class:"grid grid-cols-12 gap-x-3 gap-y-2 items-end p-3 bg-gray-700/30 rounded-md border border-gray-600/50"},[d("div",Iit,[d("label",{for:"item-desc-"+kt,class:"label-form text-xs"},T[51]||(T[51]=[Vt("Descripción "),d("span",{class:"text-red-500"},"*",-1)]),8,Tit),oe(d("input",{type:"text",id:"item-desc-"+kt,"onUpdate:modelValue":I=>rt.descripcion=I,class:"input-primary-emerald input-sm",required:"",placeholder:"Descripción del servicio o producto"},null,8,Nit),[[ke,rt.descripcion]])]),d("div",Dit,[d("label",{for:"item-cant-"+kt,class:"label-form text-xs"},T[52]||(T[52]=[Vt("Cantidad "),d("span",{class:"text-red-500"},"*",-1)]),8,Lit),oe(d("input",{type:"number",id:"item-cant-"+kt,"onUpdate:modelValue":I=>rt.cantidad=I,onInput:I=>P(kt),min:"0.01",step:"any",class:"input-primary-emerald input-sm text-right",required:""},null,40,Mit),[[ke,rt.cantidad,void 0,{number:!0}]])]),d("div",Oit,[d("label",{for:"item-precio-"+kt,class:"label-form text-xs"},T[53]||(T[53]=[Vt("Precio Unit. (Q) "),d("span",{class:"text-red-500"},"*",-1)]),8,Rit),oe(d("input",{type:"number",id:"item-precio-"+kt,"onUpdate:modelValue":I=>rt.precioUnitario=I,onInput:I=>P(kt),min:"0.01",step:"any",class:"input-primary-emerald input-sm text-right",required:""},null,40,Fit),[[ke,rt.precioUnitario,void 0,{number:!0}]])]),d("div",Bit,[T[54]||(T[54]=d("label",{class:"label-form text-xs"},"Total Item (Q)",-1)),d("input",{type:"text",value:(rt.totalItem||0).toFixed(2),class:"input-primary-emerald input-sm text-right bg-gray-800/50",readonly:""},null,8,jit)]),d("div",$it,[d("button",{type:"button",onClick:I=>x(kt),class:"btn-danger-outline btn-sm p-2",title:"Eliminar Línea"},T[55]||(T[55]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Vit)])]))),128)),d("button",{type:"button",onClick:S,class:"btn-secondary-outline-emerald btn-sm"},T[56]||(T[56]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Vt(" Agregar Línea ")]))]),d("div",zit,[T[58]||(T[58]=d("label",{for:"cot-servicioIncluye",class:"label-form"},"El Servicio Incluye (Un punto por línea):",-1)),oe(d("textarea",{id:"cot-servicioIncluye","onUpdate:modelValue":T[16]||(T[16]=rt=>n.value.servicioIncluye=rt),class:"input-primary-emerald",rows:"5",placeholder:`Ej: Suministro de todas las plantas y materiales descritos
Preparación del terreno
...`},null,512),[[ke,n.value.servicioIncluye]])]),d("div",Uit,[d("div",qit,[d("div",null,[T[59]||(T[59]=d("label",{for:"cot-terminos",class:"label-form"},"Términos y Condiciones",-1)),oe(d("textarea",{id:"cot-terminos","onUpdate:modelValue":T[17]||(T[17]=rt=>n.value.terminosCondiciones=rt),class:"input-primary-emerald",rows:"4",placeholder:"Ej: Pago 50% anticipado, 50% contra entrega. Validez de la oferta: 15 días."},null,512),[[ke,n.value.terminosCondiciones]])]),d("div",null,[T[60]||(T[60]=d("label",{for:"cot-notas",class:"label-form"},"Notas Adicionales (Opcional)",-1)),oe(d("textarea",{id:"cot-notas","onUpdate:modelValue":T[18]||(T[18]=rt=>n.value.notasAdicionales=rt),class:"input-primary-emerald",rows:"2",placeholder:"Cualquier observación o nota interna."},null,512),[[ke,n.value.notasAdicionales]])])]),d("div",Hit,[d("div",Wit,[T[61]||(T[61]=d("span",{class:"text-gray-400 font-medium"},"Subtotal:",-1)),d("span",Git,"Q"+lt(L.value.toFixed(2)),1)]),d("div",Kit,[d("label",Yit,"Impuestos (IVA "+lt((n.value.porcentajeImpuestos||12).toFixed(0))+"%):",1),oe(d("input",{type:"number",id:"cot-impuestos","onUpdate:modelValue":T[19]||(T[19]=rt=>n.value.impuestos=rt),onInput:F,class:"input-primary-emerald input-sm w-24 text-right",placeholder:"0.00"},null,544),[[ke,n.value.impuestos,void 0,{number:!0}]])]),d("div",Xit,[T[62]||(T[62]=d("span",{class:"text-emerald-400 font-bold text-xl"},"TOTAL GENERAL:",-1)),d("span",Qit,"Q"+lt(M.value.toFixed(2)),1)]),d("div",Jit,[T[64]||(T[64]=d("label",{for:"cot-estado",class:"label-form"},"Estado de la Cotización",-1)),oe(d("select",{id:"cot-estado","onUpdate:modelValue":T[20]||(T[20]=rt=>n.value.estado=rt),class:"input-primary-emerald select-input"},T[63]||(T[63]=[d("option",{value:"Borrador",class:"option-dark"},"Borrador",-1),d("option",{value:"Enviada",class:"option-dark"},"Enviada",-1),d("option",{value:"Aceptada",class:"option-dark"},"Aceptada",-1),d("option",{value:"Rechazada",class:"option-dark"},"Rechazada",-1),d("option",{value:"Facturada",class:"option-dark"},"Facturada",-1)]),512),[[Vn,n.value.estado]])])])]),d("div",Zit,[d("button",{type:"button",onClick:J,class:"btn-secondary"},"Cancelar"),d("button",{type:"submit",class:"btn-primary-emerald tech-btn relative overflow-hidden group",disabled:a.value},[d("span",ert,[a.value?(at(),ft("svg",nrt,T[65]||(T[65]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ut("",!0),Vt(" "+lt(a.value?"Guardando...":s.value?"Actualizar Cotización":"Guardar Cotización"),1)]),T[66]||(T[66]=d("span",{class:"tech-btn-bg-emerald absolute inset-0"},null,-1))],8,trt)])],32)])])):Ut("",!0)]),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>{var rt;return[c.value?(at(),ft("div",srt,[d("div",irt,[d("div",rrt,[d("h3",ort,"Detalles de Cotización: "+lt((rt=i.value)==null?void 0:rt.numeroCotizacion),1),d("button",{onClick:T[21]||(T[21]=kt=>c.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),i.value?(at(),ft("div",art,[d("div",lrt,[d("div",crt,[d("h1",null,lt(i.value.pdfTitulo||"COTIZACIÓN"),1),i.value.proyectoNombre?(at(),ft("p",urt,lt(i.value.proyectoNombre),1)):Ut("",!0)]),d("div",drt,[d("div",hrt,[d("h3",null,lt(i.value.empresaNombre),1),i.value.empresaContacto?(at(),ft("p",frt,lt(i.value.empresaContacto),1)):Ut("",!0),i.value.empresaDireccion?(at(),ft("p",prt,lt(i.value.empresaDireccion),1)):Ut("",!0),i.value.empresaNit?(at(),ft("p",grt,"NIT: "+lt(i.value.empresaNit),1)):Ut("",!0),i.value.empresaSlogan?(at(),ft("p",mrt,lt(i.value.empresaSlogan),1)):Ut("",!0)]),d("div",vrt,[T[70]||(T[70]=d("h3",null,"CLIENTE",-1)),d("p",null,lt(i.value.clienteNombre),1),i.value.clienteContacto?(at(),ft("p",yrt,lt(i.value.clienteContacto),1)):Ut("",!0),d("p",brt,[T[67]||(T[67]=d("strong",null,"Fecha:",-1)),Vt(" "+lt(y(i.value.fechaCreacion)),1)]),d("p",wrt,[T[68]||(T[68]=d("strong",null,"No. Cotización:",-1)),Vt(" "+lt(i.value.numeroCotizacion),1)]),d("p",xrt,[T[69]||(T[69]=d("strong",null,"Validez:",-1)),Vt(" "+lt(p(i.value.fechaCreacion,i.value.fechaVencimiento))+" días",1)])])]),d("div",_rt,[d("div",Srt,[T[73]||(T[73]=d("div",{class:"new-quote-module-header"},"DETALLE DE PRODUCTOS Y SERVICIOS",-1)),d("div",Crt,[d("table",krt,[T[72]||(T[72]=d("thead",null,[d("tr",null,[d("th",{class:"text-center"},"CANT."),d("th",null,"DESCRIPCIÓN"),d("th",{class:"text-right"},"PRECIO UNIT."),d("th",{class:"text-right"},"SUBTOTAL")])],-1)),d("tbody",null,[(at(!0),ft(ye,null,Ke(i.value.lineItems,(kt,I)=>(at(),ft("tr",{key:`detail-item-${I}`},[d("td",Art,lt(kt.cantidad),1),d("td",null,lt(kt.descripcion),1),d("td",Prt,"Q"+lt((kt.precioUnitario||0).toFixed(2)),1),d("td",Ert,"Q"+lt((kt.totalItem||0).toFixed(2)),1)]))),128)),(at(!0),ft(ye,null,Ke(Math.max(0,2-i.value.lineItems.length),kt=>(at(),ft("tr",{key:"empty-detail-"+kt,class:"empty-row"},T[71]||(T[71]=[d("td",null," ",-1),d("td",null," ",-1),d("td",null," ",-1),d("td",null," ",-1)])))),128))])])])]),d("div",Irt,[d("div",Trt,[i.value.servicioIncluye&&i.value.servicioIncluye.trim()!==""?(at(),ft("div",Nrt,[T[74]||(T[74]=d("div",{class:"new-quote-module-header"},"EL SERVICIO INCLUYE",-1)),d("div",Drt,[d("ul",Lrt,[(at(!0),ft(ye,null,Ke((i.value.servicioIncluye||"").split(`
`).filter(kt=>kt.trim()!==""),(kt,I)=>(at(),ft("li",{key:`si-detail-${I}`},lt(kt),1))),128))])])])):Ut("",!0),i.value.terminosCondiciones&&i.value.terminosCondiciones.trim()!==""?(at(),ft("div",Mrt,[T[76]||(T[76]=d("div",{class:"new-quote-module-header"},"CONDICIONES GENERALES",-1)),d("div",Ort,[d("div",Rrt,[d("div",Frt,[d("pre",Brt,lt(i.value.terminosCondiciones),1)])]),i.value.notasAdicionales?(at(),ft("p",jrt,[T[75]||(T[75]=d("strong",null,"Notas Adicionales:",-1)),Vt(" "+lt(i.value.notasAdicionales),1)])):Ut("",!0)])])):Ut("",!0)]),d("div",$rt,[d("div",Vrt,[T[80]||(T[80]=d("div",{class:"new-quote-module-header"},"RESUMEN",-1)),d("div",zrt,[d("table",Urt,[d("tr",null,[T[77]||(T[77]=d("td",null,"SUBTOTAL",-1)),d("td",qrt,"Q"+lt((i.value.subtotal||0).toFixed(2)),1)]),d("tr",null,[d("td",null,"IVA ("+lt((i.value.porcentajeImpuestos||12).toFixed(0))+"%)",1),d("td",Hrt,"Q"+lt((i.value.impuestos||0).toFixed(2)),1)]),d("tr",Wrt,[T[78]||(T[78]=d("td",null,"TOTAL",-1)),d("td",Grt,"Q"+lt((i.value.totalGeneral||0).toFixed(2)),1)])]),d("div",Krt,[T[79]||(T[79]=d("span",null,"MONTO TOTAL:",-1)),d("span",Yrt,"Q"+lt((i.value.totalGeneral||0).toFixed(2)),1)])])])])]),d("div",Xrt,[d("div",Qrt,[T[81]||(T[81]=Vt(" Elaborado por:")),T[82]||(T[82]=d("br",null,null,-1)),Vt(" "+lt(i.value.empresaNombre),1)]),d("div",Jrt,[T[83]||(T[83]=Vt(" Aprobado por:")),T[84]||(T[84]=d("br",null,null,-1)),Vt(" "+lt(i.value.clienteNombre),1)])])]),T[85]||(T[85]=d("div",{class:"new-quote-footer"},[d("p",null,"Para aceptación de la presente cotización, favor firmar y enviar al correo electrónico o contactar al número telefónico indicado."),d("p",null,[d("strong",null,"¡Gracias por confiar en nuestros servicios!")])],-1))])])):Ut("",!0),d("div",Zrt,[d("button",{onClick:et,class:"btn-primary-emerald btn-sm mr-auto"},T[86]||(T[86]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),Vt(" Imprimir Cotización ")])),d("button",{onClick:T[22]||(T[22]=kt=>c.value=!1),class:"btn-secondary"},"Cerrar")])])])):Ut("",!0)]}),_:1}),ze(wi,{name:"modal-fade"},{default:an(()=>{var rt,kt;return[u.value?(at(),ft("div",tot,[d("div",eot,[d("div",not,[d("div",sot,[T[87]||(T[87]=d("h3",{class:"modal-title text-red-400"},"Confirmar Eliminación",-1)),d("button",{onClick:T[23]||(T[23]=I=>u.value=!1),class:"modal-close-btn",title:"Cerrar"},"×")]),d("div",iot,[d("p",rot,[T[88]||(T[88]=Vt("¿Estás seguro que deseas eliminar la cotización ")),d("strong",oot,lt((rt=r.value)==null?void 0:rt.numeroCotizacion),1),T[89]||(T[89]=Vt(" para el cliente ")),d("strong",aot,lt((kt=r.value)==null?void 0:kt.clienteNombre),1),T[90]||(T[90]=Vt("?"))]),T[91]||(T[91]=d("p",{class:"text-sm text-red-400 mt-2"},"Esta acción no se puede deshacer.",-1))]),d("div",lot,[d("button",{onClick:T[24]||(T[24]=I=>u.value=!1),class:"btn-secondary"},"Cancelar"),d("button",{onClick:A,class:"btn-danger"},"Sí, Eliminar")])])])])):Ut("",!0)]}),_:1})]))}},uot=ic(cot,[["__scopeId","data-v-c45450f3"]]),dot=[{path:"/",redirect:"/dashboard"},{path:"/home",name:"home",component:P9},{path:"/login",name:"login",component:P$},{path:"/dashboard",name:"dashboard",component:_G},{path:"/tiendas",name:"tiendas",component:bJ},{path:"/cobros",name:"cobros",component:NZ},{path:"/estadisticas",name:"estadisticas",component:uet},{path:"/finanzas",name:"finanzas",component:qst},{path:"/cotizaciones",name:"cotizaciones",component:uot}],hot=fD({history:z8("/"),routes:dot});var fot=Object.defineProperty,O3=Object.getOwnPropertySymbols,pot=Object.prototype.hasOwnProperty,got=Object.prototype.propertyIsEnumerable,R3=(e,t,n)=>t in e?fot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FE=(e,t)=>{for(var n in t||(t={}))pot.call(t,n)&&R3(e,n,t[n]);if(O3)for(var n of O3(t))got.call(t,n)&&R3(e,n,t[n]);return e},$0=e=>typeof e=="function",V0=e=>typeof e=="string",BE=e=>V0(e)&&e.trim().length>0,mot=e=>typeof e=="number",Ol=e=>typeof e>"u",ef=e=>typeof e=="object"&&e!==null,vot=e=>io(e,"tag")&&BE(e.tag),jE=e=>window.TouchEvent&&e instanceof TouchEvent,$E=e=>io(e,"component")&&VE(e.component),yot=e=>$0(e)||ef(e),VE=e=>!Ol(e)&&(V0(e)||yot(e)||$E(e)),F3=e=>ef(e)&&["height","width","right","left","top","bottom"].every(t=>mot(e[t])),io=(e,t)=>(ef(e)||$0(e))&&t in e,bot=(e=>()=>e++)(0);function $2(e){return jE(e)?e.targetTouches[0].clientX:e.clientX}function B3(e){return jE(e)?e.targetTouches[0].clientY:e.clientY}var wot=e=>{Ol(e.remove)?e.parentNode&&e.parentNode.removeChild(e):e.remove()},Df=e=>$E(e)?Df(e.component):vot(e)?Ir({render(){return e}}):typeof e=="string"?e:Ge(Hs(e)),xot=e=>{if(typeof e=="string")return e;const t=io(e,"props")&&ef(e.props)?e.props:{},n=io(e,"listeners")&&ef(e.listeners)?e.listeners:{};return{component:Df(e),props:t,listeners:n}},_ot=()=>typeof window<"u",P5=class{constructor(){this.allHandlers={}}getHandlers(e){return this.allHandlers[e]||[]}on(e,t){const n=this.getHandlers(e);n.push(t),this.allHandlers[e]=n}off(e,t){const n=this.getHandlers(e);n.splice(n.indexOf(t)>>>0,1)}emit(e,t){this.getHandlers(e).forEach(s=>s(t))}},Sot=e=>["on","off","emit"].every(t=>io(e,t)&&$0(e[t])),Oi;(function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"})(Oi||(Oi={}));var _m;(function(e){e.TOP_LEFT="top-left",e.TOP_CENTER="top-center",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_CENTER="bottom-center",e.BOTTOM_RIGHT="bottom-right"})(_m||(_m={}));var Ri;(function(e){e.ADD="add",e.DISMISS="dismiss",e.UPDATE="update",e.CLEAR="clear",e.UPDATE_DEFAULTS="update_defaults"})(Ri||(Ri={}));var yr="Vue-Toastification",mr={type:{type:String,default:Oi.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},zE={type:mr.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},Ig={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:mr.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},my={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},UE={transition:{type:[Object,String],default:`${yr}__bounce`}},Cot={position:{type:String,default:_m.TOP_RIGHT},draggable:mr.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:mr.trueBoolean,pauseOnHover:mr.trueBoolean,closeOnClick:mr.trueBoolean,timeout:my.timeout,hideProgressBar:my.hideProgressBar,toastClassName:mr.classNames,bodyClassName:mr.classNames,icon:zE.customIcon,closeButton:Ig.component,closeButtonClassName:Ig.classNames,showCloseButtonOnHover:Ig.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new P5}},kot={id:{type:[String,Number],required:!0,default:0},type:mr.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},Aot={container:{type:[Object,Function],default:()=>document.body},newestOnTop:mr.trueBoolean,maxToasts:{type:Number,default:20},transition:UE.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:e=>e},filterToasts:{type:Function,default:e=>e},containerClassName:mr.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},Vo={CORE_TOAST:Cot,TOAST:kot,CONTAINER:Aot,PROGRESS_BAR:my,ICON:zE,TRANSITION:UE,CLOSE_BUTTON:Ig},qE=Ir({name:"VtProgressBar",props:Vo.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${yr}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function Pot(e,t){return at(),ft("div",{style:Wr(e.style),class:ve(e.cpClass)},null,6)}qE.render=Pot;var Eot=qE,HE=Ir({name:"VtCloseButton",props:Vo.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?Df(this.component):"button"},classes(){const e=[`${yr}__close-button`];return this.showOnHover&&e.push("show-on-hover"),e.concat(this.classNames)}}}),Iot=Vt(" × ");function Tot(e,t){return at(),cs(Ou(e.buttonComponent),Rm({"aria-label":e.ariaLabel,class:e.classes},e.$attrs),{default:an(()=>[Iot]),_:1},16,["aria-label","class"])}HE.render=Tot;var Not=HE,WE={},Dot={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Lot=d("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),Mot=[Lot];function Oot(e,t){return at(),ft("svg",Dot,Mot)}WE.render=Oot;var Rot=WE,GE={},Fot={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Bot=d("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),jot=[Bot];function $ot(e,t){return at(),ft("svg",Fot,jot)}GE.render=$ot;var j3=GE,KE={},Vot={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},zot=d("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Uot=[zot];function qot(e,t){return at(),ft("svg",Vot,Uot)}KE.render=qot;var Hot=KE,YE={},Wot={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},Got=d("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),Kot=[Got];function Yot(e,t){return at(),ft("svg",Wot,Kot)}YE.render=Yot;var Xot=YE,XE=Ir({name:"VtIcon",props:Vo.ICON,computed:{customIconChildren(){return io(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return V0(this.customIcon)?this.trimValue(this.customIcon):io(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return io(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:VE(this.customIcon)?Df(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[Oi.DEFAULT]:j3,[Oi.INFO]:j3,[Oi.SUCCESS]:Rot,[Oi.ERROR]:Xot,[Oi.WARNING]:Hot}[this.type]},iconClasses(){const e=[`${yr}__icon`];return this.hasCustomIcon?e.concat(this.customIconClass):e}},methods:{trimValue(e,t=""){return BE(e)?e.trim():t}}});function Qot(e,t){return at(),cs(Ou(e.component),{class:ve(e.iconClasses)},{default:an(()=>[Vt(lt(e.customIconChildren),1)]),_:1},8,["class"])}XE.render=Qot;var Jot=XE,QE=Ir({name:"VtToast",components:{ProgressBar:Eot,CloseButton:Not,Icon:Jot},inheritAttrs:!1,props:Object.assign({},Vo.CORE_TOAST,Vo.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const e=[`${yr}__toast`,`${yr}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&e.push("disable-transition"),this.rtl&&e.push(`${yr}__toast--rtl`),e},bodyClasses(){return[`${yr}__toast-${V0(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return F3(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:io,getVueComponentFromObj:Df,closeToast(){this.eventBus.emit(Ri.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const e=this.$el;e.addEventListener("touchstart",this.onDragStart,{passive:!0}),e.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const e=this.$el;e.removeEventListener("touchstart",this.onDragStart),e.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(e){this.beingDragged=!0,this.dragPos={x:$2(e),y:B3(e)},this.dragStart=$2(e),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(e){this.beingDragged&&(e.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:$2(e),y:B3(e)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,F3(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),Zot=["role"];function tat(e,t){const n=$o("Icon"),s=$o("CloseButton"),i=$o("ProgressBar");return at(),ft("div",{class:ve(e.classes),style:Wr(e.draggableStyle),onClick:t[0]||(t[0]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMouseenter:t[1]||(t[1]=(...r)=>e.hoverPause&&e.hoverPause(...r)),onMouseleave:t[2]||(t[2]=(...r)=>e.hoverPlay&&e.hoverPlay(...r))},[e.icon?(at(),cs(n,{key:0,"custom-icon":e.icon,type:e.type},null,8,["custom-icon","type"])):Ut("v-if",!0),d("div",{role:e.accessibility.toastRole||"alert",class:ve(e.bodyClasses)},[typeof e.content=="string"?(at(),ft(ye,{key:0},[Vt(lt(e.content),1)],2112)):(at(),cs(Ou(e.getVueComponentFromObj(e.content)),Rm({key:1,"toast-id":e.id},e.hasProp(e.content,"props")?e.content.props:{},zT(e.hasProp(e.content,"listeners")?e.content.listeners:{}),{onCloseToast:e.closeToast}),null,16,["toast-id","onCloseToast"]))],10,Zot),e.closeButton?(at(),cs(s,{key:1,component:e.closeButton,"class-names":e.closeButtonClassName,"show-on-hover":e.showCloseButtonOnHover,"aria-label":e.accessibility.closeButtonLabel,onClick:gr(e.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):Ut("v-if",!0),e.timeout?(at(),cs(i,{key:2,"is-running":e.isRunning,"hide-progress-bar":e.hideProgressBar,timeout:e.timeout,onCloseToast:e.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):Ut("v-if",!0)],38)}QE.render=tat;var eat=QE,JE=Ir({name:"VtTransition",props:Vo.TRANSITION,emits:["leave"],methods:{hasProp:io,leave(e){e instanceof HTMLElement&&(e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.width=getComputedStyle(e).width,e.style.position="absolute")}}});function nat(e,t){return at(),cs(JN,{tag:"div","enter-active-class":e.transition.enter?e.transition.enter:`${e.transition}-enter-active`,"move-class":e.transition.move?e.transition.move:`${e.transition}-move`,"leave-active-class":e.transition.leave?e.transition.leave:`${e.transition}-leave-active`,onLeave:e.leave},{default:an(()=>[VT(e.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}JE.render=nat;var sat=JE,ZE=Ir({name:"VueToastification",devtools:{hide:!0},components:{Toast:eat,VtTransition:sat},props:Object.assign({},Vo.CORE_TOAST,Vo.CONTAINER,Vo.TRANSITION),data(){return{count:0,positions:Object.values(_m),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const e=this.eventBus;e.on(Ri.ADD,this.addToast),e.on(Ri.CLEAR,this.clearToasts),e.on(Ri.DISMISS,this.dismissToast),e.on(Ri.UPDATE,this.updateToast),e.on(Ri.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(e){$0(e)&&(e=await e()),wot(this.$el),e.appendChild(this.$el)},setToast(e){Ol(e.id)||(this.toasts[e.id]=e)},addToast(e){e.content=xot(e.content);const t=Object.assign({},this.defaults,e.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[e.type],e),n=this.defaults.filterBeforeCreate(t,this.toastArray);n&&this.setToast(n)},dismissToast(e){const t=this.toasts[e];!Ol(t)&&!Ol(t.onClose)&&t.onClose(),delete this.toasts[e]},clearToasts(){Object.keys(this.toasts).forEach(e=>{this.dismissToast(e)})},getPositionToasts(e){const t=this.filteredToasts.filter(n=>n.position===e).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?t.reverse():t},updateDefaults(e){Ol(e.container)||this.setup(e.container),this.defaults=Object.assign({},this.defaults,e)},updateToast({id:e,options:t,create:n}){this.toasts[e]?(t.timeout&&t.timeout===this.toasts[e].timeout&&t.timeout++,this.setToast(Object.assign({},this.toasts[e],t))):n&&this.addToast(Object.assign({},{id:e},t))},getClasses(e){return[`${yr}__container`,e].concat(this.defaults.containerClassName)}}});function iat(e,t){const n=$o("Toast"),s=$o("VtTransition");return at(),ft("div",null,[(at(!0),ft(ye,null,Ke(e.positions,i=>(at(),ft("div",{key:i},[ze(s,{transition:e.defaults.transition,class:ve(e.getClasses(i))},{default:an(()=>[(at(!0),ft(ye,null,Ke(e.getPositionToasts(i),r=>(at(),cs(n,Rm({key:r.id},r),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}ZE.render=iat;var rat=ZE,$3=(e={},t=!0)=>{const n=e.eventBus=e.eventBus||new P5;t&&lf(()=>{const r=aC(rat,FE({},e)),o=r.mount(document.createElement("div")),a=e.onMounted;if(Ol(a)||a(o,r),e.shareAppContext){const l=e.shareAppContext;l===!0?console.warn(`[${yr}] App to share context with was not provided.`):(r._context.components=l._context.components,r._context.directives=l._context.directives,r._context.mixins=l._context.mixins,r._context.provides=l._context.provides,r.config.globalProperties=l.config.globalProperties)}});const s=(r,o)=>{const a=Object.assign({},{id:bot(),type:Oi.DEFAULT},o,{content:r});return n.emit(Ri.ADD,a),a.id};s.clear=()=>n.emit(Ri.CLEAR,void 0),s.updateDefaults=r=>{n.emit(Ri.UPDATE_DEFAULTS,r)},s.dismiss=r=>{n.emit(Ri.DISMISS,r)};function i(r,{content:o,options:a},l=!1){const c=Object.assign({},a,{content:o});n.emit(Ri.UPDATE,{id:r,options:c,create:l})}return s.update=i,s.success=(r,o)=>s(r,Object.assign({},o,{type:Oi.SUCCESS})),s.info=(r,o)=>s(r,Object.assign({},o,{type:Oi.INFO})),s.error=(r,o)=>s(r,Object.assign({},o,{type:Oi.ERROR})),s.warning=(r,o)=>s(r,Object.assign({},o,{type:Oi.WARNING})),s},oat=()=>{const e=()=>console.warn(`[${yr}] This plugin does not support SSR!`);return new Proxy(e,{get(){return e}})};function aat(e){return _ot()?Sot(e)?$3({eventBus:e},!1):$3(e,!0):oat()}var lat=Symbol("VueToastification"),cat=new P5,uat=(e,t)=>{(t==null?void 0:t.shareAppContext)===!0&&(t.shareAppContext=e);const n=aat(FE({eventBus:cat},t));e.provide(lat,n)},dat=uat;const E5=aC(k9),hat={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1};E5.use(hot);E5.use(dat,hat);E5.mount("#app");export{fn as _};
